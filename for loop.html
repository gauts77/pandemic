<!DOCTYPE html>
<!-- saved from url=(0069)https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/ -->
<html class="js no-flexbox history rgba hsla multiplebgs borderradius boxshadow textshadow opacity cssgradients csstransitions fontface generatedcontent localstorage sessionstorage no-applicationcache wf-franklingothicurwcond-i4-active wf-adobecaslonpro-n7-active wf-franklingothicurwcomp-i7-active wf-bodoniurw-n4-active wf-franklingothicurw-i7-active wf-bodoniurw-i4-active wf-franklingothicurw-n4-active wf-franklingothicurw-n5-active wf-franklingothicurw-i5-active wf-franklingothicurw-n9-active wf-franklingothicurw-i4-active wf-franklingothicextcompurw-n4-active wf-bodoniurw-i7-active wf-franklingothicurw-i9-active wf-franklingothicurwcomp-n4-active wf-franklingothicurwcond-n4-active wf-franklingothicextcompurw-n7-active wf-franklingothicurwcomp-n7-active wf-franklingothicurwcond-i7-active wf-franklingothicurwcomp-i4-active wf-franklingothicurw-n7-active wf-bodoniurw-i8-active wf-bodoniurw-n7-active wf-adobecaslonpro-n6-active wf-franklingothicurwcond-n7-active wf-active" lang="en" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
</style>
  
  <title>Stata Basics: foreach and forvalues | University of Virginia Library Research Data Services + Sciences</title>
  <meta name="description" content="Collections, services, branches, and contact information.">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="shortcut icon" href="https://data.library.virginia.edu/wp-content/themes/libweb-base/img/favicon.ico">
  <link rel="stylesheet" href="./for loop_files/1140.css">
	<link rel="stylesheet" href="./for loop_files/style.css">
	<!--[if lt IE 8]><link rel="stylesheet" href="/wp-content/themes/libweb-base/css/1140/ie.css"><![endif]-->
  <link rel="stylesheet" href="./for loop_files/bootstrap-custom.min.css">
  <link href="./for loop_files/font-awesome.min.css" rel="stylesheet">
  <link rel="alternate" type="application/rss+xml" title="Research Data Services + Sciences Feed" href="https://data.library.virginia.edu/feed/">
  <link rel="dns-prefetch" href="https://s.w.org/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.1.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./for loop_files/wp-emoji-release.min.js.download" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" href="./for loop_files/style.min.css">
<link rel="stylesheet" href="./for loop_files/announcer-styles.css">
<script type="text/javascript" src="./for loop_files/jquery-1.7.1.min.js.download"></script>
<script type="text/javascript" src="./for loop_files/announcer-js.js.download"></script>
<link rel="https://api.w.org/" href="https://data.library.virginia.edu/wp-json/">
<link rel="alternate" type="application/json+oembed" href="https://data.library.virginia.edu/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdata.library.virginia.edu%2Fstata-basics-foreach-and-forvalues%2F">
<link rel="alternate" type="text/xml+oembed" href="https://data.library.virginia.edu/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fdata.library.virginia.edu%2Fstata-basics-foreach-and-forvalues%2F&amp;format=xml">
	<link rel="canonical" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/">
    <link href="./for loop_files/include.css" rel="stylesheet" type="text/css">
  <link href="./for loop_files/css" rel="stylesheet" type="text/css">
  <script src="./for loop_files/libweb-base.js.download"></script>
  <script src="./for loop_files/modernizr-2.5.3-custom.min.js.download"></script>
  <script type="text/javascript" src="./for loop_files/MathJax.js.download">
  </script>

  <script src="./for loop_files/webcomponents-loader.js.download"></script><script src="./for loop_files/webcomponents-hi.js.download"></script>
  <link rel="import" href="https://www.library.virginia.edu/bower_components/uvalib-search-box/uvalib-search-box.html"><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer-element.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/element-mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20const%20userPolymer%20%3D%20window.Polymer%3B%0A%20%20%2F**%0A%20%20%20*%20%40namespace%20Polymer%0A%20%20%20*%20%40summary%20Polymer%20is%20a%20lightweight%20library%20built%20on%20top%20of%20the%20web%0A%20%20%20*%20%20%20standards-based%20Web%20Components%20API&#39;s%2C%20and%20makes%20it%20easy%20to%20build%20your%0A%20%20%20*%20%20%20own%20custom%20HTML%20elements.%0A%20%20%20*%20%40param%20%7B!PolymerInit%7D%20info%20Prototype%20for%20the%20custom%20element.%20It%20must%20contain%0A%20%20%20*%20%20%20an%20%60is%60%20property%20to%20specify%20the%20element%20name.%20Other%20properties%20populate%0A%20%20%20*%20%20%20the%20element%20prototype.%20The%20%60properties%60%2C%20%60observers%60%2C%20%60hostAttributes%60%2C%0A%20%20%20*%20%20%20and%20%60listeners%60%20properties%20are%20processed%20to%20create%20element%20features.%0A%20%20%20*%20%40return%20%7B!Object%7D%20Returns%20a%20custom%20element%20class%20for%20the%20given%20provided%0A%20%20%20*%20%20%20prototype%20%60info%60%20object.%20The%20name%20of%20the%20element%20if%20given%20by%20%60info.is%60.%0A%20%20%20*%2F%0A%0A%20%20window.Polymer%20%3D%20function%20(info)%20%7B%0A%20%20%20%20return%20window.Polymer._polymerFn(info)%3B%0A%20%20%7D%3B%20%2F%2F%20support%20user%20settings%20on%20the%20Polymer%20object%0A%0A%0A%20%20if%20(userPolymer)%20%7B%0A%20%20%20%20Object.assign(Polymer%2C%20userPolymer)%3B%0A%20%20%7D%20%2F%2F%20To%20be%20plugged%20by%20legacy%20implementation%20if%20loaded%0A%0A%20%20%2F*%20eslint-disable%20valid-jsdoc%20*%2F%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B!PolymerInit%7D%20info%20Prototype%20for%20the%20custom%20element.%20It%20must%20contain%0A%20%20%20*%20%20%20an%20%60is%60%20property%20to%20specify%20the%20element%20name.%20Other%20properties%20populate%0A%20%20%20*%20%20%20the%20element%20prototype.%20The%20%60properties%60%2C%20%60observers%60%2C%20%60hostAttributes%60%2C%0A%20%20%20*%20%20%20and%20%60listeners%60%20properties%20are%20processed%20to%20create%20element%20features.%0A%20%20%20*%20%40return%20%7B!Object%7D%20Returns%20a%20custom%20element%20class%20for%20the%20given%20provided%0A%20%20%20*%20%20%20prototype%20%60info%60%20object.%20The%20name%20of%20the%20element%20if%20given%20by%20%60info.is%60.%0A%20%20%20*%2F%0A%0A%0A%20%20window.Polymer._polymerFn%20%3D%20function%20(info)%20%7B%0A%20%20%20%20%2F%2F%20eslint-disable-line%20no-unused-vars%0A%20%20%20%20throw%20new%20Error(&#39;Load%20polymer.html%20to%20use%20the%20Polymer()%20function.&#39;)%3B%0A%20%20%7D%3B%0A%20%20%2F*%20eslint-enable%20*%2F%0A%0A%0A%20%20window.Polymer.version%20%3D%20&#39;2.8.0&#39;%3B%0A%20%20%2F*%20eslint-disable%20no-unused-vars%20*%2F%0A%0A%20%20%2F*%0A%20%20When%20using%20Closure%20Compiler%2C%20JSCompiler_renameProperty(property%2C%20object)%20is%20replaced%20by%20the%20munged%20name%20for%20object%5Bproperty%5D%0A%20%20We%20cannot%20alias%20this%20function%2C%20so%20we%20have%20to%20use%20a%20small%20shim%20that%20has%20the%20same%20behavior%20when%20not%20compiling.%0A%20%20*%2F%0A%0A%20%20window.JSCompiler_renameProperty%20%3D%20function%20(prop%2C%20obj)%20%7B%0A%20%20%20%20return%20prop%3B%0A%20%20%7D%3B%0A%20%20%2F*%20eslint-enable%20*%2F%0A%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fboot.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/settings.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/resolve-url.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20let%20CSS_URL_RX%20%3D%20%2F(url%5C()(%5B%5E)%5D*)(%5C))%2Fg%3B%0A%20%20let%20ABS_URL%20%3D%20%2F(%5E%5C%2F)%7C(%5E%23)%7C(%5E%5B%5Cw-%5Cd%5D*%3A)%2F%3B%0A%20%20let%20workingURL%3B%0A%20%20let%20resolveDoc%3B%0A%20%20%2F**%0A%20%20%20*%20Resolves%20the%20given%20URL%20against%20the%20provided%20%60baseUri&#39;.%0A%20%20%20*%20%0A%20%20%20*%20Note%20that%20this%20function%20performs%20no%20resolution%20for%20URLs%20that%20start%0A%20%20%20*%20with%20%60%2F%60%20(absolute%20URLs)%20or%20%60%23%60%20(hash%20identifiers).%20%20For%20general%20purpose%0A%20%20%20*%20URL%20resolution%2C%20use%20%60window.URL%60.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer.ResolveUrl%0A%20%20%20*%20%40param%20%7Bstring%7D%20url%20Input%20URL%20to%20resolve%0A%20%20%20*%20%40param%20%7B%3Fstring%3D%7D%20baseURI%20Base%20URI%20to%20resolve%20the%20URL%20against%0A%20%20%20*%20%40return%20%7Bstring%7D%20resolved%20URL%0A%20%20%20*%2F%0A%0A%20%20function%20resolveUrl(url%2C%20baseURI)%20%7B%0A%20%20%20%20if%20(url%20%26%26%20ABS_URL.test(url))%20%7B%0A%20%20%20%20%20%20return%20url%3B%0A%20%20%20%20%7D%20%2F%2F%20Lazy%20feature%20detection.%0A%0A%0A%20%20%20%20if%20(workingURL%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20workingURL%20%3D%20false%3B%0A%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20u%20%3D%20new%20URL(&#39;b&#39;%2C%20&#39;http%3A%2F%2Fa&#39;)%3B%0A%20%20%20%20%20%20%20%20u.pathname%20%3D%20&#39;c%2520d&#39;%3B%0A%20%20%20%20%20%20%20%20workingURL%20%3D%20u.href%20%3D%3D%3D%20&#39;http%3A%2F%2Fa%2Fc%2520d&#39;%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%2F%2F%20silently%20fail%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(!baseURI)%20%7B%0A%20%20%20%20%20%20baseURI%20%3D%20document.baseURI%20%7C%7C%20window.location.href%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(workingURL)%20%7B%0A%20%20%20%20%20%20return%20new%20URL(url%2C%20baseURI).href%3B%0A%20%20%20%20%7D%20%2F%2F%20Fallback%20to%20creating%20an%20anchor%20into%20a%20disconnected%20document.%0A%0A%0A%20%20%20%20if%20(!resolveDoc)%20%7B%0A%20%20%20%20%20%20resolveDoc%20%3D%20document.implementation.createHTMLDocument(&#39;temp&#39;)%3B%0A%20%20%20%20%20%20resolveDoc.base%20%3D%20resolveDoc.createElement(&#39;base&#39;)%3B%0A%20%20%20%20%20%20resolveDoc.head.appendChild(resolveDoc.base)%3B%0A%20%20%20%20%20%20resolveDoc.anchor%20%3D%20resolveDoc.createElement(&#39;a&#39;)%3B%0A%20%20%20%20%20%20resolveDoc.body.appendChild(resolveDoc.anchor)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resolveDoc.base.href%20%3D%20baseURI%3B%0A%20%20%20%20resolveDoc.anchor.href%20%3D%20url%3B%0A%20%20%20%20return%20resolveDoc.anchor.href%20%7C%7C%20url%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Resolves%20any%20relative%20URL&#39;s%20in%20the%20given%20CSS%20text%20against%20the%20provided%0A%20%20%20*%20%60ownerDocument%60&#39;s%20%60baseURI%60.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer.ResolveUrl%0A%20%20%20*%20%40param%20%7Bstring%7D%20cssText%20CSS%20text%20to%20process%0A%20%20%20*%20%40param%20%7Bstring%7D%20baseURI%20Base%20URI%20to%20resolve%20the%20URL%20against%0A%20%20%20*%20%40return%20%7Bstring%7D%20Processed%20CSS%20text%20with%20resolved%20URL&#39;s%0A%20%20%20*%2F%0A%0A%0A%20%20function%20resolveCss(cssText%2C%20baseURI)%20%7B%0A%20%20%20%20return%20cssText.replace(CSS_URL_RX%2C%20function%20(m%2C%20pre%2C%20url%2C%20post)%20%7B%0A%20%20%20%20%20%20return%20pre%20%2B%20&#39;%5C&#39;&#39;%20%2B%20resolveUrl(url.replace(%2F%5B%22&#39;%5D%2Fg%2C%20&#39;&#39;)%2C%20baseURI)%20%2B%20&#39;%5C&#39;&#39;%20%2B%20post%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Returns%20a%20path%20from%20a%20given%20%60url%60.%20The%20path%20includes%20the%20trailing%0A%20%20%20*%20%60%2F%60%20from%20the%20url.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer.ResolveUrl%0A%20%20%20*%20%40param%20%7Bstring%7D%20url%20Input%20URL%20to%20transform%0A%20%20%20*%20%40return%20%7Bstring%7D%20resolved%20path%0A%20%20%20*%2F%0A%0A%0A%20%20function%20pathFromUrl(url)%20%7B%0A%20%20%20%20return%20url.substring(0%2C%20url.lastIndexOf(&#39;%2F&#39;)%20%2B%201)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Module%20with%20utilities%20for%20resolving%20relative%20URL&#39;s.%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Module%20with%20utilities%20for%20resolving%20relative%20URL&#39;s.%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.ResolveUrl%20%3D%20%7B%0A%20%20%20%20resolveCss%3A%20resolveCss%2C%0A%20%20%20%20resolveUrl%3A%20resolveUrl%2C%0A%20%20%20%20pathFromUrl%3A%20pathFromUrl%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fresolve-url.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,%2F**%20%40suppress%20%7Bdeprecated%7D%20*%2F%0A(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Sets%20the%20global%2C%20legacy%20settings.%0A%20%20%20*%0A%20%20%20*%20%40deprecated%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%2F%0A%0A%20%20Polymer.Settings%20%3D%20Polymer.Settings%20%7C%7C%20%7B%7D%3B%0A%20%20Polymer.Settings.useShadow%20%3D%20!window.ShadyDOM%3B%0A%20%20Polymer.Settings.useNativeCSSProperties%20%3D%20Boolean(!window.ShadyCSS%20%7C%7C%20window.ShadyCSS.nativeCss)%3B%0A%20%20Polymer.Settings.useNativeCustomElements%20%3D%20!window.customElements.polyfillWrapFlushCallback%3B%0A%20%20%2F**%0A%20%20%20*%20Globally%20settable%20property%20that%20is%20automatically%20assigned%20to%0A%20%20%20*%20%60Polymer.ElementMixin%60%20instances%2C%20useful%20for%20binding%20in%20templates%20to%0A%20%20%20*%20make%20URL&#39;s%20relative%20to%20an%20application&#39;s%20root.%20%20Defaults%20to%20the%20main%0A%20%20%20*%20document%20URL%2C%20but%20can%20be%20overridden%20by%20users.%20%20It%20may%20be%20useful%20to%20set%0A%20%20%20*%20%60Polymer.rootPath%60%20to%20provide%20a%20stable%20application%20mount%20path%20when%0A%20%20%20*%20using%20client%20side%20routing.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%2F%0A%0A%20%20Polymer.rootPath%20%3D%20Polymer.rootPath%20%7C%7C%20Polymer.ResolveUrl.pathFromUrl(document.baseURI%20%7C%7C%20window.location.href)%3B%0A%20%20%2F**%0A%20%20%20*%20Sets%20the%20global%20rootPath%20property%20used%20by%20%60Polymer.ElementMixin%60%20and%0A%20%20%20*%20available%20via%20%60Polymer.rootPath%60.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40param%20%7Bstring%7D%20path%20The%20new%20root%20path%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.setRootPath%20%3D%20function%20(path)%20%7B%0A%20%20%20%20Polymer.rootPath%20%3D%20path%3B%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20A%20global%20callback%20used%20to%20sanitize%20any%20value%20before%20inserting%20it%20into%20the%20DOM.%20The%20callback%20signature%20is%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20Polymer%20%3D%20%7B%0A%20%20%20*%20%20%20%20%20%20%20sanitizeDOMValue%3A%20function(value%2C%20name%2C%20type%2C%20node)%20%7B%20...%20%7D%0A%20%20%20*%20%20%20%20%20%7D%0A%20%20%20*%0A%20%20%20*%20Where%3A%0A%20%20%20*%0A%20%20%20*%20%60value%60%20is%20the%20value%20to%20sanitize.%0A%20%20%20*%20%60name%60%20is%20the%20name%20of%20an%20attribute%20or%20property%20(for%20example%2C%20href).%0A%20%20%20*%20%60type%60%20indicates%20where%20the%20value%20is%20being%20inserted%3A%20one%20of%20property%2C%20attribute%2C%20or%20text.%0A%20%20%20*%20%60node%60%20is%20the%20node%20where%20the%20value%20is%20being%20inserted.%0A%20%20%20*%0A%20%20%20*%20%40type%20%7B(function(*%2Cstring%2Cstring%2CNode)%3A*)%7Cundefined%7D%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.sanitizeDOMValue%20%3D%20Polymer.sanitizeDOMValue%20%7C%7C%20null%3B%0A%20%20%2F**%0A%20%20%20*%20Sets%20the%20global%20sanitizeDOMValue%20available%20via%20%60Polymer.sanitizeDOMValue%60.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40param%20%7B(function(*%2Cstring%2Cstring%2CNode)%3A*)%7Cundefined%7D%20newSanitizeDOMValue%20the%20global%20sanitizeDOMValue%20callback%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.setSanitizeDOMValue%20%3D%20function%20(newSanitizeDOMValue)%20%7B%0A%20%20%20%20Polymer.sanitizeDOMValue%20%3D%20newSanitizeDOMValue%3B%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20Globally%20settable%20property%20to%20make%20Polymer%20Gestures%20use%20passive%20TouchEvent%20listeners%20when%20recognizing%20gestures.%0A%20%20%20*%20When%20set%20to%20%60true%60%2C%20gestures%20made%20from%20touch%20will%20not%20be%20able%20to%20prevent%20scrolling%2C%20allowing%20for%20smoother%0A%20%20%20*%20scrolling%20performance.%0A%20%20%20*%20Defaults%20to%20%60false%60%20for%20backwards%20compatibility.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.passiveTouchGestures%20%3D%20Polymer.passiveTouchGestures%20%7C%7C%20false%3B%0A%20%20%2F**%0A%20%20%20*%20Sets%20%60passiveTouchGestures%60%20globally%20for%20all%20elements%20using%20Polymer%20Gestures.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40param%20%7Bboolean%7D%20usePassive%20enable%20or%20disable%20passive%20touch%20gestures%20globally%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.setPassiveTouchGestures%20%3D%20function%20(usePassive)%20%7B%0A%20%20%20%20Polymer.passiveTouchGestures%20%3D%20usePassive%3B%0A%20%20%7D%3B%0A%0A%20%20Polymer.legacyOptimizations%20%3D%20Polymer.legacyOptimizations%20%7C%7C%20window.PolymerSettings%20%26%26%20window.PolymerSettings.legacyOptimizations%20%7C%7C%20false%3B%0A%20%20%2F**%0A%20%20%20*%20Sets%20%60legacyOptimizations%60%20globally%20for%20all%20elements.%20Enables%0A%20%20%20*%20optimizations%20when%20only%20legacy%20Polymer()%20style%20elements%20are%20used.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40param%20%7Bboolean%7D%20useLegacyOptimizations%20enable%20or%20disable%20legacy%20optimizations%20globally.%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.setLegacyOptimizations%20%3D%20function%20(useLegacyOptimizations)%20%7B%0A%20%20%20%20Polymer.legacyOptimizations%20%3D%20useLegacyOptimizations%3B%0A%20%20%7D%3B%0A%0A%20%20Polymer.cancelSyntheticClickEvents%20%3D%20typeof%20Polymer.cancelSyntheticClickEvents%20%3D%3D%3D%20&#39;boolean&#39;%20%3F%20Polymer.cancelSyntheticClickEvents%20%3A%20true%3B%0A%20%20%2F**%0A%20%20*%20Sets%20%60setCancelSyntheticEvents%60%20globally%20for%20all%20elements%20to%20cancel%20synthetic%20click%20events%0A%20%20*%20fired%20by%20older%20mobile%20browsers.%20Modern%20browsers%20no%20longer%20fire%20synthetic%20click%20events%2C%20and%0A%20%20*%20the%20cancellation%20behavior%20can%20interfere%20when%20programmatically%20clicking%20on%20elements.%0A%20%20*%0A%20%20*%20%40param%20%7Bboolean%7D%20useCancelSyntheticClickEvents%20enable%20or%20disable%20cancelling%20synthetic%0A%20%20*%20events%0A%20%20*%20%40return%20%7Bvoid%7D%0A%20%20*%2F%0A%0A%20%20Polymer.setCancelSyntheticClickEvents%20%3D%20function%20(useCancelSyntheticClickEvents)%20%7B%0A%20%20%20%20Polymer.cancelSyntheticClickEvents%20%3D%20useCancelSyntheticClickEvents%3B%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fsettings.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%20%2F%2F%20unique%20global%20id%20for%20deduping%20mixins.%0A%0A%20%20let%20dedupeId%20%3D%200%3B%0A%20%20%2F**%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40extends%20%7BFunction%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20function%20MixinFunction()%20%7B%7D%0A%20%20%2F**%20%40type%20%7B(WeakMap%20%7C%20undefined)%7D%20*%2F%0A%0A%0A%20%20MixinFunction.prototype.__mixinApplications%3B%0A%20%20%2F**%20%40type%20%7B(Object%20%7C%20undefined)%7D%20*%2F%0A%0A%20%20MixinFunction.prototype.__mixinSet%3B%0A%20%20%2F*%20eslint-disable%20valid-jsdoc%20*%2F%0A%0A%20%20%2F**%0A%20%20%20*%20Wraps%20an%20ES6%20class%20expression%20mixin%20such%20that%20the%20mixin%20is%20only%20applied%0A%20%20%20*%20if%20it%20has%20not%20already%20been%20applied%20its%20base%20argument.%20Also%20memoizes%20mixin%0A%20%20%20*%20applications.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40template%20T%0A%20%20%20*%20%40param%20%7BT%7D%20mixin%20ES6%20class%20expression%20mixin%20to%20wrap%0A%20%20%20*%20%40return%20%7BT%7D%0A%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.dedupingMixin%20%3D%20function%20(mixin)%20%7B%0A%20%20%20%20let%20mixinApplications%20%3D%0A%20%20%20%20%2F**%20%40type%20%7B!MixinFunction%7D%20*%2F%0A%20%20%20%20mixin.__mixinApplications%3B%0A%0A%20%20%20%20if%20(!mixinApplications)%20%7B%0A%20%20%20%20%20%20mixinApplications%20%3D%20new%20WeakMap()%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B!MixinFunction%7D%20*%2F%0A%0A%20%20%20%20%20%20mixin.__mixinApplications%20%3D%20mixinApplications%3B%0A%20%20%20%20%7D%20%2F%2F%20maintain%20a%20unique%20id%20for%20each%20mixin%0A%0A%0A%20%20%20%20let%20mixinDedupeId%20%3D%20dedupeId%2B%2B%3B%0A%0A%20%20%20%20function%20dedupingMixin(base)%20%7B%0A%20%20%20%20%20%20let%20baseSet%20%3D%0A%20%20%20%20%20%20%2F**%20%40type%20%7B!MixinFunction%7D%20*%2F%0A%20%20%20%20%20%20base.__mixinSet%3B%0A%0A%20%20%20%20%20%20if%20(baseSet%20%26%26%20baseSet%5BmixinDedupeId%5D)%20%7B%0A%20%20%20%20%20%20%20%20return%20base%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20map%20%3D%20mixinApplications%3B%0A%20%20%20%20%20%20let%20extended%20%3D%20map.get(base)%3B%0A%0A%20%20%20%20%20%20if%20(!extended)%20%7B%0A%20%20%20%20%20%20%20%20extended%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Function%7D%20*%2F%0A%20%20%20%20%20%20%20%20mixin(base)%3B%0A%20%20%20%20%20%20%20%20map.set(base%2C%20extended)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20copy%20inherited%20mixin%20set%20from%20the%20extended%20class%2C%20or%20the%20base%20class%0A%20%20%20%20%20%20%2F%2F%20NOTE%3A%20we%20avoid%20use%20of%20Set%20here%20because%20some%20browser%20(IE11)%0A%20%20%20%20%20%20%2F%2F%20cannot%20extend%20a%20base%20Set%20via%20the%20constructor.%0A%0A%0A%20%20%20%20%20%20let%20mixinSet%20%3D%20Object.create(%0A%20%20%20%20%20%20%2F**%20%40type%20%7B!MixinFunction%7D%20*%2F%0A%20%20%20%20%20%20extended.__mixinSet%20%7C%7C%20baseSet%20%7C%7C%20null)%3B%0A%20%20%20%20%20%20mixinSet%5BmixinDedupeId%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B!MixinFunction%7D%20*%2F%0A%0A%20%20%20%20%20%20extended.__mixinSet%20%3D%20mixinSet%3B%0A%20%20%20%20%20%20return%20extended%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%2F**%20%40type%20%7BT%7D%20*%2F%0A%20%20%20%20%20%20dedupingMixin%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%20%20%2F*%20eslint-enable%20valid-jsdoc%20*%2F%0A%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fmixin.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/style-gather.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/resolve-url.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20const%20MODULE_STYLE_LINK_SELECTOR%20%3D%20&#39;link%5Brel%3Dimport%5D%5Btype~%3Dcss%5D&#39;%3B%0A%20%20const%20INCLUDE_ATTR%20%3D%20&#39;include&#39;%3B%0A%20%20const%20SHADY_UNSCOPED_ATTR%20%3D%20&#39;shady-unscoped&#39;%3B%0A%0A%20%20function%20importModule(moduleId)%20%7B%0A%20%20%20%20const%0A%20%20%20%20%2F**%20Polymer.DomModule%20*%2F%0A%20%20%20%20PolymerDomModule%20%3D%20customElements.get(&#39;dom-module&#39;)%3B%0A%0A%20%20%20%20if%20(!PolymerDomModule)%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20PolymerDomModule.import(moduleId)%3B%0A%20%20%7D%0A%0A%20%20function%20styleForImport(importDoc)%20%7B%0A%20%20%20%20%2F%2F%20NOTE%3A%20polyfill%20affordance.%0A%20%20%20%20%2F%2F%20under%20the%20HTMLImports%20polyfill%2C%20there%20will%20be%20no%20&#39;body&#39;%2C%0A%20%20%20%20%2F%2F%20but%20the%20import%20pseudo-doc%20can%20be%20used%20directly.%0A%20%20%20%20let%20container%20%3D%20importDoc.body%20%3F%20importDoc.body%20%3A%20importDoc%3B%0A%20%20%20%20const%20importCss%20%3D%20Polymer.ResolveUrl.resolveCss(container.textContent%2C%20importDoc.baseURI)%3B%0A%20%20%20%20const%20style%20%3D%20document.createElement(&#39;style&#39;)%3B%0A%20%20%20%20style.textContent%20%3D%20importCss%3B%0A%20%20%20%20return%20style%3B%0A%20%20%7D%0A%20%20%2F**%20%40typedef%20%7B%7Bassetpath%3A%20string%7D%7D%20*%2F%0A%0A%0A%20%20let%20templateWithAssetPath%3B%20%2F%2F%20eslint-disable-line%20no-unused-vars%0A%0A%20%20%2F**%0A%20%20%20*%20Module%20with%20utilities%20for%20collection%20CSS%20text%20from%20%60%3Ctemplates%3E%60%2C%20external%0A%20%20%20*%20stylesheets%2C%20and%20%60dom-module%60s.%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Module%20with%20utilities%20for%20collection%20CSS%20text%20from%20various%20sources.%0A%20%20%20*%2F%0A%0A%20%20const%20StyleGather%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20a%20list%20of%20%3Cstyle%3E%20elements%20in%20a%20space-separated%20list%20of%20%60dom-module%60s.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20moduleIds%20List%20of%20dom-module%20id&#39;s%20within%20which%20to%0A%20%20%20%20%20*%20search%20for%20css.%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!HTMLStyleElement%3E%7D%20Array%20of%20contained%20%3Cstyle%3E%20elements%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20stylesFromModules(moduleIds)%20%7B%0A%20%20%20%20%20%20const%20modules%20%3D%20moduleIds.trim().split(%2F%5Cs%2B%2F)%3B%0A%20%20%20%20%20%20const%20styles%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20modules.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20styles.push(...this.stylesFromModule(modules%5Bi%5D))%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20styles%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20a%20list%20of%20%3Cstyle%3E%20elements%20in%20a%20given%20%60dom-module%60.%0A%20%20%20%20%20*%20Styles%20in%20a%20%60dom-module%60%20can%20come%20either%20from%20%60%3Cstyle%3E%60s%20within%20the%0A%20%20%20%20%20*%20first%20%60%3Ctemplate%3E%60%2C%20or%20else%20from%20one%20or%20more%0A%20%20%20%20%20*%20%60%3Clink%20rel%3D%22import%22%20type%3D%22css%22%3E%60%20links%20outside%20the%20template.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20moduleId%20dom-module%20id%20to%20gather%20styles%20from%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!HTMLStyleElement%3E%7D%20Array%20of%20contained%20styles.%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20stylesFromModule(moduleId)%20%7B%0A%20%20%20%20%20%20const%20m%20%3D%20importModule(moduleId)%3B%0A%0A%20%20%20%20%20%20if%20(!m)%20%7B%0A%20%20%20%20%20%20%20%20console.warn(&#39;Could%20not%20find%20style%20data%20in%20module%20named&#39;%2C%20moduleId)%3B%0A%20%20%20%20%20%20%20%20return%20%5B%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(m._styles%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20const%20styles%20%3D%20%5B%5D%3B%20%2F%2F%20module%20imports%3A%20%3Clink%20rel%3D%22import%22%20type%3D%22css%22%3E%0A%0A%20%20%20%20%20%20%20%20styles.push(...this._stylesFromModuleImports(m))%3B%20%2F%2F%20include%20css%20from%20the%20first%20template%20in%20the%20module%0A%0A%20%20%20%20%20%20%20%20const%20template%20%3D%20m.querySelector(&#39;template&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20styles.push(...this.stylesFromTemplate(template%2C%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BtemplateWithAssetPath%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20m.assetpath))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20m._styles%20%3D%20styles%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20m._styles%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20%60%3Cstyle%3E%60%20elements%20within%20a%20given%20template.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20to%20gather%20styles%20from%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20baseURI%20baseURI%20for%20style%20content%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!HTMLStyleElement%3E%7D%20Array%20of%20styles%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20stylesFromTemplate(template%2C%20baseURI)%20%7B%0A%20%20%20%20%20%20if%20(!template._styles)%20%7B%0A%20%20%20%20%20%20%20%20const%20styles%20%3D%20%5B%5D%3B%20%2F%2F%20if%20element%20is%20a%20template%2C%20get%20content%20from%20its%20.content%0A%0A%20%20%20%20%20%20%20%20const%20e%24%20%3D%20template.content.querySelectorAll(&#39;style&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20e%24.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20e%20%3D%20e%24%5Bi%5D%3B%20%2F%2F%20support%20style%20sharing%20by%20allowing%20styles%20to%20%22include%22%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20other%20dom-modules%20that%20contain%20styling%0A%0A%20%20%20%20%20%20%20%20%20%20let%20include%20%3D%20e.getAttribute(INCLUDE_ATTR)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(include)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20styles.push(...this.stylesFromModules(include).filter(function%20(item%2C%20index%2C%20self)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20self.indexOf(item)%20%3D%3D%3D%20index%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(baseURI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20e.textContent%20%3D%20Polymer.ResolveUrl.resolveCss(e.textContent%2C%20baseURI)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20styles.push(e)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20template._styles%20%3D%20styles%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20template._styles%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20a%20list%20of%20%3Cstyle%3E%20elements%20%20from%20stylesheets%20loaded%20via%20%60%3Clink%20rel%3D%22import%22%20type%3D%22css%22%3E%60%20links%20within%20the%20specified%20%60dom-module%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20moduleId%20Id%20of%20%60dom-module%60%20to%20gather%20CSS%20from%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!HTMLStyleElement%3E%7D%20Array%20of%20contained%20styles.%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20stylesFromModuleImports(moduleId)%20%7B%0A%20%20%20%20%20%20let%20m%20%3D%20importModule(moduleId)%3B%0A%20%20%20%20%20%20return%20m%20%3F%20this._stylesFromModuleImports(m)%20%3A%20%5B%5D%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%20%40param%20%7B!HTMLElement%7D%20module%20dom-module%20element%20that%20could%20contain%20%60%3Clink%20rel%3D%22import%22%20type%3D%22css%22%3E%60%20styles%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!HTMLStyleElement%3E%7D%20Array%20of%20contained%20styles%0A%20%20%20%20%20*%2F%0A%20%20%20%20_stylesFromModuleImports(module)%20%7B%0A%20%20%20%20%20%20const%20styles%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20const%20p%24%20%3D%20module.querySelectorAll(MODULE_STYLE_LINK_SELECTOR)%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20p%24.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20let%20p%20%3D%20p%24%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(p.import)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20importDoc%20%3D%20p.import%3B%0A%20%20%20%20%20%20%20%20%20%20const%20unscoped%20%3D%20p.hasAttribute(SHADY_UNSCOPED_ATTR)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(unscoped%20%26%26%20!importDoc._unscopedStyle)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20style%20%3D%20styleForImport(importDoc)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20style.setAttribute(SHADY_UNSCOPED_ATTR%2C%20&#39;&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20importDoc._unscopedStyle%20%3D%20style%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(!importDoc._style)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20importDoc._style%20%3D%20styleForImport(importDoc)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20styles.push(unscoped%20%3F%20importDoc._unscopedStyle%20%3A%20importDoc._style)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20styles%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Returns%20CSS%20text%20of%20styles%20in%20a%20space-separated%20list%20of%20%60dom-module%60s.%0A%20%20%20%20%20*%20Note%3A%20This%20method%20is%20deprecated%2C%20use%20%60stylesFromModules%60%20instead.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40deprecated%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20moduleIds%20List%20of%20dom-module%20id&#39;s%20within%20which%20to%0A%20%20%20%20%20*%20search%20for%20css.%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Concatenated%20CSS%20content%20from%20specified%20%60dom-module%60s%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20cssFromModules(moduleIds)%20%7B%0A%20%20%20%20%20%20let%20modules%20%3D%20moduleIds.trim().split(%2F%5Cs%2B%2F)%3B%0A%20%20%20%20%20%20let%20cssText%20%3D%20&#39;&#39;%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20modules.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20cssText%20%2B%3D%20this.cssFromModule(modules%5Bi%5D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20cssText%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20CSS%20text%20of%20styles%20in%20a%20given%20%60dom-module%60.%20%20CSS%20in%20a%20%60dom-module%60%0A%20%20%20%20%20*%20can%20come%20either%20from%20%60%3Cstyle%3E%60s%20within%20the%20first%20%60%3Ctemplate%3E%60%2C%20or%20else%0A%20%20%20%20%20*%20from%20one%20or%20more%20%60%3Clink%20rel%3D%22import%22%20type%3D%22css%22%3E%60%20links%20outside%20the%0A%20%20%20%20%20*%20template.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Any%20%60%3Cstyles%3E%60%20processed%20are%20removed%20from%20their%20original%20location.%0A%20%20%20%20%20*%20Note%3A%20This%20method%20is%20deprecated%2C%20use%20%60styleFromModule%60%20instead.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40deprecated%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20moduleId%20dom-module%20id%20to%20gather%20styles%20from%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Concatenated%20CSS%20content%20from%20specified%20%60dom-module%60%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20cssFromModule(moduleId)%20%7B%0A%20%20%20%20%20%20let%20m%20%3D%20importModule(moduleId)%3B%0A%0A%20%20%20%20%20%20if%20(m%20%26%26%20m._cssText%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20module%20imports%3A%20%3Clink%20rel%3D%22import%22%20type%3D%22css%22%3E%0A%20%20%20%20%20%20%20%20let%20cssText%20%3D%20this._cssFromModuleImports(m)%3B%20%2F%2F%20include%20css%20from%20the%20first%20template%20in%20the%20module%0A%0A%0A%20%20%20%20%20%20%20%20let%20t%20%3D%20m.querySelector(&#39;template&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(t)%20%7B%0A%20%20%20%20%20%20%20%20%20%20cssText%20%2B%3D%20this.cssFromTemplate(t%2C%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BtemplateWithAssetPath%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20m.assetpath)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20m._cssText%20%3D%20cssText%20%7C%7C%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!m)%20%7B%0A%20%20%20%20%20%20%20%20console.warn(&#39;Could%20not%20find%20style%20data%20in%20module%20named&#39;%2C%20moduleId)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20m%20%26%26%20m._cssText%20%7C%7C%20&#39;&#39;%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20CSS%20text%20of%20%60%3Cstyles%3E%60%20within%20a%20given%20template.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Any%20%60%3Cstyles%3E%60%20processed%20are%20removed%20from%20their%20original%20location.%0A%20%20%20%20%20*%20Note%3A%20This%20method%20is%20deprecated%2C%20use%20%60styleFromTemplate%60%20instead.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40deprecated%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20to%20gather%20styles%20from%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20baseURI%20Base%20URI%20to%20resolve%20the%20URL%20against%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Concatenated%20CSS%20content%20from%20specified%20template%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20cssFromTemplate(template%2C%20baseURI)%20%7B%0A%20%20%20%20%20%20let%20cssText%20%3D%20&#39;&#39;%3B%0A%20%20%20%20%20%20const%20e%24%20%3D%20this.stylesFromTemplate(template%2C%20baseURI)%3B%20%2F%2F%20if%20element%20is%20a%20template%2C%20get%20content%20from%20its%20.content%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20e%24.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20let%20e%20%3D%20e%24%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(e.parentNode)%20%7B%0A%20%20%20%20%20%20%20%20%20%20e.parentNode.removeChild(e)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20cssText%20%2B%3D%20e.textContent%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20cssText%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20CSS%20text%20from%20stylesheets%20loaded%20via%20%60%3Clink%20rel%3D%22import%22%20type%3D%22css%22%3E%60%0A%20%20%20%20%20*%20links%20within%20the%20specified%20%60dom-module%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Note%3A%20This%20method%20is%20deprecated%2C%20use%20%60stylesFromModuleImports%60%20instead.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40deprecated%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20moduleId%20Id%20of%20%60dom-module%60%20to%20gather%20CSS%20from%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Concatenated%20CSS%20content%20from%20links%20in%20specified%20%60dom-module%60%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20cssFromModuleImports(moduleId)%20%7B%0A%20%20%20%20%20%20let%20m%20%3D%20importModule(moduleId)%3B%0A%20%20%20%20%20%20return%20m%20%3F%20this._cssFromModuleImports(m)%20%3A%20&#39;&#39;%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40deprecated%0A%20%20%20%20%20*%20%40memberof%20Polymer.StyleGather%0A%20%20%20%20%20*%20%40this%20%7BStyleGather%7D%0A%20%20%20%20%20*%20%40param%20%7B!HTMLElement%7D%20module%20dom-module%20element%20that%20could%20contain%20%60%3Clink%20rel%3D%22import%22%20type%3D%22css%22%3E%60%20styles%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Concatenated%20CSS%20content%20from%20links%20in%20the%20dom-module%0A%20%20%20%20%20*%2F%0A%20%20%20%20_cssFromModuleImports(module)%20%7B%0A%20%20%20%20%20%20let%20cssText%20%3D%20&#39;&#39;%3B%0A%0A%20%20%20%20%20%20let%20styles%20%3D%20this._stylesFromModuleImports(module)%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20styles.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20cssText%20%2B%3D%20styles%5Bi%5D.textContent%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20cssText%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%3B%0A%20%20Polymer.StyleGather%20%3D%20StyleGather%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fstyle-gather.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/resolve-url.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/elements/dom-module.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/resolve-url.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20let%20modules%20%3D%20%7B%7D%3B%0A%20%20let%20lcModules%20%3D%20%7B%7D%3B%0A%0A%20%20function%20setModule(id%2C%20module)%20%7B%0A%20%20%20%20%2F%2F%20store%20id%20separate%20from%20lowercased%20id%20so%20that%0A%20%20%20%20%2F%2F%20in%20all%20cases%20mixedCase%20id%20will%20stored%20distinctly%0A%20%20%20%20%2F%2F%20and%20lowercase%20version%20is%20a%20fallback%0A%20%20%20%20modules%5Bid%5D%20%3D%20lcModules%5Bid.toLowerCase()%5D%20%3D%20module%3B%0A%20%20%7D%0A%0A%20%20function%20findModule(id)%20%7B%0A%20%20%20%20return%20modules%5Bid%5D%20%7C%7C%20lcModules%5Bid.toLowerCase()%5D%3B%0A%20%20%7D%0A%0A%20%20function%20styleOutsideTemplateCheck(inst)%20%7B%0A%20%20%20%20if%20(inst.querySelector(&#39;style&#39;))%20%7B%0A%20%20%20%20%20%20console.warn(&#39;dom-module%20%25s%20has%20style%20outside%20template&#39;%2C%20inst.id)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20The%20%60dom-module%60%20element%20registers%20the%20dom%20it%20contains%20to%20the%20name%20given%0A%20%20%20*%20by%20the%20module&#39;s%20id%20attribute.%20It%20provides%20a%20unified%20database%20of%20dom%0A%20%20%20*%20accessible%20via%20its%20static%20%60import%60%20API.%0A%20%20%20*%0A%20%20%20*%20A%20key%20use%20case%20of%20%60dom-module%60%20is%20for%20providing%20custom%20element%20%60%3Ctemplate%3E%60s%0A%20%20%20*%20via%20HTML%20imports%20that%20are%20parsed%20by%20the%20native%20HTML%20parser%2C%20that%20can%20be%0A%20%20%20*%20relocated%20during%20a%20bundling%20pass%20and%20still%20looked%20up%20by%20%60id%60.%0A%20%20%20*%0A%20%20%20*%20Example%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%3Cdom-module%20id%3D%22foo%22%3E%0A%20%20%20*%20%20%20%20%20%20%20%3Cimg%20src%3D%22stuff.png%22%3E%0A%20%20%20*%20%20%20%20%20%3C%2Fdom-module%3E%0A%20%20%20*%0A%20%20%20*%20Then%20in%20code%20in%20some%20other%20location%20that%20cannot%20access%20the%20dom-module%20above%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20let%20img%20%3D%20customElements.get(&#39;dom-module&#39;).import(&#39;foo&#39;%2C%20&#39;img&#39;)%3B%0A%20%20%20*%0A%20%20%20*%20%40customElement%0A%20%20%20*%20%40extends%20HTMLElement%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Custom%20element%20that%20provides%20a%20registry%20of%20relocatable%20DOM%20content%0A%20%20%20*%20%20%20by%20%60id%60%20that%20is%20agnostic%20to%20bundling.%0A%20%20%20*%20%40unrestricted%0A%20%20%20*%2F%0A%0A%0A%20%20class%20DomModule%20extends%20HTMLElement%20%7B%0A%20%20%20%20static%20get%20observedAttributes()%20%7B%0A%20%20%20%20%20%20return%20%5B&#39;id&#39;%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Retrieves%20the%20element%20specified%20by%20the%20css%20%60selector%60%20in%20the%20module%0A%20%20%20%20%20*%20registered%20by%20%60id%60.%20For%20example%2C%20this.import(&#39;foo&#39;%2C%20&#39;img&#39;)%3B%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20id%20The%20id%20of%20the%20dom-module%20in%20which%20to%20search.%0A%20%20%20%20%20*%20%40param%20%7Bstring%3D%7D%20selector%20The%20css%20selector%20by%20which%20to%20find%20the%20element.%0A%20%20%20%20%20*%20%40return%20%7BElement%7D%20Returns%20the%20element%20which%20matches%20%60selector%60%20in%20the%0A%20%20%20%20%20*%20module%20registered%20at%20the%20specified%20%60id%60.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20static%20import(id%2C%20selector)%20%7B%0A%20%20%20%20%20%20if%20(id)%20%7B%0A%20%20%20%20%20%20%20%20let%20m%20%3D%20findModule(id)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(m%20%26%26%20selector)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20m.querySelector(selector)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20m%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F*%20eslint-disable%20no-unused-vars%20*%2F%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Name%20of%20attribute.%0A%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20old%20Old%20value%20of%20attribute.%0A%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20value%20Current%20value%20of%20attribute.%0A%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20namespace%20Attribute%20namespace.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20attributeChangedCallback(name%2C%20old%2C%20value%2C%20namespace)%20%7B%0A%20%20%20%20%20%20if%20(old%20!%3D%3D%20value)%20%7B%0A%20%20%20%20%20%20%20%20this.register()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F*%20eslint-enable%20no-unused-args%20*%2F%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20The%20absolute%20URL%20of%20the%20original%20location%20of%20this%20%60dom-module%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20This%20value%20will%20differ%20from%20this%20element&#39;s%20%60ownerDocument%60%20in%20the%0A%20%20%20%20%20*%20following%20ways%3A%0A%20%20%20%20%20*%20-%20Takes%20into%20account%20any%20%60assetpath%60%20attribute%20added%20during%20bundling%0A%20%20%20%20%20*%20%20%20to%20indicate%20the%20original%20location%20relative%20to%20the%20bundled%20location%0A%20%20%20%20%20*%20-%20Uses%20the%20HTMLImports%20polyfill&#39;s%20%60importForElement%60%20API%20to%20ensure%0A%20%20%20%20%20*%20%20%20the%20path%20is%20relative%20to%20the%20import%20document&#39;s%20location%20since%0A%20%20%20%20%20*%20%20%20%60ownerDocument%60%20is%20not%20currently%20polyfilled%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20get%20assetpath()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Don&#39;t%20override%20existing%20assetpath.%0A%20%20%20%20%20%20if%20(!this.__assetpath)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20note%3A%20assetpath%20set%20via%20an%20attribute%20must%20be%20relative%20to%20this%0A%20%20%20%20%20%20%20%20%2F%2F%20element&#39;s%20location%3B%20accomodate%20polyfilled%20HTMLImports%0A%20%20%20%20%20%20%20%20const%20owner%20%3D%20window.HTMLImports%20%26%26%20HTMLImports.importForElement%20%3F%20HTMLImports.importForElement(this)%20%7C%7C%20document%20%3A%20this.ownerDocument%3B%0A%20%20%20%20%20%20%20%20const%20url%20%3D%20Polymer.ResolveUrl.resolveUrl(this.getAttribute(&#39;assetpath&#39;)%20%7C%7C%20&#39;&#39;%2C%20owner.baseURI)%3B%0A%20%20%20%20%20%20%20%20this.__assetpath%20%3D%20Polymer.ResolveUrl.pathFromUrl(url)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20this.__assetpath%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Registers%20the%20dom-module%20at%20a%20given%20id.%20This%20method%20should%20only%20be%20called%0A%20%20%20%20%20*%20when%20a%20dom-module%20is%20imperatively%20created.%20For%0A%20%20%20%20%20*%20example%2C%20%60document.createElement(&#39;dom-module&#39;).register(&#39;foo&#39;)%60.%0A%20%20%20%20%20*%20%40param%20%7Bstring%3D%7D%20id%20The%20id%20at%20which%20to%20register%20the%20dom-module.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20register(id)%20%7B%0A%20%20%20%20%20%20id%20%3D%20id%20%7C%7C%20this.id%3B%0A%0A%20%20%20%20%20%20if%20(id)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Under%20strictTemplatePolicy%2C%20reject%20and%20null%20out%20any%20re-registered%0A%20%20%20%20%20%20%20%20%2F%2F%20dom-module%20since%20it%20is%20ambiguous%20whether%20first-in%20or%20last-in%20is%20trusted%20%0A%20%20%20%20%20%20%20%20if%20(Polymer.strictTemplatePolicy%20%26%26%20findModule(id)%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%20%20setModule(id%2C%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60strictTemplatePolicy%3A%20dom-module%20%24%7Bid%7D%20re-registered%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this.id%20%3D%20id%3B%0A%20%20%20%20%20%20%20%20setModule(id%2C%20this)%3B%0A%20%20%20%20%20%20%20%20styleOutsideTemplateCheck(this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%0A%20%20DomModule.prototype%5B&#39;modules&#39;%5D%20%3D%20modules%3B%0A%20%20customElements.define(&#39;dom-module&#39;%2C%20DomModule)%3B%0A%20%20%2F**%20%40const%20*%2F%0A%0A%20%20Polymer.DomModule%20%3D%20DomModule%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Felements%2Fdom-module.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/property-effects.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/path.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Module%20with%20utilities%20for%20manipulating%20structured%20data%20path%20strings.%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Module%20with%20utilities%20for%20manipulating%20structured%20data%20path%20strings.%0A%20%20%20*%2F%0A%0A%20%20const%20Path%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20true%20if%20the%20given%20string%20is%20a%20structured%20data%20path%20(has%20dots).%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%20Polymer.Path.isPath(&#39;foo.bar.baz&#39;)%20%2F%2F%20true%0A%20%20%20%20%20*%20Polymer.Path.isPath(&#39;foo&#39;)%20%20%20%20%20%20%20%20%20%2F%2F%20false%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20string%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20the%20string%20contained%20one%20or%20more%20dots%0A%20%20%20%20%20*%2F%0A%20%20%20%20isPath%3A%20function%20(path)%20%7B%0A%20%20%20%20%20%20return%20path.indexOf(&#39;.&#39;)%20%3E%3D%200%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20root%20property%20name%20for%20the%20given%20path.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%20Polymer.Path.root(&#39;foo.bar.baz&#39;)%20%2F%2F%20&#39;foo&#39;%0A%20%20%20%20%20*%20Polymer.Path.root(&#39;foo&#39;)%20%20%20%20%20%20%20%20%20%2F%2F%20&#39;foo&#39;%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20string%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Root%20property%20name%0A%20%20%20%20%20*%2F%0A%20%20%20%20root%3A%20function%20(path)%20%7B%0A%20%20%20%20%20%20let%20dotIndex%20%3D%20path.indexOf(&#39;.&#39;)%3B%0A%0A%20%20%20%20%20%20if%20(dotIndex%20%3D%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20return%20path%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20path.slice(0%2C%20dotIndex)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Given%20%60base%60%20is%20%60foo.bar%60%2C%20%60foo%60%20is%20an%20ancestor%2C%20%60foo.bar%60%20is%20not%0A%20%20%20%20%20*%20Returns%20true%20if%20the%20given%20path%20is%20an%20ancestor%20of%20the%20base%20path.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%20Polymer.Path.isAncestor(&#39;foo.bar&#39;%2C%20&#39;foo&#39;)%20%20%20%20%20%20%20%20%20%2F%2F%20true%0A%20%20%20%20%20*%20Polymer.Path.isAncestor(&#39;foo.bar&#39;%2C%20&#39;foo.bar&#39;)%20%20%20%20%20%2F%2F%20false%0A%20%20%20%20%20*%20Polymer.Path.isAncestor(&#39;foo.bar&#39;%2C%20&#39;foo.bar.baz&#39;)%20%2F%2F%20false%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20base%20Path%20string%20to%20test%20against.%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20string%20to%20test.%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20%60path%60%20is%20an%20ancestor%20of%20%60base%60.%0A%20%20%20%20%20*%2F%0A%20%20%20%20isAncestor%3A%20function%20(base%2C%20path)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20base.startsWith(path%20%2B%20&#39;.&#39;)%3B%0A%20%20%20%20%20%20return%20base.indexOf(path%20%2B%20&#39;.&#39;)%20%3D%3D%3D%200%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Given%20%60base%60%20is%20%60foo.bar%60%2C%20%60foo.bar.baz%60%20is%20an%20descendant%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%20Polymer.Path.isDescendant(&#39;foo.bar&#39;%2C%20&#39;foo.bar.baz&#39;)%20%2F%2F%20true%0A%20%20%20%20%20*%20Polymer.Path.isDescendant(&#39;foo.bar&#39;%2C%20&#39;foo.bar&#39;)%20%20%20%20%20%2F%2F%20false%0A%20%20%20%20%20*%20Polymer.Path.isDescendant(&#39;foo.bar&#39;%2C%20&#39;foo&#39;)%20%20%20%20%20%20%20%20%20%2F%2F%20false%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20base%20Path%20string%20to%20test%20against.%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20string%20to%20test.%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20%60path%60%20is%20a%20descendant%20of%20%60base%60.%0A%20%20%20%20%20*%2F%0A%20%20%20%20isDescendant%3A%20function%20(base%2C%20path)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20path.startsWith(base%20%2B%20&#39;.&#39;)%3B%0A%20%20%20%20%20%20return%20path.indexOf(base%20%2B%20&#39;.&#39;)%20%3D%3D%3D%200%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Replaces%20a%20previous%20base%20path%20with%20a%20new%20base%20path%2C%20preserving%20the%0A%20%20%20%20%20*%20remainder%20of%20the%20path.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20User%20must%20ensure%20%60path%60%20has%20a%20prefix%20of%20%60base%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%20Polymer.Path.translate(&#39;foo.bar&#39;%2C%20&#39;zot&#39;%2C%20&#39;foo.bar.baz&#39;)%20%2F%2F%20&#39;zot.baz&#39;%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20base%20Current%20base%20string%20to%20remove%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20newBase%20New%20base%20string%20to%20replace%20with%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20to%20translate%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Translated%20string%0A%20%20%20%20%20*%2F%0A%20%20%20%20translate%3A%20function%20(base%2C%20newBase%2C%20path)%20%7B%0A%20%20%20%20%20%20return%20newBase%20%2B%20path.slice(base.length)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20base%20Path%20string%20to%20test%20against%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20string%20to%20test%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20%60path%60%20is%20equal%20to%20%60base%60%0A%20%20%20%20%20*%20%40this%20%7BPath%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20matches%3A%20function%20(base%2C%20path)%20%7B%0A%20%20%20%20%20%20return%20base%20%3D%3D%3D%20path%20%7C%7C%20this.isAncestor(base%2C%20path)%20%7C%7C%20this.isDescendant(base%2C%20path)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Converts%20array-based%20paths%20to%20flattened%20path.%20%20String-based%20paths%0A%20%20%20%20%20*%20are%20returned%20as-is.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%20Polymer.Path.normalize(%5B&#39;foo.bar&#39;%2C%200%2C%20&#39;baz&#39;%5D)%20%20%2F%2F%20&#39;foo.bar.0.baz&#39;%0A%20%20%20%20%20*%20Polymer.Path.normalize(&#39;foo.bar.0.baz&#39;)%20%20%20%20%20%20%20%20%2F%2F%20&#39;foo.bar.0.baz&#39;%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Input%20path%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Flattened%20path%0A%20%20%20%20%20*%2F%0A%20%20%20%20normalize%3A%20function%20(path)%20%7B%0A%20%20%20%20%20%20if%20(Array.isArray(path))%20%7B%0A%20%20%20%20%20%20%20%20let%20parts%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20path.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20args%20%3D%20path%5Bi%5D.toString().split(&#39;.&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20args.length%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parts.push(args%5Bj%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20parts.join(&#39;.&#39;)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20path%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Splits%20a%20path%20into%20an%20array%20of%20property%20names.%20Accepts%20either%20arrays%0A%20%20%20%20%20*%20of%20path%20parts%20or%20strings.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%20Polymer.Path.split(%5B&#39;foo.bar&#39;%2C%200%2C%20&#39;baz&#39;%5D)%20%20%2F%2F%20%5B&#39;foo&#39;%2C%20&#39;bar&#39;%2C%20&#39;0&#39;%2C%20&#39;baz&#39;%5D%0A%20%20%20%20%20*%20Polymer.Path.split(&#39;foo.bar.0.baz&#39;)%20%20%20%20%20%20%20%20%2F%2F%20%5B&#39;foo&#39;%2C%20&#39;bar&#39;%2C%20&#39;0&#39;%2C%20&#39;baz&#39;%5D%0A%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Input%20path%0A%20%20%20%20%20*%20%40return%20%7B!Array%3Cstring%3E%7D%20Array%20of%20path%20parts%0A%20%20%20%20%20*%20%40this%20%7BPath%7D%0A%20%20%20%20%20*%20%40suppress%20%7BcheckTypes%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20split%3A%20function%20(path)%20%7B%0A%20%20%20%20%20%20if%20(Array.isArray(path))%20%7B%0A%20%20%20%20%20%20%20%20return%20this.normalize(path).split(&#39;.&#39;)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20path.toString().split(&#39;.&#39;)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Reads%20a%20value%20from%20a%20path.%20%20If%20any%20sub-property%20in%20the%20path%20is%20%60undefined%60%2C%0A%20%20%20%20%20*%20this%20method%20returns%20%60undefined%60%20(will%20never%20throw.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20%20%20*%20%40param%20%7BObject%7D%20root%20Object%20from%20which%20to%20dereference%20path%20from%0A%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Path%20to%20read%0A%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20info%20If%20an%20object%20is%20provided%20to%20%60info%60%2C%20the%20normalized%0A%20%20%20%20%20*%20%20(flattened)%20path%20will%20be%20set%20to%20%60info.path%60.%0A%20%20%20%20%20*%20%40return%20%7B*%7D%20Value%20at%20path%2C%20or%20%60undefined%60%20if%20the%20path%20could%20not%20be%0A%20%20%20%20%20*%20%20fully%20dereferenced.%0A%20%20%20%20%20*%20%40this%20%7BPath%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20get%3A%20function%20(root%2C%20path%2C%20info)%20%7B%0A%20%20%20%20%20%20let%20prop%20%3D%20root%3B%0A%20%20%20%20%20%20let%20parts%20%3D%20this.split(path)%3B%20%2F%2F%20Loop%20over%20path%20parts%5B0..n-1%5D%20and%20dereference%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20parts.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!prop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20let%20part%20%3D%20parts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20prop%20%3D%20prop%5Bpart%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(info)%20%7B%0A%20%20%20%20%20%20%20%20info.path%20%3D%20parts.join(&#39;.&#39;)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20prop%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20a%20value%20to%20a%20path.%20%20If%20any%20sub-property%20in%20the%20path%20is%20%60undefined%60%2C%0A%20%20%20%20%20*%20this%20method%20will%20no-op.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20%20%20*%20%40param%20%7BObject%7D%20root%20Object%20from%20which%20to%20dereference%20path%20from%0A%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Path%20to%20set%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%20to%20path%0A%20%20%20%20%20*%20%40return%20%7Bstring%20%7C%20undefined%7D%20The%20normalized%20version%20of%20the%20input%20path%0A%20%20%20%20%20*%20%40this%20%7BPath%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20set%3A%20function%20(root%2C%20path%2C%20value)%20%7B%0A%20%20%20%20%20%20let%20prop%20%3D%20root%3B%0A%20%20%20%20%20%20let%20parts%20%3D%20this.split(path)%3B%0A%20%20%20%20%20%20let%20last%20%3D%20parts%5Bparts.length%20-%201%5D%3B%0A%0A%20%20%20%20%20%20if%20(parts.length%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Loop%20over%20path%20parts%5B0..n-2%5D%20and%20dereference%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20parts.length%20-%201%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20part%20%3D%20parts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20prop%20%3D%20prop%5Bpart%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(!prop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Set%20value%20to%20object%20at%20end%20of%20path%0A%0A%0A%20%20%20%20%20%20%20%20prop%5Blast%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Simple%20property%20set%0A%20%20%20%20%20%20%20%20prop%5Bpath%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20parts.join(&#39;.&#39;)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20Returns%20true%20if%20the%20given%20string%20is%20a%20structured%20data%20path%20(has%20dots).%0A%20%20%20*%0A%20%20%20*%20This%20function%20is%20deprecated.%20%20Use%20%60Polymer.Path.isPath%60%20instead.%0A%20%20%20*%0A%20%20%20*%20Example%3A%0A%20%20%20*%0A%20%20%20*%20%60%60%60%0A%20%20%20*%20Polymer.Path.isDeep(&#39;foo.bar.baz&#39;)%20%2F%2F%20true%0A%20%20%20*%20Polymer.Path.isDeep(&#39;foo&#39;)%20%20%20%20%20%20%20%20%20%2F%2F%20false%0A%20%20%20*%20%60%60%60%0A%20%20%20*%0A%20%20%20*%20%40deprecated%0A%20%20%20*%20%40memberof%20Polymer.Path%0A%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20string%0A%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20the%20string%20contained%20one%20or%20more%20dots%0A%20%20%20*%2F%0A%0A%20%20Path.isDeep%20%3D%20Path.isPath%3B%0A%20%20Polymer.Path%20%3D%20Path%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fpath.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/case-map.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20const%20caseMap%20%3D%20%7B%7D%3B%0A%20%20const%20DASH_TO_CAMEL%20%3D%20%2F-%5Ba-z%5D%2Fg%3B%0A%20%20const%20CAMEL_TO_DASH%20%3D%20%2F(%5BA-Z%5D)%2Fg%3B%0A%20%20%2F**%0A%20%20%20*%20Module%20with%20utilities%20for%20converting%20between%20%22dash-case%22%20and%20%22camelCase%22%0A%20%20%20*%20identifiers.%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Module%20that%20provides%20utilities%20for%20converting%20between%20%22dash-case%22%0A%20%20%20*%20%20%20and%20%22camelCase%22.%0A%20%20%20*%2F%0A%0A%20%20const%20CaseMap%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Converts%20%22dash-case%22%20identifier%20(e.g.%20%60foo-bar-baz%60)%20to%20%22camelCase%22%0A%20%20%20%20%20*%20(e.g.%20%60fooBarBaz%60).%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.CaseMap%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20dash%20Dash-case%20identifier%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Camel-case%20representation%20of%20the%20identifier%0A%20%20%20%20%20*%2F%0A%20%20%20%20dashToCamelCase(dash)%20%7B%0A%20%20%20%20%20%20return%20caseMap%5Bdash%5D%20%7C%7C%20(caseMap%5Bdash%5D%20%3D%20dash.indexOf(&#39;-&#39;)%20%3C%200%20%3F%20dash%20%3A%20dash.replace(DASH_TO_CAMEL%2C%20m%20%3D%3E%20m%5B1%5D.toUpperCase()))%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Converts%20%22camelCase%22%20identifier%20(e.g.%20%60fooBarBaz%60)%20to%20%22dash-case%22%0A%20%20%20%20%20*%20(e.g.%20%60foo-bar-baz%60).%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.CaseMap%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20camel%20Camel-case%20identifier%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Dash-case%20representation%20of%20the%20identifier%0A%20%20%20%20%20*%2F%0A%20%20%20%20camelToDashCase(camel)%20%7B%0A%20%20%20%20%20%20return%20caseMap%5Bcamel%5D%20%7C%7C%20(caseMap%5Bcamel%5D%20%3D%20camel.replace(CAMEL_TO_DASH%2C%20&#39;-%241&#39;).toLowerCase())%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%3B%0A%20%20Polymer.CaseMap%20%3D%20CaseMap%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fcase-map.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/property-accessors.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/case-map.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/properties-changed.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/async.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%20%2F%2F%20Microtask%20implemented%20using%20Mutation%20Observer%0A%0A%20%20let%20microtaskCurrHandle%20%3D%200%3B%0A%20%20let%20microtaskLastHandle%20%3D%200%3B%0A%20%20let%20microtaskCallbacks%20%3D%20%5B%5D%3B%0A%20%20let%20microtaskNodeContent%20%3D%200%3B%0A%20%20let%20microtaskNode%20%3D%20document.createTextNode(&#39;&#39;)%3B%0A%20%20new%20window.MutationObserver(microtaskFlush).observe(microtaskNode%2C%20%7B%0A%20%20%20%20characterData%3A%20true%0A%20%20%7D)%3B%0A%0A%20%20function%20microtaskFlush()%20%7B%0A%20%20%20%20const%20len%20%3D%20microtaskCallbacks.length%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20len%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20let%20cb%20%3D%20microtaskCallbacks%5Bi%5D%3B%0A%0A%20%20%20%20%20%20if%20(cb)%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20cb()%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20e%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20microtaskCallbacks.splice(0%2C%20len)%3B%0A%20%20%20%20microtaskLastHandle%20%2B%3D%20len%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Module%20that%20provides%20a%20number%20of%20strategies%20for%20enqueuing%20asynchronous%0A%20%20%20*%20tasks.%20%20Each%20sub-module%20provides%20a%20standard%20%60run(fn)%60%20interface%20that%20returns%20a%0A%20%20%20*%20handle%2C%20and%20a%20%60cancel(handle)%60%20interface%20for%20canceling%20async%20tasks%20before%0A%20%20%20*%20they%20run.%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Module%20that%20provides%20a%20number%20of%20strategies%20for%20enqueuing%20asynchronous%0A%20%20%20*%20tasks.%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.Async%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Async%20interface%20wrapper%20around%20%60setTimeout%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40namespace%0A%20%20%20%20%20*%20%40memberof%20Polymer.Async%0A%20%20%20%20%20*%20%40summary%20Async%20interface%20wrapper%20around%20%60setTimeout%60.%0A%20%20%20%20%20*%2F%0A%20%20%20%20timeOut%3A%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20a%20sub-module%20with%20the%20async%20interface%20providing%20the%20provided%0A%20%20%20%20%20%20%20*%20delay.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40memberof%20Polymer.Async.timeOut%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%3D%7D%20delay%20Time%20to%20wait%20before%20calling%20callbacks%20in%20ms%0A%20%20%20%20%20%20%20*%20%40return%20%7B!AsyncInterface%7D%20An%20async%20timeout%20interface%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20after(delay)%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20run(fn)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20window.setTimeout(fn%2C%20delay)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20cancel(handle)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20window.clearTimeout(handle)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Enqueues%20a%20function%20called%20in%20the%20next%20task.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40memberof%20Polymer.Async.timeOut%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Function%7D%20fn%20Callback%20to%20run%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%3D%7D%20delay%20Delay%20in%20milliseconds%0A%20%20%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20Handle%20used%20for%20canceling%20task%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20run(fn%2C%20delay)%20%7B%0A%20%20%20%20%20%20%20%20return%20window.setTimeout(fn%2C%20delay)%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Cancels%20a%20previously%20enqueued%20%60timeOut%60%20callback.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40memberof%20Polymer.Async.timeOut%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20handle%20Handle%20returned%20from%20%60run%60%20of%20callback%20to%20cancel%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20cancel(handle)%20%7B%0A%20%20%20%20%20%20%20%20window.clearTimeout(handle)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Async%20interface%20wrapper%20around%20%60requestAnimationFrame%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40namespace%0A%20%20%20%20%20*%20%40memberof%20Polymer.Async%0A%20%20%20%20%20*%20%40summary%20Async%20interface%20wrapper%20around%20%60requestAnimationFrame%60.%0A%20%20%20%20%20*%2F%0A%20%20%20%20animationFrame%3A%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Enqueues%20a%20function%20called%20at%20%60requestAnimationFrame%60%20timing.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40memberof%20Polymer.Async.animationFrame%0A%20%20%20%20%20%20%20*%20%40param%20%7Bfunction(number)%3Avoid%7D%20fn%20Callback%20to%20run%0A%20%20%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20Handle%20used%20for%20canceling%20task%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20run(fn)%20%7B%0A%20%20%20%20%20%20%20%20return%20window.requestAnimationFrame(fn)%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Cancels%20a%20previously%20enqueued%20%60animationFrame%60%20callback.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40memberof%20Polymer.Async.animationFrame%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20handle%20Handle%20returned%20from%20%60run%60%20of%20callback%20to%20cancel%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20cancel(handle)%20%7B%0A%20%20%20%20%20%20%20%20window.cancelAnimationFrame(handle)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Async%20interface%20wrapper%20around%20%60requestIdleCallback%60.%20%20Falls%20back%20to%0A%20%20%20%20%20*%20%60setTimeout%60%20on%20browsers%20that%20do%20not%20support%20%60requestIdleCallback%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40namespace%0A%20%20%20%20%20*%20%40memberof%20Polymer.Async%0A%20%20%20%20%20*%20%40summary%20Async%20interface%20wrapper%20around%20%60requestIdleCallback%60.%0A%20%20%20%20%20*%2F%0A%20%20%20%20idlePeriod%3A%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Enqueues%20a%20function%20called%20at%20%60requestIdleCallback%60%20timing.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40memberof%20Polymer.Async.idlePeriod%0A%20%20%20%20%20%20%20*%20%40param%20%7Bfunction(!IdleDeadline)%3Avoid%7D%20fn%20Callback%20to%20run%0A%20%20%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20Handle%20used%20for%20canceling%20task%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20run(fn)%20%7B%0A%20%20%20%20%20%20%20%20return%20window.requestIdleCallback%20%3F%20window.requestIdleCallback(fn)%20%3A%20window.setTimeout(fn%2C%2016)%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Cancels%20a%20previously%20enqueued%20%60idlePeriod%60%20callback.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40memberof%20Polymer.Async.idlePeriod%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20handle%20Handle%20returned%20from%20%60run%60%20of%20callback%20to%20cancel%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20cancel(handle)%20%7B%0A%20%20%20%20%20%20%20%20window.cancelIdleCallback%20%3F%20window.cancelIdleCallback(handle)%20%3A%20window.clearTimeout(handle)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Async%20interface%20for%20enqueuing%20callbacks%20that%20run%20at%20microtask%20timing.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Note%20that%20microtask%20timing%20is%20achieved%20via%20a%20single%20%60MutationObserver%60%2C%0A%20%20%20%20%20*%20and%20thus%20callbacks%20enqueued%20with%20this%20API%20will%20all%20run%20in%20a%20single%0A%20%20%20%20%20*%20batch%2C%20and%20not%20interleaved%20with%20other%20microtasks%20such%20as%20promises.%0A%20%20%20%20%20*%20Promises%20are%20avoided%20as%20an%20implementation%20choice%20for%20the%20time%20being%0A%20%20%20%20%20*%20due%20to%20Safari%20bugs%20that%20cause%20Promises%20to%20lack%20microtask%20guarantees.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40namespace%0A%20%20%20%20%20*%20%40memberof%20Polymer.Async%0A%20%20%20%20%20*%20%40summary%20Async%20interface%20for%20enqueuing%20callbacks%20that%20run%20at%20microtask%0A%20%20%20%20%20*%20%20%20timing.%0A%20%20%20%20%20*%2F%0A%20%20%20%20microTask%3A%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Enqueues%20a%20function%20called%20at%20microtask%20timing.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40memberof%20Polymer.Async.microTask%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Function%3D%7D%20callback%20Callback%20to%20run%0A%20%20%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20Handle%20used%20for%20canceling%20task%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20run(callback)%20%7B%0A%20%20%20%20%20%20%20%20microtaskNode.textContent%20%3D%20microtaskNodeContent%2B%2B%3B%0A%20%20%20%20%20%20%20%20microtaskCallbacks.push(callback)%3B%0A%20%20%20%20%20%20%20%20return%20microtaskCurrHandle%2B%2B%3B%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Cancels%20a%20previously%20enqueued%20%60microTask%60%20callback.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40memberof%20Polymer.Async.microTask%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20handle%20Handle%20returned%20from%20%60run%60%20of%20callback%20to%20cancel%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20cancel(handle)%20%7B%0A%20%20%20%20%20%20%20%20const%20idx%20%3D%20handle%20-%20microtaskLastHandle%3B%0A%0A%20%20%20%20%20%20%20%20if%20(idx%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!microtaskCallbacks%5Bidx%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(&#39;invalid%20async%20handle%3A%20&#39;%20%2B%20handle)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20microtaskCallbacks%5Bidx%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fasync.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%20%40const%20%7B!AsyncInterface%7D%20*%2F%0A%0A%20%20const%20microtask%20%3D%20Polymer.Async.microTask%3B%0A%20%20%2F**%0A%20%20%20*%20Element%20class%20mixin%20that%20provides%20basic%20meta-programming%20for%20creating%20one%0A%20%20%20*%20or%20more%20property%20accessors%20(getter%2Fsetter%20pair)%20that%20enqueue%20an%20async%0A%20%20%20*%20(batched)%20%60_propertiesChanged%60%20callback.%0A%20%20%20*%0A%20%20%20*%20For%20basic%20usage%20of%20this%20mixin%2C%20call%20%60MyClass.createProperties(props)%60%0A%20%20%20*%20once%20at%20class%20definition%20time%20to%20create%20property%20accessors%20for%20properties%0A%20%20%20*%20named%20in%20props%2C%20implement%20%60_propertiesChanged%60%20to%20react%20as%20desired%20to%0A%20%20%20*%20property%20changes%2C%20and%20implement%20%60static%20get%20observedAttributes()%60%20and%0A%20%20%20*%20include%20lowercase%20versions%20of%20any%20property%20names%20that%20should%20be%20set%20from%0A%20%20%20*%20attributes.%20Last%2C%20call%20%60this._enableProperties()%60%20in%20the%20element&#39;s%0A%20%20%20*%20%60connectedCallback%60%20to%20enable%20the%20accessors.%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Element%20class%20mixin%20for%20reacting%20to%20property%20changes%20from%0A%20%20%20*%20%20%20generated%20property%20accessors.%0A%20%20%20*%2F%0A%0A%20%20Polymer.PropertiesChanged%20%3D%20Polymer.dedupingMixin(superClass%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40extends%20%7BsuperClass%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertiesChanged%7D%0A%20%20%20%20%20*%20%40unrestricted%0A%20%20%20%20%20*%2F%0A%20%20%20%20class%20PropertiesChanged%20extends%20superClass%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Creates%20property%20accessors%20for%20the%20given%20property%20names.%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20props%20Object%20whose%20keys%20are%20names%20of%20accessors.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20static%20createProperties(props)%20%7B%0A%20%20%20%20%20%20%20%20const%20proto%20%3D%20this.prototype%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20prop%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20don&#39;t%20stomp%20an%20existing%20accessor%0A%20%20%20%20%20%20%20%20%20%20if%20(!(prop%20in%20proto))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20proto._createPropertyAccessor(prop)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20an%20attribute%20name%20that%20corresponds%20to%20the%20given%20property.%0A%20%20%20%20%20%20%20*%20The%20attribute%20name%20is%20the%20lowercased%20property%20name.%20Override%20to%0A%20%20%20%20%20%20%20*%20customize%20this%20mapping.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20to%20convert%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Attribute%20name%20corresponding%20to%20the%20given%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20attributeNameForProperty(property)%20%7B%0A%20%20%20%20%20%20%20%20return%20property.toLowerCase()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Override%20point%20to%20provide%20a%20type%20to%20which%20to%20deserialize%20a%20value%20to%0A%20%20%20%20%20%20%20*%20a%20given%20property.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Name%20of%20property%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20typeForProperty(name)%20%7B%7D%20%2F%2Feslint-disable-line%20no-unused-vars%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Creates%20a%20setter%2Fgetter%20pair%20for%20the%20named%20property%20with%20its%20own%0A%20%20%20%20%20%20%20*%20local%20storage.%20%20The%20getter%20returns%20the%20value%20in%20the%20local%20storage%2C%0A%20%20%20%20%20%20%20*%20and%20the%20setter%20calls%20%60_setProperty%60%2C%20which%20updates%20the%20local%20storage%0A%20%20%20%20%20%20%20*%20for%20the%20property%20and%20enqueues%20a%20%60_propertiesChanged%60%20callback.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20may%20be%20called%20on%20a%20prototype%20or%20an%20instance.%20%20Calling%0A%20%20%20%20%20%20%20*%20this%20method%20may%20overwrite%20a%20property%20value%20that%20already%20exists%20on%0A%20%20%20%20%20%20%20*%20the%20prototype%2Finstance%20by%20creating%20the%20accessor.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20the%20property%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20readOnly%20When%20true%2C%20no%20setter%20is%20created%3B%20the%0A%20%20%20%20%20%20%20*%20%20%20protected%20%60_setProperty%60%20function%20must%20be%20used%20to%20set%20the%20property%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_createPropertyAccessor(property%2C%20readOnly)%20%7B%0A%20%20%20%20%20%20%20%20this._addPropertyToAttributeMap(property)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!this.hasOwnProperty(&#39;__dataHasAccessor&#39;))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataHasAccessor%20%3D%20Object.assign(%7B%7D%2C%20this.__dataHasAccessor)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(!this.__dataHasAccessor%5Bproperty%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataHasAccessor%5Bproperty%5D%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this._definePropertyAccessor(property%2C%20readOnly)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Adds%20the%20given%20%60property%60%20to%20a%20map%20matching%20attribute%20names%0A%20%20%20%20%20%20%20*%20to%20property%20names%2C%20using%20%60attributeNameForProperty%60.%20This%20map%20is%0A%20%20%20%20%20%20%20*%20used%20when%20deserializing%20attribute%20values%20to%20properties.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20the%20property%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_addPropertyToAttributeMap(property)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.hasOwnProperty(&#39;__dataAttributes&#39;))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataAttributes%20%3D%20Object.assign(%7B%7D%2C%20this.__dataAttributes)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(!this.__dataAttributes%5Bproperty%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20attr%20%3D%20this.constructor.attributeNameForProperty(property)%3B%0A%20%20%20%20%20%20%20%20%20%20this.__dataAttributes%5Battr%5D%20%3D%20property%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Defines%20a%20property%20accessor%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20the%20property%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20readOnly%20When%20true%2C%20no%20setter%20is%20created%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_definePropertyAccessor(property%2C%20readOnly)%20%7B%0A%20%20%20%20%20%20%20%20Object.defineProperty(this%2C%20property%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F*%20eslint-disable%20valid-jsdoc%20*%2F%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40this%20%7BPropertiesChanged%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20get()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this._getProperty(property)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40this%20%7BPropertiesChanged%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20set%3A%20readOnly%20%3F%20function%20()%20%7B%7D%20%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._setProperty(property%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20eslint-enable%20*%2F%0A%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super()%3B%0A%20%20%20%20%20%20%20%20this.__dataEnabled%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.__dataReady%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.__dataInvalid%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.__data%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20this.__dataPending%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.__dataOld%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.__dataInstanceProps%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.__serializing%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20this._initializeProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Lifecycle%20callback%20called%20when%20properties%20are%20enabled%20via%0A%20%20%20%20%20%20%20*%20%60_enableProperties%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Users%20may%20override%20this%20function%20to%20implement%20behavior%20that%20is%0A%20%20%20%20%20%20%20*%20dependent%20on%20the%20element%20having%20its%20property%20data%20initialized%2C%20e.g.%0A%20%20%20%20%20%20%20*%20from%20defaults%20(initialized%20from%20%60constructor%60%2C%20%60_initializeProperties%60)%2C%0A%20%20%20%20%20%20%20*%20%60attributeChangedCallback%60%2C%20or%20values%20propagated%20from%20host%20e.g.%20via%0A%20%20%20%20%20%20%20*%20bindings.%20%20%60super.ready()%60%20must%20be%20called%20to%20ensure%20the%20data%20system%0A%20%20%20%20%20%20%20*%20becomes%20enabled.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20ready()%20%7B%0A%20%20%20%20%20%20%20%20this.__dataReady%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20this._flushProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Initializes%20the%20local%20storage%20for%20property%20accessors.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Provided%20as%20an%20override%20point%20for%20performing%20any%20setup%20work%20prior%0A%20%20%20%20%20%20%20*%20to%20initializing%20the%20property%20accessor%20system.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeProperties()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Capture%20instance%20properties%3B%20these%20will%20be%20set%20into%20accessors%0A%20%20%20%20%20%20%20%20%2F%2F%20during%20first%20flush.%20Don&#39;t%20set%20them%20here%2C%20since%20we%20want%0A%20%20%20%20%20%20%20%20%2F%2F%20these%20to%20overwrite%20defaults%2Fconstructor%20assignments%0A%20%20%20%20%20%20%20%20for%20(let%20p%20in%20this.__dataHasAccessor)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.hasOwnProperty(p))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataInstanceProps%20%3D%20this.__dataInstanceProps%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataInstanceProps%5Bp%5D%20%3D%20this%5Bp%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20this%5Bp%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Called%20at%20ready%20time%20with%20bag%20of%20instance%20properties%20that%20overwrote%0A%20%20%20%20%20%20%20*%20accessors%20when%20the%20element%20upgraded.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20default%20implementation%20sets%20these%20properties%20back%20into%20the%0A%20%20%20%20%20%20%20*%20setter%20at%20ready%20time.%20%20This%20method%20is%20provided%20as%20an%20override%0A%20%20%20%20%20%20%20*%20point%20for%20customizing%20or%20providing%20more%20efficient%20initialization.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20property%20values%20that%20were%20overwritten%0A%20%20%20%20%20%20%20*%20%20%20when%20creating%20property%20accessors.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeInstanceProperties(props)%20%7B%0A%20%20%20%20%20%20%20%20Object.assign(this%2C%20props)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Updates%20the%20local%20storage%20for%20a%20property%20(via%20%60_setPendingProperty%60)%0A%20%20%20%20%20%20%20*%20and%20enqueues%20a%20%60_proeprtiesChanged%60%20callback.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20the%20property%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_setProperty(property%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._setPendingProperty(property%2C%20value))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateProperties()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20the%20value%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20property%0A%20%20%20%20%20%20%20*%20%40return%20%7B*%7D%20Value%20for%20the%20given%20property%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_getProperty(property)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.__data%5Bproperty%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F*%20eslint-disable%20no-unused-vars%20*%2F%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Updates%20the%20local%20storage%20for%20a%20property%2C%20records%20the%20previous%20value%2C%0A%20%20%20%20%20%20%20*%20and%20adds%20it%20to%20the%20set%20of%20%22pending%20changes%22%20that%20will%20be%20passed%20to%20the%0A%20%20%20%20%20%20%20*%20%60_propertiesChanged%60%20callback.%20%20This%20method%20does%20not%20enqueue%20the%0A%20%20%20%20%20%20%20*%20%60_propertiesChanged%60%20callback.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20the%20property%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20ext%20Not%20used%20here%3B%20affordance%20for%20closure%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Returns%20true%20if%20the%20property%20changed%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_setPendingProperty(property%2C%20value%2C%20ext)%20%7B%0A%20%20%20%20%20%20%20%20let%20old%20%3D%20this.__data%5Bproperty%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20changed%20%3D%20this._shouldPropertyChange(property%2C%20value%2C%20old)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(changed)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!this.__dataPending)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataPending%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataOld%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Ensure%20old%20is%20captured%20from%20the%20last%20turn%0A%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(this.__dataOld%20%26%26%20!(property%20in%20this.__dataOld))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataOld%5Bproperty%5D%20%3D%20old%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20this.__data%5Bproperty%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20this.__dataPending%5Bproperty%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20changed%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F*%20eslint-enable%20*%2F%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Marks%20the%20properties%20as%20invalid%2C%20and%20enqueues%20an%20async%0A%20%20%20%20%20%20%20*%20%60_propertiesChanged%60%20callback.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_invalidateProperties()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.__dataInvalid%20%26%26%20this.__dataReady)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataInvalid%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20microtask.run(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.__dataInvalid)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.__dataInvalid%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this._flushProperties()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Call%20to%20enable%20property%20accessor%20processing.%20Before%20this%20method%20is%0A%20%20%20%20%20%20%20*%20called%20accessor%20values%20will%20be%20set%20but%20side%20effects%20are%0A%20%20%20%20%20%20%20*%20queued.%20When%20called%2C%20any%20pending%20side%20effects%20occur%20immediately.%0A%20%20%20%20%20%20%20*%20For%20elements%2C%20generally%20%60connectedCallback%60%20is%20a%20normal%20spot%20to%20do%20so.%0A%20%20%20%20%20%20%20*%20It%20is%20safe%20to%20call%20this%20method%20multiple%20times%20as%20it%20only%20turns%20on%0A%20%20%20%20%20%20%20*%20property%20accessors%20once.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_enableProperties()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.__dataEnabled)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataEnabled%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(this.__dataInstanceProps)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._initializeInstanceProperties(this.__dataInstanceProps)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataInstanceProps%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20this.ready()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Calls%20the%20%60_propertiesChanged%60%20callback%20with%20the%20current%20set%20of%0A%20%20%20%20%20%20%20*%20pending%20changes%20(and%20old%20values%20recorded%20when%20pending%20changes%20were%0A%20%20%20%20%20%20%20*%20set)%2C%20and%20resets%20the%20pending%20set%20of%20changes.%20Generally%2C%20this%20method%0A%20%20%20%20%20%20%20*%20should%20not%20be%20called%20in%20user%20code.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_flushProperties()%20%7B%0A%20%20%20%20%20%20%20%20const%20props%20%3D%20this.__data%3B%0A%20%20%20%20%20%20%20%20const%20changedProps%20%3D%20this.__dataPending%3B%0A%20%20%20%20%20%20%20%20const%20old%20%3D%20this.__dataOld%3B%0A%0A%20%20%20%20%20%20%20%20if%20(this._shouldPropertiesChange(props%2C%20changedProps%2C%20old))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataPending%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20this.__dataOld%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this._propertiesChanged(props%2C%20changedProps%2C%20old)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Called%20in%20%60_flushProperties%60%20to%20determine%20if%20%60_propertiesChanged%60%0A%20%20%20%20%20%20%20*%20should%20be%20called.%20The%20default%20implementation%20returns%20true%20if%0A%20%20%20%20%20%20%20*%20properties%20are%20pending.%20Override%20to%20customize%20when%0A%20%20%20%20%20%20%20*%20%60_propertiesChanged%60%20is%20called.%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20currentProps%20Bag%20of%20all%20current%20accessor%20values%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20changedProps%20Bag%20of%20properties%20changed%20since%20the%20last%0A%20%20%20%20%20%20%20*%20%20%20call%20to%20%60_propertiesChanged%60%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20oldProps%20Bag%20of%20previous%20values%20for%20each%20property%0A%20%20%20%20%20%20%20*%20%20%20in%20%60changedProps%60%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20true%20if%20changedProps%20is%20truthy%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_shouldPropertiesChange(currentProps%2C%20changedProps%2C%20oldProps)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20eslint-disable-line%20no-unused-vars%0A%20%20%20%20%20%20%20%20return%20Boolean(changedProps)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Callback%20called%20when%20any%20properties%20with%20accessors%20created%20via%0A%20%20%20%20%20%20%20*%20%60_createPropertyAccessor%60%20have%20been%20set.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20currentProps%20Bag%20of%20all%20current%20accessor%20values%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20changedProps%20Bag%20of%20properties%20changed%20since%20the%20last%0A%20%20%20%20%20%20%20*%20%20%20call%20to%20%60_propertiesChanged%60%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20oldProps%20Bag%20of%20previous%20values%20for%20each%20property%0A%20%20%20%20%20%20%20*%20%20%20in%20%60changedProps%60%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_propertiesChanged(currentProps%2C%20changedProps%2C%20oldProps)%20%7B%7D%20%2F%2F%20eslint-disable-line%20no-unused-vars%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Method%20called%20to%20determine%20whether%20a%20property%20value%20should%20be%0A%20%20%20%20%20%20%20*%20considered%20as%20a%20change%20and%20cause%20the%20%60_propertiesChanged%60%20callback%0A%20%20%20%20%20%20%20*%20to%20be%20enqueued.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20default%20implementation%20returns%20%60true%60%20if%20a%20strict%20equality%0A%20%20%20%20%20%20%20*%20check%20fails.%20The%20method%20always%20returns%20false%20for%20%60NaN%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Override%20this%20method%20to%20e.g.%20provide%20stricter%20checking%20for%0A%20%20%20%20%20%20%20*%20Objects%2FArrays%20when%20using%20immutable%20patterns.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20New%20property%20value%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20old%20Previous%20property%20value%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20property%20should%20be%20considered%20a%20change%0A%20%20%20%20%20%20%20*%20%20%20and%20enqueue%20a%20%60_proeprtiesChanged%60%20callback%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_shouldPropertyChange(property%2C%20value%2C%20old)%20%7B%0A%20%20%20%20%20%20%20%20return%20(%2F%2F%20Strict%20equality%20check%0A%20%20%20%20%20%20%20%20%20%20old%20!%3D%3D%20value%20%26%26%20(%20%2F%2F%20This%20ensures%20(old%3D%3DNaN%2C%20value%3D%3DNaN)%20always%20returns%20false%0A%20%20%20%20%20%20%20%20%20%20old%20%3D%3D%3D%20old%20%7C%7C%20value%20%3D%3D%3D%20value)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Implements%20native%20Custom%20Elements%20%60attributeChangedCallback%60%20to%0A%20%20%20%20%20%20%20*%20set%20an%20attribute%20value%20to%20a%20property%20via%20%60_attributeToProperty%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Name%20of%20attribute%20that%20changed%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20old%20Old%20attribute%20value%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20value%20New%20attribute%20value%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20namespace%20Attribute%20namespace.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Super%20may%20or%20may%20not%20implement%20the%20callback%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20attributeChangedCallback(name%2C%20old%2C%20value%2C%20namespace)%20%7B%0A%20%20%20%20%20%20%20%20if%20(old%20!%3D%3D%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._attributeToProperty(name%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(super.attributeChangedCallback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20super.attributeChangedCallback(name%2C%20old%2C%20value%2C%20namespace)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Deserializes%20an%20attribute%20to%20its%20associated%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20calls%20the%20%60_deserializeValue%60%20method%20to%20convert%20the%20string%20to%0A%20%20%20%20%20%20%20*%20a%20typed%20value.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20attribute%20Name%20of%20attribute%20to%20deserialize.%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20value%20of%20the%20attribute.%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%3D%7D%20type%20type%20to%20deserialize%20to%2C%20defaults%20to%20the%20value%0A%20%20%20%20%20%20%20*%20returned%20from%20%60typeForProperty%60%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_attributeToProperty(attribute%2C%20value%2C%20type)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.__serializing)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20map%20%3D%20this.__dataAttributes%3B%0A%20%20%20%20%20%20%20%20%20%20const%20property%20%3D%20map%20%26%26%20map%5Battribute%5D%20%7C%7C%20attribute%3B%0A%20%20%20%20%20%20%20%20%20%20this%5Bproperty%5D%20%3D%20this._deserializeValue(value%2C%20type%20%7C%7C%20this.constructor.typeForProperty(property))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Serializes%20a%20property%20to%20its%20associated%20attribute.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%20Closure%20can&#39;t%20figure%20out%20%60this%60%20is%20an%20element.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%20to%20reflect.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%3D%7D%20attribute%20Attribute%20name%20to%20reflect%20to.%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%3D%7D%20value%20Property%20value%20to%20refect.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_propertyToAttribute(property%2C%20attribute%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20this.__serializing%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20value%20%3D%20arguments.length%20%3C%203%20%3F%20this%5Bproperty%5D%20%3A%20value%3B%0A%0A%20%20%20%20%20%20%20%20this._valueToNodeAttribute(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20this%2C%20value%2C%20attribute%20%7C%7C%20this.constructor.attributeNameForProperty(property))%3B%0A%0A%20%20%20%20%20%20%20%20this.__serializing%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Sets%20a%20typed%20value%20to%20an%20HTML%20attribute%20on%20a%20node.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20calls%20the%20%60_serializeValue%60%20method%20to%20convert%20the%20typed%0A%20%20%20%20%20%20%20*%20value%20to%20a%20string.%20%20If%20the%20%60_serializeValue%60%20method%20returns%20%60undefined%60%2C%0A%20%20%20%20%20%20%20*%20the%20attribute%20will%20be%20removed%20(this%20is%20the%20default%20for%20boolean%0A%20%20%20%20%20%20%20*%20type%20%60false%60).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%7D%20node%20Element%20to%20set%20attribute%20to.%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20serialize.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20attribute%20Attribute%20name%20to%20serialize%20to.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_valueToNodeAttribute(node%2C%20value%2C%20attribute)%20%7B%0A%20%20%20%20%20%20%20%20const%20str%20%3D%20this._serializeValue(value)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(str%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node.removeAttribute(attribute)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node.setAttribute(attribute%2C%20str)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Converts%20a%20typed%20JavaScript%20value%20to%20a%20string.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20is%20called%20when%20setting%20JS%20property%20values%20to%0A%20%20%20%20%20%20%20*%20HTML%20attributes.%20%20Users%20may%20override%20this%20method%20to%20provide%0A%20%20%20%20%20%20%20*%20serialization%20for%20custom%20types.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Property%20value%20to%20serialize.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%20%7C%20undefined%7D%20String%20serialized%20from%20the%20provided%0A%20%20%20%20%20%20%20*%20property%20%20value.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_serializeValue(value)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(typeof%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20&#39;boolean&#39;%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20value%20%3F%20&#39;&#39;%20%3A%20undefined%3B%0A%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20value%20!%3D%20null%20%3F%20value.toString()%20%3A%20undefined%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Converts%20a%20string%20to%20a%20typed%20JavaScript%20value.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20is%20called%20when%20reading%20HTML%20attribute%20values%20to%0A%20%20%20%20%20%20%20*%20JS%20properties.%20%20Users%20may%20override%20this%20method%20to%20provide%0A%20%20%20%20%20%20%20*%20deserialization%20for%20custom%20%60type%60s.%20Types%20for%20%60Boolean%60%2C%20%60String%60%2C%0A%20%20%20%20%20%20%20*%20and%20%60Number%60%20convert%20attributes%20to%20the%20expected%20types.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20value%20Value%20to%20deserialize.%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%3D%7D%20type%20Type%20to%20deserialize%20the%20string%20to.%0A%20%20%20%20%20%20%20*%20%40return%20%7B*%7D%20Typed%20value%20deserialized%20from%20the%20provided%20string.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_deserializeValue(value%2C%20type)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20Boolean%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20value%20!%3D%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%20%20case%20Number%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20Number(value)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20PropertiesChanged%3B%0A%20%20%7D)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Fmixins%2Fproperties-changed.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20let%20caseMap%20%3D%20Polymer.CaseMap%3B%20%2F%2F%20Save%20map%20of%20native%20properties%3B%20this%20forms%20a%20blacklist%20or%20properties%0A%20%20%2F%2F%20that%20won&#39;t%20have%20their%20values%20%22saved%22%20by%20%60saveAccessorValue%60%2C%20since%0A%20%20%2F%2F%20reading%20from%20an%20HTMLElement%20accessor%20from%20the%20context%20of%20a%20prototype%20throws%0A%0A%20%20const%20nativeProperties%20%3D%20%7B%7D%3B%0A%20%20let%20proto%20%3D%20HTMLElement.prototype%3B%0A%0A%20%20while%20(proto)%20%7B%0A%20%20%20%20let%20props%20%3D%20Object.getOwnPropertyNames(proto)%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20props.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20nativeProperties%5Bprops%5Bi%5D%5D%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20proto%20%3D%20Object.getPrototypeOf(proto)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Used%20to%20save%20the%20value%20of%20a%20property%20that%20will%20be%20overridden%20with%0A%20%20%20*%20an%20accessor.%20If%20the%20%60model%60%20is%20a%20prototype%2C%20the%20values%20will%20be%20saved%0A%20%20%20*%20in%20%60__dataProto%60%2C%20and%20it&#39;s%20up%20to%20the%20user%20(or%20downstream%20mixin)%20to%0A%20%20%20*%20decide%20how%2Fwhen%20to%20set%20these%20values%20back%20into%20the%20accessors.%0A%20%20%20*%20If%20%60model%60%20is%20already%20an%20instance%20(it%20has%20a%20%60__data%60%20property)%2C%20then%0A%20%20%20*%20the%20value%20will%20be%20set%20as%20a%20pending%20property%2C%20meaning%20the%20user%20should%0A%20%20%20*%20call%20%60_invalidateProperties%60%20or%20%60_flushProperties%60%20to%20take%20effect%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BObject%7D%20model%20Prototype%20or%20instance%0A%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20property%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20saveAccessorValue(model%2C%20property)%20%7B%0A%20%20%20%20%2F%2F%20Don&#39;t%20read%2Fstore%20value%20for%20any%20native%20properties%20since%20they%20could%20throw%0A%20%20%20%20if%20(!nativeProperties%5Bproperty%5D)%20%7B%0A%20%20%20%20%20%20let%20value%20%3D%20model%5Bproperty%5D%3B%0A%0A%20%20%20%20%20%20if%20(value%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20if%20(model.__data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Adding%20accessor%20to%20instance%3B%20update%20the%20property%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20It%20is%20the%20user&#39;s%20responsibility%20to%20call%20_flushProperties%0A%20%20%20%20%20%20%20%20%20%20model._setPendingProperty(property%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Adding%20accessor%20to%20proto%3B%20save%20proto&#39;s%20value%20for%20instance-time%20use%0A%20%20%20%20%20%20%20%20%20%20if%20(!model.__dataProto)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20model.__dataProto%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(!model.hasOwnProperty(JSCompiler_renameProperty(&#39;__dataProto&#39;%2C%20model)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20model.__dataProto%20%3D%20Object.create(model.__dataProto)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20model.__dataProto%5Bproperty%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Element%20class%20mixin%20that%20provides%20basic%20meta-programming%20for%20creating%20one%0A%20%20%20*%20or%20more%20property%20accessors%20(getter%2Fsetter%20pair)%20that%20enqueue%20an%20async%0A%20%20%20*%20(batched)%20%60_propertiesChanged%60%20callback.%0A%20%20%20*%0A%20%20%20*%20For%20basic%20usage%20of%20this%20mixin%3A%0A%20%20%20*%20%0A%20%20%20*%20-%20%20%20Declare%20attributes%20to%20observe%20via%20the%20standard%20%60static%20get%20observedAttributes()%60.%20Use%0A%20%20%20*%20%20%20%20%20%60dash-case%60%20attribute%20names%20to%20represent%20%60camelCase%60%20property%20names.%20%0A%20%20%20*%20-%20%20%20Implement%20the%20%60_propertiesChanged%60%20callback%20on%20the%20class.%0A%20%20%20*%20-%20%20%20Call%20%60MyClass.createPropertiesForAttributes()%60%20**once**%20on%20the%20class%20to%20generate%20%0A%20%20%20*%20%20%20%20%20property%20accessors%20for%20each%20observed%20attribute.%20This%20must%20be%20called%20before%20the%20first%20%0A%20%20%20*%20%20%20%20%20instance%20is%20created%2C%20for%20example%2C%20by%20calling%20it%20before%20calling%20%60customElements.define%60.%0A%20%20%20*%20%20%20%20%20It%20can%20also%20be%20called%20lazily%20from%20the%20element&#39;s%20%60constructor%60%2C%20as%20long%20as%20it&#39;s%20guarded%20so%0A%20%20%20*%20%20%20%20%20that%20the%20call%20is%20only%20made%20once%2C%20when%20the%20first%20instance%20is%20created.%0A%20%20%20*%20-%20%20%20Call%20%60this._enableProperties()%60%20in%20the%20element&#39;s%20%60connectedCallback%60%20to%20enable%20%0A%20%20%20*%20%20%20%20%20the%20accessors.%0A%20%20%20*%0A%20%20%20*%20Any%20%60observedAttributes%60%20will%20automatically%20be%0A%20%20%20*%20deserialized%20via%20%60attributeChangedCallback%60%20and%20set%20to%20the%20associated%0A%20%20%20*%20property%20using%20%60dash-case%60-to-%60camelCase%60%20convention.%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40appliesMixin%20Polymer.PropertiesChanged%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Element%20class%20mixin%20for%20reacting%20to%20property%20changes%20from%0A%20%20%20*%20%20%20generated%20property%20accessors.%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.PropertyAccessors%20%3D%20Polymer.dedupingMixin(superClass%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40constructor%0A%20%20%20%20%20*%20%40extends%20%7BsuperClass%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertiesChanged%7D%0A%20%20%20%20%20*%20%40unrestricted%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%20%20%20%20const%20base%20%3D%20Polymer.PropertiesChanged(superClass)%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertyAccessors%7D%0A%20%20%20%20%20*%20%40extends%20%7Bbase%7D%0A%20%20%20%20%20*%20%40unrestricted%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20class%20PropertyAccessors%20extends%20base%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Generates%20property%20accessors%20for%20all%20attributes%20in%20the%20standard%0A%20%20%20%20%20%20%20*%20static%20%60observedAttributes%60%20array.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Attribute%20names%20are%20mapped%20to%20property%20names%20using%20the%20%60dash-case%60%20to%0A%20%20%20%20%20%20%20*%20%60camelCase%60%20convention%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20static%20createPropertiesForAttributes()%20%7B%0A%20%20%20%20%20%20%20%20let%20a%24%20%3D%20this.observedAttributes%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20a%24.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.prototype._createPropertyAccessor(caseMap.dashToCamelCase(a%24%5Bi%5D))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20an%20attribute%20name%20that%20corresponds%20to%20the%20given%20property.%0A%20%20%20%20%20%20%20*%20By%20default%2C%20converts%20camel%20to%20dash%20case%2C%20e.g.%20%60fooBar%60%20to%20%60foo-bar%60.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20to%20convert%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Attribute%20name%20corresponding%20to%20the%20given%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20attributeNameForProperty(property)%20%7B%0A%20%20%20%20%20%20%20%20return%20caseMap.camelToDashCase(property)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20PropertiesChanged%20implementation%20to%20initialize%20values%20for%0A%20%20%20%20%20%20%20*%20accessors%20created%20for%20values%20that%20already%20existed%20on%20the%20element%0A%20%20%20%20%20%20%20*%20prototype.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeProperties()%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.__dataProto)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._initializeProtoProperties(this.__dataProto)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this.__dataProto%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20super._initializeProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Called%20at%20instance%20time%20with%20bag%20of%20properties%20that%20were%20overwritten%0A%20%20%20%20%20%20%20*%20by%20accessors%20on%20the%20prototype%20when%20accessors%20were%20created.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20default%20implementation%20sets%20these%20properties%20back%20into%20the%0A%20%20%20%20%20%20%20*%20setter%20at%20instance%20time.%20%20This%20method%20is%20provided%20as%20an%20override%0A%20%20%20%20%20%20%20*%20point%20for%20customizing%20or%20providing%20more%20efficient%20initialization.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20property%20values%20that%20were%20overwritten%0A%20%20%20%20%20%20%20*%20%20%20when%20creating%20property%20accessors.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeProtoProperties(props)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20p%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._setProperty(p%2C%20props%5Bp%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Ensures%20the%20element%20has%20the%20given%20attribute.%20If%20it%20does%20not%2C%0A%20%20%20%20%20%20%20*%20assigns%20the%20given%20value%20to%20the%20attribute.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%20Closure%20can&#39;t%20figure%20out%20%60this%60%20is%20infact%20an%20element%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20attribute%20Name%20of%20attribute%20to%20ensure%20is%20set.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20value%20of%20the%20attribute.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_ensureAttribute(attribute%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20const%20el%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20this%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!el.hasAttribute(attribute))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._valueToNodeAttribute(el%2C%20value%2C%20attribute)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20PropertiesChanged%20implemention%20to%20serialize%20objects%20as%20JSON.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Property%20value%20to%20serialize.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%20%7C%20undefined%7D%20String%20serialized%20from%20the%20provided%20property%20value.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_serializeValue(value)%20%7B%0A%20%20%20%20%20%20%20%20%2F*%20eslint-disable%20no-fallthrough%20*%2F%0A%20%20%20%20%20%20%20%20switch%20(typeof%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20&#39;object&#39;%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(value%20instanceof%20Date)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20value.toString()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(x)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20&#39;&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20super._serializeValue(value)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Converts%20a%20string%20to%20a%20typed%20JavaScript%20value.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20is%20called%20by%20Polymer%20when%20reading%20HTML%20attribute%20values%20to%0A%20%20%20%20%20%20%20*%20JS%20properties.%20%20Users%20may%20override%20this%20method%20on%20Polymer%20element%0A%20%20%20%20%20%20%20*%20prototypes%20to%20provide%20deserialization%20for%20custom%20%60type%60s.%20%20Note%2C%0A%20%20%20%20%20%20%20*%20the%20%60type%60%20argument%20is%20the%20value%20of%20the%20%60type%60%20field%20provided%20in%20the%0A%20%20%20%20%20%20%20*%20%60properties%60%20configuration%20object%20for%20a%20given%20property%2C%20and%20is%0A%20%20%20%20%20%20%20*%20by%20convention%20the%20constructor%20for%20the%20type%20to%20deserialize.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20value%20Attribute%20value%20to%20deserialize.%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%3D%7D%20type%20Type%20to%20deserialize%20the%20string%20to.%0A%20%20%20%20%20%20%20*%20%40return%20%7B*%7D%20Typed%20value%20deserialized%20from%20the%20provided%20string.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_deserializeValue(value%2C%20type)%20%7B%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20%40type%20%7B*%7D%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20let%20outValue%3B%0A%0A%20%20%20%20%20%20%20%20switch%20(type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20Object%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20outValue%20%3D%20JSON.parse(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(x)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20allow%20non-JSON%20literals%20like%20Strings%20and%20Numbers%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20outValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20case%20Array%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20outValue%20%3D%20JSON.parse(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(x)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20outValue%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.warn(%60Polymer%3A%3AAttributes%3A%20couldn&#39;t%20decode%20Array%20as%20JSON%3A%20%24%7Bvalue%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20case%20Date%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20outValue%20%3D%20isNaN(value)%20%3F%20String(value)%20%3A%20Number(value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20outValue%20%3D%20new%20Date(outValue)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20outValue%20%3D%20super._deserializeValue(value%2C%20type)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20outValue%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F*%20eslint-enable%20no-fallthrough%20*%2F%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20PropertiesChanged%20implementation%20to%20save%20existing%20prototype%0A%20%20%20%20%20%20%20*%20property%20value%20so%20that%20it%20can%20be%20reset.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20the%20property%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20readOnly%20When%20true%2C%20no%20setter%20is%20created%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20When%20calling%20on%20a%20prototype%2C%20any%20overwritten%20values%20are%20saved%20in%0A%20%20%20%20%20%20%20*%20%60__dataProto%60%2C%20and%20it%20is%20up%20to%20the%20subclasser%20to%20decide%20how%2Fwhen%0A%20%20%20%20%20%20%20*%20to%20set%20those%20properties%20back%20into%20the%20accessor.%20%20When%20calling%20on%20an%0A%20%20%20%20%20%20%20*%20instance%2C%20the%20overwritten%20value%20is%20set%20via%20%60_setPendingProperty%60%2C%0A%20%20%20%20%20%20%20*%20and%20the%20user%20should%20call%20%60_invalidateProperties%60%20or%20%60_flushProperties%60%0A%20%20%20%20%20%20%20*%20for%20the%20values%20to%20take%20effect.%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_definePropertyAccessor(property%2C%20readOnly)%20%7B%0A%20%20%20%20%20%20%20%20saveAccessorValue(this%2C%20property)%3B%0A%0A%20%20%20%20%20%20%20%20super._definePropertyAccessor(property%2C%20readOnly)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20true%20if%20this%20library%20created%20an%20accessor%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20an%20accessor%20was%20created%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_hasAccessor(property)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.__dataHasAccessor%20%26%26%20this.__dataHasAccessor%5Bproperty%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20true%20if%20the%20specified%20property%20has%20a%20pending%20change.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20prop%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20property%20has%20a%20pending%20change%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_isPropertyPending(prop)%20%7B%0A%20%20%20%20%20%20%20%20return%20Boolean(this.__dataPending%20%26%26%20prop%20in%20this.__dataPending)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20PropertyAccessors%3B%0A%20%20%7D)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Fmixins%2Fproperty-accessors.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/template-stamp.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20const%20walker%20%3D%20document.createTreeWalker(document%2C%20NodeFilter.SHOW_ALL%2C%20null%2C%20false)%3B%20%2F%2F%201.x%20backwards-compatible%20auto-wrapper%20for%20template%20type%20extensions%0A%20%20%2F%2F%20This%20is%20a%20clear%20layering%20violation%20and%20gives%20favored-nation%20status%20to%0A%20%20%2F%2F%20dom-if%20and%20dom-repeat%20templates.%20%20This%20is%20a%20conceit%20we&#39;re%20choosing%20to%20keep%0A%20%20%2F%2F%20a.)%20to%20ease%201.x%20backwards-compatibility%20due%20to%20loss%20of%20%60is%60%2C%20and%0A%20%20%2F%2F%20b.)%20to%20maintain%20if%2Frepeat%20capability%20in%20parser-constrained%20elements%0A%20%20%2F%2F%20%20%20%20%20(e.g.%20table%2C%20select)%20in%20lieu%20of%20native%20CE%20type%20extensions%20without%0A%20%20%2F%2F%20%20%20%20%20massive%20new%20invention%20in%20this%20space%20(e.g.%20directive%20system)%0A%0A%20%20const%20templateExtensions%20%3D%20%7B%0A%20%20%20%20&#39;dom-if&#39;%3A%20true%2C%0A%20%20%20%20&#39;dom-repeat&#39;%3A%20true%0A%20%20%7D%3B%0A%0A%20%20function%20wrapTemplateExtension(node)%20%7B%0A%20%20%20%20let%20is%20%3D%20node.getAttribute(&#39;is&#39;)%3B%0A%0A%20%20%20%20if%20(is%20%26%26%20templateExtensions%5Bis%5D)%20%7B%0A%20%20%20%20%20%20let%20t%20%3D%20node%3B%0A%20%20%20%20%20%20t.removeAttribute(&#39;is&#39;)%3B%0A%20%20%20%20%20%20node%20%3D%20t.ownerDocument.createElement(is)%3B%0A%20%20%20%20%20%20t.parentNode.replaceChild(node%2C%20t)%3B%0A%20%20%20%20%20%20node.appendChild(t)%3B%0A%0A%20%20%20%20%20%20while%20(t.attributes.length)%20%7B%0A%20%20%20%20%20%20%20%20node.setAttribute(t.attributes%5B0%5D.name%2C%20t.attributes%5B0%5D.value)%3B%0A%20%20%20%20%20%20%20%20t.removeAttribute(t.attributes%5B0%5D.name)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20node%3B%0A%20%20%7D%0A%0A%20%20function%20findTemplateNode(root%2C%20nodeInfo)%20%7B%0A%20%20%20%20%2F%2F%20recursively%20ascend%20tree%20until%20we%20hit%20root%0A%20%20%20%20let%20parent%20%3D%20nodeInfo.parentInfo%20%26%26%20findTemplateNode(root%2C%20nodeInfo.parentInfo)%3B%20%2F%2F%20unwind%20the%20stack%2C%20returning%20the%20indexed%20node%20at%20each%20level%0A%0A%20%20%20%20if%20(parent)%20%7B%0A%20%20%20%20%20%20%2F%2F%20note%3A%20marginally%20faster%20than%20indexing%20via%20childNodes%0A%20%20%20%20%20%20%2F%2F%20(http%3A%2F%2Fjsperf.com%2Fchildnodes-lookup)%0A%20%20%20%20%20%20walker.currentNode%20%3D%20parent%3B%0A%0A%20%20%20%20%20%20for%20(let%20n%20%3D%20walker.firstChild()%2C%20i%20%3D%200%3B%20n%3B%20n%20%3D%20walker.nextSibling())%20%7B%0A%20%20%20%20%20%20%20%20if%20(nodeInfo.parentIndex%20%3D%3D%3D%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20return%20root%3B%0A%20%20%20%20%7D%0A%20%20%7D%20%2F%2F%20construct%20%60%24%60%20map%20(from%20id%20annotations)%0A%0A%0A%20%20function%20applyIdToMap(inst%2C%20map%2C%20node%2C%20nodeInfo)%20%7B%0A%20%20%20%20if%20(nodeInfo.id)%20%7B%0A%20%20%20%20%20%20map%5BnodeInfo.id%5D%20%3D%20node%3B%0A%20%20%20%20%7D%0A%20%20%7D%20%2F%2F%20install%20event%20listeners%20(from%20event%20annotations)%0A%0A%0A%20%20function%20applyEventListener(inst%2C%20node%2C%20nodeInfo)%20%7B%0A%20%20%20%20if%20(nodeInfo.events%20%26%26%20nodeInfo.events.length)%20%7B%0A%20%20%20%20%20%20for%20(let%20j%20%3D%200%2C%20e%24%20%3D%20nodeInfo.events%2C%20e%3B%20j%20%3C%20e%24.length%20%26%26%20(e%20%3D%20e%24%5Bj%5D)%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20inst._addMethodEventListenerToNode(node%2C%20e.name%2C%20e.value%2C%20inst)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%20%2F%2F%20push%20configuration%20references%20at%20configure%20time%0A%0A%0A%20%20function%20applyTemplateContent(inst%2C%20node%2C%20nodeInfo)%20%7B%0A%20%20%20%20if%20(nodeInfo.templateInfo)%20%7B%0A%20%20%20%20%20%20node._templateInfo%20%3D%20nodeInfo.templateInfo%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20createNodeEventHandler(context%2C%20eventName%2C%20methodName)%20%7B%0A%20%20%20%20%2F%2F%20Instances%20can%20optionally%20have%20a%20_methodHost%20which%20allows%20redirecting%20where%0A%20%20%20%20%2F%2F%20to%20find%20methods.%20Currently%20used%20by%20%60templatize%60.%0A%20%20%20%20context%20%3D%20context._methodHost%20%7C%7C%20context%3B%0A%0A%20%20%20%20let%20handler%20%3D%20function%20(e)%20%7B%0A%20%20%20%20%20%20if%20(context%5BmethodName%5D)%20%7B%0A%20%20%20%20%20%20%20%20context%5BmethodName%5D(e%2C%20e.detail)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20console.warn(&#39;listener%20method%20%60&#39;%20%2B%20methodName%20%2B%20&#39;%60%20not%20defined&#39;)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20return%20handler%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Element%20mixin%20that%20provides%20basic%20template%20parsing%20and%20stamping%2C%20including%0A%20%20%20*%20the%20following%20template-related%20features%20for%20stamped%20templates%3A%0A%20%20%20*%0A%20%20%20*%20-%20Declarative%20event%20listeners%20(%60on-eventname%3D%22listener%22%60)%0A%20%20%20*%20-%20Map%20of%20node%20id&#39;s%20to%20stamped%20node%20instances%20(%60this.%24.id%60)%0A%20%20%20*%20-%20Nested%20template%20content%20caching%2Fremoval%20and%20re-installation%20(performance%0A%20%20%20*%20%20%20optimization)%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Element%20class%20mixin%20that%20provides%20basic%20template%20parsing%20and%20stamping%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.TemplateStamp%20%3D%20Polymer.dedupingMixin(superClass%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_TemplateStamp%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20class%20TemplateStamp%20extends%20superClass%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Scans%20a%20template%20to%20produce%20template%20metadata.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Template-specific%20metadata%20are%20stored%20in%20the%20object%20returned%2C%20and%20node-%0A%20%20%20%20%20%20%20*%20specific%20metadata%20are%20stored%20in%20objects%20in%20its%20flattened%20%60nodeInfoList%60%0A%20%20%20%20%20%20%20*%20array.%20%20Only%20nodes%20in%20the%20template%20that%20were%20parsed%20as%20nodes%20of%0A%20%20%20%20%20%20%20*%20interest%20contain%20an%20object%20in%20%60nodeInfoList%60.%20%20Each%20%60nodeInfo%60%20object%0A%20%20%20%20%20%20%20*%20contains%20an%20%60index%60%20(%60childNodes%60%20index%20in%20parent)%20and%20optionally%0A%20%20%20%20%20%20%20*%20%60parent%60%2C%20which%20points%20to%20node%20info%20of%20its%20parent%20(including%20its%20index).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20template%20metadata%20object%20returned%20from%20this%20method%20has%20the%20following%0A%20%20%20%20%20%20%20*%20structure%20(many%20fields%20optional)%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%60%60%60js%0A%20%20%20%20%20%20%20*%20%20%20%7B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%2F%2F%20Flattened%20list%20of%20node%20metadata%20(for%20nodes%20that%20generated%20metadata)%0A%20%20%20%20%20%20%20*%20%20%20%20%20nodeInfoList%3A%20%5B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%2F%2F%20%60id%60%20attribute%20for%20any%20nodes%20with%20id&#39;s%20for%20generating%20%60%24%60%20map%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20id%3A%20%7Bstring%7D%2C%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%2F%2F%20%60on-event%3D%22handler%22%60%20metadata%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20events%3A%20%5B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%7Bstring%7D%2C%20%20%20%2F%2F%20event%20name%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%7Bstring%7D%2C%20%20%2F%2F%20handler%20method%20name%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20...%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%2F%2F%20Notes%20when%20the%20template%20contained%20a%20%60%3Cslot%3E%60%20for%20shady%20DOM%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%2F%2F%20optimization%20purposes%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20hasInsertionPoint%3A%20%7Bboolean%7D%2C%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%2F%2F%20For%20nested%20%60%3Ctemplate%3E%60%60%20nodes%2C%20nested%20template%20metadata%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20templateInfo%3A%20%7Bobject%7D%2C%20%2F%2F%20nested%20template%20metadata%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%2F%2F%20Metadata%20to%20allow%20efficient%20retrieval%20of%20instanced%20node%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%2F%2F%20corresponding%20to%20this%20metadata%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20parentInfo%3A%20%7Bnumber%7D%2C%20%20%20%2F%2F%20reference%20to%20parent%20nodeInfo%3E%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20parentIndex%3A%20%7Bnumber%7D%2C%20%20%2F%2F%20index%20in%20parent&#39;s%20%60childNodes%60%20collection%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20infoIndex%3A%20%7Bnumber%7D%2C%20%20%20%20%2F%2F%20index%20of%20this%20%60nodeInfo%60%20in%20%60templateInfo.nodeInfoList%60%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20...%0A%20%20%20%20%20%20%20*%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20*%20%20%20%20%20%2F%2F%20When%20true%2C%20the%20template%20had%20the%20%60strip-whitespace%60%20attribute%0A%20%20%20%20%20%20%20*%20%20%20%20%20%2F%2F%20or%20was%20nested%20in%20a%20template%20with%20that%20setting%0A%20%20%20%20%20%20%20*%20%20%20%20%20stripWhitespace%3A%20%7Bboolean%7D%2C%0A%20%20%20%20%20%20%20*%20%20%20%20%20%2F%2F%20For%20nested%20templates%2C%20nested%20template%20content%20is%20moved%20into%0A%20%20%20%20%20%20%20*%20%20%20%20%20%2F%2F%20a%20document%20fragment%20stored%20here%3B%20this%20is%20an%20optimization%20to%0A%20%20%20%20%20%20%20*%20%20%20%20%20%2F%2F%20avoid%20the%20cost%20of%20nested%20template%20cloning%0A%20%20%20%20%20%20%20*%20%20%20%20%20content%3A%20%7BDocumentFragment%7D%0A%20%20%20%20%20%20%20*%20%20%20%7D%0A%20%20%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20kicks%20off%20a%20recursive%20treewalk%20as%20follows%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20%20%20*%20%20%20%20_parseTemplate%20%3C---------------------%2B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20_parseTemplateContent%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20_parseTemplateNode%20%20%3C------------%7C--%2B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%20_parseTemplateNestedTemplate%20--%2B%20%20%7C%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%20_parseTemplateChildNodes%20---------%2B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%20_parseTemplateNodeAttributes%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%20_parseTemplateNodeAttribute%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%60%60%60%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20These%20methods%20may%20be%20overridden%20to%20add%20custom%20metadata%20about%20templates%0A%20%20%20%20%20%20%20*%20to%20either%20%60templateInfo%60%20or%20%60nodeInfo%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%20that%20this%20method%20may%20be%20destructive%20to%20the%20template%2C%20in%20that%0A%20%20%20%20%20%20%20*%20e.g.%20event%20annotations%20may%20be%20removed%20after%20being%20noted%20in%20the%0A%20%20%20%20%20%20%20*%20template%20metadata.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20to%20parse%0A%20%20%20%20%20%20%20*%20%40param%20%7BTemplateInfo%3D%7D%20outerTemplateInfo%20Template%20metadata%20from%20the%20outer%0A%20%20%20%20%20%20%20*%20%20%20template%2C%20for%20parsing%20nested%20templates%0A%20%20%20%20%20%20%20*%20%40return%20%7B!TemplateInfo%7D%20Parsed%20template%20metadata%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20static%20_parseTemplate(template%2C%20outerTemplateInfo)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20since%20a%20template%20may%20be%20re-used%2C%20memo-ize%20metadata%0A%20%20%20%20%20%20%20%20if%20(!template._templateInfo)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20templateInfo%20%3D%20template._templateInfo%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20templateInfo.nodeInfoList%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20templateInfo.stripWhiteSpace%20%3D%20outerTemplateInfo%20%26%26%20outerTemplateInfo.stripWhiteSpace%20%7C%7C%20template.hasAttribute(&#39;strip-whitespace&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this._parseTemplateContent(template%2C%20templateInfo%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20template._templateInfo%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20_parseTemplateContent(template%2C%20templateInfo%2C%20nodeInfo)%20%7B%0A%20%20%20%20%20%20%20%20return%20this._parseTemplateNode(template.content%2C%20templateInfo%2C%20nodeInfo)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Parses%20template%20node%20and%20adds%20template%20and%20node%20metadata%20based%20on%0A%20%20%20%20%20%20%20*%20the%20current%20node%2C%20and%20its%20%60childNodes%60%20and%20%60attributes%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20may%20be%20overridden%20to%20add%20custom%20node%20or%20template%20specific%0A%20%20%20%20%20%20%20*%20metadata%20based%20on%20this%20node.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BNode%7D%20node%20Node%20to%20parse%0A%20%20%20%20%20%20%20*%20%40param%20%7B!TemplateInfo%7D%20templateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20%20%20%20%20*%20%40param%20%7B!NodeInfo%7D%20nodeInfo%20Node%20metadata%20for%20current%20template.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20%60true%60%20if%20the%20visited%20node%20added%20node-specific%0A%20%20%20%20%20%20%20*%20%20%20metadata%20to%20%60nodeInfo%60%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseTemplateNode(node%2C%20templateInfo%2C%20nodeInfo)%20%7B%0A%20%20%20%20%20%20%20%20let%20noted%3B%0A%20%20%20%20%20%20%20%20let%20element%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%3B%0A%0A%20%20%20%20%20%20%20%20if%20(element.localName%20%3D%3D%20&#39;template&#39;%20%26%26%20!element.hasAttribute(&#39;preserve-content&#39;))%20%7B%0A%20%20%20%20%20%20%20%20%20%20noted%20%3D%20this._parseTemplateNestedTemplate(element%2C%20templateInfo%2C%20nodeInfo)%20%7C%7C%20noted%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(element.localName%20%3D%3D%3D%20&#39;slot&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20ShadyDom%20optimization%2C%20indicating%20there%20is%20an%20insertion%20point%0A%20%20%20%20%20%20%20%20%20%20templateInfo.hasInsertionPoint%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20walker.currentNode%20%3D%20element%3B%0A%0A%20%20%20%20%20%20%20%20if%20(walker.firstChild())%20%7B%0A%20%20%20%20%20%20%20%20%20%20noted%20%3D%20this._parseTemplateChildNodes(element%2C%20templateInfo%2C%20nodeInfo)%20%7C%7C%20noted%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(element.hasAttributes%20%26%26%20element.hasAttributes())%20%7B%0A%20%20%20%20%20%20%20%20%20%20noted%20%3D%20this._parseTemplateNodeAttributes(element%2C%20templateInfo%2C%20nodeInfo)%20%7C%7C%20noted%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20noted%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Parses%20template%20child%20nodes%20for%20the%20given%20root%20node.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20also%20wraps%20whitelisted%20legacy%20template%20extensions%0A%20%20%20%20%20%20%20*%20(%60is%3D%22dom-if%22%60%20and%20%60is%3D%22dom-repeat%22%60)%20with%20their%20equivalent%20element%0A%20%20%20%20%20%20%20*%20wrappers%2C%20collapses%20text%20nodes%2C%20and%20strips%20whitespace%20from%20the%20template%0A%20%20%20%20%20%20%20*%20if%20the%20%60templateInfo.stripWhitespace%60%20setting%20was%20provided.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BNode%7D%20root%20Root%20node%20whose%20%60childNodes%60%20will%20be%20parsed%0A%20%20%20%20%20%20%20*%20%40param%20%7B!TemplateInfo%7D%20templateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20%20%20%20%20*%20%40param%20%7B!NodeInfo%7D%20nodeInfo%20Node%20metadata%20for%20current%20template.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseTemplateChildNodes(root%2C%20templateInfo%2C%20nodeInfo)%20%7B%0A%20%20%20%20%20%20%20%20if%20(root.localName%20%3D%3D%3D%20&#39;script&#39;%20%7C%7C%20root.localName%20%3D%3D%3D%20&#39;style&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20walker.currentNode%20%3D%20root%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20node%20%3D%20walker.firstChild()%2C%20parentIndex%20%3D%200%2C%20next%3B%20node%3B%20node%20%3D%20next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wrap%20templates%0A%20%20%20%20%20%20%20%20%20%20if%20(node.localName%20%3D%3D%20&#39;template&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%20wrapTemplateExtension(node)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20collapse%20adjacent%20textNodes%3A%20fixes%20an%20IE%20issue%20that%20can%20cause%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20text%20nodes%20to%20be%20inexplicably%20split%20%3D(%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20note%20that%20root.normalize()%20should%20work%20but%20does%20not%20so%20we%20do%20this%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20manually.%0A%0A%0A%20%20%20%20%20%20%20%20%20%20walker.currentNode%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20next%20%3D%20walker.nextSibling()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(node.nodeType%20%3D%3D%3D%20Node.TEXT_NODE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F**%20Node%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20n%20%3D%20next%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20(n%20%26%26%20n.nodeType%20%3D%3D%3D%20Node.TEXT_NODE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20node.textContent%20%2B%3D%20n.textContent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20next%20%3D%20walker.nextSibling()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20root.removeChild(n)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20optionally%20strip%20whitespace%0A%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(templateInfo.stripWhiteSpace%20%26%26%20!node.textContent.trim())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20root.removeChild(node)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20let%20childInfo%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parentIndex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20parentInfo%3A%20nodeInfo%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(this._parseTemplateNode(node%2C%20templateInfo%2C%20childInfo))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20childInfo.infoIndex%20%3D%20templateInfo.nodeInfoList.push(%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!NodeInfo%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20childInfo)%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Increment%20if%20not%20removed%0A%0A%0A%20%20%20%20%20%20%20%20%20%20walker.currentNode%20%3D%20node%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(walker.parentNode())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parentIndex%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Parses%20template%20content%20for%20the%20given%20nested%20%60%3Ctemplate%3E%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Nested%20template%20info%20is%20stored%20as%20%60templateInfo%60%20in%20the%20current%20node&#39;s%0A%20%20%20%20%20%20%20*%20%60nodeInfo%60.%20%60template.content%60%20is%20removed%20and%20stored%20in%20%60templateInfo%60.%0A%20%20%20%20%20%20%20*%20It%20will%20then%20be%20the%20responsibility%20of%20the%20host%20to%20set%20it%20back%20to%20the%0A%20%20%20%20%20%20%20*%20template%20and%20for%20users%20stamping%20nested%20templates%20to%20use%20the%0A%20%20%20%20%20%20%20*%20%60_contentForTemplate%60%20method%20to%20retrieve%20the%20content%20for%20this%20template%0A%20%20%20%20%20%20%20*%20(an%20optimization%20to%20avoid%20the%20cost%20of%20cloning%20nested%20template%20content).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BHTMLTemplateElement%7D%20node%20Node%20to%20parse%20(a%20%3Ctemplate%3E)%0A%20%20%20%20%20%20%20*%20%40param%20%7BTemplateInfo%7D%20outerTemplateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20%20%20%20%20*%20%20%20that%20includes%20the%20template%20%60node%60%0A%20%20%20%20%20%20%20*%20%40param%20%7B!NodeInfo%7D%20nodeInfo%20Node%20metadata%20for%20current%20template.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20%60true%60%20if%20the%20visited%20node%20added%20node-specific%0A%20%20%20%20%20%20%20*%20%20%20metadata%20to%20%60nodeInfo%60%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseTemplateNestedTemplate(node%2C%20outerTemplateInfo%2C%20nodeInfo)%20%7B%0A%20%20%20%20%20%20%20%20let%20templateInfo%20%3D%20this._parseTemplate(node%2C%20outerTemplateInfo)%3B%0A%0A%20%20%20%20%20%20%20%20let%20content%20%3D%20templateInfo.content%20%3D%20node.content.ownerDocument.createDocumentFragment()%3B%0A%20%20%20%20%20%20%20%20content.appendChild(node.content)%3B%0A%20%20%20%20%20%20%20%20nodeInfo.templateInfo%20%3D%20templateInfo%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Parses%20template%20node%20attributes%20and%20adds%20node%20metadata%20to%20%60nodeInfo%60%0A%20%20%20%20%20%20%20*%20for%20nodes%20of%20interest.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%7D%20node%20Node%20to%20parse%0A%20%20%20%20%20%20%20*%20%40param%20%7BTemplateInfo%7D%20templateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20%20%20%20%20*%20%40param%20%7BNodeInfo%7D%20nodeInfo%20Node%20metadata%20for%20current%20template.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20%60true%60%20if%20the%20visited%20node%20added%20node-specific%0A%20%20%20%20%20%20%20*%20%20%20metadata%20to%20%60nodeInfo%60%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseTemplateNodeAttributes(node%2C%20templateInfo%2C%20nodeInfo)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Make%20copy%20of%20original%20attribute%20list%2C%20since%20the%20order%20may%20change%0A%20%20%20%20%20%20%20%20%2F%2F%20as%20attributes%20are%20added%20and%20removed%0A%20%20%20%20%20%20%20%20let%20noted%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20let%20attrs%20%3D%20Array.from(node.attributes)%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20attrs.length%20-%201%2C%20a%3B%20a%20%3D%20attrs%5Bi%5D%3B%20i--)%20%7B%0A%20%20%20%20%20%20%20%20%20%20noted%20%3D%20this._parseTemplateNodeAttribute(node%2C%20templateInfo%2C%20nodeInfo%2C%20a.name%2C%20a.value)%20%7C%7C%20noted%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20noted%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Parses%20a%20single%20template%20node%20attribute%20and%20adds%20node%20metadata%20to%0A%20%20%20%20%20%20%20*%20%60nodeInfo%60%20for%20attributes%20of%20interest.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20implementation%20adds%20metadata%20for%20%60on-event%3D%22handler%22%60%20attributes%0A%20%20%20%20%20%20%20*%20and%20%60id%60%20attributes.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%7D%20node%20Node%20to%20parse%0A%20%20%20%20%20%20%20*%20%40param%20%7B!TemplateInfo%7D%20templateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20%20%20%20%20*%20%40param%20%7B!NodeInfo%7D%20nodeInfo%20Node%20metadata%20for%20current%20template.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Attribute%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20value%20Attribute%20value%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20%60true%60%20if%20the%20visited%20node%20added%20node-specific%0A%20%20%20%20%20%20%20*%20%20%20metadata%20to%20%60nodeInfo%60%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseTemplateNodeAttribute(node%2C%20templateInfo%2C%20nodeInfo%2C%20name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20events%20(on-*)%0A%20%20%20%20%20%20%20%20if%20(name.slice(0%2C%203)%20%3D%3D%3D%20&#39;on-&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node.removeAttribute(name)%3B%0A%20%20%20%20%20%20%20%20%20%20nodeInfo.events%20%3D%20nodeInfo.events%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20nodeInfo.events.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20name.slice(3)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20static%20id%0A%20%20%20%20%20%20%20%20else%20if%20(name%20%3D%3D%3D%20&#39;id&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20nodeInfo.id%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20the%20%60content%60%20document%20fragment%20for%20a%20given%20template.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20For%20nested%20templates%2C%20Polymer%20performs%20an%20optimization%20to%20cache%20nested%0A%20%20%20%20%20%20%20*%20template%20content%20to%20avoid%20the%20cost%20of%20cloning%20deeply%20nested%20templates.%0A%20%20%20%20%20%20%20*%20This%20method%20retrieves%20the%20cached%20content%20for%20a%20given%20template.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BHTMLTemplateElement%7D%20template%20Template%20to%20retrieve%20%60content%60%20for%0A%20%20%20%20%20%20%20*%20%40return%20%7BDocumentFragment%7D%20Content%20fragment%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_contentForTemplate(template)%20%7B%0A%20%20%20%20%20%20%20%20let%20templateInfo%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLTemplateElementWithInfo%7D%20*%2F%0A%20%20%20%20%20%20%20%20template._templateInfo%3B%0A%20%20%20%20%20%20%20%20return%20templateInfo%20%26%26%20templateInfo.content%20%7C%7C%20template.content%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Clones%20the%20provided%20template%20content%20and%20returns%20a%20document%20fragment%0A%20%20%20%20%20%20%20*%20containing%20the%20cloned%20dom.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20template%20is%20parsed%20(once%20and%20memoized)%20using%20this%20library&#39;s%0A%20%20%20%20%20%20%20*%20template%20parsing%20features%2C%20and%20provides%20the%20following%20value-added%0A%20%20%20%20%20%20%20*%20features%3A%0A%20%20%20%20%20%20%20*%20*%20Adds%20declarative%20event%20listeners%20for%20%60on-event%3D%22handler%22%60%20attributes%0A%20%20%20%20%20%20%20*%20*%20Generates%20an%20%22id%20map%22%20for%20all%20nodes%20with%20id&#39;s%20under%20%60%24%60%20on%20returned%0A%20%20%20%20%20%20%20*%20%20%20document%20fragment%0A%20%20%20%20%20%20%20*%20*%20Passes%20template%20info%20including%20%60content%60%20back%20to%20templates%20as%0A%20%20%20%20%20%20%20*%20%20%20%60_templateInfo%60%20(a%20performance%20optimization%20to%20avoid%20deep%20template%0A%20%20%20%20%20%20%20*%20%20%20cloning)%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%20that%20the%20memoized%20template%20parsing%20process%20is%20destructive%20to%20the%0A%20%20%20%20%20%20%20*%20template%3A%20attributes%20for%20bindings%20and%20declarative%20event%20listeners%20are%0A%20%20%20%20%20%20%20*%20removed%20after%20being%20noted%20in%20notes%2C%20and%20any%20nested%20%60%3Ctemplate%3E.content%60%0A%20%20%20%20%20%20%20*%20is%20removed%20and%20stored%20in%20notes%20as%20well.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20to%20stamp%0A%20%20%20%20%20%20%20*%20%40return%20%7B!StampedTemplate%7D%20Cloned%20template%20content%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_stampTemplate(template)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Polyfill%20support%3A%20bootstrap%20the%20template%20if%20it%20has%20not%20already%20been%0A%20%20%20%20%20%20%20%20if%20(template%20%26%26%20!template.content%20%26%26%20window.HTMLTemplateElement%20%26%26%20HTMLTemplateElement.decorate)%20%7B%0A%20%20%20%20%20%20%20%20%20%20HTMLTemplateElement.decorate(template)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20let%20templateInfo%20%3D%20this.constructor._parseTemplate(template)%3B%0A%0A%20%20%20%20%20%20%20%20let%20nodeInfo%20%3D%20templateInfo.nodeInfoList%3B%0A%20%20%20%20%20%20%20%20let%20content%20%3D%20templateInfo.content%20%7C%7C%20template.content%3B%0A%20%20%20%20%20%20%20%20let%20dom%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BDocumentFragment%7D%20*%2F%0A%20%20%20%20%20%20%20%20document.importNode(content%2C%20true)%3B%20%2F%2F%20NOTE%3A%20ShadyDom%20optimization%20indicating%20there%20is%20an%20insertion%20point%0A%0A%20%20%20%20%20%20%20%20dom.__noInsertionPoint%20%3D%20!templateInfo.hasInsertionPoint%3B%0A%20%20%20%20%20%20%20%20let%20nodes%20%3D%20dom.nodeList%20%3D%20new%20Array(nodeInfo.length)%3B%0A%20%20%20%20%20%20%20%20dom.%24%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20l%20%3D%20nodeInfo.length%2C%20info%3B%20i%20%3C%20l%20%26%26%20(info%20%3D%20nodeInfo%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20node%20%3D%20nodes%5Bi%5D%20%3D%20findTemplateNode(dom%2C%20info)%3B%0A%20%20%20%20%20%20%20%20%20%20applyIdToMap(this%2C%20dom.%24%2C%20node%2C%20info)%3B%0A%20%20%20%20%20%20%20%20%20%20applyTemplateContent(this%2C%20node%2C%20info)%3B%0A%20%20%20%20%20%20%20%20%20%20applyEventListener(this%2C%20node%2C%20info)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20dom%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!StampedTemplate%7D%20*%2F%0A%20%20%20%20%20%20%20%20dom%3B%20%2F%2F%20eslint-disable-line%20no-self-assign%0A%0A%20%20%20%20%20%20%20%20return%20dom%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Adds%20an%20event%20listener%20by%20method%20name%20for%20the%20event%20provided.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20generates%20a%20handler%20function%20that%20looks%20up%20the%20method%0A%20%20%20%20%20%20%20*%20name%20at%20handling%20time.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20add%20listener%20on%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20Name%20of%20event%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20methodName%20Name%20of%20method%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%3D%7D%20context%20Context%20the%20method%20will%20be%20called%20on%20(defaults%0A%20%20%20%20%20%20%20*%20%20%20to%20%60node%60)%0A%20%20%20%20%20%20%20*%20%40return%20%7BFunction%7D%20Generated%20handler%20function%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_addMethodEventListenerToNode(node%2C%20eventName%2C%20methodName%2C%20context)%20%7B%0A%20%20%20%20%20%20%20%20context%20%3D%20context%20%7C%7C%20node%3B%0A%20%20%20%20%20%20%20%20let%20handler%20%3D%20createNodeEventHandler(context%2C%20eventName%2C%20methodName)%3B%0A%0A%20%20%20%20%20%20%20%20this._addEventListenerToNode(node%2C%20eventName%2C%20handler)%3B%0A%0A%20%20%20%20%20%20%20%20return%20handler%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Override%20point%20for%20adding%20custom%20or%20simulated%20event%20handling.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20add%20event%20listener%20to%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20Name%20of%20event%0A%20%20%20%20%20%20%20*%20%40param%20%7Bfunction(!Event)%3Avoid%7D%20handler%20Listener%20function%20to%20add%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_addEventListenerToNode(node%2C%20eventName%2C%20handler)%20%7B%0A%20%20%20%20%20%20%20%20node.addEventListener(eventName%2C%20handler)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Override%20point%20for%20adding%20custom%20or%20simulated%20event%20handling.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20remove%20event%20listener%20from%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20Name%20of%20event%0A%20%20%20%20%20%20%20*%20%40param%20%7Bfunction(!Event)%3Avoid%7D%20handler%20Listener%20function%20to%20remove%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_removeEventListenerFromNode(node%2C%20eventName%2C%20handler)%20%7B%0A%20%20%20%20%20%20%20%20node.removeEventListener(eventName%2C%20handler)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20TemplateStamp%3B%0A%20%20%7D)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Fmixins%2Ftemplate-stamp.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%20%40const%20%7BObject%7D%20*%2F%0A%0A%20%20const%20CaseMap%20%3D%20Polymer.CaseMap%3B%20%2F%2F%20Monotonically%20increasing%20unique%20ID%20used%20for%20de-duping%20effects%20triggered%0A%20%20%2F%2F%20from%20multiple%20properties%20in%20the%20same%20turn%0A%0A%20%20let%20dedupeId%20%3D%200%3B%0A%20%20%2F**%0A%20%20%20*%20Property%20effect%20types%3B%20effects%20are%20stored%20on%20the%20prototype%20using%20these%20keys%0A%20%20%20*%20%40enum%20%7Bstring%7D%0A%20%20%20*%2F%0A%0A%20%20const%20TYPES%20%3D%20%7B%0A%20%20%20%20COMPUTE%3A%20&#39;__computeEffects&#39;%2C%0A%20%20%20%20REFLECT%3A%20&#39;__reflectEffects&#39;%2C%0A%20%20%20%20NOTIFY%3A%20&#39;__notifyEffects&#39;%2C%0A%20%20%20%20PROPAGATE%3A%20&#39;__propagateEffects&#39;%2C%0A%20%20%20%20OBSERVE%3A%20&#39;__observeEffects&#39;%2C%0A%20%20%20%20READ_ONLY%3A%20&#39;__readOnly&#39;%0A%20%20%7D%3B%0A%20%20%2F**%20%40const%20%7BRegExp%7D%20*%2F%0A%0A%20%20const%20capitalAttributeRegex%20%3D%20%2F%5BA-Z%5D%2F%3B%0A%20%20%2F**%0A%20%20%20*%20%40typedef%20%7B%7B%0A%20%20%20*%20name%3A%20(string%20%7C%20undefined)%2C%0A%20%20%20*%20structured%3A%20(boolean%20%7C%20undefined)%2C%0A%20%20%20*%20wildcard%3A%20(boolean%20%7C%20undefined)%0A%20%20%20*%20%7D%7D%0A%20%20%20*%2F%0A%0A%20%20let%20DataTrigger%3B%20%2F%2Feslint-disable-line%20no-unused-vars%0A%0A%20%20%2F**%0A%20%20%20*%20%40typedef%20%7B%7B%0A%20%20%20*%20info%3A%20%3F%2C%0A%20%20%20*%20trigger%3A%20(!DataTrigger%20%7C%20undefined)%2C%0A%20%20%20*%20fn%3A%20(!Function%20%7C%20undefined)%0A%20%20%20*%20%7D%7D%0A%20%20%20*%2F%0A%0A%20%20let%20DataEffect%3B%20%2F%2Feslint-disable-line%20no-unused-vars%0A%0A%20%20let%20PropertyEffectsType%3B%20%2F%2Feslint-disable-line%20no-unused-vars%0A%0A%20%20%2F**%0A%20%20%20*%20Ensures%20that%20the%20model%20has%20an%20own-property%20map%20of%20effects%20for%20the%20given%20type.%0A%20%20%20*%20The%20model%20may%20be%20a%20prototype%20or%20an%20instance.%0A%20%20%20*%0A%20%20%20*%20Property%20effects%20are%20stored%20as%20arrays%20of%20effects%20by%20property%20in%20a%20map%2C%0A%20%20%20*%20by%20named%20type%20on%20the%20model.%20e.g.%0A%20%20%20*%0A%20%20%20*%20%20%20__computeEffects%3A%20%7B%0A%20%20%20*%20%20%20%20%20foo%3A%20%5B%20...%20%5D%2C%0A%20%20%20*%20%20%20%20%20bar%3A%20%5B%20...%20%5D%0A%20%20%20*%20%20%20%7D%0A%20%20%20*%0A%20%20%20*%20If%20the%20model%20does%20not%20yet%20have%20an%20effect%20map%20for%20the%20type%2C%20one%20is%20created%0A%20%20%20*%20and%20returned.%20%20If%20it%20does%2C%20but%20it%20is%20not%20an%20own%20property%20(i.e.%20the%0A%20%20%20*%20prototype%20had%20effects)%2C%20the%20the%20map%20is%20deeply%20cloned%20and%20the%20copy%20is%0A%20%20%20*%20set%20on%20the%20model%20and%20returned%2C%20ready%20for%20new%20effects%20to%20be%20added.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BObject%7D%20model%20Prototype%20or%20instance%0A%20%20%20*%20%40param%20%7Bstring%7D%20type%20Property%20effect%20type%0A%20%20%20*%20%40return%20%7BObject%7D%20The%20own-property%20map%20of%20effects%20for%20the%20given%20type%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20function%20ensureOwnEffectMap(model%2C%20type)%20%7B%0A%20%20%20%20let%20effects%20%3D%20model%5Btype%5D%3B%0A%0A%20%20%20%20if%20(!effects)%20%7B%0A%20%20%20%20%20%20effects%20%3D%20model%5Btype%5D%20%3D%20%7B%7D%3B%0A%20%20%20%20%7D%20else%20if%20(!model.hasOwnProperty(type))%20%7B%0A%20%20%20%20%20%20effects%20%3D%20model%5Btype%5D%20%3D%20Object.create(model%5Btype%5D)%3B%0A%0A%20%20%20%20%20%20for%20(let%20p%20in%20effects)%20%7B%0A%20%20%20%20%20%20%20%20let%20protoFx%20%3D%20effects%5Bp%5D%3B%0A%20%20%20%20%20%20%20%20let%20instFx%20%3D%20effects%5Bp%5D%20%3D%20Array(protoFx.length)%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20protoFx.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20instFx%5Bi%5D%20%3D%20protoFx%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20effects%3B%0A%20%20%7D%20%2F%2F%20--%20effects%20----------------------------------------------%0A%0A%20%20%2F**%0A%20%20%20*%20Runs%20all%20effects%20of%20a%20given%20type%20for%20the%20given%20set%20of%20property%20changes%0A%20%20%20*%20on%20an%20instance.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20with%20effects%20to%20run%0A%20%20%20*%20%40param%20%7BObject%7D%20effects%20Object%20map%20of%20property-to-Array%20of%20effects%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20*%20%40param%20%7BObject%3D%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20*%20%40param%20%7Bboolean%3D%7D%20hasPaths%20True%20with%20%60props%60%20contains%20one%20or%20more%20paths%0A%20%20%20*%20%40param%20%7B*%3D%7D%20extraArgs%20Additional%20metadata%20to%20pass%20to%20effect%20function%0A%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20an%20effect%20ran%20for%20this%20property%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runEffects(inst%2C%20effects%2C%20props%2C%20oldProps%2C%20hasPaths%2C%20extraArgs)%20%7B%0A%20%20%20%20if%20(effects)%20%7B%0A%20%20%20%20%20%20let%20ran%20%3D%20false%3B%0A%20%20%20%20%20%20let%20id%20%3D%20dedupeId%2B%2B%3B%0A%0A%20%20%20%20%20%20for%20(let%20prop%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20if%20(runEffectsForProperty(inst%2C%20effects%2C%20id%2C%20prop%2C%20props%2C%20oldProps%2C%20hasPaths%2C%20extraArgs))%20%7B%0A%20%20%20%20%20%20%20%20%20%20ran%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20ran%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20false%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Runs%20a%20list%20of%20effects%20for%20a%20given%20property.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20with%20effects%20to%20run%0A%20%20%20*%20%40param%20%7BObject%7D%20effects%20Object%20map%20of%20property-to-Array%20of%20effects%0A%20%20%20*%20%40param%20%7Bnumber%7D%20dedupeId%20Counter%20used%20for%20de-duping%20effects%0A%20%20%20*%20%40param%20%7Bstring%7D%20prop%20Name%20of%20changed%20property%0A%20%20%20*%20%40param%20%7B*%7D%20props%20Changed%20properties%0A%20%20%20*%20%40param%20%7B*%7D%20oldProps%20Old%20properties%0A%20%20%20*%20%40param%20%7Bboolean%3D%7D%20hasPaths%20True%20with%20%60props%60%20contains%20one%20or%20more%20paths%0A%20%20%20*%20%40param%20%7B*%3D%7D%20extraArgs%20Additional%20metadata%20to%20pass%20to%20effect%20function%0A%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20an%20effect%20ran%20for%20this%20property%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runEffectsForProperty(inst%2C%20effects%2C%20dedupeId%2C%20prop%2C%20props%2C%20oldProps%2C%20hasPaths%2C%20extraArgs)%20%7B%0A%20%20%20%20let%20ran%20%3D%20false%3B%0A%20%20%20%20let%20rootProperty%20%3D%20hasPaths%20%3F%20Polymer.Path.root(prop)%20%3A%20prop%3B%0A%20%20%20%20let%20fxs%20%3D%20effects%5BrootProperty%5D%3B%0A%0A%20%20%20%20if%20(fxs)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20l%20%3D%20fxs.length%2C%20fx%3B%20i%20%3C%20l%20%26%26%20(fx%20%3D%20fxs%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20((!fx.info%20%7C%7C%20fx.info.lastRun%20!%3D%3D%20dedupeId)%20%26%26%20(!hasPaths%20%7C%7C%20pathMatchesTrigger(prop%2C%20fx.trigger)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(fx.info)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fx.info.lastRun%20%3D%20dedupeId%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20fx.fn(inst%2C%20prop%2C%20props%2C%20oldProps%2C%20fx.info%2C%20hasPaths%2C%20extraArgs)%3B%0A%20%20%20%20%20%20%20%20%20%20ran%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20ran%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Determines%20whether%20a%20property%2Fpath%20that%20has%20changed%20matches%20the%20trigger%0A%20%20%20*%20criteria%20for%20an%20effect.%20%20A%20trigger%20is%20a%20descriptor%20with%20the%20following%0A%20%20%20*%20structure%2C%20which%20matches%20the%20descriptors%20returned%20from%20%60parseArg%60.%0A%20%20%20*%20e.g.%20for%20%60foo.bar.*%60%3A%0A%20%20%20*%20%60%60%60%0A%20%20%20*%20trigger%3A%20%7B%0A%20%20%20*%20%20%20name%3A%20&#39;a.b&#39;%2C%0A%20%20%20*%20%20%20structured%3A%20true%2C%0A%20%20%20*%20%20%20wildcard%3A%20true%0A%20%20%20*%20%7D%0A%20%20%20*%20%60%60%60%0A%20%20%20*%20If%20no%20trigger%20is%20given%2C%20the%20path%20is%20deemed%20to%20match.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20or%20property%20that%20changed%0A%20%20%20*%20%40param%20%7BDataTrigger%7D%20trigger%20Descriptor%0A%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20path%20matched%20the%20trigger%0A%20%20%20*%2F%0A%0A%0A%20%20function%20pathMatchesTrigger(path%2C%20trigger)%20%7B%0A%20%20%20%20if%20(trigger)%20%7B%0A%20%20%20%20%20%20let%20triggerPath%20%3D%20trigger.name%3B%0A%20%20%20%20%20%20return%20triggerPath%20%3D%3D%20path%20%7C%7C%20trigger.structured%20%26%26%20Polymer.Path.isAncestor(triggerPath%2C%20path)%20%7C%7C%20trigger.wildcard%20%26%26%20Polymer.Path.isDescendant(triggerPath%2C%20path)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Implements%20the%20%22observer%22%20effect.%0A%20%20%20*%0A%20%20%20*%20Calls%20the%20method%20with%20%60info.methodName%60%20on%20the%20instance%2C%20passing%20the%0A%20%20%20*%20new%20and%20old%20values.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20the%20effect%20will%20be%20run%20on%0A%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20property%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20*%20%40param%20%7BObject%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20*%20%40param%20%7B%3F%7D%20info%20Effect%20metadata%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runObserverEffect(inst%2C%20property%2C%20props%2C%20oldProps%2C%20info)%20%7B%0A%20%20%20%20let%20fn%20%3D%20typeof%20info.method%20%3D%3D%3D%20%22string%22%20%3F%20inst%5Binfo.method%5D%20%3A%20info.method%3B%0A%20%20%20%20let%20changedProp%20%3D%20info.property%3B%0A%0A%20%20%20%20if%20(fn)%20%7B%0A%20%20%20%20%20%20fn.call(inst%2C%20inst.__data%5BchangedProp%5D%2C%20oldProps%5BchangedProp%5D)%3B%0A%20%20%20%20%7D%20else%20if%20(!info.dynamicFn)%20%7B%0A%20%20%20%20%20%20console.warn(&#39;observer%20method%20%60&#39;%20%2B%20info.method%20%2B%20&#39;%60%20not%20defined&#39;)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Runs%20%22notify%22%20effects%20for%20a%20set%20of%20changed%20properties.%0A%20%20%20*%0A%20%20%20*%20This%20method%20differs%20from%20the%20generic%20%60runEffects%60%20method%20in%20that%20it%0A%20%20%20*%20will%20dispatch%20path%20notification%20events%20in%20the%20case%20that%20the%20property%0A%20%20%20*%20changed%20was%20a%20path%20and%20the%20root%20property%20for%20that%20path%20didn&#39;t%20have%20a%0A%20%20%20*%20%22notify%22%20effect.%20%20This%20is%20to%20maintain%201.0%20behavior%20that%20did%20not%20require%0A%20%20%20*%20%60notify%3A%20true%60%20to%20ensure%20object%20sub-property%20notifications%20were%0A%20%20%20*%20sent.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20with%20effects%20to%20run%0A%20%20%20*%20%40param%20%7BObject%7D%20notifyProps%20Bag%20of%20properties%20to%20notify%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20*%20%40param%20%7BObject%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20*%20%40param%20%7Bboolean%7D%20hasPaths%20True%20with%20%60props%60%20contains%20one%20or%20more%20paths%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runNotifyEffects(inst%2C%20notifyProps%2C%20props%2C%20oldProps%2C%20hasPaths)%20%7B%0A%20%20%20%20%2F%2F%20Notify%0A%20%20%20%20let%20fxs%20%3D%20inst%5BTYPES.NOTIFY%5D%3B%0A%20%20%20%20let%20notified%3B%0A%20%20%20%20let%20id%20%3D%20dedupeId%2B%2B%3B%20%2F%2F%20Try%20normal%20notify%20effects%3B%20if%20none%2C%20fall%20back%20to%20try%20path%20notification%0A%0A%20%20%20%20for%20(let%20prop%20in%20notifyProps)%20%7B%0A%20%20%20%20%20%20if%20(notifyProps%5Bprop%5D)%20%7B%0A%20%20%20%20%20%20%20%20if%20(fxs%20%26%26%20runEffectsForProperty(inst%2C%20fxs%2C%20id%2C%20prop%2C%20props%2C%20oldProps%2C%20hasPaths))%20%7B%0A%20%20%20%20%20%20%20%20%20%20notified%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(hasPaths%20%26%26%20notifyPath(inst%2C%20prop%2C%20props))%20%7B%0A%20%20%20%20%20%20%20%20%20%20notified%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20%2F%2F%20Flush%20host%20if%20we%20actually%20notified%20and%20host%20was%20batching%0A%20%20%20%20%2F%2F%20And%20the%20host%20has%20already%20initialized%20clients%3B%20this%20prevents%0A%20%20%20%20%2F%2F%20an%20issue%20with%20a%20host%20observing%20data%20changes%20before%20clients%20are%20ready.%0A%0A%0A%20%20%20%20let%20host%3B%0A%0A%20%20%20%20if%20(notified%20%26%26%20(host%20%3D%20inst.__dataHost)%20%26%26%20host._invalidateProperties)%20%7B%0A%20%20%20%20%20%20host._invalidateProperties()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Dispatches%20%7Bproperty%7D-changed%20events%20with%20path%20information%20in%20the%20detail%0A%20%20%20*%20object%20to%20indicate%20a%20sub-path%20of%20the%20property%20was%20changed.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20element%20from%20which%20to%20fire%20the%20event%0A%20%20%20*%20%40param%20%7Bstring%7D%20path%20The%20path%20that%20was%20changed%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20*%20%40return%20%7Bboolean%7D%20Returns%20true%20if%20the%20path%20was%20notified%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20notifyPath(inst%2C%20path%2C%20props)%20%7B%0A%20%20%20%20let%20rootProperty%20%3D%20Polymer.Path.root(path)%3B%0A%0A%20%20%20%20if%20(rootProperty%20!%3D%3D%20path)%20%7B%0A%20%20%20%20%20%20let%20eventName%20%3D%20Polymer.CaseMap.camelToDashCase(rootProperty)%20%2B%20&#39;-changed&#39;%3B%0A%20%20%20%20%20%20dispatchNotifyEvent(inst%2C%20eventName%2C%20props%5Bpath%5D%2C%20path)%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20false%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Dispatches%20%7Bproperty%7D-changed%20events%20to%20indicate%20a%20property%20(or%20path)%0A%20%20%20*%20changed.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20element%20from%20which%20to%20fire%20the%20event%0A%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20The%20name%20of%20the%20event%20to%20send%20(&#39;%7Bproperty%7D-changed&#39;)%0A%20%20%20*%20%40param%20%7B*%7D%20value%20The%20value%20of%20the%20changed%20property%0A%20%20%20*%20%40param%20%7Bstring%20%7C%20null%20%7C%20undefined%7D%20path%20If%20a%20sub-path%20of%20this%20property%20changed%2C%20the%20path%0A%20%20%20*%20%20%20that%20changed%20(optional).%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%0A%20%20%20*%2F%0A%0A%0A%20%20function%20dispatchNotifyEvent(inst%2C%20eventName%2C%20value%2C%20path)%20%7B%0A%20%20%20%20let%20detail%20%3D%20%7B%0A%20%20%20%20%20%20value%3A%20value%2C%0A%20%20%20%20%20%20queueProperty%3A%20true%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20if%20(path)%20%7B%0A%20%20%20%20%20%20detail.path%20%3D%20path%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%0A%0A%20%20%20%20inst.dispatchEvent(new%20CustomEvent(eventName%2C%20%7B%0A%20%20%20%20%20%20detail%0A%20%20%20%20%7D))%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Implements%20the%20%22notify%22%20effect.%0A%20%20%20*%0A%20%20%20*%20Dispatches%20a%20non-bubbling%20event%20named%20%60info.eventName%60%20on%20the%20instance%0A%20%20%20*%20with%20a%20detail%20object%20containing%20the%20new%20%60value%60.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20the%20effect%20will%20be%20run%20on%0A%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20property%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20*%20%40param%20%7BObject%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20*%20%40param%20%7B%3F%7D%20info%20Effect%20metadata%0A%20%20%20*%20%40param%20%7Bboolean%7D%20hasPaths%20True%20with%20%60props%60%20contains%20one%20or%20more%20paths%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runNotifyEffect(inst%2C%20property%2C%20props%2C%20oldProps%2C%20info%2C%20hasPaths)%20%7B%0A%20%20%20%20let%20rootProperty%20%3D%20hasPaths%20%3F%20Polymer.Path.root(property)%20%3A%20property%3B%0A%20%20%20%20let%20path%20%3D%20rootProperty%20!%3D%20property%20%3F%20property%20%3A%20null%3B%0A%20%20%20%20let%20value%20%3D%20path%20%3F%20Polymer.Path.get(inst%2C%20path)%20%3A%20inst.__data%5Bproperty%5D%3B%0A%0A%20%20%20%20if%20(path%20%26%26%20value%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20value%20%3D%20props%5Bproperty%5D%3B%20%2F%2F%20specifically%20for%20.splices%0A%20%20%20%20%7D%0A%0A%20%20%20%20dispatchNotifyEvent(inst%2C%20info.eventName%2C%20value%2C%20path)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Handler%20function%20for%202-way%20notification%20events.%20Receives%20context%0A%20%20%20*%20information%20captured%20in%20the%20%60addNotifyListener%60%20closure%20from%20the%0A%20%20%20*%20%60__notifyListeners%60%20metadata.%0A%20%20%20*%0A%20%20%20*%20Sets%20the%20value%20of%20the%20notified%20property%20to%20the%20host%20property%20or%20path.%20%20If%0A%20%20%20*%20the%20event%20contained%20path%20information%2C%20translate%20that%20path%20to%20the%20host%0A%20%20%20*%20scope&#39;s%20name%20for%20that%20path%20first.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BCustomEvent%7D%20event%20Notification%20event%20(e.g.%20&#39;%3Cproperty%3E-changed&#39;)%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20Host%20element%20instance%20handling%20the%20notification%20event%0A%20%20%20*%20%40param%20%7Bstring%7D%20fromProp%20Child%20element%20property%20that%20was%20bound%0A%20%20%20*%20%40param%20%7Bstring%7D%20toPath%20Host%20property%2Fpath%20that%20was%20bound%0A%20%20%20*%20%40param%20%7Bboolean%7D%20negate%20Whether%20the%20binding%20was%20negated%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20handleNotification(event%2C%20inst%2C%20fromProp%2C%20toPath%2C%20negate)%20%7B%0A%20%20%20%20let%20value%3B%0A%20%20%20%20let%20detail%20%3D%0A%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%20%20%20%20event.detail%3B%0A%20%20%20%20let%20fromPath%20%3D%20detail%20%26%26%20detail.path%3B%0A%0A%20%20%20%20if%20(fromPath)%20%7B%0A%20%20%20%20%20%20toPath%20%3D%20Polymer.Path.translate(fromProp%2C%20toPath%2C%20fromPath)%3B%0A%20%20%20%20%20%20value%20%3D%20detail%20%26%26%20detail.value%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20value%20%3D%20event.currentTarget%5BfromProp%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20value%20%3D%20negate%20%3F%20!value%20%3A%20value%3B%0A%0A%20%20%20%20if%20(!inst%5BTYPES.READ_ONLY%5D%20%7C%7C%20!inst%5BTYPES.READ_ONLY%5D%5BtoPath%5D)%20%7B%0A%20%20%20%20%20%20if%20(inst._setPendingPropertyOrPath(toPath%2C%20value%2C%20true%2C%20Boolean(fromPath))%20%26%26%20(!detail%20%7C%7C%20!detail.queueProperty))%20%7B%0A%20%20%20%20%20%20%20%20inst._invalidateProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Implements%20the%20%22reflect%22%20effect.%0A%20%20%20*%0A%20%20%20*%20Sets%20the%20attribute%20named%20%60info.attrName%60%20to%20the%20given%20property%20value.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20the%20effect%20will%20be%20run%20on%0A%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20property%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20*%20%40param%20%7BObject%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20*%20%40param%20%7B%3F%7D%20info%20Effect%20metadata%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runReflectEffect(inst%2C%20property%2C%20props%2C%20oldProps%2C%20info)%20%7B%0A%20%20%20%20let%20value%20%3D%20inst.__data%5Bproperty%5D%3B%0A%0A%20%20%20%20if%20(Polymer.sanitizeDOMValue)%20%7B%0A%20%20%20%20%20%20value%20%3D%20Polymer.sanitizeDOMValue(value%2C%20info.attrName%2C%20&#39;attribute&#39;%2C%0A%20%20%20%20%20%20%2F**%20%40type%20%7BNode%7D%20*%2F%0A%20%20%20%20%20%20inst)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20inst._propertyToAttribute(property%2C%20info.attrName%2C%20value)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Runs%20%22computed%22%20effects%20for%20a%20set%20of%20changed%20properties.%0A%20%20%20*%0A%20%20%20*%20This%20method%20differs%20from%20the%20generic%20%60runEffects%60%20method%20in%20that%20it%0A%20%20%20*%20continues%20to%20run%20computed%20effects%20based%20on%20the%20output%20of%20each%20pass%20until%0A%20%20%20*%20there%20are%20no%20more%20newly%20computed%20properties.%20%20This%20ensures%20that%20all%0A%20%20%20*%20properties%20that%20will%20be%20computed%20by%20the%20initial%20set%20of%20changes%20are%0A%20%20%20*%20computed%20before%20other%20effects%20(binding%20propagation%2C%20observers%2C%20and%20notify)%0A%20%20%20*%20run.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20the%20effect%20will%20be%20run%20on%0A%20%20%20*%20%40param%20%7B!Object%7D%20changedProps%20Bag%20of%20changed%20properties%0A%20%20%20*%20%40param%20%7B!Object%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20*%20%40param%20%7Bboolean%7D%20hasPaths%20True%20with%20%60props%60%20contains%20one%20or%20more%20paths%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runComputedEffects(inst%2C%20changedProps%2C%20oldProps%2C%20hasPaths)%20%7B%0A%20%20%20%20let%20computeEffects%20%3D%20inst%5BTYPES.COMPUTE%5D%3B%0A%0A%20%20%20%20if%20(computeEffects)%20%7B%0A%20%20%20%20%20%20let%20inputProps%20%3D%20changedProps%3B%0A%0A%20%20%20%20%20%20while%20(runEffects(inst%2C%20computeEffects%2C%20inputProps%2C%20oldProps%2C%20hasPaths))%20%7B%0A%20%20%20%20%20%20%20%20Object.assign(oldProps%2C%20inst.__dataOld)%3B%0A%20%20%20%20%20%20%20%20Object.assign(changedProps%2C%20inst.__dataPending)%3B%0A%20%20%20%20%20%20%20%20inputProps%20%3D%20inst.__dataPending%3B%0A%20%20%20%20%20%20%20%20inst.__dataPending%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Implements%20the%20%22computed%20property%22%20effect%20by%20running%20the%20method%20with%20the%0A%20%20%20*%20values%20of%20the%20arguments%20specified%20in%20the%20%60info%60%20object%20and%20setting%20the%0A%20%20%20*%20return%20value%20to%20the%20computed%20property%20specified.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20the%20effect%20will%20be%20run%20on%0A%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20property%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20*%20%40param%20%7BObject%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20*%20%40param%20%7B%3F%7D%20info%20Effect%20metadata%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runComputedEffect(inst%2C%20property%2C%20props%2C%20oldProps%2C%20info)%20%7B%0A%20%20%20%20let%20result%20%3D%20runMethodEffect(inst%2C%20property%2C%20props%2C%20oldProps%2C%20info)%3B%0A%20%20%20%20let%20computedProp%20%3D%20info.methodInfo%3B%0A%0A%20%20%20%20if%20(inst.__dataHasAccessor%20%26%26%20inst.__dataHasAccessor%5BcomputedProp%5D)%20%7B%0A%20%20%20%20%20%20inst._setPendingProperty(computedProp%2C%20result%2C%20true)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20inst%5BcomputedProp%5D%20%3D%20result%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Computes%20path%20changes%20based%20on%20path%20links%20set%20up%20using%20the%20%60linkPaths%60%0A%20%20%20*%20API.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20whose%20props%20are%20changing%0A%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3C(string%7Cnumber)%3E%7D%20path%20Path%20that%20has%20changed%0A%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20of%20changed%20path%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20computeLinkedPaths(inst%2C%20path%2C%20value)%20%7B%0A%20%20%20%20let%20links%20%3D%20inst.__dataLinkedPaths%3B%0A%0A%20%20%20%20if%20(links)%20%7B%0A%20%20%20%20%20%20let%20link%3B%0A%0A%20%20%20%20%20%20for%20(let%20a%20in%20links)%20%7B%0A%20%20%20%20%20%20%20%20let%20b%20%3D%20links%5Ba%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(Polymer.Path.isDescendant(a%2C%20path))%20%7B%0A%20%20%20%20%20%20%20%20%20%20link%20%3D%20Polymer.Path.translate(a%2C%20b%2C%20path)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20inst._setPendingPropertyOrPath(link%2C%20value%2C%20true%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(Polymer.Path.isDescendant(b%2C%20path))%20%7B%0A%20%20%20%20%20%20%20%20%20%20link%20%3D%20Polymer.Path.translate(b%2C%20a%2C%20path)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20inst._setPendingPropertyOrPath(link%2C%20value%2C%20true%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%20%2F%2F%20--%20bindings%20----------------------------------------------%0A%0A%20%20%2F**%0A%20%20%20*%20Adds%20binding%20metadata%20to%20the%20current%20%60nodeInfo%60%2C%20and%20binding%20effects%0A%20%20%20*%20for%20all%20part%20dependencies%20to%20%60templateInfo%60.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BFunction%7D%20constructor%20Class%20that%20%60_parseTemplate%60%20is%20currently%0A%20%20%20*%20%20%20running%20on%0A%20%20%20*%20%40param%20%7BTemplateInfo%7D%20templateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20*%20%40param%20%7BNodeInfo%7D%20nodeInfo%20Node%20metadata%20for%20current%20template%20node%0A%20%20%20*%20%40param%20%7Bstring%7D%20kind%20Binding%20kind%2C%20either%20&#39;property&#39;%2C%20&#39;attribute&#39;%2C%20or%20&#39;text&#39;%0A%20%20%20*%20%40param%20%7Bstring%7D%20target%20Target%20property%20name%0A%20%20%20*%20%40param%20%7B!Array%3C!BindingPart%3E%7D%20parts%20Array%20of%20binding%20part%20metadata%0A%20%20%20*%20%40param%20%7Bstring%3D%7D%20literal%20Literal%20text%20surrounding%20binding%20parts%20(specified%0A%20%20%20*%20%20%20only%20for%20&#39;property&#39;%20bindings%2C%20since%20these%20must%20be%20initialized%20as%20part%0A%20%20%20*%20%20%20of%20boot-up)%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20addBinding(constructor%2C%20templateInfo%2C%20nodeInfo%2C%20kind%2C%20target%2C%20parts%2C%20literal)%20%7B%0A%20%20%20%20%2F%2F%20Create%20binding%20metadata%20and%20add%20to%20nodeInfo%0A%20%20%20%20nodeInfo.bindings%20%3D%20nodeInfo.bindings%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20let%0A%20%20%20%20%2F**%20Binding%20*%2F%0A%20%20%20%20binding%20%3D%20%7B%0A%20%20%20%20%20%20kind%2C%0A%20%20%20%20%20%20target%2C%0A%20%20%20%20%20%20parts%2C%0A%20%20%20%20%20%20literal%2C%0A%20%20%20%20%20%20isCompound%3A%20parts.length%20!%3D%3D%201%0A%20%20%20%20%7D%3B%0A%20%20%20%20nodeInfo.bindings.push(binding)%3B%20%2F%2F%20Add%20listener%20info%20to%20binding%20metadata%0A%0A%20%20%20%20if%20(shouldAddListener(binding))%20%7B%0A%20%20%20%20%20%20let%20%7B%0A%20%20%20%20%20%20%20%20event%2C%0A%20%20%20%20%20%20%20%20negate%0A%20%20%20%20%20%20%7D%20%3D%20binding.parts%5B0%5D%3B%0A%20%20%20%20%20%20binding.listenerEvent%20%3D%20event%20%7C%7C%20CaseMap.camelToDashCase(target)%20%2B%20&#39;-changed&#39;%3B%0A%20%20%20%20%20%20binding.listenerNegate%20%3D%20negate%3B%0A%20%20%20%20%7D%20%2F%2F%20Add%20%22propagate%22%20property%20effects%20to%20templateInfo%0A%0A%0A%20%20%20%20let%20index%20%3D%20templateInfo.nodeInfoList.length%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20binding.parts.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20let%20part%20%3D%20binding.parts%5Bi%5D%3B%0A%20%20%20%20%20%20part.compoundIndex%20%3D%20i%3B%0A%20%20%20%20%20%20addEffectForBindingPart(constructor%2C%20templateInfo%2C%20binding%2C%20part%2C%20index)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Adds%20property%20effects%20to%20the%20given%20%60templateInfo%60%20for%20the%20given%20binding%0A%20%20%20*%20part.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BFunction%7D%20constructor%20Class%20that%20%60_parseTemplate%60%20is%20currently%0A%20%20%20*%20%20%20running%20on%0A%20%20%20*%20%40param%20%7BTemplateInfo%7D%20templateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20*%20%40param%20%7B!Binding%7D%20binding%20Binding%20metadata%0A%20%20%20*%20%40param%20%7B!BindingPart%7D%20part%20Binding%20part%20metadata%0A%20%20%20*%20%40param%20%7Bnumber%7D%20index%20Index%20into%20%60nodeInfoList%60%20for%20this%20node%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%0A%20%20function%20addEffectForBindingPart(constructor%2C%20templateInfo%2C%20binding%2C%20part%2C%20index)%20%7B%0A%20%20%20%20if%20(!part.literal)%20%7B%0A%20%20%20%20%20%20if%20(binding.kind%20%3D%3D%3D%20&#39;attribute&#39;%20%26%26%20binding.target%5B0%5D%20%3D%3D%3D%20&#39;-&#39;)%20%7B%0A%20%20%20%20%20%20%20%20console.warn(&#39;Cannot%20set%20attribute%20&#39;%20%2B%20binding.target%20%2B%20&#39;%20because%20%22-%22%20is%20not%20a%20valid%20attribute%20starting%20character&#39;)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20let%20dependencies%20%3D%20part.dependencies%3B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20index%2C%0A%20%20%20%20%20%20%20%20%20%20binding%2C%0A%20%20%20%20%20%20%20%20%20%20part%2C%0A%20%20%20%20%20%20%20%20%20%20evaluator%3A%20constructor%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20dependencies.length%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20trigger%20%3D%20dependencies%5Bj%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(typeof%20trigger%20%3D%3D%20&#39;string&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20trigger%20%3D%20parseArg(trigger)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20trigger.wildcard%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20constructor._addTemplatePropertyEffect(templateInfo%2C%20trigger.rootProperty%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%3A%20runBindingEffect%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20info%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20trigger%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Implements%20the%20%22binding%22%20(property%2Fpath%20binding)%20effect.%0A%20%20%20*%0A%20%20%20*%20Note%20that%20binding%20syntax%20is%20overridable%20via%20%60_parseBindings%60%20and%0A%20%20%20*%20%60_evaluateBinding%60.%20%20This%20method%20will%20call%20%60_evaluateBinding%60%20for%20any%0A%20%20%20*%20non-literal%20parts%20returned%20from%20%60_parseBindings%60.%20%20However%2C%0A%20%20%20*%20there%20is%20no%20support%20for%20_path_%20bindings%20via%20custom%20binding%20parts%2C%0A%20%20%20*%20as%20this%20is%20specific%20to%20Polymer&#39;s%20path%20binding%20syntax.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20the%20effect%20will%20be%20run%20on%0A%20%20%20*%20%40param%20%7Bstring%7D%20path%20Name%20of%20property%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20*%20%40param%20%7BObject%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20*%20%40param%20%7B%3F%7D%20info%20Effect%20metadata%0A%20%20%20*%20%40param%20%7Bboolean%7D%20hasPaths%20True%20with%20%60props%60%20contains%20one%20or%20more%20paths%0A%20%20%20*%20%40param%20%7BArray%7D%20nodeList%20List%20of%20nodes%20associated%20with%20%60nodeInfoList%60%20template%0A%20%20%20*%20%20%20metadata%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runBindingEffect(inst%2C%20path%2C%20props%2C%20oldProps%2C%20info%2C%20hasPaths%2C%20nodeList)%20%7B%0A%20%20%20%20let%20node%20%3D%20nodeList%5Binfo.index%5D%3B%0A%20%20%20%20let%20binding%20%3D%20info.binding%3B%0A%20%20%20%20let%20part%20%3D%20info.part%3B%20%2F%2F%20Subpath%20notification%3A%20transform%20path%20and%20set%20to%20client%0A%20%20%20%20%2F%2F%20e.g.%3A%20foo%3D%22%7B%7Bobj.sub%7D%7D%22%2C%20path%3A%20&#39;obj.sub.prop&#39;%2C%20set%20&#39;foo.prop&#39;%3Dobj.sub.prop%0A%0A%20%20%20%20if%20(hasPaths%20%26%26%20part.source%20%26%26%20path.length%20%3E%20part.source.length%20%26%26%20binding.kind%20%3D%3D%20&#39;property&#39;%20%26%26%20!binding.isCompound%20%26%26%20node.__isPropertyEffectsClient%20%26%26%20node.__dataHasAccessor%20%26%26%20node.__dataHasAccessor%5Bbinding.target%5D)%20%7B%0A%20%20%20%20%20%20let%20value%20%3D%20props%5Bpath%5D%3B%0A%20%20%20%20%20%20path%20%3D%20Polymer.Path.translate(part.source%2C%20binding.target%2C%20path)%3B%0A%0A%20%20%20%20%20%20if%20(node._setPendingPropertyOrPath(path%2C%20value%2C%20false%2C%20true))%20%7B%0A%20%20%20%20%20%20%20%20inst._enqueueClient(node)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20let%20value%20%3D%20info.evaluator._evaluateBinding(inst%2C%20part%2C%20path%2C%20props%2C%20oldProps%2C%20hasPaths)%3B%20%2F%2F%20Propagate%20value%20to%20child%0A%0A%0A%20%20%20%20%20%20applyBindingValue(inst%2C%20node%2C%20binding%2C%20part%2C%20value)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Sets%20the%20value%20for%20an%20%22binding%22%20(binding)%20effect%20to%20a%20node%2C%0A%20%20%20*%20either%20as%20a%20property%20or%20attribute.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20owning%20the%20binding%20effect%0A%20%20%20*%20%40param%20%7BNode%7D%20node%20Target%20node%20for%20binding%0A%20%20%20*%20%40param%20%7B!Binding%7D%20binding%20Binding%20metadata%0A%20%20%20*%20%40param%20%7B!BindingPart%7D%20part%20Binding%20part%20metadata%0A%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20applyBindingValue(inst%2C%20node%2C%20binding%2C%20part%2C%20value)%20%7B%0A%20%20%20%20value%20%3D%20computeBindingValue(node%2C%20value%2C%20binding%2C%20part)%3B%0A%0A%20%20%20%20if%20(Polymer.sanitizeDOMValue)%20%7B%0A%20%20%20%20%20%20value%20%3D%20Polymer.sanitizeDOMValue(value%2C%20binding.target%2C%20binding.kind%2C%20node)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(binding.kind%20%3D%3D%20&#39;attribute&#39;)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Attribute%20binding%0A%20%20%20%20%20%20inst._valueToNodeAttribute(%0A%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20node%2C%20value%2C%20binding.target)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%2F%2F%20Property%20binding%0A%20%20%20%20%20%20let%20prop%20%3D%20binding.target%3B%0A%0A%20%20%20%20%20%20if%20(node.__isPropertyEffectsClient%20%26%26%20node.__dataHasAccessor%20%26%26%20node.__dataHasAccessor%5Bprop%5D)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!node%5BTYPES.READ_ONLY%5D%20%7C%7C%20!node%5BTYPES.READ_ONLY%5D%5Bprop%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(node._setPendingProperty(prop%2C%20value))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20inst._enqueueClient(node)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20inst._setUnmanagedPropertyToNode(node%2C%20prop%2C%20value)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Transforms%20an%20%22binding%22%20effect%20value%20based%20on%20compound%20%26%20negation%0A%20%20%20*%20effect%20metadata%2C%20as%20well%20as%20handling%20for%20special-case%20properties%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BNode%7D%20node%20Node%20the%20value%20will%20be%20set%20to%0A%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%0A%20%20%20*%20%40param%20%7B!Binding%7D%20binding%20Binding%20metadata%0A%20%20%20*%20%40param%20%7B!BindingPart%7D%20part%20Binding%20part%20metadata%0A%20%20%20*%20%40return%20%7B*%7D%20Transformed%20value%20to%20set%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20computeBindingValue(node%2C%20value%2C%20binding%2C%20part)%20%7B%0A%20%20%20%20if%20(binding.isCompound)%20%7B%0A%20%20%20%20%20%20let%20storage%20%3D%20node.__dataCompoundStorage%5Bbinding.target%5D%3B%0A%20%20%20%20%20%20storage%5Bpart.compoundIndex%5D%20%3D%20value%3B%0A%20%20%20%20%20%20value%20%3D%20storage.join(&#39;&#39;)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(binding.kind%20!%3D%3D%20&#39;attribute&#39;)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Some%20browsers%20serialize%20%60undefined%60%20to%20%60%22undefined%22%60%0A%20%20%20%20%20%20if%20(binding.target%20%3D%3D%3D%20&#39;textContent&#39;%20%7C%7C%20binding.target%20%3D%3D%3D%20&#39;value&#39;%20%26%26%20(node.localName%20%3D%3D%3D%20&#39;input&#39;%20%7C%7C%20node.localName%20%3D%3D%3D%20&#39;textarea&#39;))%20%7B%0A%20%20%20%20%20%20%20%20value%20%3D%20value%20%3D%3D%20undefined%20%3F%20&#39;&#39;%20%3A%20value%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20value%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Returns%20true%20if%20a%20binding&#39;s%20metadata%20meets%20all%20the%20requirements%20to%20allow%0A%20%20%20*%202-way%20binding%2C%20and%20therefore%20a%20%60%3Cproperty%3E-changed%60%20event%20listener%20should%20be%0A%20%20%20*%20added%3A%0A%20%20%20*%20-%20used%20curly%20braces%0A%20%20%20*%20-%20is%20a%20property%20(not%20attribute)%20binding%0A%20%20%20*%20-%20is%20not%20a%20textContent%20binding%0A%20%20%20*%20-%20is%20not%20compound%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!Binding%7D%20binding%20Binding%20metadata%0A%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%202-way%20listener%20should%20be%20added%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20shouldAddListener(binding)%20%7B%0A%20%20%20%20return%20Boolean(binding.target)%20%26%26%20binding.kind%20!%3D%20&#39;attribute&#39;%20%26%26%20binding.kind%20!%3D%20&#39;text&#39;%20%26%26%20!binding.isCompound%20%26%26%20binding.parts%5B0%5D.mode%20%3D%3D%3D%20&#39;%7B&#39;%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Setup%20compound%20binding%20storage%20structures%2C%20notify%20listeners%2C%20and%20dataHost%0A%20%20%20*%20references%20onto%20the%20bound%20nodeList.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20Instance%20that%20bas%20been%20previously%20bound%0A%20%20%20*%20%40param%20%7BTemplateInfo%7D%20templateInfo%20Template%20metadata%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20setupBindings(inst%2C%20templateInfo)%20%7B%0A%20%20%20%20%2F%2F%20Setup%20compound%20storage%2C%20dataHost%2C%20and%20notify%20listeners%0A%20%20%20%20let%20%7B%0A%20%20%20%20%20%20nodeList%2C%0A%20%20%20%20%20%20nodeInfoList%0A%20%20%20%20%7D%20%3D%20templateInfo%3B%0A%0A%20%20%20%20if%20(nodeInfoList.length)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20nodeInfoList.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20nodeInfoList%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20let%20node%20%3D%20nodeList%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20let%20bindings%20%3D%20info.bindings%3B%0A%0A%20%20%20%20%20%20%20%20if%20(bindings)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20bindings.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20binding%20%3D%20bindings%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20setupCompoundStorage(node%2C%20binding)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20addNotifyListener(node%2C%20inst%2C%20binding)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20node.__dataHost%20%3D%20inst%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Initializes%20%60__dataCompoundStorage%60%20local%20storage%20on%20a%20bound%20node%20with%0A%20%20%20*%20initial%20literal%20data%20for%20compound%20bindings%2C%20and%20sets%20the%20joined%0A%20%20%20*%20literal%20parts%20to%20the%20bound%20property.%0A%20%20%20*%0A%20%20%20*%20When%20changes%20to%20compound%20parts%20occur%2C%20they%20are%20first%20set%20into%20the%20compound%0A%20%20%20*%20storage%20array%20for%20that%20property%2C%20and%20then%20the%20array%20is%20joined%20to%20result%20in%0A%20%20%20*%20the%20final%20value%20set%20to%20the%20property%2Fattribute.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BNode%7D%20node%20Bound%20node%20to%20initialize%0A%20%20%20*%20%40param%20%7BBinding%7D%20binding%20Binding%20metadata%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20setupCompoundStorage(node%2C%20binding)%20%7B%0A%20%20%20%20if%20(binding.isCompound)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Create%20compound%20storage%20map%0A%20%20%20%20%20%20let%20storage%20%3D%20node.__dataCompoundStorage%20%7C%7C%20(node.__dataCompoundStorage%20%3D%20%7B%7D)%3B%0A%20%20%20%20%20%20let%20parts%20%3D%20binding.parts%3B%20%2F%2F%20Copy%20literals%20from%20parts%20into%20storage%20for%20this%20binding%0A%0A%20%20%20%20%20%20let%20literals%20%3D%20new%20Array(parts.length)%3B%0A%0A%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20parts.length%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20literals%5Bj%5D%20%3D%20parts%5Bj%5D.literal%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20target%20%3D%20binding.target%3B%0A%20%20%20%20%20%20storage%5Btarget%5D%20%3D%20literals%3B%20%2F%2F%20Configure%20properties%20with%20their%20literal%20parts%0A%0A%20%20%20%20%20%20if%20(binding.literal%20%26%26%20binding.kind%20%3D%3D%20&#39;property&#39;)%20%7B%0A%20%20%20%20%20%20%20%20node%5Btarget%5D%20%3D%20binding.literal%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Adds%20a%202-way%20binding%20notification%20event%20listener%20to%20the%20node%20specified%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BObject%7D%20node%20Child%20element%20to%20add%20listener%20to%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20Host%20element%20instance%20to%20handle%20notification%20event%0A%20%20%20*%20%40param%20%7BBinding%7D%20binding%20Binding%20metadata%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20addNotifyListener(node%2C%20inst%2C%20binding)%20%7B%0A%20%20%20%20if%20(binding.listenerEvent)%20%7B%0A%20%20%20%20%20%20let%20part%20%3D%20binding.parts%5B0%5D%3B%0A%20%20%20%20%20%20node.addEventListener(binding.listenerEvent%2C%20function%20(e)%20%7B%0A%20%20%20%20%20%20%20%20handleNotification(e%2C%20inst%2C%20binding.target%2C%20part.source%2C%20part.negate)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%20%2F%2F%20--%20for%20method-based%20effects%20(complexObserver%20%26%20computed)%20--------------%0A%0A%20%20%2F**%0A%20%20%20*%20Adds%20property%20effects%20for%20each%20argument%20in%20the%20method%20signature%20(and%0A%20%20%20*%20optionally%2C%20for%20the%20method%20name%20if%20%60dynamic%60%20is%20true)%20that%20calls%20the%0A%20%20%20*%20provided%20effect%20function.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BElement%20%7C%20Object%7D%20model%20Prototype%20or%20instance%0A%20%20%20*%20%40param%20%7B!MethodSignature%7D%20sig%20Method%20signature%20metadata%0A%20%20%20*%20%40param%20%7Bstring%7D%20type%20Type%20of%20property%20effect%20to%20add%0A%20%20%20*%20%40param%20%7BFunction%7D%20effectFn%20Function%20to%20run%20when%20arguments%20change%0A%20%20%20*%20%40param%20%7B*%3D%7D%20methodInfo%20Effect-specific%20information%20to%20be%20included%20in%0A%20%20%20*%20%20%20method%20effect%20metadata%0A%20%20%20*%20%40param%20%7Bboolean%7CObject%3D%7D%20dynamicFn%20Boolean%20or%20object%20map%20indicating%20whether%0A%20%20%20*%20%20%20method%20names%20should%20be%20included%20as%20a%20dependency%20to%20the%20effect.%20Note%2C%0A%20%20%20*%20%20%20defaults%20to%20true%20if%20the%20signature%20is%20static%20(sig.static%20is%20true).%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20createMethodEffect(model%2C%20sig%2C%20type%2C%20effectFn%2C%20methodInfo%2C%20dynamicFn)%20%7B%0A%20%20%20%20dynamicFn%20%3D%20sig.static%20%7C%7C%20dynamicFn%20%26%26%20(typeof%20dynamicFn%20!%3D%3D%20&#39;object&#39;%20%7C%7C%20dynamicFn%5Bsig.methodName%5D)%3B%0A%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20methodName%3A%20sig.methodName%2C%0A%20%20%20%20%20%20args%3A%20sig.args%2C%0A%20%20%20%20%20%20methodInfo%2C%0A%20%20%20%20%20%20dynamicFn%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%2C%20arg%3B%20i%20%3C%20sig.args.length%20%26%26%20(arg%20%3D%20sig.args%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20if%20(!arg.literal)%20%7B%0A%20%20%20%20%20%20%20%20model._addPropertyEffect(arg.rootProperty%2C%20type%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20fn%3A%20effectFn%2C%0A%20%20%20%20%20%20%20%20%20%20info%3A%20info%2C%0A%20%20%20%20%20%20%20%20%20%20trigger%3A%20arg%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(dynamicFn)%20%7B%0A%20%20%20%20%20%20model._addPropertyEffect(sig.methodName%2C%20type%2C%20%7B%0A%20%20%20%20%20%20%20%20fn%3A%20effectFn%2C%0A%20%20%20%20%20%20%20%20info%3A%20info%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Calls%20a%20method%20with%20arguments%20marshaled%20from%20properties%20on%20the%20instance%0A%20%20%20*%20based%20on%20the%20method%20signature%20contained%20in%20the%20effect%20metadata.%0A%20%20%20*%0A%20%20%20*%20Multi-property%20observers%2C%20computed%20properties%2C%20and%20inline%20computing%0A%20%20%20*%20functions%20call%20this%20function%20to%20invoke%20the%20method%2C%20then%20use%20the%20return%0A%20%20%20*%20value%20accordingly.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20The%20instance%20the%20effect%20will%20be%20run%20on%0A%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20property%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20*%20%40param%20%7BObject%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20*%20%40param%20%7B%3F%7D%20info%20Effect%20metadata%0A%20%20%20*%20%40return%20%7B*%7D%20Returns%20the%20return%20value%20from%20the%20method%20invocation%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20runMethodEffect(inst%2C%20property%2C%20props%2C%20oldProps%2C%20info)%20%7B%0A%20%20%20%20%2F%2F%20Instances%20can%20optionally%20have%20a%20_methodHost%20which%20allows%20redirecting%20where%0A%20%20%20%20%2F%2F%20to%20find%20methods.%20Currently%20used%20by%20%60templatize%60.%0A%20%20%20%20let%20context%20%3D%20inst._methodHost%20%7C%7C%20inst%3B%0A%20%20%20%20let%20fn%20%3D%20context%5Binfo.methodName%5D%3B%0A%0A%20%20%20%20if%20(fn)%20%7B%0A%20%20%20%20%20%20let%20args%20%3D%20inst._marshalArgs(info.args%2C%20property%2C%20props)%3B%0A%0A%20%20%20%20%20%20return%20fn.apply(context%2C%20args)%3B%0A%20%20%20%20%7D%20else%20if%20(!info.dynamicFn)%20%7B%0A%20%20%20%20%20%20console.warn(&#39;method%20%60&#39;%20%2B%20info.methodName%20%2B%20&#39;%60%20not%20defined&#39;)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20const%20emptyArray%20%3D%20%5B%5D%3B%20%2F%2F%20Regular%20expressions%20used%20for%20binding%0A%0A%20%20const%20IDENT%20%3D%20&#39;(%3F%3A&#39;%20%2B%20&#39;%5Ba-zA-Z_%24%5D%5B%5C%5Cw.%3A%24%5C%5C-*%5D*&#39;%20%2B%20&#39;)&#39;%3B%0A%20%20const%20NUMBER%20%3D%20&#39;(%3F%3A&#39;%20%2B%20&#39;%5B-%2B%5D%3F%5B0-9%5D*%5C%5C.%3F%5B0-9%5D%2B(%3F%3A%5BeE%5D%5B-%2B%5D%3F%5B0-9%5D%2B)%3F&#39;%20%2B%20&#39;)&#39;%3B%0A%20%20const%20SQUOTE_STRING%20%3D%20&#39;(%3F%3A&#39;%20%2B%20&#39;%5C&#39;(%3F%3A%5B%5E%5C&#39;%5C%5C%5C%5C%5D%7C%5C%5C%5C%5C.)*%5C&#39;&#39;%20%2B%20&#39;)&#39;%3B%0A%20%20const%20DQUOTE_STRING%20%3D%20&#39;(%3F%3A&#39;%20%2B%20&#39;%22(%3F%3A%5B%5E%22%5C%5C%5C%5C%5D%7C%5C%5C%5C%5C.)*%22&#39;%20%2B%20&#39;)&#39;%3B%0A%20%20const%20STRING%20%3D%20&#39;(%3F%3A&#39;%20%2B%20SQUOTE_STRING%20%2B%20&#39;%7C&#39;%20%2B%20DQUOTE_STRING%20%2B%20&#39;)&#39;%3B%0A%20%20const%20ARGUMENT%20%3D%20&#39;(%3F%3A(&#39;%20%2B%20IDENT%20%2B%20&#39;%7C&#39;%20%2B%20NUMBER%20%2B%20&#39;%7C&#39;%20%2B%20STRING%20%2B%20&#39;)%5C%5Cs*&#39;%20%2B%20&#39;)&#39;%3B%0A%20%20const%20ARGUMENTS%20%3D%20&#39;(%3F%3A&#39;%20%2B%20ARGUMENT%20%2B%20&#39;(%3F%3A%2C%5C%5Cs*&#39;%20%2B%20ARGUMENT%20%2B%20&#39;)*&#39;%20%2B%20&#39;)&#39;%3B%0A%20%20const%20ARGUMENT_LIST%20%3D%20&#39;(%3F%3A&#39;%20%2B%20&#39;%5C%5C(%5C%5Cs*&#39;%20%2B%20&#39;(%3F%3A&#39;%20%2B%20ARGUMENTS%20%2B%20&#39;%3F&#39;%20%2B%20&#39;)&#39;%20%2B%20&#39;%5C%5C)%5C%5Cs*&#39;%20%2B%20&#39;)&#39;%3B%0A%20%20const%20BINDING%20%3D%20&#39;(&#39;%20%2B%20IDENT%20%2B%20&#39;%5C%5Cs*&#39;%20%2B%20ARGUMENT_LIST%20%2B%20&#39;%3F&#39;%20%2B%20&#39;)&#39;%3B%20%2F%2F%20Group%203%0A%0A%20%20const%20OPEN_BRACKET%20%3D%20&#39;(%5C%5C%5B%5C%5C%5B%7C%7B%7B)&#39;%20%2B%20&#39;%5C%5Cs*&#39;%3B%0A%20%20const%20CLOSE_BRACKET%20%3D%20&#39;(%3F%3A%5D%5D%7C%7D%7D)&#39;%3B%0A%20%20const%20NEGATE%20%3D%20&#39;(%3F%3A(!)%5C%5Cs*)%3F&#39;%3B%20%2F%2F%20Group%202%0A%0A%20%20const%20EXPRESSION%20%3D%20OPEN_BRACKET%20%2B%20NEGATE%20%2B%20BINDING%20%2B%20CLOSE_BRACKET%3B%0A%20%20const%20bindingRegex%20%3D%20new%20RegExp(EXPRESSION%2C%20%22g%22)%3B%0A%20%20%2F**%0A%20%20%20*%20Create%20a%20string%20from%20binding%20parts%20of%20all%20the%20literal%20parts%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!Array%3CBindingPart%3E%7D%20parts%20All%20parts%20to%20stringify%0A%20%20%20*%20%40return%20%7Bstring%7D%20String%20made%20from%20the%20literal%20parts%0A%20%20%20*%2F%0A%0A%20%20function%20literalFromParts(parts)%20%7B%0A%20%20%20%20let%20s%20%3D%20&#39;&#39;%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20parts.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20let%20literal%20%3D%20parts%5Bi%5D.literal%3B%0A%20%20%20%20%20%20s%20%2B%3D%20literal%20%7C%7C%20&#39;&#39;%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20s%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Parses%20an%20expression%20string%20for%20a%20method%20signature%2C%20and%20returns%20a%20metadata%0A%20%20%20*%20describing%20the%20method%20in%20terms%20of%20%60methodName%60%2C%20%60static%60%20(whether%20all%20the%0A%20%20%20*%20arguments%20are%20literals)%2C%20and%20an%20array%20of%20%60args%60%0A%20%20%20*%0A%20%20%20*%20%40param%20%7Bstring%7D%20expression%20The%20expression%20to%20parse%0A%20%20%20*%20%40return%20%7B%3FMethodSignature%7D%20The%20method%20metadata%20object%20if%20a%20method%20expression%20was%0A%20%20%20*%20%20%20found%2C%20otherwise%20%60undefined%60%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20parseMethod(expression)%20%7B%0A%20%20%20%20%2F%2F%20tries%20to%20match%20valid%20javascript%20property%20names%0A%20%20%20%20let%20m%20%3D%20expression.match(%2F(%5B%5E%5Cs%5D%2B%3F)%5C((%5B%5Cs%5CS%5D*)%5C)%2F)%3B%0A%0A%20%20%20%20if%20(m)%20%7B%0A%20%20%20%20%20%20let%20methodName%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20let%20sig%20%3D%20%7B%0A%20%20%20%20%20%20%20%20methodName%2C%0A%20%20%20%20%20%20%20%20static%3A%20true%2C%0A%20%20%20%20%20%20%20%20args%3A%20emptyArray%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20if%20(m%5B2%5D.trim())%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20replace%20escaped%20commas%20with%20comma%20entity%2C%20split%20on%20un-escaped%20commas%0A%20%20%20%20%20%20%20%20let%20args%20%3D%20m%5B2%5D.replace(%2F%5C%5C%2C%2Fg%2C%20&#39;%26comma%3B&#39;).split(&#39;%2C&#39;)%3B%0A%20%20%20%20%20%20%20%20return%20parseArgs(args%2C%20sig)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20sig%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20null%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Parses%20an%20array%20of%20arguments%20and%20sets%20the%20%60args%60%20property%20of%20the%20supplied%0A%20%20%20*%20signature%20metadata%20object.%20Sets%20the%20%60static%60%20property%20to%20false%20if%20any%0A%20%20%20*%20argument%20is%20a%20non-literal.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!Array%3Cstring%3E%7D%20argList%20Array%20of%20argument%20names%0A%20%20%20*%20%40param%20%7B!MethodSignature%7D%20sig%20Method%20signature%20metadata%20object%0A%20%20%20*%20%40return%20%7B!MethodSignature%7D%20The%20updated%20signature%20metadata%20object%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20parseArgs(argList%2C%20sig)%20%7B%0A%20%20%20%20sig.args%20%3D%20argList.map(function%20(rawArg)%20%7B%0A%20%20%20%20%20%20let%20arg%20%3D%20parseArg(rawArg)%3B%0A%0A%20%20%20%20%20%20if%20(!arg.literal)%20%7B%0A%20%20%20%20%20%20%20%20sig.static%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20arg%3B%0A%20%20%20%20%7D%2C%20this)%3B%0A%20%20%20%20return%20sig%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Parses%20an%20individual%20argument%2C%20and%20returns%20an%20argument%20metadata%20object%0A%20%20%20*%20with%20the%20following%20fields%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%7B%0A%20%20%20*%20%20%20%20%20value%3A%20&#39;prop&#39;%2C%20%20%20%20%20%20%20%20%2F%2F%20property%2Fpath%20or%20literal%20value%0A%20%20%20*%20%20%20%20%20literal%3A%20false%2C%20%20%20%20%20%20%20%2F%2F%20whether%20argument%20is%20a%20literal%0A%20%20%20*%20%20%20%20%20structured%3A%20false%2C%20%20%20%20%2F%2F%20whether%20the%20property%20is%20a%20path%0A%20%20%20*%20%20%20%20%20rootProperty%3A%20&#39;prop&#39;%2C%20%2F%2F%20the%20root%20property%20of%20the%20path%0A%20%20%20*%20%20%20%20%20wildcard%3A%20false%20%20%20%20%20%20%20%2F%2F%20whether%20the%20argument%20was%20a%20wildcard%20&#39;.*&#39;%20path%0A%20%20%20*%20%20%20%7D%0A%20%20%20*%0A%20%20%20*%20%40param%20%7Bstring%7D%20rawArg%20The%20string%20value%20of%20the%20argument%0A%20%20%20*%20%40return%20%7B!MethodArg%7D%20Argument%20metadata%20object%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20parseArg(rawArg)%20%7B%0A%20%20%20%20%2F%2F%20clean%20up%20whitespace%0A%20%20%20%20let%20arg%20%3D%20rawArg.trim()%20%2F%2F%20replace%20comma%20entity%20with%20comma%0A%20%20%20%20.replace(%2F%26comma%3B%2Fg%2C%20&#39;%2C&#39;)%20%2F%2F%20repair%20extra%20escape%20sequences%3B%20note%20only%20commas%20strictly%20need%0A%20%20%20%20%2F%2F%20escaping%2C%20but%20we%20allow%20any%20other%20char%20to%20be%20escaped%20since%20its%0A%20%20%20%20%2F%2F%20likely%20users%20will%20do%20this%0A%20%20%20%20.replace(%2F%5C%5C(.)%2Fg%2C%20&#39;%5C%241&#39;)%3B%20%2F%2F%20basic%20argument%20descriptor%0A%0A%20%20%20%20let%20a%20%3D%20%7B%0A%20%20%20%20%20%20name%3A%20arg%2C%0A%20%20%20%20%20%20value%3A%20&#39;&#39;%2C%0A%20%20%20%20%20%20literal%3A%20false%0A%20%20%20%20%7D%3B%20%2F%2F%20detect%20literal%20value%20(must%20be%20String%20or%20Number)%0A%0A%20%20%20%20let%20fc%20%3D%20arg%5B0%5D%3B%0A%0A%20%20%20%20if%20(fc%20%3D%3D%3D%20&#39;-&#39;)%20%7B%0A%20%20%20%20%20%20fc%20%3D%20arg%5B1%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(fc%20%3E%3D%20&#39;0&#39;%20%26%26%20fc%20%3C%3D%20&#39;9&#39;)%20%7B%0A%20%20%20%20%20%20fc%20%3D%20&#39;%23&#39;%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20switch%20(fc)%20%7B%0A%20%20%20%20%20%20case%20%22&#39;%22%3A%0A%20%20%20%20%20%20case%20&#39;%22&#39;%3A%0A%20%20%20%20%20%20%20%20a.value%20%3D%20arg.slice(1%2C%20-1)%3B%0A%20%20%20%20%20%20%20%20a.literal%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20case%20&#39;%23&#39;%3A%0A%20%20%20%20%20%20%20%20a.value%20%3D%20Number(arg)%3B%0A%20%20%20%20%20%20%20%20a.literal%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%20%2F%2F%20if%20not%20literal%2C%20look%20for%20structured%20path%0A%0A%0A%20%20%20%20if%20(!a.literal)%20%7B%0A%20%20%20%20%20%20a.rootProperty%20%3D%20Polymer.Path.root(arg)%3B%20%2F%2F%20detect%20structured%20path%20(has%20dots)%0A%0A%20%20%20%20%20%20a.structured%20%3D%20Polymer.Path.isPath(arg)%3B%0A%0A%20%20%20%20%20%20if%20(a.structured)%20%7B%0A%20%20%20%20%20%20%20%20a.wildcard%20%3D%20arg.slice(-2)%20%3D%3D%20&#39;.*&#39;%3B%0A%0A%20%20%20%20%20%20%20%20if%20(a.wildcard)%20%7B%0A%20%20%20%20%20%20%20%20%20%20a.name%20%3D%20arg.slice(0%2C%20-2)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20a%3B%0A%20%20%7D%20%2F%2F%20data%20api%0A%0A%20%20%2F**%0A%20%20%20*%20Sends%20array%20splice%20notifications%20(%60.splices%60%20and%20%60.length%60)%0A%20%20%20*%0A%20%20%20*%20Note%3A%20this%20implementation%20only%20accepts%20normalized%20paths%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20Instance%20to%20send%20notifications%20to%0A%20%20%20*%20%40param%20%7BArray%7D%20array%20The%20array%20the%20mutations%20occurred%20on%0A%20%20%20*%20%40param%20%7Bstring%7D%20path%20The%20path%20to%20the%20array%20that%20was%20mutated%0A%20%20%20*%20%40param%20%7BArray%7D%20splices%20Array%20of%20splice%20records%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20notifySplices(inst%2C%20array%2C%20path%2C%20splices)%20%7B%0A%20%20%20%20let%20splicesPath%20%3D%20path%20%2B%20&#39;.splices&#39;%3B%0A%20%20%20%20inst.notifyPath(splicesPath%2C%20%7B%0A%20%20%20%20%20%20indexSplices%3A%20splices%0A%20%20%20%20%7D)%3B%0A%20%20%20%20inst.notifyPath(path%20%2B%20&#39;.length&#39;%2C%20array.length)%3B%20%2F%2F%20Null%20here%20to%20allow%20potentially%20large%20splice%20records%20to%20be%20GC&#39;ed.%0A%0A%20%20%20%20inst.__data%5BsplicesPath%5D%20%3D%20%7B%0A%20%20%20%20%20%20indexSplices%3A%20null%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Creates%20a%20splice%20record%20and%20sends%20an%20array%20splice%20notification%20for%0A%20%20%20*%20the%20described%20mutation%0A%20%20%20*%0A%20%20%20*%20Note%3A%20this%20implementation%20only%20accepts%20normalized%20paths%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PropertyEffectsType%7D%20inst%20Instance%20to%20send%20notifications%20to%0A%20%20%20*%20%40param%20%7BArray%7D%20array%20The%20array%20the%20mutations%20occurred%20on%0A%20%20%20*%20%40param%20%7Bstring%7D%20path%20The%20path%20to%20the%20array%20that%20was%20mutated%0A%20%20%20*%20%40param%20%7Bnumber%7D%20index%20Index%20at%20which%20the%20array%20mutation%20occurred%0A%20%20%20*%20%40param%20%7Bnumber%7D%20addedCount%20Number%20of%20added%20items%0A%20%20%20*%20%40param%20%7BArray%7D%20removed%20Array%20of%20removed%20items%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20notifySplice(inst%2C%20array%2C%20path%2C%20index%2C%20addedCount%2C%20removed)%20%7B%0A%20%20%20%20notifySplices(inst%2C%20array%2C%20path%2C%20%5B%7B%0A%20%20%20%20%20%20index%3A%20index%2C%0A%20%20%20%20%20%20addedCount%3A%20addedCount%2C%0A%20%20%20%20%20%20removed%3A%20removed%2C%0A%20%20%20%20%20%20object%3A%20array%2C%0A%20%20%20%20%20%20type%3A%20&#39;splice&#39;%0A%20%20%20%20%7D%5D)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Returns%20an%20upper-cased%20version%20of%20the%20string.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7Bstring%7D%20name%20String%20to%20uppercase%0A%20%20%20*%20%40return%20%7Bstring%7D%20Uppercased%20string%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20upper(name)%20%7B%0A%20%20%20%20return%20name%5B0%5D.toUpperCase()%20%2B%20name.substring(1)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Element%20class%20mixin%20that%20provides%20meta-programming%20for%20Polymer&#39;s%20template%0A%20%20%20*%20binding%20and%20data%20observation%20(collectively%2C%20%22property%20effects%22)%20system.%0A%20%20%20*%0A%20%20%20*%20This%20mixin%20uses%20provides%20the%20following%20key%20static%20methods%20for%20adding%0A%20%20%20*%20property%20effects%20to%20an%20element%20class%3A%0A%20%20%20*%20-%20%60addPropertyEffect%60%0A%20%20%20*%20-%20%60createPropertyObserver%60%0A%20%20%20*%20-%20%60createMethodObserver%60%0A%20%20%20*%20-%20%60createNotifyingProperty%60%0A%20%20%20*%20-%20%60createReadOnlyProperty%60%0A%20%20%20*%20-%20%60createReflectedProperty%60%0A%20%20%20*%20-%20%60createComputedProperty%60%0A%20%20%20*%20-%20%60bindTemplate%60%0A%20%20%20*%0A%20%20%20*%20Each%20method%20creates%20one%20or%20more%20property%20accessors%2C%20along%20with%20metadata%0A%20%20%20*%20used%20by%20this%20mixin&#39;s%20implementation%20of%20%60_propertiesChanged%60%20to%20perform%0A%20%20%20*%20the%20property%20effects.%0A%20%20%20*%0A%20%20%20*%20Underscored%20versions%20of%20the%20above%20methods%20also%20exist%20on%20the%20element%0A%20%20%20*%20prototype%20for%20adding%20property%20effects%20on%20instances%20at%20runtime.%0A%20%20%20*%0A%20%20%20*%20Note%20that%20this%20mixin%20overrides%20several%20%60PropertyAccessors%60%20methods%2C%20in%0A%20%20%20*%20many%20cases%20to%20maintain%20guarantees%20provided%20by%20the%20Polymer%201.x%20features%3B%0A%20%20%20*%20notably%20it%20changes%20property%20accessors%20to%20be%20synchronous%20by%20default%0A%20%20%20*%20whereas%20the%20default%20when%20using%20%60PropertyAccessors%60%20standalone%20is%20to%20be%0A%20%20%20*%20async%20by%20default.%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40appliesMixin%20Polymer.TemplateStamp%0A%20%20%20*%20%40appliesMixin%20Polymer.PropertyAccessors%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Element%20class%20mixin%20that%20provides%20meta-programming%20for%20Polymer&#39;s%0A%20%20%20*%20template%20binding%20and%20data%20observation%20system.%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.PropertyEffects%20%3D%20Polymer.dedupingMixin(superClass%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40constructor%0A%20%20%20%20%20*%20%40extends%20%7BsuperClass%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertyAccessors%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_TemplateStamp%7D%0A%20%20%20%20%20*%20%40unrestricted%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%20%20%20%20const%20propertyEffectsBase%20%3D%20Polymer.TemplateStamp(Polymer.PropertyAccessors(superClass))%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertyEffects%7D%0A%20%20%20%20%20*%20%40extends%20%7BpropertyEffectsBase%7D%0A%20%20%20%20%20*%20%40unrestricted%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20class%20PropertyEffects%20extends%20propertyEffectsBase%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super()%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bboolean%7D%20*%2F%0A%20%20%20%20%20%20%20%20%2F%2F%20Used%20to%20identify%20users%20of%20this%20mixin%2C%20ala%20instanceof%0A%0A%20%20%20%20%20%20%20%20this.__isPropertyEffectsClient%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bnumber%7D%20*%2F%0A%20%20%20%20%20%20%20%20%2F%2F%20NOTE%3A%20used%20to%20track%20re-entrant%20calls%20to%20%60_flushProperties%60%0A%20%20%20%20%20%20%20%20%2F%2F%20path%20changes%20dirty%20check%20against%20%60__dataTemp%60%20only%20during%20one%20%22turn%22%0A%20%20%20%20%20%20%20%20%2F%2F%20and%20are%20cleared%20when%20%60__dataCounter%60%20returns%20to%200.%0A%0A%20%20%20%20%20%20%20%20this.__dataCounter%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bboolean%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataClientsReady%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BArray%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataPendingClients%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataToNotify%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataLinkedPaths%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bboolean%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataHasPaths%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataCompoundStorage%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymer_PropertyEffects%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataHost%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Object%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataTemp%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bboolean%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataClientsInitialized%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Object%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__data%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Object%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataPending%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Object%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__dataOld%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__computeEffects%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__reflectEffects%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__notifyEffects%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__propagateEffects%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__observeEffects%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__readOnly%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!TemplateInfo%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__templateInfo%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20get%20PROPERTY_EFFECT_TYPES()%20%7B%0A%20%20%20%20%20%20%20%20return%20TYPES%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeProperties()%20%7B%0A%20%20%20%20%20%20%20%20super._initializeProperties()%3B%0A%0A%20%20%20%20%20%20%20%20hostStack.registerHost(this)%3B%0A%20%20%20%20%20%20%20%20this.__dataClientsReady%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.__dataPendingClients%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.__dataToNotify%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.__dataLinkedPaths%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.__dataHasPaths%20%3D%20false%3B%20%2F%2F%20May%20be%20set%20on%20instance%20prior%20to%20upgrade%0A%0A%20%20%20%20%20%20%20%20this.__dataCompoundStorage%20%3D%20this.__dataCompoundStorage%20%7C%7C%20null%3B%0A%20%20%20%20%20%20%20%20this.__dataHost%20%3D%20this.__dataHost%20%7C%7C%20null%3B%0A%20%20%20%20%20%20%20%20this.__dataTemp%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20this.__dataClientsInitialized%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20%60Polymer.PropertyAccessors%60%20implementation%20to%20provide%20a%0A%20%20%20%20%20%20%20*%20more%20efficient%20implementation%20of%20initializing%20properties%20from%0A%20%20%20%20%20%20%20*%20the%20prototype%20on%20the%20instance.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20props%20Properties%20to%20initialize%20on%20the%20prototype%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeProtoProperties(props)%20%7B%0A%20%20%20%20%20%20%20%20this.__data%20%3D%20Object.create(props)%3B%0A%20%20%20%20%20%20%20%20this.__dataPending%20%3D%20Object.create(props)%3B%0A%20%20%20%20%20%20%20%20this.__dataOld%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20%60Polymer.PropertyAccessors%60%20implementation%20to%20avoid%20setting%0A%20%20%20%20%20%20%20*%20%60_setProperty%60&#39;s%20%60shouldNotify%3A%20true%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20props%20Properties%20to%20initialize%20on%20the%20instance%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeInstanceProperties(props)%20%7B%0A%20%20%20%20%20%20%20%20let%20readOnly%20%3D%20this%5BTYPES.READ_ONLY%5D%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20prop%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!readOnly%20%7C%7C%20!readOnly%5Bprop%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataPending%20%3D%20this.__dataPending%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataOld%20%3D%20this.__dataOld%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__data%5Bprop%5D%20%3D%20this.__dataPending%5Bprop%5D%20%3D%20props%5Bprop%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F%2F%20Prototype%20setup%20----------------------------------------%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Equivalent%20to%20static%20%60addPropertyEffect%60%20API%20but%20can%20be%20called%20on%0A%20%20%20%20%20%20%20*%20an%20instance%20to%20add%20effects%20at%20runtime.%20%20See%20that%20method%20for%0A%20%20%20%20%20%20%20*%20full%20API%20docs.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20that%20should%20trigger%20the%20effect%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20type%20Effect%20type%2C%20from%20this.PROPERTY_EFFECT_TYPES%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20effect%20Effect%20metadata%20object%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_addPropertyEffect(property%2C%20type%2C%20effect)%20%7B%0A%20%20%20%20%20%20%20%20this._createPropertyAccessor(property%2C%20type%20%3D%3D%20TYPES.READ_ONLY)%3B%20%2F%2F%20effects%20are%20accumulated%20into%20arrays%20per%20property%20based%20on%20type%0A%0A%0A%20%20%20%20%20%20%20%20let%20effects%20%3D%20ensureOwnEffectMap(this%2C%20type)%5Bproperty%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!effects)%20%7B%0A%20%20%20%20%20%20%20%20%20%20effects%20%3D%20this%5Btype%5D%5Bproperty%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20effects.push(effect)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Removes%20the%20given%20property%20effect.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20the%20effect%20was%20associated%20with%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20type%20Effect%20type%2C%20from%20this.PROPERTY_EFFECT_TYPES%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20effect%20Effect%20metadata%20object%20to%20remove%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_removePropertyEffect(property%2C%20type%2C%20effect)%20%7B%0A%20%20%20%20%20%20%20%20let%20effects%20%3D%20ensureOwnEffectMap(this%2C%20type)%5Bproperty%5D%3B%0A%20%20%20%20%20%20%20%20let%20idx%20%3D%20effects.indexOf(effect)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(idx%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20effects.splice(idx%2C%201)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20whether%20the%20current%20prototype%2Finstance%20has%20a%20property%20effect%0A%20%20%20%20%20%20%20*%20of%20a%20certain%20type.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%3D%7D%20type%20Effect%20type%2C%20from%20this.PROPERTY_EFFECT_TYPES%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20the%20prototype%2Finstance%20has%20an%20effect%20of%20this%20type%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_hasPropertyEffect(property%2C%20type)%20%7B%0A%20%20%20%20%20%20%20%20let%20effects%20%3D%20this%5Btype%5D%3B%0A%20%20%20%20%20%20%20%20return%20Boolean(effects%20%26%26%20effects%5Bproperty%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20whether%20the%20current%20prototype%2Finstance%20has%20a%20%22read%20only%22%0A%20%20%20%20%20%20%20*%20accessor%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20the%20prototype%2Finstance%20has%20an%20effect%20of%20this%20type%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_hasReadOnlyEffect(property)%20%7B%0A%20%20%20%20%20%20%20%20return%20this._hasPropertyEffect(property%2C%20TYPES.READ_ONLY)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20whether%20the%20current%20prototype%2Finstance%20has%20a%20%22notify%22%0A%20%20%20%20%20%20%20*%20property%20effect%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20the%20prototype%2Finstance%20has%20an%20effect%20of%20this%20type%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_hasNotifyEffect(property)%20%7B%0A%20%20%20%20%20%20%20%20return%20this._hasPropertyEffect(property%2C%20TYPES.NOTIFY)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20whether%20the%20current%20prototype%2Finstance%20has%20a%20%22reflect%20to%20attribute%22%0A%20%20%20%20%20%20%20*%20property%20effect%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20the%20prototype%2Finstance%20has%20an%20effect%20of%20this%20type%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_hasReflectEffect(property)%20%7B%0A%20%20%20%20%20%20%20%20return%20this._hasPropertyEffect(property%2C%20TYPES.REFLECT)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20whether%20the%20current%20prototype%2Finstance%20has%20a%20%22computed%22%0A%20%20%20%20%20%20%20*%20property%20effect%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20the%20prototype%2Finstance%20has%20an%20effect%20of%20this%20type%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_hasComputedEffect(property)%20%7B%0A%20%20%20%20%20%20%20%20return%20this._hasPropertyEffect(property%2C%20TYPES.COMPUTE)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20Runtime%20----------------------------------------%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Sets%20a%20pending%20property%20or%20path.%20%20If%20the%20root%20property%20of%20the%20path%20in%0A%20%20%20%20%20%20%20*%20question%20had%20no%20accessor%2C%20the%20path%20is%20set%2C%20otherwise%20it%20is%20enqueued%0A%20%20%20%20%20%20%20*%20via%20%60_setPendingProperty%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20function%20isolates%20relatively%20expensive%20functionality%20necessary%0A%20%20%20%20%20%20%20*%20for%20the%20public%20API%20(%60set%60%2C%20%60setProperties%60%2C%20%60notifyPath%60%2C%20and%20property%0A%20%20%20%20%20%20%20*%20change%20listeners%20via%20%7B%7B...%7D%7D%20bindings)%2C%20such%20that%20it%20is%20only%20done%0A%20%20%20%20%20%20%20*%20when%20paths%20enter%20the%20system%2C%20and%20not%20at%20every%20propagation%20step.%20%20It%0A%20%20%20%20%20%20%20*%20also%20sets%20a%20%60__dataHasPaths%60%20flag%20on%20the%20instance%20which%20is%20used%20to%0A%20%20%20%20%20%20%20*%20fast-path%20slower%20path-matching%20code%20in%20the%20property%20effects%20host%20paths.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%60path%60%20can%20be%20a%20path%20string%20or%20array%20of%20path%20parts%20as%20accepted%20by%20the%0A%20%20%20%20%20%20%20*%20public%20API.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cnumber%7Cstring%3E%7D%20path%20Path%20to%20set%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20shouldNotify%20Set%20to%20true%20if%20this%20change%20should%0A%20%20%20%20%20%20%20*%20%20cause%20a%20property%20notification%20event%20dispatch%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20isPathNotification%20If%20the%20path%20being%20set%20is%20a%20path%0A%20%20%20%20%20%20%20*%20%20%20notification%20of%20an%20already%20changed%20value%2C%20as%20opposed%20to%20a%20request%0A%20%20%20%20%20%20%20*%20%20%20to%20set%20and%20notify%20the%20change.%20%20In%20the%20latter%20%60false%60%20case%2C%20a%20dirty%0A%20%20%20%20%20%20%20*%20%20%20check%20is%20performed%20and%20then%20the%20value%20is%20set%20to%20the%20path%20before%0A%20%20%20%20%20%20%20*%20%20%20enqueuing%20the%20pending%20property%20change.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Returns%20true%20if%20the%20property%2Fpath%20was%20enqueued%20in%0A%20%20%20%20%20%20%20*%20%20%20the%20pending%20changes%20bag.%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_setPendingPropertyOrPath(path%2C%20value%2C%20shouldNotify%2C%20isPathNotification)%20%7B%0A%20%20%20%20%20%20%20%20if%20(isPathNotification%20%7C%7C%20Polymer.Path.root(Array.isArray(path)%20%3F%20path%5B0%5D%20%3A%20path)%20!%3D%3D%20path)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Dirty%20check%20changes%20being%20set%20to%20a%20path%20against%20the%20actual%20object%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20since%20this%20is%20the%20entry%20point%20for%20paths%20into%20the%20system%3B%20from%20here%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20only%20dirty%20checks%20are%20against%20the%20%60__dataTemp%60%20cache%20to%20prevent%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20duplicate%20work%20in%20the%20same%20turn%20only.%20Note%2C%20if%20this%20was%20a%20notification%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20of%20a%20change%20already%20set%20to%20a%20path%20(isPathNotification%3A%20true)%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20we%20always%20let%20the%20change%20through%20and%20skip%20the%20%60set%60%20since%20it%20was%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20already%20dirty%20checked%20at%20the%20point%20of%20entry%20and%20the%20underlying%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20object%20has%20already%20been%20updated%0A%20%20%20%20%20%20%20%20%20%20if%20(!isPathNotification)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20old%20%3D%20Polymer.Path.get(this%2C%20path)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20path%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20Polymer.Path.set(this%2C%20path%2C%20value)%3B%20%2F%2F%20Use%20property-accessor&#39;s%20simpler%20dirty%20check%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!path%20%7C%7C%20!super._shouldPropertyChange(path%2C%20value%2C%20old))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20this.__dataHasPaths%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(this._setPendingProperty(%0A%20%20%20%20%20%20%20%20%20%20%2F**%40type%7Bstring%7D*%2F%0A%20%20%20%20%20%20%20%20%20%20path%2C%20value%2C%20shouldNotify))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20computeLinkedPaths(this%2C%20path%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.__dataHasAccessor%20%26%26%20this.__dataHasAccessor%5Bpath%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this._setPendingProperty(%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F**%40type%7Bstring%7D*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20path%2C%20value%2C%20shouldNotify)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this%5Bpath%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Applies%20a%20value%20to%20a%20non-Polymer%20element%2Fnode&#39;s%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20implementation%20makes%20a%20best-effort%20at%20binding%20interop%3A%0A%20%20%20%20%20%20%20*%20Some%20native%20element%20properties%20have%20side-effects%20when%0A%20%20%20%20%20%20%20*%20re-setting%20the%20same%20value%20(e.g.%20setting%20%60%3Cinput%3E.value%60%20resets%20the%0A%20%20%20%20%20%20%20*%20cursor%20position)%2C%20so%20we%20do%20a%20dirty-check%20before%20setting%20the%20value.%0A%20%20%20%20%20%20%20*%20However%2C%20for%20better%20interop%20with%20non-Polymer%20custom%20elements%20that%0A%20%20%20%20%20%20%20*%20accept%20objects%2C%20we%20explicitly%20re-set%20object%20changes%20coming%20from%20the%0A%20%20%20%20%20%20%20*%20Polymer%20world%20(which%20may%20include%20deep%20object%20changes%20without%20the%0A%20%20%20%20%20%20%20*%20top%20reference%20changing)%2C%20erring%20on%20the%20side%20of%20providing%20more%0A%20%20%20%20%20%20%20*%20information.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Users%20may%20override%20this%20method%20to%20provide%20alternate%20approaches.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20The%20node%20to%20set%20a%20property%20on%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20prop%20The%20property%20to%20set%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20The%20value%20to%20set%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_setUnmanagedPropertyToNode(node%2C%20prop%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20It%20is%20a%20judgment%20call%20that%20resetting%20primitives%20is%0A%20%20%20%20%20%20%20%20%2F%2F%20%22bad%22%20and%20resettings%20objects%20is%20also%20%22good%22%3B%20alternatively%20we%20could%0A%20%20%20%20%20%20%20%20%2F%2F%20implement%20a%20whitelist%20of%20tag%20%26%20property%20values%20that%20should%20never%0A%20%20%20%20%20%20%20%20%2F%2F%20be%20reset%20(e.g.%20%3Cinput%3E.value%20%26%26%20%3Cselect%3E.value)%0A%20%20%20%20%20%20%20%20if%20(value%20!%3D%3D%20node%5Bprop%5D%20%7C%7C%20typeof%20value%20%3D%3D%20&#39;object&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%5Bprop%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20the%20%60PropertiesChanged%60%20implementation%20to%20introduce%20special%0A%20%20%20%20%20%20%20*%20dirty%20check%20logic%20depending%20on%20the%20property%20%26%20value%20being%20set%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%201.%20Any%20value%20set%20to%20a%20path%20(e.g.%20&#39;obj.prop&#39;%3A%2042%20or%20&#39;obj.prop&#39;%3A%20%7B...%7D)%0A%20%20%20%20%20%20%20*%20%20%20%20Stored%20in%20%60__dataTemp%60%2C%20dirty%20checked%20against%20%60__dataTemp%60%0A%20%20%20%20%20%20%20*%202.%20Object%20set%20to%20simple%20property%20(e.g.%20&#39;prop&#39;%3A%20%7B...%7D)%0A%20%20%20%20%20%20%20*%20%20%20%20Stored%20in%20%60__dataTemp%60%20and%20%60__data%60%2C%20dirty%20checked%20against%0A%20%20%20%20%20%20%20*%20%20%20%20%60__dataTemp%60%20by%20default%20implementation%20of%20%60_shouldPropertyChange%60%0A%20%20%20%20%20%20%20*%203.%20Primitive%20value%20set%20to%20simple%20property%20(e.g.%20&#39;prop&#39;%3A%2042)%0A%20%20%20%20%20%20%20*%20%20%20%20Stored%20in%20%60__data%60%2C%20dirty%20checked%20against%20%60__data%60%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20dirty-check%20is%20important%20to%20prevent%20cycles%20due%20to%20two-way%0A%20%20%20%20%20%20%20*%20notification%2C%20but%20paths%20and%20objects%20are%20only%20dirty%20checked%20against%20any%0A%20%20%20%20%20%20%20*%20previous%20value%20set%20during%20this%20turn%20via%20a%20%22temporary%20cache%22%20that%20is%0A%20%20%20%20%20%20%20*%20cleared%20when%20the%20last%20%60_propertiesChanged%60%20exits.%20This%20is%20so%3A%0A%20%20%20%20%20%20%20*%20a.%20any%20cached%20array%20paths%20(e.g.%20&#39;array.3.prop&#39;)%20may%20be%20invalidated%0A%20%20%20%20%20%20%20*%20%20%20%20due%20to%20array%20mutations%20like%20shift%2Funshift%2Fsplice%3B%20this%20is%20fine%0A%20%20%20%20%20%20%20*%20%20%20%20since%20path%20changes%20are%20dirty-checked%20at%20user%20entry%20points%20like%20%60set%60%0A%20%20%20%20%20%20%20*%20b.%20dirty-checking%20for%20objects%20only%20lasts%20one%20turn%20to%20allow%20the%20user%0A%20%20%20%20%20%20%20*%20%20%20%20to%20mutate%20the%20object%20in-place%20and%20re-set%20it%20with%20the%20same%20identity%0A%20%20%20%20%20%20%20*%20%20%20%20and%20have%20all%20sub-properties%20re-propagated%20in%20a%20subsequent%20turn.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20temp%20cache%20is%20not%20necessarily%20sufficient%20to%20prevent%20invalid%20array%0A%20%20%20%20%20%20%20*%20paths%2C%20since%20a%20splice%20can%20happen%20during%20the%20same%20turn%20(with%20pathological%0A%20%20%20%20%20%20%20*%20user%20code)%3B%20we%20could%20introduce%20a%20%22fixup%22%20for%20temporarily%20cached%20array%0A%20%20%20%20%20%20%20*%20paths%20if%20needed%3A%20https%3A%2F%2Fgithub.com%2FPolymer%2Fpolymer%2Fissues%2F4227%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20the%20property%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20shouldNotify%20True%20if%20property%20should%20fire%20notification%0A%20%20%20%20%20%20%20*%20%20%20event%20(applies%20only%20for%20%60notify%3A%20true%60%20properties)%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Returns%20true%20if%20the%20property%20changed%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_setPendingProperty(property%2C%20value%2C%20shouldNotify)%20%7B%0A%20%20%20%20%20%20%20%20let%20isPath%20%3D%20this.__dataHasPaths%20%26%26%20Polymer.Path.isPath(property)%3B%0A%20%20%20%20%20%20%20%20let%20prevProps%20%3D%20isPath%20%3F%20this.__dataTemp%20%3A%20this.__data%3B%0A%0A%20%20%20%20%20%20%20%20if%20(this._shouldPropertyChange(property%2C%20value%2C%20prevProps%5Bproperty%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!this.__dataPending)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataPending%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataOld%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Ensure%20old%20is%20captured%20from%20the%20last%20turn%0A%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(!(property%20in%20this.__dataOld))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataOld%5Bproperty%5D%20%3D%20this.__data%5Bproperty%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Paths%20are%20stored%20in%20temporary%20cache%20(cleared%20at%20end%20of%20turn)%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20which%20is%20used%20for%20dirty-checking%2C%20all%20others%20stored%20in%20__data%0A%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(isPath)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataTemp%5Bproperty%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__data%5Bproperty%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20All%20changes%20go%20into%20pending%20property%20bag%2C%20passed%20to%20_propertiesChanged%0A%0A%0A%20%20%20%20%20%20%20%20%20%20this.__dataPending%5Bproperty%5D%20%3D%20value%3B%20%2F%2F%20Track%20properties%20that%20should%20notify%20separately%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(isPath%20%7C%7C%20this%5BTYPES.NOTIFY%5D%20%26%26%20this%5BTYPES.NOTIFY%5D%5Bproperty%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataToNotify%20%3D%20this.__dataToNotify%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__dataToNotify%5Bproperty%5D%20%3D%20shouldNotify%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20base%20implementation%20to%20ensure%20all%20accessors%20set%20%60shouldNotify%60%0A%20%20%20%20%20%20%20*%20to%20true%2C%20for%20per-property%20notification%20tracking.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20the%20property%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_setProperty(property%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._setPendingProperty(property%2C%20value%2C%20true))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateProperties()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20%60PropertyAccessor%60&#39;s%20default%20async%20queuing%20of%0A%20%20%20%20%20%20%20*%20%60_propertiesChanged%60%3A%20if%20%60__dataReady%60%20is%20false%20(has%20not%20yet%20been%0A%20%20%20%20%20%20%20*%20manually%20flushed)%2C%20the%20function%20no-ops%3B%20otherwise%20flushes%0A%20%20%20%20%20%20%20*%20%60_propertiesChanged%60%20synchronously.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_invalidateProperties()%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.__dataReady)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._flushProperties()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Enqueues%20the%20given%20client%20on%20a%20list%20of%20pending%20clients%2C%20whose%0A%20%20%20%20%20%20%20*%20pending%20property%20changes%20can%20later%20be%20flushed%20via%20a%20call%20to%0A%20%20%20%20%20%20%20*%20%60_flushClients%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20client%20PropertyEffects%20client%20to%20enqueue%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_enqueueClient(client)%20%7B%0A%20%20%20%20%20%20%20%20this.__dataPendingClients%20%3D%20this.__dataPendingClients%20%7C%7C%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(client%20!%3D%3D%20this)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataPendingClients.push(client)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20superclass%20implementation.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_flushProperties()%20%7B%0A%20%20%20%20%20%20%20%20this.__dataCounter%2B%2B%3B%0A%0A%20%20%20%20%20%20%20%20super._flushProperties()%3B%0A%0A%20%20%20%20%20%20%20%20this.__dataCounter--%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Flushes%20any%20clients%20previously%20enqueued%20via%20%60_enqueueClient%60%2C%20causing%0A%20%20%20%20%20%20%20*%20their%20%60_flushProperties%60%20method%20to%20run.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_flushClients()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.__dataClientsReady)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataClientsReady%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this._readyClients()%3B%20%2F%2F%20Override%20point%20where%20accessors%20are%20turned%20on%3B%20importantly%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20is%20after%20clients%20have%20fully%20readied%2C%20providing%20a%20guarantee%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20that%20any%20property%20effects%20occur%20only%20after%20all%20clients%20are%20ready.%0A%0A%0A%20%20%20%20%20%20%20%20%20%20this.__dataReady%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__enableOrFlushClients()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F%2F%20NOTE%3A%20We%20ensure%20clients%20either%20enable%20or%20flush%20as%20appropriate.%20This%0A%20%20%20%20%20%20%2F%2F%20handles%20two%20corner%20cases%3A%0A%20%20%20%20%20%20%2F%2F%20(1)%20clients%20flush%20properly%20when%20connected%2Fenabled%20before%20the%20host%0A%20%20%20%20%20%20%2F%2F%20enables%3B%20e.g.%0A%20%20%20%20%20%20%2F%2F%20%20%20(a)%20Templatize%20stamps%20with%20no%20properties%20and%20does%20not%20flush%20and%0A%20%20%20%20%20%20%2F%2F%20%20%20(b)%20the%20instance%20is%20inserted%20into%20dom%20and%0A%20%20%20%20%20%20%2F%2F%20%20%20(c)%20then%20the%20instance%20flushes.%0A%20%20%20%20%20%20%2F%2F%20(2)%20clients%20enable%20properly%20when%20not%20connected%2Fenabled%20when%20the%20host%0A%20%20%20%20%20%20%2F%2F%20flushes%3B%20e.g.%0A%20%20%20%20%20%20%2F%2F%20%20%20(a)%20a%20template%20is%20runtime%20stamped%20and%20not%20yet%20connected%2Fenabled%0A%20%20%20%20%20%20%2F%2F%20%20%20(b)%20a%20host%20sets%20a%20property%2C%20causing%20stamped%20dom%20to%20flush%0A%20%20%20%20%20%20%2F%2F%20%20%20(c)%20the%20stamped%20dom%20enables.%0A%0A%0A%20%20%20%20%20%20__enableOrFlushClients()%20%7B%0A%20%20%20%20%20%20%20%20let%20clients%20%3D%20this.__dataPendingClients%3B%0A%0A%20%20%20%20%20%20%20%20if%20(clients)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataPendingClients%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20clients.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20client%20%3D%20clients%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!client.__dataEnabled)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20client._enableProperties()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(client.__dataPending)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20client._flushProperties()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Perform%20any%20initial%20setup%20on%20client%20dom.%20Called%20before%20the%20first%0A%20%20%20%20%20%20%20*%20%60_flushProperties%60%20call%20on%20client%20dom%20and%20before%20any%20element%0A%20%20%20%20%20%20%20*%20observers%20are%20called.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_readyClients()%20%7B%0A%20%20%20%20%20%20%20%20this.__enableOrFlushClients()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Sets%20a%20bag%20of%20property%20changes%20to%20this%20instance%2C%20and%0A%20%20%20%20%20%20%20*%20synchronously%20processes%20all%20effects%20of%20the%20properties%20as%20a%20batch.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Property%20names%20must%20be%20simple%20properties%2C%20not%20paths.%20%20Batched%0A%20%20%20%20%20%20%20*%20path%20propagation%20is%20not%20supported.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20one%20or%20more%20key-value%20pairs%20whose%20key%20is%0A%20%20%20%20%20%20%20*%20%20%20a%20property%20and%20value%20is%20the%20new%20value%20to%20set%20for%20that%20property.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20setReadOnly%20When%20true%2C%20any%20private%20values%20set%20in%0A%20%20%20%20%20%20%20*%20%20%20%60props%60%20will%20be%20set.%20By%20default%2C%20%60setProperties%60%20will%20not%20set%0A%20%20%20%20%20%20%20*%20%20%20%60readOnly%3A%20true%60%20root%20properties.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20setProperties(props%2C%20setReadOnly)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20path%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(setReadOnly%20%7C%7C%20!this%5BTYPES.READ_ONLY%5D%20%7C%7C%20!this%5BTYPES.READ_ONLY%5D%5Bpath%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FTODO(kschaaf)%3A%20explicitly%20disallow%20paths%20in%20setProperty%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20wildcard%20observers%20currently%20only%20pass%20the%20first%20changed%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20in%20the%20%60info%60%20object%2C%20and%20you%20could%20do%20some%20odd%20things%20batching%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20paths%2C%20e.g.%20%7B&#39;foo.bar&#39;%3A%20%7B...%7D%2C%20&#39;foo&#39;%3A%20null%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this._setPendingPropertyOrPath(path%2C%20props%5Bpath%5D%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this._invalidateProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20%60PropertyAccessors%60%20so%20that%20property%20accessor%0A%20%20%20%20%20%20%20*%20side%20effects%20are%20not%20enabled%20until%20after%20client%20dom%20is%20fully%20ready.%0A%20%20%20%20%20%20%20*%20Also%20calls%20%60_flushClients%60%20callback%20to%20ensure%20client%20dom%20is%20enabled%0A%20%20%20%20%20%20%20*%20that%20was%20not%20enabled%20as%20a%20result%20of%20flushing%20properties.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20ready()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20It%20is%20important%20that%20%60super.ready()%60%20is%20not%20called%20here%20as%20it%0A%20%20%20%20%20%20%20%20%2F%2F%20immediately%20turns%20on%20accessors.%20Instead%2C%20we%20wait%20until%20%60readyClients%60%0A%20%20%20%20%20%20%20%20%2F%2F%20to%20enable%20accessors%20to%20provide%20a%20guarantee%20that%20clients%20are%20ready%0A%20%20%20%20%20%20%20%20%2F%2F%20before%20processing%20any%20accessors%20side%20effects.%0A%20%20%20%20%20%20%20%20this._flushProperties()%3B%20%2F%2F%20If%20no%20data%20was%20pending%2C%20%60_flushProperties%60%20will%20not%20%60flushClients%60%0A%20%20%20%20%20%20%20%20%2F%2F%20so%20ensure%20this%20is%20done.%0A%0A%0A%20%20%20%20%20%20%20%20if%20(!this.__dataClientsReady)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._flushClients()%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Before%20ready%2C%20client%20notifications%20do%20not%20trigger%20_flushProperties.%0A%20%20%20%20%20%20%20%20%2F%2F%20Therefore%20a%20flush%20is%20necessary%20here%20if%20data%20has%20been%20set.%0A%0A%0A%20%20%20%20%20%20%20%20if%20(this.__dataPending)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._flushProperties()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Implements%20%60PropertyAccessors%60&#39;s%20properties%20changed%20callback.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Runs%20each%20class%20of%20effects%20for%20the%20batch%20of%20changed%20properties%20in%0A%20%20%20%20%20%20%20*%20a%20specific%20order%20(compute%2C%20propagate%2C%20reflect%2C%20observe%2C%20notify).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20currentProps%20Bag%20of%20all%20current%20accessor%20values%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20changedProps%20Bag%20of%20properties%20changed%20since%20the%20last%0A%20%20%20%20%20%20%20*%20%20%20call%20to%20%60_propertiesChanged%60%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20oldProps%20Bag%20of%20previous%20values%20for%20each%20property%0A%20%20%20%20%20%20%20*%20%20%20in%20%60changedProps%60%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_propertiesChanged(currentProps%2C%20changedProps%2C%20oldProps)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20----------------------------%0A%20%20%20%20%20%20%20%20%2F%2F%20let%20c%20%3D%20Object.getOwnPropertyNames(changedProps%20%7C%7C%20%7B%7D)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20window.debug%20%26%26%20console.group(this.localName%20%2B%20&#39;%23&#39;%20%2B%20this.id%20%2B%20&#39;%3A%20&#39;%20%2B%20c)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20(window.debug)%20%7B%20debugger%3B%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20----------------------------%0A%20%20%20%20%20%20%20%20let%20hasPaths%20%3D%20this.__dataHasPaths%3B%0A%20%20%20%20%20%20%20%20this.__dataHasPaths%20%3D%20false%3B%20%2F%2F%20Compute%20properties%0A%0A%20%20%20%20%20%20%20%20runComputedEffects(this%2C%20changedProps%2C%20oldProps%2C%20hasPaths)%3B%20%2F%2F%20Clear%20notify%20properties%20prior%20to%20possible%20reentry%20(propagate%2C%20observe)%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20but%20after%20computing%20effects%20have%20a%20chance%20to%20add%20to%20them%0A%0A%20%20%20%20%20%20%20%20let%20notifyProps%20%3D%20this.__dataToNotify%3B%0A%20%20%20%20%20%20%20%20this.__dataToNotify%20%3D%20null%3B%20%2F%2F%20Propagate%20properties%20to%20clients%0A%0A%20%20%20%20%20%20%20%20this._propagatePropertyChanges(changedProps%2C%20oldProps%2C%20hasPaths)%3B%20%2F%2F%20Flush%20clients%0A%0A%0A%20%20%20%20%20%20%20%20this._flushClients()%3B%20%2F%2F%20Reflect%20properties%0A%0A%0A%20%20%20%20%20%20%20%20runEffects(this%2C%20this%5BTYPES.REFLECT%5D%2C%20changedProps%2C%20oldProps%2C%20hasPaths)%3B%20%2F%2F%20Observe%20properties%0A%0A%20%20%20%20%20%20%20%20runEffects(this%2C%20this%5BTYPES.OBSERVE%5D%2C%20changedProps%2C%20oldProps%2C%20hasPaths)%3B%20%2F%2F%20Notify%20properties%20to%20host%0A%0A%20%20%20%20%20%20%20%20if%20(notifyProps)%20%7B%0A%20%20%20%20%20%20%20%20%20%20runNotifyEffects(this%2C%20notifyProps%2C%20changedProps%2C%20oldProps%2C%20hasPaths)%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Clear%20temporary%20cache%20at%20end%20of%20turn%0A%0A%0A%20%20%20%20%20%20%20%20if%20(this.__dataCounter%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__dataTemp%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20----------------------------%0A%20%20%20%20%20%20%20%20%2F%2F%20window.debug%20%26%26%20console.groupEnd(this.localName%20%2B%20&#39;%23&#39;%20%2B%20this.id%20%2B%20&#39;%3A%20&#39;%20%2B%20c)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20----------------------------%0A%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Called%20to%20propagate%20any%20property%20changes%20to%20stamped%20template%20nodes%0A%20%20%20%20%20%20%20*%20managed%20by%20this%20element.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20changedProps%20Bag%20of%20changed%20properties%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%7D%20hasPaths%20True%20with%20%60props%60%20contains%20one%20or%20more%20paths%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_propagatePropertyChanges(changedProps%2C%20oldProps%2C%20hasPaths)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this%5BTYPES.PROPAGATE%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20runEffects(this%2C%20this%5BTYPES.PROPAGATE%5D%2C%20changedProps%2C%20oldProps%2C%20hasPaths)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20let%20templateInfo%20%3D%20this.__templateInfo%3B%0A%0A%20%20%20%20%20%20%20%20while%20(templateInfo)%20%7B%0A%20%20%20%20%20%20%20%20%20%20runEffects(this%2C%20templateInfo.propertyEffects%2C%20changedProps%2C%20oldProps%2C%20hasPaths%2C%20templateInfo.nodeList)%3B%0A%20%20%20%20%20%20%20%20%20%20templateInfo%20%3D%20templateInfo.nextTemplateInfo%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Aliases%20one%20data%20path%20as%20another%2C%20such%20that%20path%20notifications%20from%20one%0A%20%20%20%20%20%20%20*%20are%20routed%20to%20the%20other.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20to%20Target%20path%20to%20link.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20from%20Source%20path%20to%20link.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20linkPaths(to%2C%20from)%20%7B%0A%20%20%20%20%20%20%20%20to%20%3D%20Polymer.Path.normalize(to)%3B%0A%20%20%20%20%20%20%20%20from%20%3D%20Polymer.Path.normalize(from)%3B%0A%20%20%20%20%20%20%20%20this.__dataLinkedPaths%20%3D%20this.__dataLinkedPaths%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20this.__dataLinkedPaths%5Bto%5D%20%3D%20from%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Removes%20a%20data%20path%20alias%20previously%20established%20with%20%60_linkPaths%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%2C%20the%20path%20to%20unlink%20should%20be%20the%20target%20(%60to%60)%20used%20when%0A%20%20%20%20%20%20%20*%20linking%20the%20paths.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Target%20path%20to%20unlink.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20unlinkPaths(path)%20%7B%0A%20%20%20%20%20%20%20%20path%20%3D%20Polymer.Path.normalize(path)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(this.__dataLinkedPaths)%20%7B%0A%20%20%20%20%20%20%20%20%20%20delete%20this.__dataLinkedPaths%5Bpath%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Notify%20that%20an%20array%20has%20changed.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%20%20%20%20this.items%20%3D%20%5B%20%7Bname%3A%20&#39;Jim&#39;%7D%2C%20%7Bname%3A%20&#39;Todd&#39;%7D%2C%20%7Bname%3A%20&#39;Bill&#39;%7D%20%5D%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20...%0A%20%20%20%20%20%20%20*%20%20%20%20%20this.items.splice(1%2C%201%2C%20%7Bname%3A%20&#39;Sam&#39;%7D)%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20this.items.push(%7Bname%3A%20&#39;Bob&#39;%7D)%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20this.notifySplices(&#39;items&#39;%2C%20%5B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%7B%20index%3A%201%2C%20removed%3A%20%5B%7Bname%3A%20&#39;Todd&#39;%7D%5D%2C%20addedCount%3A%201%2C%20object%3A%20this.items%2C%20type%3A%20&#39;splice&#39;%20%7D%2C%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%7B%20index%3A%203%2C%20removed%3A%20%5B%5D%2C%20addedCount%3A%201%2C%20object%3A%20this.items%2C%20type%3A%20&#39;splice&#39;%7D%0A%20%20%20%20%20%20%20*%20%20%20%20%20%5D)%3B%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20that%20should%20be%20notified.%0A%20%20%20%20%20%20%20*%20%40param%20%7BArray%7D%20splices%20Array%20of%20splice%20records%20indicating%20ordered%0A%20%20%20%20%20%20%20*%20%20%20changes%20that%20occurred%20to%20the%20array.%20Each%20record%20should%20have%20the%0A%20%20%20%20%20%20%20*%20%20%20following%20fields%3A%0A%20%20%20%20%20%20%20*%20%20%20%20*%20index%3A%20index%20at%20which%20the%20change%20occurred%0A%20%20%20%20%20%20%20*%20%20%20%20*%20removed%3A%20array%20of%20items%20that%20were%20removed%20from%20this%20index%0A%20%20%20%20%20%20%20*%20%20%20%20*%20addedCount%3A%20number%20of%20new%20items%20added%20at%20this%20index%0A%20%20%20%20%20%20%20*%20%20%20%20*%20object%3A%20a%20reference%20to%20the%20array%20in%20question%0A%20%20%20%20%20%20%20*%20%20%20%20*%20type%3A%20the%20string%20literal%20&#39;splice&#39;%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%20%20Note%20that%20splice%20records%20_must_%20be%20normalized%20such%20that%20they%20are%0A%20%20%20%20%20%20%20*%20%20%20reported%20in%20index%20order%20(raw%20results%20from%20%60Object.observe%60%20are%20not%0A%20%20%20%20%20%20%20*%20%20%20ordered%20and%20must%20be%20normalized%2Fmerged%20before%20notifying).%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20notifySplices(path%2C%20splices)%20%7B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20path%3A%20&#39;&#39;%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20let%20array%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BArray%7D%20*%2F%0A%20%20%20%20%20%20%20%20Polymer.Path.get(this%2C%20path%2C%20info)%3B%0A%20%20%20%20%20%20%20%20notifySplices(this%2C%20array%2C%20info.path%2C%20splices)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Convenience%20method%20for%20reading%20a%20value%20from%20a%20path.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%2C%20if%20any%20part%20in%20the%20path%20is%20undefined%2C%20this%20method%20returns%0A%20%20%20%20%20%20%20*%20%60undefined%60%20(this%20method%20does%20not%20throw%20when%20dereferencing%20undefined%0A%20%20%20%20%20%20%20*%20paths).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B(string%7C!Array%3C(string%7Cnumber)%3E)%7D%20path%20Path%20to%20the%20value%0A%20%20%20%20%20%20%20*%20%20%20to%20read.%20%20The%20path%20may%20be%20specified%20as%20a%20string%20(e.g.%20%60foo.bar.baz%60)%0A%20%20%20%20%20%20%20*%20%20%20or%20an%20array%20of%20path%20parts%20(e.g.%20%60%5B&#39;foo.bar&#39;%2C%20&#39;baz&#39;%5D%60).%20%20Note%20that%0A%20%20%20%20%20%20%20*%20%20%20bracketed%20expressions%20are%20not%20supported%3B%20string-based%20path%20parts%0A%20%20%20%20%20%20%20*%20%20%20*must*%20be%20separated%20by%20dots.%20%20Note%20that%20when%20dereferencing%20array%0A%20%20%20%20%20%20%20*%20%20%20indices%2C%20the%20index%20may%20be%20used%20as%20a%20dotted%20part%20directly%0A%20%20%20%20%20%20%20*%20%20%20(e.g.%20%60users.12.name%60%20or%20%60%5B&#39;users&#39;%2C%2012%2C%20&#39;name&#39;%5D%60).%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20root%20Root%20object%20from%20which%20the%20path%20is%20evaluated.%0A%20%20%20%20%20%20%20*%20%40return%20%7B*%7D%20Value%20at%20the%20path%2C%20or%20%60undefined%60%20if%20any%20part%20of%20the%20path%0A%20%20%20%20%20%20%20*%20%20%20is%20undefined.%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20get(path%2C%20root)%20%7B%0A%20%20%20%20%20%20%20%20return%20Polymer.Path.get(root%20%7C%7C%20this%2C%20path)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Convenience%20method%20for%20setting%20a%20value%20to%20a%20path%20and%20notifying%20any%0A%20%20%20%20%20%20%20*%20elements%20bound%20to%20the%20same%20path.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%2C%20if%20any%20part%20in%20the%20path%20except%20for%20the%20last%20is%20undefined%2C%0A%20%20%20%20%20%20%20*%20this%20method%20does%20nothing%20(this%20method%20does%20not%20throw%20when%0A%20%20%20%20%20%20%20*%20dereferencing%20undefined%20paths).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B(string%7C!Array%3C(string%7Cnumber)%3E)%7D%20path%20Path%20to%20the%20value%0A%20%20%20%20%20%20%20*%20%20%20to%20write.%20%20The%20path%20may%20be%20specified%20as%20a%20string%20(e.g.%20%60&#39;foo.bar.baz&#39;%60)%0A%20%20%20%20%20%20%20*%20%20%20or%20an%20array%20of%20path%20parts%20(e.g.%20%60%5B&#39;foo.bar&#39;%2C%20&#39;baz&#39;%5D%60).%20%20Note%20that%0A%20%20%20%20%20%20%20*%20%20%20bracketed%20expressions%20are%20not%20supported%3B%20string-based%20path%20parts%0A%20%20%20%20%20%20%20*%20%20%20*must*%20be%20separated%20by%20dots.%20%20Note%20that%20when%20dereferencing%20array%0A%20%20%20%20%20%20%20*%20%20%20indices%2C%20the%20index%20may%20be%20used%20as%20a%20dotted%20part%20directly%0A%20%20%20%20%20%20%20*%20%20%20(e.g.%20%60&#39;users.12.name&#39;%60%20or%20%60%5B&#39;users&#39;%2C%2012%2C%20&#39;name&#39;%5D%60).%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%20at%20the%20specified%20path.%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20root%20Root%20object%20from%20which%20the%20path%20is%20evaluated.%0A%20%20%20%20%20%20%20*%20%20%20When%20specified%2C%20no%20notification%20will%20occur.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20set(path%2C%20value%2C%20root)%20%7B%0A%20%20%20%20%20%20%20%20if%20(root)%20%7B%0A%20%20%20%20%20%20%20%20%20%20Polymer.Path.set(root%2C%20path%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!this%5BTYPES.READ_ONLY%5D%20%7C%7C%20!this%5BTYPES.READ_ONLY%5D%5B%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20path%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this._setPendingPropertyOrPath(path%2C%20value%2C%20true))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this._invalidateProperties()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Adds%20items%20onto%20the%20end%20of%20the%20array%20at%20the%20path%20specified.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20arguments%20after%20%60path%60%20and%20return%20value%20match%20that%20of%0A%20%20%20%20%20%20%20*%20%60Array.prototype.push%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20notifies%20other%20paths%20to%20the%20same%20array%20that%20a%0A%20%20%20%20%20%20%20*%20splice%20occurred%20to%20the%20array.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Path%20to%20array.%0A%20%20%20%20%20%20%20*%20%40param%20%7B...*%7D%20items%20Items%20to%20push%20onto%20array%0A%20%20%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20New%20length%20of%20the%20array.%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20push(path%2C%20...items)%20%7B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20path%3A%20&#39;&#39;%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20let%20array%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BArray%7D*%2F%0A%20%20%20%20%20%20%20%20Polymer.Path.get(this%2C%20path%2C%20info)%3B%0A%20%20%20%20%20%20%20%20let%20len%20%3D%20array.length%3B%0A%20%20%20%20%20%20%20%20let%20ret%20%3D%20array.push(...items)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(items.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20notifySplice(this%2C%20array%2C%20info.path%2C%20len%2C%20items.length%2C%20%5B%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20ret%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Removes%20an%20item%20from%20the%20end%20of%20array%20at%20the%20path%20specified.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20arguments%20after%20%60path%60%20and%20return%20value%20match%20that%20of%0A%20%20%20%20%20%20%20*%20%60Array.prototype.pop%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20notifies%20other%20paths%20to%20the%20same%20array%20that%20a%0A%20%20%20%20%20%20%20*%20splice%20occurred%20to%20the%20array.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Path%20to%20array.%0A%20%20%20%20%20%20%20*%20%40return%20%7B*%7D%20Item%20that%20was%20removed.%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20pop(path)%20%7B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20path%3A%20&#39;&#39;%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20let%20array%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BArray%7D%20*%2F%0A%20%20%20%20%20%20%20%20Polymer.Path.get(this%2C%20path%2C%20info)%3B%0A%20%20%20%20%20%20%20%20let%20hadLength%20%3D%20Boolean(array.length)%3B%0A%20%20%20%20%20%20%20%20let%20ret%20%3D%20array.pop()%3B%0A%0A%20%20%20%20%20%20%20%20if%20(hadLength)%20%7B%0A%20%20%20%20%20%20%20%20%20%20notifySplice(this%2C%20array%2C%20info.path%2C%20array.length%2C%200%2C%20%5Bret%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20ret%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Starting%20from%20the%20start%20index%20specified%2C%20removes%200%20or%20more%20items%0A%20%20%20%20%20%20%20*%20from%20the%20array%20and%20inserts%200%20or%20more%20new%20items%20in%20their%20place.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20arguments%20after%20%60path%60%20and%20return%20value%20match%20that%20of%0A%20%20%20%20%20%20%20*%20%60Array.prototype.splice%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20notifies%20other%20paths%20to%20the%20same%20array%20that%20a%0A%20%20%20%20%20%20%20*%20splice%20occurred%20to%20the%20array.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Path%20to%20array.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20start%20Index%20from%20which%20to%20start%20removing%2Finserting.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20deleteCount%20Number%20of%20items%20to%20remove.%0A%20%20%20%20%20%20%20*%20%40param%20%7B...*%7D%20items%20Items%20to%20insert%20into%20array.%0A%20%20%20%20%20%20%20*%20%40return%20%7BArray%7D%20Array%20of%20removed%20items.%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20splice(path%2C%20start%2C%20deleteCount%2C%20...items)%20%7B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20path%3A%20&#39;&#39;%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20let%20array%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BArray%7D%20*%2F%0A%20%20%20%20%20%20%20%20Polymer.Path.get(this%2C%20path%2C%20info)%3B%20%2F%2F%20Normalize%20fancy%20native%20splice%20handling%20of%20crazy%20start%20values%0A%0A%20%20%20%20%20%20%20%20if%20(start%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20start%20%3D%20array.length%20-%20Math.floor(-start)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(start)%20%7B%0A%20%20%20%20%20%20%20%20%20%20start%20%3D%20Math.floor(start)%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20array.splice%20does%20different%20things%20based%20on%20the%20number%20of%20arguments%0A%20%20%20%20%20%20%20%20%2F%2F%20you%20pass%20in.%20Therefore%2C%20array.splice(0)%20and%20array.splice(0%2C%20undefined)%0A%20%20%20%20%20%20%20%20%2F%2F%20do%20different%20things.%20In%20the%20former%2C%20the%20whole%20array%20is%20cleared.%20In%20the%0A%20%20%20%20%20%20%20%20%2F%2F%20latter%2C%20no%20items%20are%20removed.%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20means%20that%20we%20need%20to%20detect%20whether%201.%20one%20of%20the%20arguments%0A%20%20%20%20%20%20%20%20%2F%2F%20is%20actually%20passed%20in%20and%20then%202.%20determine%20how%20many%20arguments%0A%20%20%20%20%20%20%20%20%2F%2F%20we%20should%20pass%20on%20to%20the%20native%20array.splice%0A%20%20%20%20%20%20%20%20%2F%2F%0A%0A%0A%20%20%20%20%20%20%20%20let%20ret%3B%20%2F%2F%20Omit%20any%20additional%20arguments%20if%20they%20were%20not%20passed%20in%0A%0A%20%20%20%20%20%20%20%20if%20(arguments.length%20%3D%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ret%20%3D%20array.splice(start)%3B%20%2F%2F%20Either%20start%20was%20undefined%20and%20the%20others%20were%20defined%2C%20but%20in%20this%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20case%20we%20can%20safely%20pass%20on%20all%20arguments%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20this%20includes%20the%20case%20where%20none%20of%20the%20arguments%20were%20passed%20in%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20e.g.%20this.splice(&#39;array&#39;).%20However%2C%20if%20both%20start%20and%20deleteCount%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20are%20undefined%2C%20array.splice%20will%20not%20modify%20the%20array%20(as%20expected)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20ret%20%3D%20array.splice(start%2C%20deleteCount%2C%20...items)%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20At%20the%20end%2C%20check%20whether%20any%20items%20were%20passed%20in%20(e.g.%20insertions)%0A%20%20%20%20%20%20%20%20%2F%2F%20or%20if%20the%20return%20array%20contains%20items%20(e.g.%20deletions).%0A%20%20%20%20%20%20%20%20%2F%2F%20Only%20notify%20if%20items%20were%20added%20or%20deleted.%0A%0A%0A%20%20%20%20%20%20%20%20if%20(items.length%20%7C%7C%20ret.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20notifySplice(this%2C%20array%2C%20info.path%2C%20start%2C%20items.length%2C%20ret)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20ret%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Removes%20an%20item%20from%20the%20beginning%20of%20array%20at%20the%20path%20specified.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20arguments%20after%20%60path%60%20and%20return%20value%20match%20that%20of%0A%20%20%20%20%20%20%20*%20%60Array.prototype.pop%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20notifies%20other%20paths%20to%20the%20same%20array%20that%20a%0A%20%20%20%20%20%20%20*%20splice%20occurred%20to%20the%20array.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Path%20to%20array.%0A%20%20%20%20%20%20%20*%20%40return%20%7B*%7D%20Item%20that%20was%20removed.%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20shift(path)%20%7B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20path%3A%20&#39;&#39;%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20let%20array%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BArray%7D%20*%2F%0A%20%20%20%20%20%20%20%20Polymer.Path.get(this%2C%20path%2C%20info)%3B%0A%20%20%20%20%20%20%20%20let%20hadLength%20%3D%20Boolean(array.length)%3B%0A%20%20%20%20%20%20%20%20let%20ret%20%3D%20array.shift()%3B%0A%0A%20%20%20%20%20%20%20%20if%20(hadLength)%20%7B%0A%20%20%20%20%20%20%20%20%20%20notifySplice(this%2C%20array%2C%20info.path%2C%200%2C%200%2C%20%5Bret%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20ret%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Adds%20items%20onto%20the%20beginning%20of%20the%20array%20at%20the%20path%20specified.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20arguments%20after%20%60path%60%20and%20return%20value%20match%20that%20of%0A%20%20%20%20%20%20%20*%20%60Array.prototype.push%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20notifies%20other%20paths%20to%20the%20same%20array%20that%20a%0A%20%20%20%20%20%20%20*%20splice%20occurred%20to%20the%20array.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cstring%7Cnumber%3E%7D%20path%20Path%20to%20array.%0A%20%20%20%20%20%20%20*%20%40param%20%7B...*%7D%20items%20Items%20to%20insert%20info%20array%0A%20%20%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20New%20length%20of%20the%20array.%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20unshift(path%2C%20...items)%20%7B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20path%3A%20&#39;&#39;%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20let%20array%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BArray%7D%20*%2F%0A%20%20%20%20%20%20%20%20Polymer.Path.get(this%2C%20path%2C%20info)%3B%0A%20%20%20%20%20%20%20%20let%20ret%20%3D%20array.unshift(...items)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(items.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20notifySplice(this%2C%20array%2C%20info.path%2C%200%2C%20items.length%2C%20%5B%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20ret%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Notify%20that%20a%20path%20has%20changed.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%20%20%20%20this.item.user.name%20%3D%20&#39;Bob&#39;%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20this.notifyPath(&#39;item.user.name&#39;)%3B%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Path%20that%20should%20be%20notified.%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%3D%7D%20value%20Value%20at%20the%20path%20(optional).%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40public%0A%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20notifyPath(path%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%20%20%20%20%20%20%20%20let%20propPath%3B%0A%0A%20%20%20%20%20%20%20%20if%20(arguments.length%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20value%20if%20not%20supplied%0A%20%20%20%20%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20path%3A%20&#39;&#39;%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20value%20%3D%20Polymer.Path.get(this%2C%20path%2C%20info)%3B%0A%20%20%20%20%20%20%20%20%20%20propPath%20%3D%20info.path%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(Array.isArray(path))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Normalize%20path%20if%20needed%0A%20%20%20%20%20%20%20%20%20%20propPath%20%3D%20Polymer.Path.normalize(path)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20propPath%20%3D%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%7Bstring%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20path%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this._setPendingPropertyOrPath(propPath%2C%20value%2C%20true%2C%20true))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateProperties()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Equivalent%20to%20static%20%60createReadOnlyProperty%60%20API%20but%20can%20be%20called%20on%0A%20%20%20%20%20%20%20*%20an%20instance%20to%20add%20effects%20at%20runtime.%20%20See%20that%20method%20for%0A%20%20%20%20%20%20%20*%20full%20API%20docs.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20protectedSetter%20Creates%20a%20custom%20protected%20setter%0A%20%20%20%20%20%20%20*%20%20%20when%20%60true%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_createReadOnlyProperty(property%2C%20protectedSetter)%20%7B%0A%20%20%20%20%20%20%20%20this._addPropertyEffect(property%2C%20TYPES.READ_ONLY)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(protectedSetter)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%5B&#39;_set&#39;%20%2B%20upper(property)%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40this%20%7BPropertyEffects%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._setProperty(property%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Equivalent%20to%20static%20%60createPropertyObserver%60%20API%20but%20can%20be%20called%20on%0A%20%20%20%20%20%20%20*%20an%20instance%20to%20add%20effects%20at%20runtime.%20%20See%20that%20method%20for%0A%20%20%20%20%20%20%20*%20full%20API%20docs.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7Cfunction(*%2C*)%7D%20method%20Function%20or%20name%20of%20observer%20method%20to%20call%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20dynamicFn%20Whether%20the%20method%20name%20should%20be%20included%20as%0A%20%20%20%20%20%20%20*%20%20%20a%20dependency%20to%20the%20effect.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_createPropertyObserver(property%2C%20method%2C%20dynamicFn)%20%7B%0A%20%20%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20property%2C%0A%20%20%20%20%20%20%20%20%20%20method%2C%0A%20%20%20%20%20%20%20%20%20%20dynamicFn%3A%20Boolean(dynamicFn)%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20this._addPropertyEffect(property%2C%20TYPES.OBSERVE%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20fn%3A%20runObserverEffect%2C%0A%20%20%20%20%20%20%20%20%20%20info%2C%0A%20%20%20%20%20%20%20%20%20%20trigger%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20property%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(dynamicFn)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._addPropertyEffect(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20method%2C%20TYPES.OBSERVE%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%3A%20runObserverEffect%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20info%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20trigger%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20method%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Equivalent%20to%20static%20%60createMethodObserver%60%20API%20but%20can%20be%20called%20on%0A%20%20%20%20%20%20%20*%20an%20instance%20to%20add%20effects%20at%20runtime.%20%20See%20that%20method%20for%0A%20%20%20%20%20%20%20*%20full%20API%20docs.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20expression%20Method%20expression%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%7CObject%3D%7D%20dynamicFn%20Boolean%20or%20object%20map%20indicating%0A%20%20%20%20%20%20%20*%20%20%20whether%20method%20names%20should%20be%20included%20as%20a%20dependency%20to%20the%20effect.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_createMethodObserver(expression%2C%20dynamicFn)%20%7B%0A%20%20%20%20%20%20%20%20let%20sig%20%3D%20parseMethod(expression)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!sig)%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%22Malformed%20observer%20expression%20&#39;%22%20%2B%20expression%20%2B%20%22&#39;%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20createMethodEffect(this%2C%20sig%2C%20TYPES.OBSERVE%2C%20runMethodEffect%2C%20null%2C%20dynamicFn)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Equivalent%20to%20static%20%60createNotifyingProperty%60%20API%20but%20can%20be%20called%20on%0A%20%20%20%20%20%20%20*%20an%20instance%20to%20add%20effects%20at%20runtime.%20%20See%20that%20method%20for%0A%20%20%20%20%20%20%20*%20full%20API%20docs.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_createNotifyingProperty(property)%20%7B%0A%20%20%20%20%20%20%20%20this._addPropertyEffect(property%2C%20TYPES.NOTIFY%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20fn%3A%20runNotifyEffect%2C%0A%20%20%20%20%20%20%20%20%20%20info%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20eventName%3A%20CaseMap.camelToDashCase(property)%20%2B%20&#39;-changed&#39;%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20property%3A%20property%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Equivalent%20to%20static%20%60createReflectedProperty%60%20API%20but%20can%20be%20called%20on%0A%20%20%20%20%20%20%20*%20an%20instance%20to%20add%20effects%20at%20runtime.%20%20See%20that%20method%20for%0A%20%20%20%20%20%20%20*%20full%20API%20docs.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_createReflectedProperty(property)%20%7B%0A%20%20%20%20%20%20%20%20let%20attr%20%3D%20this.constructor.attributeNameForProperty(property)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(attr%5B0%5D%20%3D%3D%3D%20&#39;-&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.warn(&#39;Property%20&#39;%20%2B%20property%20%2B%20&#39;%20cannot%20be%20reflected%20to%20attribute%20&#39;%20%2B%20attr%20%2B%20&#39;%20because%20%22-%22%20is%20not%20a%20valid%20starting%20attribute%20name.%20Use%20a%20lowercase%20first%20letter%20for%20the%20property%20instead.&#39;)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._addPropertyEffect(property%2C%20TYPES.REFLECT%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%3A%20runReflectEffect%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20info%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20attrName%3A%20attr%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Equivalent%20to%20static%20%60createComputedProperty%60%20API%20but%20can%20be%20called%20on%0A%20%20%20%20%20%20%20*%20an%20instance%20to%20add%20effects%20at%20runtime.%20%20See%20that%20method%20for%0A%20%20%20%20%20%20%20*%20full%20API%20docs.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20computed%20property%20to%20set%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20expression%20Method%20expression%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%7CObject%3D%7D%20dynamicFn%20Boolean%20or%20object%20map%20indicating%0A%20%20%20%20%20%20%20*%20%20%20whether%20method%20names%20should%20be%20included%20as%20a%20dependency%20to%20the%20effect.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_createComputedProperty(property%2C%20expression%2C%20dynamicFn)%20%7B%0A%20%20%20%20%20%20%20%20let%20sig%20%3D%20parseMethod(expression)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!sig)%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%22Malformed%20computed%20expression%20&#39;%22%20%2B%20expression%20%2B%20%22&#39;%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20createMethodEffect(this%2C%20sig%2C%20TYPES.COMPUTE%2C%20runComputedEffect%2C%20property%2C%20dynamicFn)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Gather%20the%20argument%20values%20for%20a%20method%20specified%20in%20the%20provided%20array%0A%20%20%20%20%20%20%20*%20of%20argument%20metadata.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20%60path%60%20and%20%60value%60%20arguments%20are%20used%20to%20fill%20in%20wildcard%20descriptor%0A%20%20%20%20%20%20%20*%20when%20the%20method%20is%20being%20called%20as%20a%20result%20of%20a%20path%20notification.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Array%3C!MethodArg%3E%7D%20args%20Array%20of%20argument%20metadata%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Property%2Fpath%20name%20that%20triggered%20the%20method%20effect%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20%20%20%20%20*%20%40return%20%7BArray%3C*%3E%7D%20Array%20of%20argument%20values%0A%20%20%20%20%20%20%20*%20%40private%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_marshalArgs(args%2C%20path%2C%20props)%20%7B%0A%20%20%20%20%20%20%20%20const%20data%20%3D%20this.__data%3B%0A%20%20%20%20%20%20%20%20let%20values%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20l%20%3D%20args.length%3B%20i%20%3C%20l%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20arg%20%3D%20args%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20name%20%3D%20arg.name%3B%0A%20%20%20%20%20%20%20%20%20%20let%20v%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(arg.literal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20v%20%3D%20arg.value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(arg.structured)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20%3D%20Polymer.Path.get(data%2C%20name)%3B%20%2F%2F%20when%20data%20is%20not%20stored%20e.g.%20%60splices%60%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(v%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20%3D%20props%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20%3D%20data%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(arg.wildcard)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Only%20send%20the%20actual%20path%20changed%20info%20if%20the%20change%20that%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20caused%20the%20observer%20to%20run%20matched%20the%20wildcard%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20baseChanged%20%3D%20name.indexOf(path%20%2B%20&#39;.&#39;)%20%3D%3D%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20matches%20%3D%20path.indexOf(name)%20%3D%3D%3D%200%20%26%26%20!baseChanged%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20values%5Bi%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20path%3A%20matches%20%3F%20path%20%3A%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20matches%20%3F%20props%5Bpath%5D%20%3A%20v%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20base%3A%20v%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20values%5Bi%5D%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20values%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20--%20static%20class%20methods%20------------%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Ensures%20an%20accessor%20exists%20for%20the%20specified%20property%2C%20and%20adds%0A%20%20%20%20%20%20%20*%20to%20a%20list%20of%20%22property%20effects%22%20that%20will%20run%20when%20the%20accessor%20for%0A%20%20%20%20%20%20%20*%20the%20specified%20property%20is%20set.%20%20Effects%20are%20grouped%20by%20%22type%22%2C%20which%0A%20%20%20%20%20%20%20*%20roughly%20corresponds%20to%20a%20phase%20in%20effect%20processing.%20%20The%20effect%0A%20%20%20%20%20%20%20*%20metadata%20should%20be%20in%20the%20following%20form%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20fn%3A%20effectFunction%2C%20%2F%2F%20Reference%20to%20function%20to%20call%20to%20perform%20effect%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20info%3A%20%7B%20...%20%7D%20%20%20%20%20%20%20%2F%2F%20Effect%20metadata%20passed%20to%20function%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20trigger%3A%20%7B%20%20%20%20%20%20%20%20%20%20%2F%2F%20Optional%20triggering%20metadata%3B%20if%20not%20provided%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20name%3A%20string%20%20%20%20%20%20%2F%2F%20the%20property%20is%20treated%20as%20a%20wildcard%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20structured%3A%20boolean%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20wildcard%3A%20boolean%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20*%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Effects%20are%20called%20from%20%60_propertiesChanged%60%20in%20the%20following%20order%20by%0A%20%20%20%20%20%20%20*%20type%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%201.%20COMPUTE%0A%20%20%20%20%20%20%20*%202.%20PROPAGATE%0A%20%20%20%20%20%20%20*%203.%20REFLECT%0A%20%20%20%20%20%20%20*%204.%20OBSERVE%0A%20%20%20%20%20%20%20*%205.%20NOTIFY%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Effect%20functions%20are%20called%20with%20the%20following%20signature%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%20%20%20%20effectFunction(inst%2C%20path%2C%20props%2C%20oldProps%2C%20info%2C%20hasPaths)%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20that%20should%20trigger%20the%20effect%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20type%20Effect%20type%2C%20from%20this.PROPERTY_EFFECT_TYPES%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20effect%20Effect%20metadata%20object%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20addPropertyEffect(property%2C%20type%2C%20effect)%20%7B%0A%20%20%20%20%20%20%20%20this.prototype._addPropertyEffect(property%2C%20type%2C%20effect)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Creates%20a%20single-property%20observer%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7Cfunction(*%2C*)%7D%20method%20Function%20or%20name%20of%20observer%20method%20to%20call%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20dynamicFn%20Whether%20the%20method%20name%20should%20be%20included%20as%0A%20%20%20%20%20%20%20*%20%20%20a%20dependency%20to%20the%20effect.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20createPropertyObserver(property%2C%20method%2C%20dynamicFn)%20%7B%0A%20%20%20%20%20%20%20%20this.prototype._createPropertyObserver(property%2C%20method%2C%20dynamicFn)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Creates%20a%20multi-property%20%22method%20observer%22%20based%20on%20the%20provided%0A%20%20%20%20%20%20%20*%20expression%2C%20which%20should%20be%20a%20string%20in%20the%20form%20of%20a%20normal%20JavaScript%0A%20%20%20%20%20%20%20*%20function%20signature%3A%20%60&#39;methodName(arg1%2C%20%5B...%2C%20argn%5D)&#39;%60.%20%20Each%20argument%0A%20%20%20%20%20%20%20*%20should%20correspond%20to%20a%20property%20or%20path%20in%20the%20context%20of%20this%0A%20%20%20%20%20%20%20*%20prototype%20(or%20instance)%2C%20or%20may%20be%20a%20literal%20string%20or%20number.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20expression%20Method%20expression%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%7CObject%3D%7D%20dynamicFn%20Boolean%20or%20object%20map%20indicating%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%20%20whether%20method%20names%20should%20be%20included%20as%20a%20dependency%20to%20the%20effect.%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20createMethodObserver(expression%2C%20dynamicFn)%20%7B%0A%20%20%20%20%20%20%20%20this.prototype._createMethodObserver(expression%2C%20dynamicFn)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Causes%20the%20setter%20for%20the%20given%20property%20to%20dispatch%20%60%3Cproperty%3E-changed%60%0A%20%20%20%20%20%20%20*%20events%20to%20notify%20of%20changes%20to%20the%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20createNotifyingProperty(property)%20%7B%0A%20%20%20%20%20%20%20%20this.prototype._createNotifyingProperty(property)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Creates%20a%20read-only%20accessor%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20To%20set%20the%20property%2C%20use%20the%20protected%20%60_setProperty%60%20API.%0A%20%20%20%20%20%20%20*%20To%20create%20a%20custom%20protected%20setter%20(e.g.%20%60_setMyProp()%60%20for%0A%20%20%20%20%20%20%20*%20property%20%60myProp%60)%2C%20pass%20%60true%60%20for%20%60protectedSetter%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%2C%20if%20the%20property%20will%20have%20other%20property%20effects%2C%20this%20method%0A%20%20%20%20%20%20%20*%20should%20be%20called%20first%2C%20before%20adding%20other%20effects.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20protectedSetter%20Creates%20a%20custom%20protected%20setter%0A%20%20%20%20%20%20%20*%20%20%20when%20%60true%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20createReadOnlyProperty(property%2C%20protectedSetter)%20%7B%0A%20%20%20%20%20%20%20%20this.prototype._createReadOnlyProperty(property%2C%20protectedSetter)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Causes%20the%20setter%20for%20the%20given%20property%20to%20reflect%20the%20property%20value%0A%20%20%20%20%20%20%20*%20to%20a%20(dash-cased)%20attribute%20of%20the%20same%20name.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20createReflectedProperty(property)%20%7B%0A%20%20%20%20%20%20%20%20this.prototype._createReflectedProperty(property)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Creates%20a%20computed%20property%20whose%20value%20is%20set%20to%20the%20result%20of%20the%0A%20%20%20%20%20%20%20*%20method%20described%20by%20the%20given%20%60expression%60%20each%20time%20one%20or%20more%0A%20%20%20%20%20%20%20*%20arguments%20to%20the%20method%20changes.%20%20The%20expression%20should%20be%20a%20string%0A%20%20%20%20%20%20%20*%20in%20the%20form%20of%20a%20normal%20JavaScript%20function%20signature%3A%0A%20%20%20%20%20%20%20*%20%60&#39;methodName(arg1%2C%20%5B...%2C%20argn%5D)&#39;%60%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Name%20of%20computed%20property%20to%20set%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20expression%20Method%20expression%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%7CObject%3D%7D%20dynamicFn%20Boolean%20or%20object%20map%20indicating%20whether%0A%20%20%20%20%20%20%20*%20%20%20method%20names%20should%20be%20included%20as%20a%20dependency%20to%20the%20effect.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20createComputedProperty(property%2C%20expression%2C%20dynamicFn)%20%7B%0A%20%20%20%20%20%20%20%20this.prototype._createComputedProperty(property%2C%20expression%2C%20dynamicFn)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Parses%20the%20provided%20template%20to%20ensure%20binding%20effects%20are%20created%0A%20%20%20%20%20%20%20*%20for%20them%2C%20and%20then%20ensures%20property%20accessors%20are%20created%20for%20any%0A%20%20%20%20%20%20%20*%20dependent%20properties%20in%20the%20template.%20%20Binding%20effects%20for%20bound%0A%20%20%20%20%20%20%20*%20templates%20are%20stored%20in%20a%20linked%20list%20on%20the%20instance%20so%20that%0A%20%20%20%20%20%20%20*%20templates%20can%20be%20efficiently%20stamped%20and%20unstamped.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20containing%20binding%0A%20%20%20%20%20%20%20*%20%20%20bindings%0A%20%20%20%20%20%20%20*%20%40return%20%7B!TemplateInfo%7D%20Template%20metadata%20object%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20bindTemplate(template)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.prototype._bindTemplate(template)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20--%20binding%20----------------------------------------------%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Equivalent%20to%20static%20%60bindTemplate%60%20API%20but%20can%20be%20called%20on%0A%20%20%20%20%20%20%20*%20an%20instance%20to%20add%20effects%20at%20runtime.%20%20See%20that%20method%20for%0A%20%20%20%20%20%20%20*%20full%20API%20docs.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20may%20be%20called%20on%20the%20prototype%20(for%20prototypical%20template%0A%20%20%20%20%20%20%20*%20binding%2C%20to%20avoid%20creating%20accessors%20every%20instance)%20once%20per%20prototype%2C%0A%20%20%20%20%20%20%20*%20and%20will%20be%20called%20with%20%60runtimeBinding%3A%20true%60%20by%20%60_stampTemplate%60%20to%0A%20%20%20%20%20%20%20*%20create%20and%20link%20an%20instance%20of%20the%20template%20metadata%20associated%20with%20a%0A%20%20%20%20%20%20%20*%20particular%20stamping.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20containing%20binding%0A%20%20%20%20%20%20%20*%20%20%20bindings%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20instanceBinding%20When%20false%20(default)%2C%20performs%0A%20%20%20%20%20%20%20*%20%20%20%22prototypical%22%20binding%20of%20the%20template%20and%20overwrites%20any%20previously%0A%20%20%20%20%20%20%20*%20%20%20bound%20template%20for%20the%20class.%20When%20true%20(as%20passed%20from%0A%20%20%20%20%20%20%20*%20%20%20%60_stampTemplate%60)%2C%20the%20template%20info%20is%20instanced%20and%20linked%20into%0A%20%20%20%20%20%20%20*%20%20%20the%20list%20of%20bound%20templates.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!TemplateInfo%7D%20Template%20metadata%20object%3B%20for%20%60runtimeBinding%60%2C%0A%20%20%20%20%20%20%20*%20%20%20this%20is%20an%20instance%20of%20the%20prototypical%20template%20info%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_bindTemplate(template%2C%20instanceBinding)%20%7B%0A%20%20%20%20%20%20%20%20let%20templateInfo%20%3D%20this.constructor._parseTemplate(template)%3B%0A%0A%20%20%20%20%20%20%20%20let%20wasPreBound%20%3D%20this.__templateInfo%20%3D%3D%20templateInfo%3B%20%2F%2F%20Optimization%3A%20since%20this%20is%20called%20twice%20for%20proto-bound%20templates%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20don&#39;t%20attempt%20to%20recreate%20accessors%20if%20this%20template%20was%20pre-bound%0A%0A%20%20%20%20%20%20%20%20if%20(!wasPreBound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20prop%20in%20templateInfo.propertyEffects)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._createPropertyAccessor(prop)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(instanceBinding)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20For%20instance-time%20binding%2C%20create%20instance%20of%20template%20metadata%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20and%20link%20into%20list%20of%20templates%20if%20necessary%0A%20%20%20%20%20%20%20%20%20%20templateInfo%20%3D%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!TemplateInfo%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20Object.create(templateInfo)%3B%0A%20%20%20%20%20%20%20%20%20%20templateInfo.wasPreBound%20%3D%20wasPreBound%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(!wasPreBound%20%26%26%20this.__templateInfo)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20last%20%3D%20this.__templateInfoLast%20%7C%7C%20this.__templateInfo%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__templateInfoLast%20%3D%20last.nextTemplateInfo%20%3D%20templateInfo%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20templateInfo.previousTemplateInfo%20%3D%20last%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20templateInfo%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20this.__templateInfo%20%3D%20templateInfo%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Adds%20a%20property%20effect%20to%20the%20given%20template%20metadata%2C%20which%20is%20run%0A%20%20%20%20%20%20%20*%20at%20the%20%22propagate%22%20stage%20of%20%60_propertiesChanged%60%20when%20the%20template%0A%20%20%20%20%20%20%20*%20has%20been%20bound%20to%20the%20element%20via%20%60_bindTemplate%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20%60effect%60%20object%20should%20match%20the%20format%20in%20%60_addPropertyEffect%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20templateInfo%20Template%20metadata%20to%20add%20effect%20to%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20prop%20Property%20that%20should%20trigger%20the%20effect%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20effect%20Effect%20metadata%20object%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_addTemplatePropertyEffect(templateInfo%2C%20prop%2C%20effect)%20%7B%0A%20%20%20%20%20%20%20%20let%20hostProps%20%3D%20templateInfo.hostProps%20%3D%20templateInfo.hostProps%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20hostProps%5Bprop%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20let%20effects%20%3D%20templateInfo.propertyEffects%20%3D%20templateInfo.propertyEffects%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20let%20propEffects%20%3D%20effects%5Bprop%5D%20%3D%20effects%5Bprop%5D%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20propEffects.push(effect)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Stamps%20the%20provided%20template%20and%20performs%20instance-time%20setup%20for%0A%20%20%20%20%20%20%20*%20Polymer%20template%20features%2C%20including%20data%20bindings%2C%20declarative%20event%0A%20%20%20%20%20%20%20*%20listeners%2C%20and%20the%20%60this.%24%60%20map%20of%20%60id%60&#39;s%20to%20nodes.%20%20A%20document%20fragment%0A%20%20%20%20%20%20%20*%20is%20returned%20containing%20the%20stamped%20DOM%2C%20ready%20for%20insertion%20into%20the%0A%20%20%20%20%20%20%20*%20DOM.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20may%20be%20called%20more%20than%20once%3B%20however%20note%20that%20due%20to%0A%20%20%20%20%20%20%20*%20%60shadycss%60%20polyfill%20limitations%2C%20only%20styles%20from%20templates%20prepared%0A%20%20%20%20%20%20%20*%20using%20%60ShadyCSS.prepareTemplate%60%20will%20be%20correctly%20polyfilled%20(scoped%0A%20%20%20%20%20%20%20*%20to%20the%20shadow%20root%20and%20support%20CSS%20custom%20properties)%2C%20and%20note%20that%0A%20%20%20%20%20%20%20*%20%60ShadyCSS.prepareTemplate%60%20may%20only%20be%20called%20once%20per%20element.%20As%20such%2C%0A%20%20%20%20%20%20%20*%20any%20styles%20required%20by%20in%20runtime-stamped%20templates%20must%20be%20included%0A%20%20%20%20%20%20%20*%20in%20the%20main%20element%20template.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20to%20stamp%0A%20%20%20%20%20%20%20*%20%40return%20%7B!StampedTemplate%7D%20Cloned%20template%20content%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_stampTemplate(template)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Ensures%20that%20created%20dom%20is%20%60_enqueueClient%60&#39;d%20to%20this%20element%20so%0A%20%20%20%20%20%20%20%20%2F%2F%20that%20it%20can%20be%20flushed%20on%20next%20call%20to%20%60_flushProperties%60%0A%20%20%20%20%20%20%20%20hostStack.beginHosting(this)%3B%0A%0A%20%20%20%20%20%20%20%20let%20dom%20%3D%20super._stampTemplate(template)%3B%0A%0A%20%20%20%20%20%20%20%20hostStack.endHosting(this)%3B%0A%0A%20%20%20%20%20%20%20%20let%20templateInfo%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!TemplateInfo%7D%20*%2F%0A%20%20%20%20%20%20%20%20this._bindTemplate(template%2C%20true)%3B%20%2F%2F%20Add%20template-instance-specific%20data%20to%20instanced%20templateInfo%0A%0A%0A%20%20%20%20%20%20%20%20templateInfo.nodeList%20%3D%20dom.nodeList%3B%20%2F%2F%20Capture%20child%20nodes%20to%20allow%20unstamping%20of%20non-prototypical%20templates%0A%0A%20%20%20%20%20%20%20%20if%20(!templateInfo.wasPreBound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20nodes%20%3D%20templateInfo.childNodes%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20n%20%3D%20dom.firstChild%3B%20n%3B%20n%20%3D%20n.nextSibling)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20nodes.push(n)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20dom.templateInfo%20%3D%20templateInfo%3B%20%2F%2F%20Setup%20compound%20storage%2C%202-way%20listeners%2C%20and%20dataHost%20for%20bindings%0A%0A%20%20%20%20%20%20%20%20setupBindings(this%2C%20templateInfo)%3B%20%2F%2F%20Flush%20properties%20into%20template%20nodes%20if%20already%20booted%0A%0A%20%20%20%20%20%20%20%20if%20(this.__dataReady)%20%7B%0A%20%20%20%20%20%20%20%20%20%20runEffects(this%2C%20templateInfo.propertyEffects%2C%20this.__data%2C%20null%2C%20false%2C%20templateInfo.nodeList)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20dom%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Removes%20and%20unbinds%20the%20nodes%20previously%20contained%20in%20the%20provided%0A%20%20%20%20%20%20%20*%20DocumentFragment%20returned%20from%20%60_stampTemplate%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!StampedTemplate%7D%20dom%20DocumentFragment%20previously%20returned%0A%20%20%20%20%20%20%20*%20%20%20from%20%60_stampTemplate%60%20associated%20with%20the%20nodes%20to%20be%20removed%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_removeBoundDom(dom)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Unlink%20template%20info%0A%20%20%20%20%20%20%20%20let%20templateInfo%20%3D%20dom.templateInfo%3B%0A%0A%20%20%20%20%20%20%20%20if%20(templateInfo.previousTemplateInfo)%20%7B%0A%20%20%20%20%20%20%20%20%20%20templateInfo.previousTemplateInfo.nextTemplateInfo%20%3D%20templateInfo.nextTemplateInfo%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(templateInfo.nextTemplateInfo)%20%7B%0A%20%20%20%20%20%20%20%20%20%20templateInfo.nextTemplateInfo.previousTemplateInfo%20%3D%20templateInfo.previousTemplateInfo%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this.__templateInfoLast%20%3D%3D%20templateInfo)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__templateInfoLast%20%3D%20templateInfo.previousTemplateInfo%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20templateInfo.previousTemplateInfo%20%3D%20templateInfo.nextTemplateInfo%20%3D%20null%3B%20%2F%2F%20Remove%20stamped%20nodes%0A%0A%20%20%20%20%20%20%20%20let%20nodes%20%3D%20templateInfo.childNodes%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20nodes.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20node%20%3D%20nodes%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20node.parentNode.removeChild(node)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20default%20%60TemplateStamp%60%20implementation%20to%20add%20support%20for%0A%20%20%20%20%20%20%20*%20parsing%20bindings%20from%20%60TextNode%60&#39;s&#39;%20%60textContent%60.%20%20A%20%60bindings%60%0A%20%20%20%20%20%20%20*%20array%20is%20added%20to%20%60nodeInfo%60%20and%20populated%20with%20binding%20metadata%0A%20%20%20%20%20%20%20*%20with%20information%20capturing%20the%20binding%20target%2C%20and%20a%20%60parts%60%20array%0A%20%20%20%20%20%20%20*%20with%20one%20or%20more%20metadata%20objects%20capturing%20the%20source(s)%20of%20the%0A%20%20%20%20%20%20%20*%20binding.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40param%20%7BNode%7D%20node%20Node%20to%20parse%0A%20%20%20%20%20%20%20*%20%40param%20%7BTemplateInfo%7D%20templateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20%20%20%20%20*%20%40param%20%7BNodeInfo%7D%20nodeInfo%20Node%20metadata%20for%20current%20template%20node%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20%60true%60%20if%20the%20visited%20node%20added%20node-specific%0A%20%20%20%20%20%20%20*%20%20%20metadata%20to%20%60nodeInfo%60%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Interfaces%20in%20closure%20do%20not%20inherit%20statics%2C%20but%20classes%20do%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseTemplateNode(node%2C%20templateInfo%2C%20nodeInfo)%20%7B%0A%20%20%20%20%20%20%20%20let%20noted%20%3D%20super._parseTemplateNode(node%2C%20templateInfo%2C%20nodeInfo)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(node.nodeType%20%3D%3D%3D%20Node.TEXT_NODE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20parts%20%3D%20this._parseBindings(node.textContent%2C%20templateInfo)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(parts)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Initialize%20the%20textContent%20with%20any%20literal%20parts%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20NOTE%3A%20default%20to%20a%20space%20here%20so%20the%20textNode%20remains%3B%20some%20browsers%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20(IE)%20omit%20an%20empty%20textNode%20following%20cloneNode%2FimportNode.%0A%20%20%20%20%20%20%20%20%20%20%20%20node.textContent%20%3D%20literalFromParts(parts)%20%7C%7C%20&#39;%20&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20addBinding(this%2C%20templateInfo%2C%20nodeInfo%2C%20&#39;text&#39;%2C%20&#39;textContent&#39;%2C%20parts)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20noted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20noted%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20default%20%60TemplateStamp%60%20implementation%20to%20add%20support%20for%0A%20%20%20%20%20%20%20*%20parsing%20bindings%20from%20attributes.%20%20A%20%60bindings%60%0A%20%20%20%20%20%20%20*%20array%20is%20added%20to%20%60nodeInfo%60%20and%20populated%20with%20binding%20metadata%0A%20%20%20%20%20%20%20*%20with%20information%20capturing%20the%20binding%20target%2C%20and%20a%20%60parts%60%20array%0A%20%20%20%20%20%20%20*%20with%20one%20or%20more%20metadata%20objects%20capturing%20the%20source(s)%20of%20the%0A%20%20%20%20%20%20%20*%20binding.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%7D%20node%20Node%20to%20parse%0A%20%20%20%20%20%20%20*%20%40param%20%7BTemplateInfo%7D%20templateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20%20%20%20%20*%20%40param%20%7BNodeInfo%7D%20nodeInfo%20Node%20metadata%20for%20current%20template%20node%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Attribute%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20value%20Attribute%20value%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20%60true%60%20if%20the%20visited%20node%20added%20node-specific%0A%20%20%20%20%20%20%20*%20%20%20metadata%20to%20%60nodeInfo%60%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Interfaces%20in%20closure%20do%20not%20inherit%20statics%2C%20but%20classes%20do%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseTemplateNodeAttribute(node%2C%20templateInfo%2C%20nodeInfo%2C%20name%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20let%20parts%20%3D%20this._parseBindings(value%2C%20templateInfo)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(parts)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Attribute%20or%20property%0A%20%20%20%20%20%20%20%20%20%20let%20origName%20%3D%20name%3B%0A%20%20%20%20%20%20%20%20%20%20let%20kind%20%3D%20&#39;property&#39;%3B%20%2F%2F%20The%20only%20way%20we%20see%20a%20capital%20letter%20here%20is%20if%20the%20attr%20has%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20a%20capital%20letter%20in%20it%20per%20spec.%20In%20this%20case%2C%20to%20make%20sure%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20binding%20works%2C%20we%20go%20ahead%20and%20make%20the%20binding%20to%20the%20attribute.%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(capitalAttributeRegex.test(name))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20kind%20%3D%20&#39;attribute&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(name%5Bname.length%20-%201%5D%20%3D%3D%20&#39;%24&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20name%20%3D%20name.slice(0%2C%20-1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20kind%20%3D%20&#39;attribute&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Initialize%20attribute%20bindings%20with%20any%20literal%20parts%0A%0A%0A%20%20%20%20%20%20%20%20%20%20let%20literal%20%3D%20literalFromParts(parts)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(literal%20%26%26%20kind%20%3D%3D%20&#39;attribute&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Ensure%20a%20ShadyCSS%20template%20scoped%20style%20is%20not%20removed%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20when%20a%20class%24%20binding&#39;s%20initial%20literal%20value%20is%20set.%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%20&#39;class&#39;%20%26%26%20node.hasAttribute(&#39;class&#39;))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20literal%20%2B%3D%20&#39;%20&#39;%20%2B%20node.getAttribute(name)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20node.setAttribute(name%2C%20literal)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Clear%20attribute%20before%20removing%2C%20since%20IE%20won&#39;t%20allow%20removing%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%60value%60%20attribute%20if%20it%20previously%20had%20a%20value%20(can&#39;t%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20unconditionally%20set%20&#39;&#39;%20before%20removing%20since%20attributes%20with%20%60%24%60%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20can&#39;t%20be%20set%20using%20setAttribute)%0A%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(node.localName%20%3D%3D%3D%20&#39;input&#39;%20%26%26%20origName%20%3D%3D%3D%20&#39;value&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node.setAttribute(origName%2C%20&#39;&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Remove%20annotation%0A%0A%0A%20%20%20%20%20%20%20%20%20%20node.removeAttribute(origName)%3B%20%2F%2F%20Case%20hackery%3A%20attributes%20are%20lower-case%2C%20but%20bind%20targets%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20(properties)%20are%20case%20sensitive.%20Gambit%20is%20to%20map%20dash-case%20to%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20camel-case%3A%20%60foo-bar%60%20becomes%20%60fooBar%60.%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Attribute%20bindings%20are%20excepted.%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(kind%20%3D%3D%3D%20&#39;property&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20name%20%3D%20Polymer.CaseMap.dashToCamelCase(name)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20addBinding(this%2C%20templateInfo%2C%20nodeInfo%2C%20kind%2C%20name%2C%20parts%2C%20literal)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20super._parseTemplateNodeAttribute(node%2C%20templateInfo%2C%20nodeInfo%2C%20name%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20default%20%60TemplateStamp%60%20implementation%20to%20add%20support%20for%0A%20%20%20%20%20%20%20*%20binding%20the%20properties%20that%20a%20nested%20template%20depends%20on%20to%20the%20template%0A%20%20%20%20%20%20%20*%20as%20%60_host_%3Cproperty%3E%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40param%20%7BNode%7D%20node%20Node%20to%20parse%0A%20%20%20%20%20%20%20*%20%40param%20%7BTemplateInfo%7D%20templateInfo%20Template%20metadata%20for%20current%20template%0A%20%20%20%20%20%20%20*%20%40param%20%7BNodeInfo%7D%20nodeInfo%20Node%20metadata%20for%20current%20template%20node%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20%60true%60%20if%20the%20visited%20node%20added%20node-specific%0A%20%20%20%20%20%20%20*%20%20%20metadata%20to%20%60nodeInfo%60%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Interfaces%20in%20closure%20do%20not%20inherit%20statics%2C%20but%20classes%20do%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseTemplateNestedTemplate(node%2C%20templateInfo%2C%20nodeInfo)%20%7B%0A%20%20%20%20%20%20%20%20let%20noted%20%3D%20super._parseTemplateNestedTemplate(node%2C%20templateInfo%2C%20nodeInfo)%3B%20%2F%2F%20Merge%20host%20props%20into%20outer%20template%20and%20add%20bindings%0A%0A%0A%20%20%20%20%20%20%20%20let%20hostProps%20%3D%20nodeInfo.templateInfo.hostProps%3B%0A%20%20%20%20%20%20%20%20let%20mode%20%3D%20&#39;%7B&#39;%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20source%20in%20hostProps)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20parts%20%3D%20%5B%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20source%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dependencies%3A%20%5Bsource%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20addBinding(this%2C%20templateInfo%2C%20nodeInfo%2C%20&#39;property&#39;%2C%20&#39;_host_&#39;%20%2B%20source%2C%20parts)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20noted%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Called%20to%20parse%20text%20in%20a%20template%20(either%20attribute%20values%20or%0A%20%20%20%20%20%20%20*%20textContent)%20into%20binding%20metadata.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Any%20overrides%20of%20this%20method%20should%20return%20an%20array%20of%20binding%20part%0A%20%20%20%20%20%20%20*%20metadata%20%20representing%20one%20or%20more%20bindings%20found%20in%20the%20provided%20text%0A%20%20%20%20%20%20%20*%20and%20any%20%22literal%22%20text%20in%20between.%20%20Any%20non-literal%20parts%20will%20be%20passed%0A%20%20%20%20%20%20%20*%20to%20%60_evaluateBinding%60%20when%20any%20dependencies%20change.%20%20The%20only%20required%0A%20%20%20%20%20%20%20*%20fields%20of%20each%20%22part%22%20in%20the%20returned%20array%20are%20as%20follows%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20-%20%60dependencies%60%20-%20Array%20containing%20trigger%20metadata%20for%20each%20property%0A%20%20%20%20%20%20%20*%20%20%20that%20should%20trigger%20the%20binding%20to%20update%0A%20%20%20%20%20%20%20*%20-%20%60literal%60%20-%20String%20containing%20text%20if%20the%20part%20represents%20a%20literal%3B%0A%20%20%20%20%20%20%20*%20%20%20in%20this%20case%20no%20%60dependencies%60%20are%20needed%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Additional%20metadata%20for%20use%20by%20%60_evaluateBinding%60%20may%20be%20provided%20in%0A%20%20%20%20%20%20%20*%20each%20part%20object%20as%20needed.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20default%20implementation%20handles%20the%20following%20types%20of%20bindings%0A%20%20%20%20%20%20%20*%20(one%20or%20more%20may%20be%20intermixed%20with%20literal%20strings)%3A%0A%20%20%20%20%20%20%20*%20-%20Property%20binding%3A%20%60%5B%5Bprop%5D%5D%60%0A%20%20%20%20%20%20%20*%20-%20Path%20binding%3A%20%60%5B%5Bobject.prop%5D%5D%60%0A%20%20%20%20%20%20%20*%20-%20Negated%20property%20or%20path%20bindings%3A%20%60%5B%5B!prop%5D%5D%60%20or%20%60%5B%5B!object.prop%5D%5D%60%0A%20%20%20%20%20%20%20*%20-%20Two-way%20property%20or%20path%20bindings%20(supports%20negation)%3A%0A%20%20%20%20%20%20%20*%20%20%20%60%7B%7Bprop%7D%7D%60%2C%20%60%7B%7Bobject.prop%7D%7D%60%2C%20%60%7B%7B!prop%7D%7D%60%20or%20%60%7B%7B!object.prop%7D%7D%60%0A%20%20%20%20%20%20%20*%20-%20Inline%20computed%20method%20(supports%20negation)%3A%0A%20%20%20%20%20%20%20*%20%20%20%60%5B%5Bcompute(a%2C%20&#39;literal&#39;%2C%20b)%5D%5D%60%2C%20%60%5B%5B!compute(a%2C%20&#39;literal&#39;%2C%20b)%5D%5D%60%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20default%20implementation%20uses%20a%20regular%20expression%20for%20best%0A%20%20%20%20%20%20%20*%20performance.%20However%2C%20the%20regular%20expression%20uses%20a%20white-list%20of%0A%20%20%20%20%20%20%20*%20allowed%20characters%20in%20a%20data-binding%2C%20which%20causes%20problems%20for%0A%20%20%20%20%20%20%20*%20data-bindings%20that%20do%20use%20characters%20not%20in%20this%20white-list.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Instead%20of%20updating%20the%20white-list%20with%20all%20allowed%20characters%2C%0A%20%20%20%20%20%20%20*%20there%20is%20a%20StrictBindingParser%20(see%20lib%2Fmixins%2Fstrict-binding-parser)%0A%20%20%20%20%20%20%20*%20that%20uses%20a%20state%20machine%20instead.%20This%20state%20machine%20is%20able%20to%20handle%0A%20%20%20%20%20%20%20*%20all%20characters.%20However%2C%20it%20is%20slightly%20less%20performant%2C%20therefore%20we%0A%20%20%20%20%20%20%20*%20extracted%20it%20into%20a%20separate%20optional%20mixin.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20text%20Text%20to%20parse%20from%20attribute%20or%20textContent%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20templateInfo%20Current%20template%20metadata%0A%20%20%20%20%20%20%20*%20%40return%20%7BArray%3C!BindingPart%3E%7D%20Array%20of%20binding%20part%20metadata%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseBindings(text%2C%20templateInfo)%20%7B%0A%20%20%20%20%20%20%20%20let%20parts%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20let%20lastIndex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20m%3B%20%2F%2F%20Example%3A%20%22literal1%7B%7Bprop%7D%7Dliteral2%5B%5B!compute(foo%2Cbar)%5D%5Dfinal%22%0A%20%20%20%20%20%20%20%20%2F%2F%20Regex%20matches%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20Iteration%201%3A%20%20Iteration%202%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20m%5B1%5D%3A%20&#39;%7B%7B&#39;%20%20%20%20%20%20%20%20%20%20&#39;%5B%5B&#39;%0A%20%20%20%20%20%20%20%20%2F%2F%20m%5B2%5D%3A%20&#39;&#39;%20%20%20%20%20%20%20%20%20%20%20%20&#39;!&#39;%0A%20%20%20%20%20%20%20%20%2F%2F%20m%5B3%5D%3A%20&#39;prop&#39;%20%20%20%20%20%20%20%20&#39;compute(foo%2Cbar)&#39;%0A%0A%20%20%20%20%20%20%20%20while%20((m%20%3D%20bindingRegex.exec(text))%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20literal%20part%0A%20%20%20%20%20%20%20%20%20%20if%20(m.index%20%3E%20lastIndex)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parts.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20literal%3A%20text.slice(lastIndex%2C%20m.index)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Add%20binding%20part%0A%0A%0A%20%20%20%20%20%20%20%20%20%20let%20mode%20%3D%20m%5B1%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20negate%20%3D%20Boolean(m%5B2%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20source%20%3D%20m%5B3%5D.trim()%3B%0A%20%20%20%20%20%20%20%20%20%20let%20customEvent%20%3D%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20notifyEvent%20%3D%20&#39;&#39;%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20colon%20%3D%20-1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(mode%20%3D%3D%20&#39;%7B&#39;%20%26%26%20(colon%20%3D%20source.indexOf(&#39;%3A%3A&#39;))%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20notifyEvent%20%3D%20source.substring(colon%20%2B%202)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20source%20%3D%20source.substring(0%2C%20colon)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20customEvent%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20let%20signature%20%3D%20parseMethod(source)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20dependencies%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(signature)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Inline%20computed%20function%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20args%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20methodName%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3D%20signature%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20args.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20arg%20%3D%20args%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!arg.literal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dependencies.push(arg)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dynamicFns%20%3D%20templateInfo.dynamicFns%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(dynamicFns%20%26%26%20dynamicFns%5BmethodName%5D%20%7C%7C%20signature.static)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dependencies.push(methodName)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20signature.dynamicFn%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Property%20or%20path%0A%20%20%20%20%20%20%20%20%20%20%20%20dependencies.push(source)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20parts.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20source%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20negate%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20customEvent%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20signature%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dependencies%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20event%3A%20notifyEvent%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20lastIndex%20%3D%20bindingRegex.lastIndex%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Add%20a%20final%20literal%20part%0A%0A%0A%20%20%20%20%20%20%20%20if%20(lastIndex%20%26%26%20lastIndex%20%3C%20text.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20literal%20%3D%20text.substring(lastIndex)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(literal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parts.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20literal%3A%20literal%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(parts.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20parts%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Called%20to%20evaluate%20a%20previously%20parsed%20binding%20part%20based%20on%20a%20set%20of%0A%20%20%20%20%20%20%20*%20one%20or%20more%20changed%20dependencies.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bthis%7D%20inst%20Element%20that%20should%20be%20used%20as%20scope%20for%0A%20%20%20%20%20%20%20*%20%20%20binding%20dependencies%0A%20%20%20%20%20%20%20*%20%40param%20%7BBindingPart%7D%20part%20Binding%20part%20metadata%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20path%20Property%2Fpath%20that%20triggered%20this%20effect%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20props%20Bag%20of%20current%20property%20changes%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20oldProps%20Bag%20of%20previous%20values%20for%20changed%20properties%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%7D%20hasPaths%20True%20with%20%60props%60%20contains%20one%20or%20more%20paths%0A%20%20%20%20%20%20%20*%20%40return%20%7B*%7D%20Value%20the%20binding%20part%20evaluated%20to%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_evaluateBinding(inst%2C%20part%2C%20path%2C%20props%2C%20oldProps%2C%20hasPaths)%20%7B%0A%20%20%20%20%20%20%20%20let%20value%3B%0A%0A%20%20%20%20%20%20%20%20if%20(part.signature)%20%7B%0A%20%20%20%20%20%20%20%20%20%20value%20%3D%20runMethodEffect(inst%2C%20path%2C%20props%2C%20oldProps%2C%20part.signature)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(path%20!%3D%20part.source)%20%7B%0A%20%20%20%20%20%20%20%20%20%20value%20%3D%20Polymer.Path.get(inst%2C%20part.source)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(hasPaths%20%26%26%20Polymer.Path.isPath(path))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20Polymer.Path.get(inst%2C%20path)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%3D%20inst.__data%5Bpath%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(part.negate)%20%7B%0A%20%20%20%20%20%20%20%20%20%20value%20%3D%20!value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%20%2F%2F%20make%20a%20typing%20for%20closure%20%3AP%0A%0A%0A%20%20%20%20PropertyEffectsType%20%3D%20PropertyEffects%3B%0A%20%20%20%20return%20PropertyEffects%3B%0A%20%20%7D)%3B%0A%20%20%2F**%0A%20%20%20*%20Helper%20api%20for%20enqueuing%20client%20dom%20created%20by%20a%20host%20element.%0A%20%20%20*%0A%20%20%20*%20By%20default%20elements%20are%20flushed%20via%20%60_flushProperties%60%20when%0A%20%20%20*%20%60connectedCallback%60%20is%20called.%20Elements%20attach%20their%20client%20dom%20to%0A%20%20%20*%20themselves%20at%20%60ready%60%20time%20which%20results%20from%20this%20first%20flush.%0A%20%20%20*%20This%20provides%20an%20ordering%20guarantee%20that%20the%20client%20dom%20an%20element%0A%20%20%20*%20creates%20is%20flushed%20before%20the%20element%20itself%20(i.e.%20client%20%60ready%60%0A%20%20%20*%20fires%20before%20host%20%60ready%60).%0A%20%20%20*%0A%20%20%20*%20However%2C%20if%20%60_flushProperties%60%20is%20called%20*before*%20an%20element%20is%20connected%2C%0A%20%20%20*%20as%20for%20example%20%60Templatize%60%20does%2C%20this%20ordering%20guarantee%20cannot%20be%0A%20%20%20*%20satisfied%20because%20no%20elements%20are%20connected.%20(Note%3A%20Bound%20elements%20that%0A%20%20%20*%20receive%20data%20do%20become%20enqueued%20clients%20and%20are%20properly%20ordered%20but%0A%20%20%20*%20unbound%20elements%20are%20not.)%0A%20%20%20*%0A%20%20%20*%20To%20maintain%20the%20desired%20%22client%20before%20host%22%20ordering%20guarantee%20for%20this%0A%20%20%20*%20case%20we%20rely%20on%20the%20%22host%20stack.%20Client%20nodes%20registers%20themselves%20with%0A%20%20%20*%20the%20creating%20host%20element%20when%20created.%20This%20ensures%20that%20all%20client%20dom%0A%20%20%20*%20is%20readied%20in%20the%20proper%20order%2C%20maintaining%20the%20desired%20guarantee.%0A%20%20%20*%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20let%20hostStack%20%3D%20%7B%0A%20%20%20%20stack%3A%20%5B%5D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20inst%20Instance%20to%20add%20to%20hostStack%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40this%20%7BhostStack%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20registerHost(inst)%20%7B%0A%20%20%20%20%20%20if%20(this.stack.length)%20%7B%0A%20%20%20%20%20%20%20%20let%20host%20%3D%20this.stack%5Bthis.stack.length%20-%201%5D%3B%0A%0A%20%20%20%20%20%20%20%20host._enqueueClient(inst)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20inst%20Instance%20to%20begin%20hosting%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40this%20%7BhostStack%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20beginHosting(inst)%20%7B%0A%20%20%20%20%20%20this.stack.push(inst)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20inst%20Instance%20to%20end%20hosting%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40this%20%7BhostStack%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20endHosting(inst)%20%7B%0A%20%20%20%20%20%20let%20stackLen%20%3D%20this.stack.length%3B%0A%0A%20%20%20%20%20%20if%20(stackLen%20%26%26%20this.stack%5BstackLen%20-%201%5D%20%3D%3D%20inst)%20%7B%0A%20%20%20%20%20%20%20%20this.stack.pop()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Fmixins%2Fproperty-effects.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/properties-mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/telemetry.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Provides%20basic%20tracking%20of%20element%20definitions%20(registrations)%20and%0A%20%20%20*%20instance%20counts.%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40summary%20Provides%20basic%20tracking%20of%20element%20definitions%20(registrations)%20and%0A%20%20%20*%20instance%20counts.%0A%20%20%20*%2F%0A%0A%20%20Polymer.telemetry%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Total%20number%20of%20Polymer%20element%20instances%20created.%0A%20%20%20%20%20*%20%40type%20%7Bnumber%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20instanceCount%3A%200%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Array%20of%20Polymer%20element%20classes%20that%20have%20been%20finalized.%0A%20%20%20%20%20*%20%40type%20%7BArray%3CPolymer.Element%3E%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20registrations%3A%20%5B%5D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7B!PolymerElementConstructor%7D%20prototype%20Element%20prototype%20to%20log%0A%20%20%20%20%20*%20%40this%20%7Bthis%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%20%20%20%20_regLog%3A%20function%20(prototype)%20%7B%0A%20%20%20%20%20%20console.log(&#39;%5B&#39;%20%2B%20prototype.is%20%2B%20&#39;%5D%3A%20registered&#39;)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Registers%20a%20class%20prototype%20for%20telemetry%20purposes.%0A%20%20%20%20%20*%20%40param%20%7BHTMLElement%7D%20prototype%20Element%20prototype%20to%20register%0A%20%20%20%20%20*%20%40this%20%7Bthis%7D%0A%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20*%2F%0A%20%20%20%20register%3A%20function%20(prototype)%20%7B%0A%20%20%20%20%20%20this.registrations.push(prototype)%3B%0A%20%20%20%20%20%20Polymer.log%20%26%26%20this._regLog(prototype)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Logs%20all%20elements%20registered%20with%20an%20%60is%60%20to%20the%20console.%0A%20%20%20%20%20*%20%40public%0A%20%20%20%20%20*%20%40this%20%7Bthis%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20dumpRegistrations%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this.registrations.forEach(this._regLog)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Ftelemetry.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/properties-changed.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Creates%20a%20copy%20of%20%60props%60%20with%20each%20property%20normalized%20such%20that%0A%20%20%20*%20upgraded%20it%20is%20an%20object%20with%20at%20least%20a%20type%20property%20%7B%20type%3A%20Type%7D.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BObject%7D%20props%20Properties%20to%20normalize%0A%20%20%20*%20%40return%20%7BObject%7D%20Copy%20of%20input%20%60props%60%20with%20normalized%20properties%20that%0A%20%20%20*%20are%20in%20the%20form%20%7Btype%3A%20Type%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20function%20normalizeProperties(props)%20%7B%0A%20%20%20%20const%20output%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20for%20(let%20p%20in%20props)%20%7B%0A%20%20%20%20%20%20const%20o%20%3D%20props%5Bp%5D%3B%0A%20%20%20%20%20%20output%5Bp%5D%20%3D%20typeof%20o%20%3D%3D%3D%20&#39;function&#39;%20%3F%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20o%0A%20%20%20%20%20%20%7D%20%3A%20o%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20output%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Mixin%20that%20provides%20a%20minimal%20starting%20point%20to%20using%20the%20PropertiesChanged%0A%20%20%20*%20mixin%20by%20providing%20a%20mechanism%20to%20declare%20properties%20in%20a%20static%0A%20%20%20*%20getter%20(e.g.%20static%20get%20properties()%20%7B%20return%20%7B%20foo%3A%20String%20%7D%20%7D).%20Changes%0A%20%20%20*%20are%20reported%20via%20the%20%60_propertiesChanged%60%20method.%0A%20%20%20*%0A%20%20%20*%20This%20mixin%20provides%20no%20specific%20support%20for%20rendering.%20Users%20are%20expected%0A%20%20%20*%20to%20create%20a%20ShadowRoot%20and%20put%20content%20into%20it%20and%20update%20it%20in%20whatever%0A%20%20%20*%20way%20makes%20sense.%20This%20can%20be%20done%20in%20reaction%20to%20properties%20changing%20by%0A%20%20%20*%20implementing%20%60_propertiesChanged%60.%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40appliesMixin%20Polymer.PropertiesChanged%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Mixin%20that%20provides%20a%20minimal%20starting%20point%20for%20using%0A%20%20%20*%20the%20PropertiesChanged%20mixin%20by%20providing%20a%20declarative%20%60properties%60%20object.%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.PropertiesMixin%20%3D%20Polymer.dedupingMixin(superClass%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40constructor%0A%20%20%20%20%20*%20%40extends%20%7BsuperClass%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertiesChanged%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%20%20%20%20const%20base%20%3D%20Polymer.PropertiesChanged(superClass)%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20super%20class%20constructor%20for%20the%20given%20class%2C%20if%20it%20is%20an%0A%20%20%20%20%20*%20instance%20of%20the%20PropertiesMixin.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!PropertiesMixinConstructor%7D%20constructor%20PropertiesMixin%20constructor%0A%20%20%20%20%20*%20%40return%20%7BPropertiesMixinConstructor%7D%20Super%20class%20constructor%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20function%20superPropertiesClass(constructor)%20%7B%0A%20%20%20%20%20%20const%20superCtor%20%3D%20Object.getPrototypeOf(constructor)%3B%20%2F%2F%20Note%2C%20the%20%60PropertiesMixin%60%20class%20below%20only%20refers%20to%20the%20class%0A%20%20%20%20%20%20%2F%2F%20generated%20by%20this%20call%20to%20the%20mixin%3B%20the%20instanceof%20test%20only%20works%0A%20%20%20%20%20%20%2F%2F%20because%20the%20mixin%20is%20deduped%20and%20guaranteed%20only%20to%20apply%20once%2C%20hence%0A%20%20%20%20%20%20%2F%2F%20all%20constructors%20in%20a%20proto%20chain%20will%20see%20the%20same%20%60PropertiesMixin%60%0A%0A%20%20%20%20%20%20return%20superCtor.prototype%20instanceof%20PropertiesMixin%20%3F%0A%20%20%20%20%20%20%2F**%20%40type%20%7BPropertiesMixinConstructor%7D%20*%2F%0A%20%20%20%20%20%20superCtor%20%3A%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20a%20memoized%20version%20of%20the%20%60properties%60%20object%20for%20the%0A%20%20%20%20%20*%20given%20class.%20Properties%20not%20in%20object%20format%20are%20converted%20to%20at%0A%20%20%20%20%20*%20least%20%7Btype%7D.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7BPropertiesMixinConstructor%7D%20constructor%20PropertiesMixin%20constructor%0A%20%20%20%20%20*%20%40return%20%7BObject%7D%20Memoized%20properties%20object%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20function%20ownProperties(constructor)%20%7B%0A%20%20%20%20%20%20if%20(!constructor.hasOwnProperty(JSCompiler_renameProperty(&#39;__ownProperties&#39;%2C%20constructor)))%20%7B%0A%20%20%20%20%20%20%20%20let%20props%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20if%20(constructor.hasOwnProperty(JSCompiler_renameProperty(&#39;properties&#39;%2C%20constructor)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20properties%20%3D%20constructor.properties%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(properties)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20props%20%3D%20normalizeProperties(properties)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20constructor.__ownProperties%20%3D%20props%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20constructor.__ownProperties%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40extends%20%7Bbase%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertiesMixin%7D%0A%20%20%20%20%20*%20%40unrestricted%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20class%20PropertiesMixin%20extends%20base%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Implements%20standard%20custom%20elements%20getter%20to%20observes%20the%20attributes%0A%20%20%20%20%20%20%20*%20listed%20in%20%60properties%60.%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Interfaces%20in%20closure%20do%20not%20inherit%20statics%2C%20but%20classes%20do%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20static%20get%20observedAttributes()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.hasOwnProperty(&#39;__observedAttributes&#39;))%20%7B%0A%20%20%20%20%20%20%20%20%20%20Polymer.telemetry.register(this.prototype)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20props%20%3D%20this._properties%3B%0A%20%20%20%20%20%20%20%20%20%20this.__observedAttributes%20%3D%20props%20%3F%20Object.keys(props).map(p%20%3D%3E%20this.attributeNameForProperty(p))%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20this.__observedAttributes%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Finalizes%20an%20element%20definition%2C%20including%20ensuring%20any%20super%20classes%0A%20%20%20%20%20%20%20*%20are%20also%20finalized.%20This%20includes%20ensuring%20property%0A%20%20%20%20%20%20%20*%20accessors%20exist%20on%20the%20element%20prototype.%20This%20method%20calls%0A%20%20%20%20%20%20%20*%20%60_finalizeClass%60%20to%20finalize%20each%20constructor%20in%20the%20prototype%20chain.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20finalize()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.hasOwnProperty(JSCompiler_renameProperty(&#39;__finalized&#39;%2C%20this)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20superCtor%20%3D%20superPropertiesClass(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPropertiesMixinConstructor%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(superCtor)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20superCtor.finalize()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20this.__finalized%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this._finalizeClass()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Finalize%20an%20element%20class.%20This%20includes%20ensuring%20property%0A%20%20%20%20%20%20%20*%20accessors%20exist%20on%20the%20element%20prototype.%20This%20method%20is%20called%20by%0A%20%20%20%20%20%20%20*%20%60finalize%60%20and%20finalizes%20the%20class%20constructor.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_finalizeClass()%20%7B%0A%20%20%20%20%20%20%20%20const%20props%20%3D%20ownProperties(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPropertiesMixinConstructor%7D%20*%2F%0A%20%20%20%20%20%20%20%20this)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.createProperties(props)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20a%20memoized%20version%20of%20all%20properties%2C%20including%20those%20inherited%0A%20%20%20%20%20%20%20*%20from%20super%20classes.%20Properties%20not%20in%20object%20format%20are%20converted%20to%0A%20%20%20%20%20%20%20*%20at%20least%20%7Btype%7D.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7BObject%7D%20Object%20containing%20properties%20for%20this%20class%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20get%20_properties()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.hasOwnProperty(JSCompiler_renameProperty(&#39;__properties&#39;%2C%20this)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20superCtor%20%3D%20superPropertiesClass(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPropertiesMixinConstructor%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this)%3B%0A%20%20%20%20%20%20%20%20%20%20this.__properties%20%3D%20Object.assign(%7B%7D%2C%20superCtor%20%26%26%20superCtor._properties%2C%20ownProperties(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPropertiesMixinConstructor%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20this.__properties%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20%60PropertiesChanged%60%20method%20to%20return%20type%20specified%20in%20the%0A%20%20%20%20%20%20%20*%20static%20%60properties%60%20object%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Name%20of%20property%0A%20%20%20%20%20%20%20*%20%40return%20%7B*%7D%20Type%20to%20which%20to%20deserialize%20attribute%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20typeForProperty(name)%20%7B%0A%20%20%20%20%20%20%20%20const%20info%20%3D%20this._properties%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20return%20info%20%26%26%20info.type%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20%60PropertiesChanged%60%20method%20and%20adds%20a%20call%20to%0A%20%20%20%20%20%20%20*%20%60finalize%60%20which%20lazily%20configures%20the%20element&#39;s%20property%20accessors.%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeProperties()%20%7B%0A%20%20%20%20%20%20%20%20Polymer.telemetry.instanceCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20this.constructor.finalize()%3B%0A%0A%20%20%20%20%20%20%20%20super._initializeProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Called%20when%20the%20element%20is%20added%20to%20a%20document.%0A%20%20%20%20%20%20%20*%20Calls%20%60_enableProperties%60%20to%20turn%20on%20property%20system%20from%0A%20%20%20%20%20%20%20*%20%60PropertiesChanged%60.%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Super%20may%20or%20may%20not%20implement%20the%20callback%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20connectedCallback()%20%7B%0A%20%20%20%20%20%20%20%20if%20(super.connectedCallback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20super.connectedCallback()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this._enableProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Called%20when%20the%20element%20is%20removed%20from%20a%20document%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Super%20may%20or%20may%20not%20implement%20the%20callback%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20disconnectedCallback()%20%7B%0A%20%20%20%20%20%20%20%20if%20(super.disconnectedCallback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20super.disconnectedCallback()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20PropertiesMixin%3B%0A%20%20%7D)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Fmixins%2Fproperties-mixin.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20const%20builtCSS%20%3D%20window.ShadyCSS%20%26%26%20window.ShadyCSS%5B&#39;cssBuild&#39;%5D%3B%0A%20%20%2F**%0A%20%20%20*%20Element%20class%20mixin%20that%20provides%20the%20core%20API%20for%20Polymer&#39;s%20meta-programming%0A%20%20%20*%20features%20including%20template%20stamping%2C%20data-binding%2C%20attribute%20deserialization%2C%0A%20%20%20*%20and%20property%20change%20observation.%0A%20%20%20*%0A%20%20%20*%20Subclassers%20may%20provide%20the%20following%20static%20getters%20to%20return%20metadata%0A%20%20%20*%20used%20to%20configure%20Polymer&#39;s%20features%20for%20the%20class%3A%0A%20%20%20*%0A%20%20%20*%20-%20%60static%20get%20is()%60%3A%20When%20the%20template%20is%20provided%20via%20a%20%60dom-module%60%2C%0A%20%20%20*%20%20%20users%20should%20return%20the%20%60dom-module%60%20id%20from%20a%20static%20%60is%60%20getter.%20%20If%0A%20%20%20*%20%20%20no%20template%20is%20needed%20or%20the%20template%20is%20provided%20directly%20via%20the%0A%20%20%20*%20%20%20%60template%60%20getter%2C%20there%20is%20no%20need%20to%20define%20%60is%60%20for%20the%20element.%0A%20%20%20*%0A%20%20%20*%20-%20%60static%20get%20template()%60%3A%20Users%20may%20provide%20the%20template%20directly%20(as%0A%20%20%20*%20%20%20opposed%20to%20via%20%60dom-module%60)%20by%20implementing%20a%20static%20%60template%60%20getter.%0A%20%20%20*%20%20%20The%20getter%20may%20return%20an%20%60HTMLTemplateElement%60%20or%20a%20string%2C%20which%20will%0A%20%20%20*%20%20%20automatically%20be%20parsed%20into%20a%20template.%0A%20%20%20*%0A%20%20%20*%20-%20%60static%20get%20properties()%60%3A%20Should%20return%20an%20object%20describing%0A%20%20%20*%20%20%20property-related%20metadata%20used%20by%20Polymer%20features%20(key%3A%20property%20name%0A%20%20%20*%20%20%20value%3A%20object%20containing%20property%20metadata).%20Valid%20keys%20in%20per-property%0A%20%20%20*%20%20%20metadata%20include%3A%0A%20%20%20*%20%20%20-%20%60type%60%20(String%7CNumber%7CObject%7CArray%7C...)%3A%20Used%20by%0A%20%20%20*%20%20%20%20%20%60attributeChangedCallback%60%20to%20determine%20how%20string-based%20attributes%0A%20%20%20*%20%20%20%20%20are%20deserialized%20to%20JavaScript%20property%20values.%0A%20%20%20*%20%20%20-%20%60notify%60%20(boolean)%3A%20Causes%20a%20change%20in%20the%20property%20to%20fire%20a%0A%20%20%20*%20%20%20%20%20non-bubbling%20event%20called%20%60%3Cproperty%3E-changed%60.%20Elements%20that%20have%0A%20%20%20*%20%20%20%20%20enabled%20two-way%20binding%20to%20the%20property%20use%20this%20event%20to%20observe%20changes.%0A%20%20%20*%20%20%20-%20%60readOnly%60%20(boolean)%3A%20Creates%20a%20getter%20for%20the%20property%2C%20but%20no%20setter.%0A%20%20%20*%20%20%20%20%20To%20set%20a%20read-only%20property%2C%20use%20the%20private%20setter%20method%0A%20%20%20*%20%20%20%20%20%60_setProperty(property%2C%20value)%60.%0A%20%20%20*%20%20%20-%20%60observer%60%20(string)%3A%20Observer%20method%20name%20that%20will%20be%20called%20when%0A%20%20%20*%20%20%20%20%20the%20property%20changes.%20The%20arguments%20of%20the%20method%20are%0A%20%20%20*%20%20%20%20%20%60(value%2C%20previousValue)%60.%0A%20%20%20*%20%20%20-%20%60computed%60%20(string)%3A%20String%20describing%20method%20and%20dependent%20properties%0A%20%20%20*%20%20%20%20%20for%20computing%20the%20value%20of%20this%20property%20(e.g.%20%60&#39;computeFoo(bar%2C%20zot)&#39;%60).%0A%20%20%20*%20%20%20%20%20Computed%20properties%20are%20read-only%20by%20default%20and%20can%20only%20be%20changed%0A%20%20%20*%20%20%20%20%20via%20the%20return%20value%20of%20the%20computing%20method.%0A%20%20%20*%0A%20%20%20*%20-%20%60static%20get%20observers()%60%3A%20Array%20of%20strings%20describing%20multi-property%0A%20%20%20*%20%20%20observer%20methods%20and%20their%20dependent%20properties%20(e.g.%0A%20%20%20*%20%20%20%60&#39;observeABC(a%2C%20b%2C%20c)&#39;%60).%0A%20%20%20*%0A%20%20%20*%20The%20base%20class%20provides%20default%20implementations%20for%20the%20following%20standard%0A%20%20%20*%20custom%20element%20lifecycle%20callbacks%3B%20users%20may%20override%20these%2C%20but%20should%0A%20%20%20*%20call%20the%20super%20method%20to%20ensure%0A%20%20%20*%20-%20%60constructor%60%3A%20Run%20when%20the%20element%20is%20created%20or%20upgraded%0A%20%20%20*%20-%20%60connectedCallback%60%3A%20Run%20each%20time%20the%20element%20is%20connected%20to%20the%0A%20%20%20*%20%20%20document%0A%20%20%20*%20-%20%60disconnectedCallback%60%3A%20Run%20each%20time%20the%20element%20is%20disconnected%20from%0A%20%20%20*%20%20%20the%20document%0A%20%20%20*%20-%20%60attributeChangedCallback%60%3A%20Run%20each%20time%20an%20attribute%20in%0A%20%20%20*%20%20%20%60observedAttributes%60%20is%20set%20or%20removed%20(note%3A%20this%20element&#39;s%20default%0A%20%20%20*%20%20%20%60observedAttributes%60%20implementation%20will%20automatically%20return%20an%20array%0A%20%20%20*%20%20%20of%20dash-cased%20attributes%20based%20on%20%60properties%60)%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40appliesMixin%20Polymer.PropertyEffects%0A%20%20%20*%20%40appliesMixin%20Polymer.PropertiesMixin%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40property%20rootPath%20%7Bstring%7D%20Set%20to%20the%20value%20of%20%60Polymer.rootPath%60%2C%0A%20%20%20*%20%20%20which%20defaults%20to%20the%20main%20document%20path%0A%20%20%20*%20%40property%20importPath%20%7Bstring%7D%20Set%20to%20the%20value%20of%20the%20class&#39;s%20static%0A%20%20%20*%20%20%20%60importPath%60%20property%2C%20which%20defaults%20to%20the%20path%20of%20this%20element&#39;s%0A%20%20%20*%20%20%20%60dom-module%60%20(when%20%60is%60%20is%20used)%2C%20but%20can%20be%20overridden%20for%20other%0A%20%20%20*%20%20%20import%20strategies.%0A%20%20%20*%20%40summary%20Element%20class%20mixin%20that%20provides%20the%20core%20API%20for%20Polymer&#39;s%0A%20%20%20*%20meta-programming%20features.%0A%20%20%20*%2F%0A%0A%20%20Polymer.ElementMixin%20%3D%20Polymer.dedupingMixin(base%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40constructor%0A%20%20%20%20%20*%20%40extends%20%7Bbase%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertyEffects%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertiesMixin%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%20%20%20%20const%20polymerElementBase%20%3D%20Polymer.PropertiesMixin(Polymer.PropertyEffects(base))%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20a%20list%20of%20properties%20with%20default%20values.%0A%20%20%20%20%20*%20This%20list%20is%20created%20as%20an%20optimization%20since%20it%20is%20a%20subset%20of%0A%20%20%20%20%20*%20the%20list%20returned%20from%20%60_properties%60.%0A%20%20%20%20%20*%20This%20list%20is%20used%20in%20%60_initializeProperties%60%20to%20set%20property%20defaults.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7BPolymerElementConstructor%7D%20constructor%20Element%20class%0A%20%20%20%20%20*%20%40return%20%7BPolymerElementProperties%7D%20Flattened%20properties%20for%20this%20class%0A%20%20%20%20%20*%20%20%20that%20have%20default%20values%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20function%20propertyDefaults(constructor)%20%7B%0A%20%20%20%20%20%20if%20(!constructor.hasOwnProperty(JSCompiler_renameProperty(&#39;__propertyDefaults&#39;%2C%20constructor)))%20%7B%0A%20%20%20%20%20%20%20%20constructor.__propertyDefaults%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20let%20props%20%3D%20constructor._properties%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20p%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20info%20%3D%20props%5Bp%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(&#39;value&#39;%20in%20info)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20constructor.__propertyDefaults%20%3D%20constructor.__propertyDefaults%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20constructor.__propertyDefaults%5Bp%5D%20%3D%20info%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20constructor.__propertyDefaults%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20a%20memoized%20version%20of%20the%20%60observers%60%20array.%0A%20%20%20%20%20*%20%40param%20%7BPolymerElementConstructor%7D%20constructor%20Element%20class%0A%20%20%20%20%20*%20%40return%20%7BArray%7D%20Array%20containing%20own%20observers%20for%20the%20given%20class%0A%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20function%20ownObservers(constructor)%20%7B%0A%20%20%20%20%20%20if%20(!constructor.hasOwnProperty(JSCompiler_renameProperty(&#39;__ownObservers&#39;%2C%20constructor)))%20%7B%0A%20%20%20%20%20%20%20%20constructor.__ownObservers%20%3D%20constructor.hasOwnProperty(JSCompiler_renameProperty(&#39;observers&#39;%2C%20constructor))%20%3F%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymerElementConstructor%7D%20*%2F%0A%20%20%20%20%20%20%20%20constructor.observers%20%3A%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20constructor.__ownObservers%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Creates%20effects%20for%20a%20property.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Note%2C%20once%20a%20property%20has%20been%20set%20to%0A%20%20%20%20%20*%20%60readOnly%60%2C%20%60computed%60%2C%20%60reflectToAttribute%60%2C%20or%20%60notify%60%0A%20%20%20%20%20*%20these%20values%20may%20not%20be%20changed.%20For%20example%2C%20a%20subclass%20cannot%0A%20%20%20%20%20*%20alter%20these%20settings.%20However%2C%20additional%20%60observers%60%20may%20be%20added%0A%20%20%20%20%20*%20by%20subclasses.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20The%20info%20object%20should%20contain%20property%20metadata%20as%20follows%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20*%20%60type%60%3A%20%7Bfunction%7D%20type%20to%20which%20an%20attribute%20matching%20the%20property%0A%20%20%20%20%20*%20is%20deserialized.%20Note%20the%20property%20is%20camel-cased%20from%20a%20dash-cased%0A%20%20%20%20%20*%20attribute.%20For%20example%2C%20&#39;foo-bar&#39;%20attribute%20is%20deserialized%20to%20a%0A%20%20%20%20%20*%20property%20named%20&#39;fooBar&#39;.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20*%20%60readOnly%60%3A%20%7Bboolean%7D%20creates%20a%20readOnly%20property%20and%0A%20%20%20%20%20*%20makes%20a%20private%20setter%20for%20the%20private%20of%20the%20form%20&#39;_setFoo&#39;%20for%20a%0A%20%20%20%20%20*%20property%20&#39;foo&#39;%2C%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20*%20%60computed%60%3A%20%7Bstring%7D%20creates%20a%20computed%20property.%20A%20computed%20property%0A%20%20%20%20%20*%20is%20also%20automatically%20set%20to%20%60readOnly%3A%20true%60.%20The%20value%20is%20calculated%0A%20%20%20%20%20*%20by%20running%20a%20method%20and%20arguments%20parsed%20from%20the%20given%20string.%20For%0A%20%20%20%20%20*%20example%20&#39;compute(foo)&#39;%20will%20compute%20a%20given%20property%20when%20the%0A%20%20%20%20%20*%20&#39;foo&#39;%20property%20changes%20by%20executing%20the%20&#39;compute&#39;%20method.%20This%20method%0A%20%20%20%20%20*%20must%20return%20the%20computed%20value.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20*%20%60reflectToAttribute%60%3A%20%7Bboolean%7D%20If%20true%2C%20the%20property%20value%20is%20reflected%0A%20%20%20%20%20*%20to%20an%20attribute%20of%20the%20same%20name.%20Note%2C%20the%20attribute%20is%20dash-cased%0A%20%20%20%20%20*%20so%20a%20property%20named%20&#39;fooBar&#39;%20is%20reflected%20as%20&#39;foo-bar&#39;.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20*%20%60notify%60%3A%20%7Bboolean%7D%20sends%20a%20non-bubbling%20notification%20event%20when%0A%20%20%20%20%20*%20the%20property%20changes.%20For%20example%2C%20a%20property%20named%20&#39;foo&#39;%20sends%20an%0A%20%20%20%20%20*%20event%20named%20&#39;foo-changed&#39;%20with%20%60event.detail%60%20set%20to%20the%20value%20of%0A%20%20%20%20%20*%20the%20property.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20*%20observer%3A%20%7Bstring%7D%20name%20of%20a%20method%20that%20runs%20when%20the%20property%0A%20%20%20%20%20*%20changes.%20The%20arguments%20of%20the%20method%20are%20(value%2C%20previousValue).%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Note%3A%20Users%20may%20want%20control%20over%20modifying%20property%0A%20%20%20%20%20*%20effects%20via%20subclassing.%20For%20example%2C%20a%20user%20might%20want%20to%20make%20a%0A%20%20%20%20%20*%20reflectToAttribute%20property%20not%20do%20so%20in%20a%20subclass.%20We&#39;ve%20chosen%20to%0A%20%20%20%20%20*%20disable%20this%20because%20it%20leads%20to%20additional%20complication.%0A%20%20%20%20%20*%20For%20example%2C%20a%20readOnly%20effect%20generates%20a%20special%20setter.%20If%20a%20subclass%0A%20%20%20%20%20*%20disables%20the%20effect%2C%20the%20setter%20would%20fail%20unexpectedly.%0A%20%20%20%20%20*%20Based%20on%20feedback%2C%20we%20may%20want%20to%20try%20to%20make%20effects%20more%20malleable%0A%20%20%20%20%20*%20and%2For%20provide%20an%20advanced%20api%20for%20manipulating%20them.%0A%20%20%20%20%20*%20Also%20consider%20adding%20warnings%20when%20an%20effect%20cannot%20be%20changed.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!PolymerElement%7D%20proto%20Element%20class%20prototype%20to%20add%20accessors%0A%20%20%20%20%20*%20%20%20and%20effects%20to%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Name%20of%20the%20property.%0A%20%20%20%20%20*%20%40param%20%7BObject%7D%20info%20Info%20object%20from%20which%20to%20create%20property%20effects.%0A%20%20%20%20%20*%20Supported%20keys%3A%0A%20%20%20%20%20*%20%40param%20%7BObject%7D%20allProps%20Flattened%20map%20of%20all%20properties%20defined%20in%20this%0A%20%20%20%20%20*%20%20%20element%20(including%20inherited%20properties)%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20function%20createPropertyFromConfig(proto%2C%20name%2C%20info%2C%20allProps)%20%7B%0A%20%20%20%20%20%20%2F%2F%20computed%20forces%20readOnly...%0A%20%20%20%20%20%20if%20(info.computed)%20%7B%0A%20%20%20%20%20%20%20%20info.readOnly%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20Note%2C%20since%20all%20computed%20properties%20are%20readOnly%2C%20this%20prevents%0A%20%20%20%20%20%20%2F%2F%20adding%20additional%20computed%20property%20effects%20(which%20leads%20to%20a%20confusing%0A%20%20%20%20%20%20%2F%2F%20setup%20where%20multiple%20triggers%20for%20setting%20a%20property)%0A%20%20%20%20%20%20%2F%2F%20While%20we%20do%20have%20%60hasComputedEffect%60%20this%20is%20set%20on%20the%20property&#39;s%0A%20%20%20%20%20%20%2F%2F%20dependencies%20rather%20than%20itself.%0A%0A%0A%20%20%20%20%20%20if%20(info.computed%20%26%26%20!proto._hasReadOnlyEffect(name))%20%7B%0A%20%20%20%20%20%20%20%20proto._createComputedProperty(name%2C%20info.computed%2C%20allProps)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(info.readOnly%20%26%26%20!proto._hasReadOnlyEffect(name))%20%7B%0A%20%20%20%20%20%20%20%20proto._createReadOnlyProperty(name%2C%20!info.computed)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(info.reflectToAttribute%20%26%26%20!proto._hasReflectEffect(name))%20%7B%0A%20%20%20%20%20%20%20%20proto._createReflectedProperty(name)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(info.notify%20%26%26%20!proto._hasNotifyEffect(name))%20%7B%0A%20%20%20%20%20%20%20%20proto._createNotifyingProperty(name)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20always%20add%20observer%0A%0A%0A%20%20%20%20%20%20if%20(info.observer)%20%7B%0A%20%20%20%20%20%20%20%20proto._createPropertyObserver(name%2C%20info.observer%2C%20allProps%5Binfo.observer%5D)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20always%20create%20the%20mapping%20from%20attribute%20back%20to%20property%20for%20deserialization.%0A%0A%0A%20%20%20%20%20%20proto._addPropertyToAttributeMap(name)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Process%20all%20style%20elements%20in%20the%20element%20template.%20Styles%20with%20the%0A%20%20%20%20%20*%20%60include%60%20attribute%20are%20processed%20such%20that%20any%20styles%20in%0A%20%20%20%20%20*%20the%20associated%20%22style%20modules%22%20are%20included%20in%20the%20element%20template.%0A%20%20%20%20%20*%20%40param%20%7BPolymerElementConstructor%7D%20klass%20Element%20class%0A%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20to%20process%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20is%20Name%20of%20element%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20baseURI%20Base%20URI%20for%20element%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20function%20processElementStyles(klass%2C%20template%2C%20is%2C%20baseURI)%20%7B%0A%20%20%20%20%20%20if%20(!builtCSS)%20%7B%0A%20%20%20%20%20%20%20%20const%20templateStyles%20%3D%20template.content.querySelectorAll(&#39;style&#39;)%3B%0A%20%20%20%20%20%20%20%20const%20stylesWithImports%20%3D%20Polymer.StyleGather.stylesFromTemplate(template)%3B%20%2F%2F%20insert%20styles%20from%20%3Clink%20rel%3D%22import%22%20type%3D%22css%22%3E%20at%20the%20top%20of%20the%20template%0A%0A%20%20%20%20%20%20%20%20const%20linkedStyles%20%3D%20Polymer.StyleGather.stylesFromModuleImports(is)%3B%0A%20%20%20%20%20%20%20%20const%20firstTemplateChild%20%3D%20template.content.firstElementChild%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20idx%20%3D%200%3B%20idx%20%3C%20linkedStyles.length%3B%20idx%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20s%20%3D%20linkedStyles%5Bidx%5D%3B%0A%20%20%20%20%20%20%20%20%20%20s.textContent%20%3D%20klass._processStyleText(s.textContent%2C%20baseURI)%3B%0A%20%20%20%20%20%20%20%20%20%20template.content.insertBefore(s%2C%20firstTemplateChild)%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20keep%20track%20of%20the%20last%20%22concrete%22%20style%20in%20the%20template%20we%20have%20encountered%0A%0A%0A%20%20%20%20%20%20%20%20let%20templateStyleIndex%20%3D%200%3B%20%2F%2F%20ensure%20all%20gathered%20styles%20are%20actually%20in%20this%20template.%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20stylesWithImports.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20s%20%3D%20stylesWithImports%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20templateStyle%20%3D%20templateStyles%5BtemplateStyleIndex%5D%3B%20%2F%2F%20if%20the%20style%20is%20not%20in%20this%20template%2C%20it&#39;s%20been%20%22included%22%20and%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20we%20put%20a%20clone%20of%20it%20in%20the%20template%20before%20the%20style%20that%20included%20it%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(templateStyle%20!%3D%3D%20s)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20s.cloneNode(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20templateStyle.parentNode.insertBefore(s%2C%20templateStyle)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20templateStyleIndex%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20s.textContent%20%3D%20klass._processStyleText(s.textContent%2C%20baseURI)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(window.ShadyCSS)%20%7B%0A%20%20%20%20%20%20%20%20window.ShadyCSS.prepareTemplate(template%2C%20is)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Look%20up%20template%20from%20dom-module%20for%20element%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!string%7D%20is%20Element%20name%20to%20look%20up%0A%20%20%20%20%20*%20%40return%20%7B!HTMLTemplateElement%7D%20Template%20found%20in%20dom%20module%2C%20or%0A%20%20%20%20%20*%20%20%20undefined%20if%20not%20found%0A%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20function%20getTemplateFromDomModule(is)%20%7B%0A%20%20%20%20%20%20let%20template%20%3D%20null%3B%0A%0A%20%20%20%20%20%20if%20(is%20%26%26%20Polymer.DomModule)%20%7B%0A%20%20%20%20%20%20%20%20template%20%3D%20Polymer.DomModule.import(is%2C%20&#39;template&#39;)%3B%20%2F%2F%20Under%20strictTemplatePolicy%2C%20require%20any%20element%20with%20an%20%60is%60%0A%20%20%20%20%20%20%20%20%2F%2F%20specified%20to%20have%20a%20dom-module%0A%0A%20%20%20%20%20%20%20%20if%20(Polymer.strictTemplatePolicy%20%26%26%20!template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60strictTemplatePolicy%3A%20expecting%20dom-module%20or%20null%20template%20for%20%24%7Bis%7D%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20template%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20%20%20*%20%40unrestricted%0A%20%20%20%20%20%20%20*%20%40implements%20%7BPolymer_ElementMixin%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20class%20PolymerElement%20extends%20polymerElementBase%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Override%20of%20PropertiesMixin%20_finalizeClass%20to%20create%20observers%20and%0A%20%20%20%20%20%20%20*%20find%20the%20template.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Interfaces%20in%20closure%20do%20not%20inherit%20statics%2C%20but%20classes%20do%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20static%20_finalizeClass()%20%7B%0A%20%20%20%20%20%20%20%20super._finalizeClass()%3B%0A%0A%20%20%20%20%20%20%20%20const%20observers%20%3D%20ownObservers(this)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(observers)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.createObservers(observers%2C%20this._properties)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this._prepareTemplate()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20_prepareTemplate()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20note%3A%20create%20%22working%22%20template%20that%20is%20finalized%20at%20instance%20time%0A%20%20%20%20%20%20%20%20let%20template%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymerElementConstructor%7D%20*%2F%0A%20%20%20%20%20%20%20%20this.template%3B%0A%0A%20%20%20%20%20%20%20%20if%20(template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(typeof%20template%20%3D%3D%3D%20&#39;string&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20t%20%3D%20document.createElement(&#39;template&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t.innerHTML%20%3D%20template%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20template%20%3D%20t%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(!Polymer.legacyOptimizations)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20template%20%3D%20template.cloneNode(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this.prototype._template%20%3D%20template%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Override%20of%20PropertiesChanged%20createProperties%20to%20create%20accessors%0A%20%20%20%20%20%20%20*%20and%20property%20effects%20for%20all%20of%20the%20properties.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20createProperties(props)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20p%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20createPropertyFromConfig(this.prototype%2C%20p%2C%20props%5Bp%5D%2C%20props)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Creates%20observers%20for%20the%20given%20%60observers%60%20array.%0A%20%20%20%20%20%20%20*%20Leverages%20%60PropertyEffects%60%20to%20create%20observers.%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20observers%20Array%20of%20observer%20descriptors%20for%0A%20%20%20%20%20%20%20*%20%20%20this%20class%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20dynamicFns%20Object%20containing%20keys%20for%20any%20properties%0A%20%20%20%20%20%20%20*%20%20%20that%20are%20functions%20and%20should%20trigger%20the%20effect%20when%20the%20function%0A%20%20%20%20%20%20%20*%20%20%20reference%20is%20changed%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20createObservers(observers%2C%20dynamicFns)%20%7B%0A%20%20%20%20%20%20%20%20const%20proto%20%3D%20this.prototype%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20observers.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20proto._createMethodObserver(observers%5Bi%5D%2C%20dynamicFns)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20the%20template%20that%20will%20be%20stamped%20into%20this%20element&#39;s%20shadow%20root.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20If%20a%20%60static%20get%20is()%60%20getter%20is%20defined%2C%20the%20default%20implementation%0A%20%20%20%20%20%20%20*%20will%20return%20the%20first%20%60%3Ctemplate%3E%60%20in%20a%20%60dom-module%60%20whose%20%60id%60%0A%20%20%20%20%20%20%20*%20matches%20this%20element&#39;s%20%60is%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Users%20may%20override%20this%20getter%20to%20return%20an%20arbitrary%20template%0A%20%20%20%20%20%20%20*%20(in%20which%20case%20the%20%60is%60%20getter%20is%20unnecessary).%20The%20template%20returned%0A%20%20%20%20%20%20%20*%20may%20be%20either%20an%20%60HTMLTemplateElement%60%20or%20a%20string%20that%20will%20be%0A%20%20%20%20%20%20%20*%20automatically%20parsed%20into%20a%20template.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%20that%20when%20subclassing%2C%20if%20the%20super%20class%20overrode%20the%20default%0A%20%20%20%20%20%20%20*%20implementation%20and%20the%20subclass%20would%20like%20to%20provide%20an%20alternate%0A%20%20%20%20%20%20%20*%20template%20via%20a%20%60dom-module%60%2C%20it%20should%20override%20this%20getter%20and%0A%20%20%20%20%20%20%20*%20return%20%60Polymer.DomModule.import(this.is%2C%20&#39;template&#39;)%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20If%20a%20subclass%20would%20like%20to%20modify%20the%20super%20class%20template%2C%20it%20should%0A%20%20%20%20%20%20%20*%20clone%20it%20rather%20than%20modify%20it%20in%20place.%20%20If%20the%20getter%20does%20expensive%0A%20%20%20%20%20%20%20*%20work%20such%20as%20cloning%2Fmodifying%20a%20template%2C%20it%20should%20memoize%20the%0A%20%20%20%20%20%20%20*%20template%20for%20maximum%20performance%3A%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%20%20let%20memoizedTemplate%3B%0A%20%20%20%20%20%20%20*%20%20%20class%20MySubClass%20extends%20MySuperClass%20%7B%0A%20%20%20%20%20%20%20*%20%20%20%20%20static%20get%20template()%20%7B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20if%20(!memoizedTemplate)%20%7B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20memoizedTemplate%20%3D%20MySuperClass.template.cloneNode(true)%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20let%20subContent%20%3D%20document.createElement(&#39;div&#39;)%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20subContent.textContent%20%3D%20&#39;This%20came%20from%20MySubClass&#39;%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20%20memoizedTemplate.content.appendChild(subContent)%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20return%20memoizedTemplate%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20*%20%20%20%7D%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7BHTMLTemplateElement%7Cstring%7D%20Template%20to%20be%20stamped%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20get%20template()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Explanation%20of%20template-related%20properties%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20-%20constructor.template%20(this%20getter)%3A%20the%20template%20for%20the%20class.%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20This%20can%20come%20from%20the%20prototype%20(for%20legacy%20elements)%2C%20from%20a%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20dom-module%2C%20or%20from%20the%20super%20class&#39;s%20template%20(or%20can%20be%20overridden%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20altogether%20by%20the%20user)%0A%20%20%20%20%20%20%20%20%2F%2F%20-%20constructor._template%3A%20memoized%20version%20of%20constructor.template%0A%20%20%20%20%20%20%20%20%2F%2F%20-%20prototype._template%3A%20working%20template%20for%20the%20element%2C%20which%20will%20be%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20parsed%20and%20modified%20in%20place.%20It%20is%20a%20cloned%20version%20of%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20constructor.template%2C%20saved%20in%20_finalizeClass().%20Note%20that%20before%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20this%20getter%20is%20called%2C%20for%20legacy%20elements%20this%20could%20be%20from%20a%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20_template%20field%20on%20the%20info%20object%20passed%20to%20Polymer()%2C%20a%20behavior%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20or%20set%20in%20registered()%3B%20once%20the%20static%20getter%20runs%2C%20a%20clone%20of%20it%0A%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20will%20overwrite%20it%20on%20the%20prototype%20as%20the%20working%20template.%0A%20%20%20%20%20%20%20%20if%20(!this.hasOwnProperty(JSCompiler_renameProperty(&#39;_template&#39;%2C%20this)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._template%20%3D%20%2F%2F%20If%20user%20has%20put%20template%20on%20prototype%20(e.g.%20in%20legacy%20via%20registered%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20callback%20or%20info%20object)%2C%20prefer%20that%20first%0A%20%20%20%20%20%20%20%20%20%20this.prototype.hasOwnProperty(JSCompiler_renameProperty(&#39;_template&#39;%2C%20this.prototype))%20%3F%20this.prototype._template%20%3A%20%2F%2F%20Look%20in%20dom-module%20associated%20with%20this%20element&#39;s%20is%0A%20%20%20%20%20%20%20%20%20%20getTemplateFromDomModule(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymerElementConstructor%7D*%2F%0A%20%20%20%20%20%20%20%20%20%20this.is)%20%7C%7C%20%2F%2F%20Next%20look%20for%20superclass%20template%20(call%20the%20super%20impl%20this%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20way%20so%20that%20%60this%60%20points%20to%20the%20superclass)%0A%20%20%20%20%20%20%20%20%20%20Object.getPrototypeOf(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymerElementConstructor%7D*%2F%0A%20%20%20%20%20%20%20%20%20%20this.prototype).constructor.template%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20this._template%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Set%20the%20template.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BHTMLTemplateElement%7Cstring%7D%20value%20Template%20to%20set.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20set%20template(value)%20%7B%0A%20%20%20%20%20%20%20%20this._template%20%3D%20value%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Path%20matching%20the%20url%20from%20which%20the%20element%20was%20imported.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20path%20is%20used%20to%20resolve%20url&#39;s%20in%20template%20style%20cssText.%0A%20%20%20%20%20%20%20*%20The%20%60importPath%60%20property%20is%20also%20set%20on%20element%20instances%20and%20can%20be%0A%20%20%20%20%20%20%20*%20used%20to%20create%20bindings%20relative%20to%20the%20import%20path.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20For%20elements%20defined%20in%20ES%20modules%2C%20users%20should%20implement%0A%20%20%20%20%20%20%20*%20%60static%20get%20importMeta()%20%7B%20return%20import.meta%3B%20%7D%60%2C%20and%20the%20default%0A%20%20%20%20%20%20%20*%20implementation%20of%20%60importPath%60%20will%20%20return%20%60import.meta.url%60&#39;s%20path.%0A%20%20%20%20%20%20%20*%20For%20elements%20defined%20in%20HTML%20imports%2C%20this%20getter%20will%20return%20the%20path%0A%20%20%20%20%20%20%20*%20to%20the%20document%20containing%20a%20%60dom-module%60%20element%20matching%20this%0A%20%20%20%20%20%20%20*%20element&#39;s%20static%20%60is%60%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%2C%20this%20path%20should%20contain%20a%20trailing%20%60%2F%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%7D%20The%20import%20path%20for%20this%20element%20class%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20get%20importPath()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.hasOwnProperty(JSCompiler_renameProperty(&#39;_importPath&#39;%2C%20this)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20meta%20%3D%20this.importMeta%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(meta)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._importPath%20%3D%20Polymer.ResolveUrl.pathFromUrl(meta.url)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20module%20%3D%20Polymer.DomModule%20%26%26%20Polymer.DomModule.import(%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymerElementConstructor%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20this.is)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._importPath%20%3D%20module%20%26%26%20module.assetpath%20%7C%7C%20Object.getPrototypeOf(%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymerElementConstructor%7D*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20this.prototype).constructor.importPath%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20this._importPath%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super()%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLTemplateElement%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this._template%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this._importPath%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.rootPath%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.importPath%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BStampedTemplate%20%7C%20HTMLElement%20%7C%20ShadowRoot%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.root%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Object%3Cstring%2C%20!Element%3E%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.%24%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20the%20default%20%60Polymer.PropertyAccessors%60%20to%20ensure%20class%0A%20%20%20%20%20%20%20*%20metaprogramming%20related%20to%20property%20accessors%20and%20effects%20has%0A%20%20%20%20%20%20%20*%20completed%20(calls%20%60finalize%60).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20It%20also%20initializes%20any%20property%20defaults%20provided%20via%20%60value%60%20in%0A%20%20%20%20%20%20%20*%20%60properties%60%20metadata.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeProperties()%20%7B%0A%20%20%20%20%20%20%20%20this.constructor.finalize()%3B%20%2F%2F%20note%3A%20finalize%20template%20when%20we%20have%20access%20to%20%60localName%60%20to%0A%20%20%20%20%20%20%20%20%2F%2F%20avoid%20dependence%20on%20%60is%60%20for%20polyfilling%20styling.%0A%0A%20%20%20%20%20%20%20%20this.constructor._finalizeTemplate(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20this.localName)%3B%0A%0A%20%20%20%20%20%20%20%20super._initializeProperties()%3B%20%2F%2F%20set%20path%20defaults%0A%0A%0A%20%20%20%20%20%20%20%20this.rootPath%20%3D%20Polymer.rootPath%3B%0A%20%20%20%20%20%20%20%20this.importPath%20%3D%20this.constructor.importPath%3B%20%2F%2F%20apply%20property%20defaults...%0A%0A%20%20%20%20%20%20%20%20let%20p%24%20%3D%20propertyDefaults(this.constructor)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!p%24)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20for%20(let%20p%20in%20p%24)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20info%20%3D%20p%24%5Bp%5D%3B%20%2F%2F%20Don&#39;t%20set%20default%20value%20if%20there%20is%20already%20an%20own%20property%2C%20which%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20happens%20when%20a%20%60properties%60%20property%20with%20default%20but%20no%20effects%20had%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20a%20property%20set%20(e.g.%20bound)%20by%20its%20host%20before%20upgrade%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(!this.hasOwnProperty(p))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20value%20%3D%20typeof%20info.value%20%3D%3D%20&#39;function&#39;%20%3F%20info.value.call(this)%20%3A%20info.value%3B%20%2F%2F%20Set%20via%20%60_setProperty%60%20if%20there%20is%20an%20accessor%2C%20to%20enable%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20initializing%20readOnly%20property%20defaults%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this._hasAccessor(p))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this._setPendingProperty(p%2C%20value%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%5Bp%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Gather%20style%20text%20for%20a%20style%20element%20in%20the%20template.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20cssText%20Text%20containing%20styling%20to%20process%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20baseURI%20Base%20URI%20to%20rebase%20CSS%20paths%20against%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%7D%20The%20processed%20CSS%20text%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_processStyleText(cssText%2C%20baseURI)%20%7B%0A%20%20%20%20%20%20%20%20return%20Polymer.ResolveUrl.resolveCss(cssText%2C%20baseURI)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20*%20Configures%20an%20element%20%60proto%60%20to%20function%20with%20a%20given%20%60template%60.%0A%20%20%20%20%20%20*%20The%20element%20name%20%60is%60%20and%20extends%20%60ext%60%20must%20be%20specified%20for%20ShadyCSS%0A%20%20%20%20%20%20*%20style%20scoping.%0A%20%20%20%20%20%20*%0A%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20is%20Tag%20name%20(or%20type%20extension%20name)%20for%20this%20element%0A%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_finalizeTemplate(is)%20%7B%0A%20%20%20%20%20%20%20%20%2F**%20%40const%20%7BHTMLTemplateElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20const%20template%20%3D%20this.prototype._template%3B%0A%0A%20%20%20%20%20%20%20%20if%20(template%20%26%26%20!template.__polymerFinalized)%20%7B%0A%20%20%20%20%20%20%20%20%20%20template.__polymerFinalized%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20const%20importPath%20%3D%20this.importPath%3B%0A%20%20%20%20%20%20%20%20%20%20const%20baseURI%20%3D%20importPath%20%3F%20Polymer.ResolveUrl.resolveUrl(importPath)%20%3A%20&#39;&#39;%3B%20%2F%2F%20e.g.%20support%20%60include%3D%22module-name%22%60%2C%20and%20ShadyCSS%0A%0A%20%20%20%20%20%20%20%20%20%20processElementStyles(this%2C%20template%2C%20is%2C%20baseURI)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this.prototype._bindTemplate(template)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Provides%20a%20default%20implementation%20of%20the%20standard%20Custom%20Elements%0A%20%20%20%20%20%20%20*%20%60connectedCallback%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20default%20implementation%20enables%20the%20property%20effects%20system%20and%0A%20%20%20%20%20%20%20*%20flushes%20any%20pending%20properties%2C%20and%20updates%20shimmed%20CSS%20properties%0A%20%20%20%20%20%20%20*%20when%20using%20the%20ShadyCSS%20scoping%2Fcustom%20properties%20polyfill.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%2C%20invalidCasts%7D%20Super%20may%20or%20may%20not%20implement%20the%20callback%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20connectedCallback()%20%7B%0A%20%20%20%20%20%20%20%20if%20(window.ShadyCSS%20%26%26%20this._template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20window.ShadyCSS.styleElement(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20super.connectedCallback()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Stamps%20the%20element%20template.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20ready()%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.root%20%3D%20this._stampTemplate(this._template)%3B%0A%20%20%20%20%20%20%20%20%20%20this.%24%20%3D%20this.root.%24%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20super.ready()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Implements%20%60PropertyEffects%60&#39;s%20%60_readyClients%60%20call.%20Attaches%0A%20%20%20%20%20%20%20*%20element%20dom%20by%20calling%20%60_attachDom%60%20with%20the%20dom%20stamped%20from%20the%0A%20%20%20%20%20%20%20*%20element&#39;s%20template%20via%20%60_stampTemplate%60.%20Note%20that%20this%20allows%0A%20%20%20%20%20%20%20*%20client%20dom%20to%20be%20attached%20to%20the%20element%20prior%20to%20any%20observers%0A%20%20%20%20%20%20%20*%20running.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_readyClients()%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.root%20%3D%20this._attachDom(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BStampedTemplate%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this.root)%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20The%20super._readyClients%20here%20sets%20the%20clients%20initialized%20flag.%0A%20%20%20%20%20%20%20%20%2F%2F%20We%20must%20wait%20to%20do%20this%20until%20after%20client%20dom%20is%20created%2Fattached%0A%20%20%20%20%20%20%20%20%2F%2F%20so%20that%20this%20flag%20can%20be%20checked%20to%20prevent%20notifications%20fired%0A%20%20%20%20%20%20%20%20%2F%2F%20during%20this%20process%20from%20being%20handled%20before%20clients%20are%20ready.%0A%0A%0A%20%20%20%20%20%20%20%20super._readyClients()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Attaches%20an%20element&#39;s%20stamped%20dom%20to%20itself.%20By%20default%2C%0A%20%20%20%20%20%20%20*%20this%20method%20creates%20a%20%60shadowRoot%60%20and%20adds%20the%20dom%20to%20it.%0A%20%20%20%20%20%20%20*%20However%2C%20this%20method%20may%20be%20overridden%20to%20allow%20an%20element%0A%20%20%20%20%20%20%20*%20to%20put%20its%20dom%20in%20another%20location.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40throws%20%7BError%7D%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingReturn%7D%0A%20%20%20%20%20%20%20*%20%40param%20%7BStampedTemplate%7D%20dom%20to%20attach%20to%20the%20element.%0A%20%20%20%20%20%20%20*%20%40return%20%7BShadowRoot%7D%20node%20to%20which%20the%20dom%20has%20been%20attached.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_attachDom(dom)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.attachShadow)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(dom)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.shadowRoot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.attachShadow(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mode%3A%20&#39;open&#39;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this.shadowRoot.appendChild(dom)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.shadowRoot%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(&#39;ShadowDOM%20not%20available.%20&#39;%20%2B%20%2F%2F%20TODO(sorvell)%3A%20move%20to%20compile-time%20conditional%20when%20supported%0A%20%20%20%20%20%20%20%20%20%20&#39;Polymer.Element%20can%20create%20dom%20as%20children%20instead%20of%20in%20&#39;%20%2B%20&#39;ShadowDOM%20by%20setting%20%60this.root%20%3D%20this%3B%5C%60%20before%20%5C%60ready%5C%60.&#39;)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20When%20using%20the%20ShadyCSS%20scoping%20and%20custom%20property%20shim%2C%20causes%20all%0A%20%20%20%20%20%20%20*%20shimmed%20styles%20in%20this%20element%20(and%20its%20subtree)%20to%20be%20updated%0A%20%20%20%20%20%20%20*%20based%20on%20current%20custom%20property%20values.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20The%20optional%20parameter%20overrides%20inline%20custom%20property%20styles%20with%20an%0A%20%20%20%20%20%20%20*%20object%20of%20properties%20where%20the%20keys%20are%20CSS%20properties%2C%20and%20the%20values%0A%20%20%20%20%20%20%20*%20are%20strings.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Example%3A%20%60this.updateStyles(%7B&#39;--color&#39;%3A%20&#39;blue&#39;%7D)%60%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20These%20properties%20are%20retained%20unless%20a%20value%20of%20%60null%60%20is%20set.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%3A%20This%20function%20does%20not%20support%20updating%20CSS%20mixins.%0A%20%20%20%20%20%20%20*%20You%20can%20not%20dynamically%20change%20the%20value%20of%20an%20%60%40apply%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20properties%20Bag%20of%20custom%20property%20key%2Fvalues%20to%0A%20%20%20%20%20%20%20*%20%20%20apply%20to%20this%20element.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20updateStyles(properties)%20%7B%0A%20%20%20%20%20%20%20%20if%20(window.ShadyCSS)%20%7B%0A%20%20%20%20%20%20%20%20%20%20window.ShadyCSS.styleSubtree(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this%2C%20properties)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Rewrites%20a%20given%20URL%20relative%20to%20a%20base%20URL.%20The%20base%20URL%20defaults%20to%0A%20%20%20%20%20%20%20*%20the%20original%20location%20of%20the%20document%20containing%20the%20%60dom-module%60%20for%0A%20%20%20%20%20%20%20*%20this%20element.%20This%20method%20will%20return%20the%20same%20URL%20before%20and%20after%0A%20%20%20%20%20%20%20*%20bundling.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%20that%20this%20function%20performs%20no%20resolution%20for%20URLs%20that%20start%0A%20%20%20%20%20%20%20*%20with%20%60%2F%60%20(absolute%20URLs)%20or%20%60%23%60%20(hash%20identifiers).%20%20For%20general%20purpose%0A%20%20%20%20%20%20%20*%20URL%20resolution%2C%20use%20%60window.URL%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20url%20URL%20to%20resolve.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%3D%7D%20base%20Optional%20base%20URL%20to%20resolve%20against%2C%20defaults%0A%20%20%20%20%20%20%20*%20to%20the%20element&#39;s%20%60importPath%60%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Rewritten%20URL%20relative%20to%20base%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20resolveUrl(url%2C%20base)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!base%20%26%26%20this.importPath)%20%7B%0A%20%20%20%20%20%20%20%20%20%20base%20%3D%20Polymer.ResolveUrl.resolveUrl(this.importPath)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20Polymer.ResolveUrl.resolveUrl(url%2C%20base)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20%60PropertyAccessors%60%20to%20add%20map%20of%20dynamic%20functions%20on%0A%20%20%20%20%20%20%20*%20template%20info%2C%20for%20consumption%20by%20%60PropertyEffects%60%20template%20binding%0A%20%20%20%20%20%20%20*%20code.%20This%20map%20determines%20which%20method%20templates%20should%20have%20accessors%0A%20%20%20%20%20%20%20*%20created%20for%20them.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Interfaces%20in%20closure%20do%20not%20inherit%20statics%2C%20but%20classes%20do%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_parseTemplateContent(template%2C%20templateInfo%2C%20nodeInfo)%20%7B%0A%20%20%20%20%20%20%20%20templateInfo.dynamicFns%20%3D%20templateInfo.dynamicFns%20%7C%7C%20this._properties%3B%0A%20%20%20%20%20%20%20%20return%20super._parseTemplateContent(template%2C%20templateInfo%2C%20nodeInfo)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20PolymerElement%3B%0A%20%20%7D)%3B%0A%20%20%2F**%0A%20%20%20*%20When%20using%20the%20ShadyCSS%20scoping%20and%20custom%20property%20shim%2C%20causes%20all%0A%20%20%20*%20shimmed%20%60styles%60%20(via%20%60custom-style%60)%20in%20the%20document%20(and%20its%20subtree)%0A%20%20%20*%20to%20be%20updated%20based%20on%20current%20custom%20property%20values.%0A%20%20%20*%0A%20%20%20*%20The%20optional%20parameter%20overrides%20inline%20custom%20property%20styles%20with%20an%0A%20%20%20*%20object%20of%20properties%20where%20the%20keys%20are%20CSS%20properties%2C%20and%20the%20values%0A%20%20%20*%20are%20strings.%0A%20%20%20*%0A%20%20%20*%20Example%3A%20%60Polymer.updateStyles(%7B&#39;--color&#39;%3A%20&#39;blue&#39;%7D)%60%0A%20%20%20*%0A%20%20%20*%20These%20properties%20are%20retained%20unless%20a%20value%20of%20%60null%60%20is%20set.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BObject%3D%7D%20props%20Bag%20of%20custom%20property%20key%2Fvalues%20to%0A%20%20%20*%20%20%20apply%20to%20the%20document.%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.updateStyles%20%3D%20function%20(props)%20%7B%0A%20%20%20%20if%20(window.ShadyCSS)%20%7B%0A%20%20%20%20%20%20window.ShadyCSS.styleDocument(props)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Fmixins%2Felement-mixin.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/html-tag.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Class%20representing%20a%20static%20string%20value%20which%20can%20be%20used%20to%20filter%0A%20%20%20*%20strings%20by%20asseting%20that%20they%20have%20been%20created%20via%20this%20class.%20The%0A%20%20%20*%20%60value%60%20property%20returns%20the%20string%20passed%20to%20the%20constructor.%0A%20%20%20*%2F%0A%0A%20%20class%20LiteralString%20%7B%0A%20%20%20%20constructor(string)%20%7B%0A%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%20%20%20%20%20%20this.value%20%3D%20string.toString()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40return%20%7Bstring%7D%20LiteralString%20string%20value%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20toString()%20%7B%0A%20%20%20%20%20%20return%20this.value%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B*%7D%20value%20Object%20to%20stringify%20into%20HTML%0A%20%20%20*%20%40return%20%7Bstring%7D%20HTML%20stringified%20form%20of%20%60obj%60%0A%20%20%20*%2F%0A%0A%0A%20%20function%20literalValue(value)%20%7B%0A%20%20%20%20if%20(value%20instanceof%20LiteralString)%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!LiteralString%7D%20*%2F%0A%20%20%20%20%20%20%20%20value.value%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20throw%20new%20Error(%60non-literal%20value%20passed%20to%20Polymer.htmlLiteral%3A%20%24%7Bvalue%7D%60)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B*%7D%20value%20Object%20to%20stringify%20into%20HTML%0A%20%20%20*%20%40return%20%7Bstring%7D%20HTML%20stringified%20form%20of%20%60obj%60%0A%20%20%20*%2F%0A%0A%0A%20%20function%20htmlValue(value)%20%7B%0A%20%20%20%20if%20(value%20instanceof%20HTMLTemplateElement)%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLTemplateElement%20%7D%20*%2F%0A%20%20%20%20%20%20%20%20value.innerHTML%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%20else%20if%20(value%20instanceof%20LiteralString)%20%7B%0A%20%20%20%20%20%20return%20literalValue(value)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20throw%20new%20Error(%60non-template%20value%20passed%20to%20Polymer.html%3A%20%24%7Bvalue%7D%60)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20A%20template%20literal%20tag%20that%20creates%20an%20HTML%20%3Ctemplate%3E%20element%20from%20the%0A%20%20%20*%20contents%20of%20the%20string.%0A%20%20%20*%0A%20%20%20*%20This%20allows%20you%20to%20write%20a%20Polymer%20Template%20in%20JavaScript.%0A%20%20%20*%0A%20%20%20*%20Templates%20can%20be%20composed%20by%20interpolating%20%60HTMLTemplateElement%60s%20in%0A%20%20%20*%20expressions%20in%20the%20JavaScript%20template%20literal.%20The%20nested%20template&#39;s%0A%20%20%20*%20%60innerHTML%60%20is%20included%20in%20the%20containing%20template.%20%20The%20only%20other%0A%20%20%20*%20values%20allowed%20in%20expressions%20are%20those%20returned%20from%20%60Polymer.htmlLiteral%60%0A%20%20%20*%20which%20ensures%20only%20literal%20values%20from%20JS%20source%20ever%20reach%20the%20HTML%2C%20to%0A%20%20%20*%20guard%20against%20XSS%20risks.%0A%20%20%20*%0A%20%20%20*%20All%20other%20values%20are%20disallowed%20in%20expressions%20to%20help%20prevent%20XSS%0A%20%20%20*%20attacks%3B%20however%2C%20%60Polymer.htmlLiteral%60%20can%20be%20used%20to%20compose%20static%0A%20%20%20*%20string%20values%20into%20templates.%20This%20is%20useful%20to%20compose%20strings%20into%0A%20%20%20*%20places%20that%20do%20not%20accept%20html%2C%20like%20the%20css%20text%20of%20a%20%60style%60%0A%20%20%20*%20element.%0A%20%20%20*%0A%20%20%20*%20Example%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20static%20get%20template()%20%7B%0A%20%20%20*%20%20%20%20%20%20%20return%20Polymer.html%60%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3Cstyle%3E%3Ahost%7B%20content%3A%22...%22%20%7D%3C%2Fstyle%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22shadowed%22%3E%24%7Bthis.partialTemplate%7D%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%24%7Bsuper.template%7D%0A%20%20%20*%20%20%20%20%20%20%20%60%3B%0A%20%20%20*%20%20%20%20%20%7D%0A%20%20%20*%20%20%20%20%20static%20get%20partialTemplate()%20%7B%20return%20Polymer.html%60%3Cspan%3EPartial!%3C%2Fspan%3E%60%3B%20%7D%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40param%20%7B!ITemplateArray%7D%20strings%20Constant%20parts%20of%20tagged%20template%20literal%0A%20%20%20*%20%40param%20%7B...*%7D%20values%20Variable%20parts%20of%20tagged%20template%20literal%0A%20%20%20*%20%40return%20%7B!HTMLTemplateElement%7D%20Constructed%20HTMLTemplateElement%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.html%20%3D%20function%20html(strings%2C%20...values)%20%7B%0A%20%20%20%20const%20template%20%3D%0A%20%20%20%20%2F**%20%40type%20%7B!HTMLTemplateElement%7D%20*%2F%0A%20%20%20%20document.createElement(&#39;template&#39;)%3B%0A%20%20%20%20template.innerHTML%20%3D%20values.reduce((acc%2C%20v%2C%20idx)%20%3D%3E%20acc%20%2B%20htmlValue(v)%20%2B%20strings%5Bidx%20%2B%201%5D%2C%20strings%5B0%5D)%3B%0A%20%20%20%20return%20template%3B%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20An%20html%20literal%20tag%20that%20can%20be%20used%20with%20%60Polymer.html%60%20to%20compose.%0A%20%20%20*%20a%20literal%20string.%0A%20%20%20*%0A%20%20%20*%20Example%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20static%20get%20template()%20%7B%0A%20%20%20*%20%20%20%20%20%20%20return%20Polymer.html%60%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3Cstyle%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%3Ahost%20%7B%20display%3A%20block%3B%20%7D%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%24%7BstyleTemplate%7D%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3C%2Fstyle%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22shadowed%22%3E%24%7BstaticValue%7D%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%24%7Bsuper.template%7D%0A%20%20%20*%20%20%20%20%20%20%20%60%3B%0A%20%20%20*%20%20%20%20%20%7D%0A%20%20%20*%20%20%20%20%20static%20get%20styleTemplate()%20%7B%20return%20Polymer.htmlLiteral%60.shadowed%20%7B%20background%3A%20gray%3B%20%7D%60%3B%20%7D%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40param%20%7B!ITemplateArray%7D%20strings%20Constant%20parts%20of%20tagged%20template%20literal%0A%20%20%20*%20%40param%20%7B...*%7D%20values%20Variable%20parts%20of%20tagged%20template%20literal%0A%20%20%20*%20%40return%20%7B!LiteralString%7D%20Constructed%20literal%20string%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.htmlLiteral%20%3D%20function%20(strings%2C%20...values)%20%7B%0A%20%20%20%20return%20new%20LiteralString(values.reduce((acc%2C%20v%2C%20idx)%20%3D%3E%20acc%20%2B%20literalValue(v)%20%2B%20strings%5Bidx%20%2B%201%5D%2C%20strings%5B0%5D))%3B%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fhtml-tag.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Base%20class%20that%20provides%20the%20core%20API%20for%20Polymer&#39;s%20meta-programming%0A%20%20%20*%20features%20including%20template%20stamping%2C%20data-binding%2C%20attribute%20deserialization%2C%0A%20%20%20*%20and%20property%20change%20observation.%0A%20%20%20*%0A%20%20%20*%20%40customElement%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40implements%20%7BPolymer_ElementMixin%7D%0A%20%20%20*%20%40extends%20%7BHTMLElement%7D%0A%20%20%20*%20%40appliesMixin%20Polymer.ElementMixin%0A%20%20%20*%20%40summary%20Custom%20element%20base%20class%20that%20provides%20the%20core%20API%20for%20Polymer&#39;s%0A%20%20%20*%20%20%20key%20meta-programming%20features%20including%20template%20stamping%2C%20data-binding%2C%0A%20%20%20*%20%20%20attribute%20deserialization%2C%20and%20property%20change%20observation%0A%20%20%20*%2F%0A%0A%20%20Polymer.Element%20%3D%20Polymer.ElementMixin(HTMLElement)%3B%20%2F%2F%20NOTE%3A%20this%20is%20here%20for%20modulizer%20to%20export%20%60html%60%20for%20the%20module%20version%20of%20this%20file%0A%0A%20%20Polymer.html%20%3D%20Polymer.html%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Fpolymer-element.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/uvalib-theme/uvalib-theme.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/legacy/legacy-element-mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/shadycss/apply-shim.html" import-dependency=""><script src="./for loop_files/apply-shim.min.js.download"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/element-mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/gesture-event-listeners.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/gestures.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/async.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/debounce.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/async.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20%40summary%20Collapse%20multiple%20callbacks%20into%20one%20invocation%20after%20a%20timer.%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%2F%0A%0A%20%20class%20Debouncer%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20this._asyncModule%20%3D%20null%3B%0A%20%20%20%20%20%20this._callback%20%3D%20null%3B%0A%20%20%20%20%20%20this._timer%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20scheduler%3B%20that%20is%2C%20a%20module%20with%20the%20Async%20interface%2C%0A%20%20%20%20%20*%20a%20callback%20and%20optional%20arguments%20to%20be%20passed%20to%20the%20run%20function%0A%20%20%20%20%20*%20from%20the%20async%20module.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!AsyncInterface%7D%20asyncModule%20Object%20with%20Async%20interface.%0A%20%20%20%20%20*%20%40param%20%7Bfunction()%7D%20callback%20Callback%20to%20run.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20setConfig(asyncModule%2C%20callback)%20%7B%0A%20%20%20%20%20%20this._asyncModule%20%3D%20asyncModule%3B%0A%20%20%20%20%20%20this._callback%20%3D%20callback%3B%0A%20%20%20%20%20%20this._timer%20%3D%20this._asyncModule.run(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._timer%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20debouncerQueue.delete(this)%3B%0A%0A%20%20%20%20%20%20%20%20this._callback()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Cancels%20an%20active%20debouncer%20and%20returns%20a%20reference%20to%20itself.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20cancel()%20%7B%0A%20%20%20%20%20%20if%20(this.isActive())%20%7B%0A%20%20%20%20%20%20%20%20this._cancelAsync()%3B%20%2F%2F%20Canceling%20a%20debouncer%20removes%20its%20spot%20from%20the%20flush%20queue%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20so%20if%20a%20debouncer%20is%20manually%20canceled%20and%20re-debounced%2C%20it%0A%20%20%20%20%20%20%20%20%2F%2F%20will%20reset%20its%20flush%20order%20(this%20is%20a%20very%20minor%20difference%20from%201.x)%0A%20%20%20%20%20%20%20%20%2F%2F%20Re-debouncing%20via%20the%20%60debounce%60%20API%20retains%20the%201.x%20FIFO%20flush%20order%0A%0A%0A%20%20%20%20%20%20%20%20debouncerQueue.delete(this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Cancels%20a%20debouncer&#39;s%20async%20callback.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_cancelAsync()%20%7B%0A%20%20%20%20%20%20if%20(this.isActive())%20%7B%0A%20%20%20%20%20%20%20%20this._asyncModule.cancel(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bnumber%7D%20*%2F%0A%20%20%20%20%20%20%20%20this._timer)%3B%0A%0A%20%20%20%20%20%20%20%20this._timer%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Flushes%20an%20active%20debouncer%20and%20returns%20a%20reference%20to%20itself.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20flush()%20%7B%0A%20%20%20%20%20%20if%20(this.isActive())%20%7B%0A%20%20%20%20%20%20%20%20this.cancel()%3B%0A%0A%20%20%20%20%20%20%20%20this._callback()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20true%20if%20the%20debouncer%20is%20active.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20active.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20isActive()%20%7B%0A%20%20%20%20%20%20return%20this._timer%20!%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Creates%20a%20debouncer%20if%20no%20debouncer%20is%20passed%20as%20a%20parameter%0A%20%20%20%20%20*%20or%20it%20cancels%20an%20active%20debouncer%20otherwise.%20The%20following%0A%20%20%20%20%20*%20example%20shows%20how%20a%20debouncer%20can%20be%20called%20multiple%20times%20within%20a%0A%20%20%20%20%20*%20microtask%20and%20%22debounced%22%20such%20that%20the%20provided%20callback%20function%20is%0A%20%20%20%20%20*%20called%20once.%20Add%20this%20method%20to%20a%20custom%20element%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20_debounceWork()%20%7B%0A%20%20%20%20%20*%20%20%20this._debounceJob%20%3D%20Polymer.Debouncer.debounce(this._debounceJob%2C%0A%20%20%20%20%20*%20%20%20%20%20%20%20Polymer.Async.microTask%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20*%20%20%20%20%20this._doWork()%3B%0A%20%20%20%20%20*%20%20%20%7D)%3B%0A%20%20%20%20%20*%20%7D%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20If%20the%20%60_debounceWork%60%20method%20is%20called%20multiple%20times%20within%20the%20same%0A%20%20%20%20%20*%20microtask%2C%20the%20%60_doWork%60%20function%20will%20be%20called%20only%20once%20at%20the%20next%0A%20%20%20%20%20*%20microtask%20checkpoint.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Note%3A%20In%20testing%20it%20is%20often%20convenient%20to%20avoid%20asynchrony.%20To%20accomplish%0A%20%20%20%20%20*%20this%20with%20a%20debouncer%2C%20you%20can%20use%20%60Polymer.enqueueDebouncer%60%20and%0A%20%20%20%20%20*%20%60Polymer.flush%60.%20For%20example%2C%20extend%20the%20above%20example%20by%20adding%0A%20%20%20%20%20*%20%60Polymer.enqueueDebouncer(this._debounceJob)%60%20at%20the%20end%20of%20the%0A%20%20%20%20%20*%20%60_debounceWork%60%20method.%20Then%20in%20a%20test%2C%20call%20%60Polymer.flush%60%20to%20ensure%0A%20%20%20%20%20*%20the%20debouncer%20has%20completed.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7BDebouncer%3F%7D%20debouncer%20Debouncer%20object.%0A%20%20%20%20%20*%20%40param%20%7B!AsyncInterface%7D%20asyncModule%20Object%20with%20Async%20interface%0A%20%20%20%20%20*%20%40param%20%7Bfunction()%7D%20callback%20Callback%20to%20run.%0A%20%20%20%20%20*%20%40return%20%7B!Debouncer%7D%20Returns%20a%20debouncer%20object.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20static%20debounce(debouncer%2C%20asyncModule%2C%20callback)%20%7B%0A%20%20%20%20%20%20if%20(debouncer%20instanceof%20Debouncer)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Cancel%20the%20async%20callback%2C%20but%20leave%20in%20debouncerQueue%20if%20it%20was%0A%20%20%20%20%20%20%20%20%2F%2F%20enqueued%2C%20to%20maintain%201.x%20flush%20order%0A%20%20%20%20%20%20%20%20debouncer._cancelAsync()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20debouncer%20%3D%20new%20Debouncer()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20debouncer.setConfig(asyncModule%2C%20callback)%3B%0A%20%20%20%20%20%20return%20debouncer%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%20%20%2F**%20%40const%20*%2F%0A%0A%0A%20%20Polymer.Debouncer%20%3D%20Debouncer%3B%0A%20%20let%20debouncerQueue%20%3D%20new%20Set()%3B%0A%20%20%2F**%0A%20%20%20*%20Adds%20a%20%60Debouncer%60%20to%20a%20list%20of%20globally%20flushable%20tasks.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40param%20%7B!Debouncer%7D%20debouncer%20Debouncer%20to%20enqueue%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.enqueueDebouncer%20%3D%20function%20(debouncer)%20%7B%0A%20%20%20%20debouncerQueue.add(debouncer)%3B%0A%20%20%7D%3B%0A%0A%20%20Polymer.flushDebouncers%20%3D%20function%20()%20%7B%0A%20%20%20%20const%20didFlush%20%3D%20Boolean(debouncerQueue.size)%3B%20%2F%2F%20If%20new%20debouncers%20are%20added%20while%20flushing%2C%20Set.forEach%20will%20ensure%0A%20%20%20%20%2F%2F%20newly%20added%20ones%20are%20also%20flushed%0A%0A%20%20%20%20debouncerQueue.forEach(debouncer%20%3D%3E%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20debouncer.flush()%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20e%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20return%20didFlush%3B%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fdebounce.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%20%2F%2F%20detect%20native%20touch%20action%20support%0A%0A%20%20let%20HAS_NATIVE_TA%20%3D%20typeof%20document.head.style.touchAction%20%3D%3D%3D%20&#39;string&#39;%3B%0A%20%20let%20GESTURE_KEY%20%3D%20&#39;__polymerGestures&#39;%3B%0A%20%20let%20HANDLED_OBJ%20%3D%20&#39;__polymerGesturesHandled&#39;%3B%0A%20%20let%20TOUCH_ACTION%20%3D%20&#39;__polymerGesturesTouchAction&#39;%3B%20%2F%2F%20radius%20for%20tap%20and%20track%0A%0A%20%20let%20TAP_DISTANCE%20%3D%2025%3B%0A%20%20let%20TRACK_DISTANCE%20%3D%205%3B%20%2F%2F%20number%20of%20last%20N%20track%20positions%20to%20keep%0A%0A%20%20let%20TRACK_LENGTH%20%3D%202%3B%20%2F%2F%20Disabling%20%22mouse%22%20handlers%20for%202500ms%20is%20enough%0A%0A%20%20let%20MOUSE_TIMEOUT%20%3D%202500%3B%0A%20%20let%20MOUSE_EVENTS%20%3D%20%5B&#39;mousedown&#39;%2C%20&#39;mousemove&#39;%2C%20&#39;mouseup&#39;%2C%20&#39;click&#39;%5D%3B%20%2F%2F%20an%20array%20of%20bitmask%20values%20for%20mapping%20MouseEvent.which%20to%20MouseEvent.buttons%0A%0A%20%20let%20MOUSE_WHICH_TO_BUTTONS%20%3D%20%5B0%2C%201%2C%204%2C%202%5D%3B%0A%0A%20%20let%20MOUSE_HAS_BUTTONS%20%3D%20function%20()%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20return%20new%20MouseEvent(&#39;test&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20buttons%3A%201%0A%20%20%20%20%20%20%7D).buttons%20%3D%3D%3D%201%3B%0A%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%7D()%3B%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bstring%7D%20name%20Possible%20mouse%20event%20name%0A%20%20%20*%20%40return%20%7Bboolean%7D%20true%20if%20mouse%20event%2C%20false%20if%20not%0A%20%20%20*%2F%0A%0A%0A%20%20function%20isMouseEvent(name)%20%7B%0A%20%20%20%20return%20MOUSE_EVENTS.indexOf(name)%20%3E%20-1%3B%0A%20%20%7D%0A%20%20%2F*%20eslint%20no-empty%3A%20%5B%22error%22%2C%20%7B%20%22allowEmptyCatch%22%3A%20true%20%7D%5D%20*%2F%0A%20%20%2F%2F%20check%20for%20passive%20event%20listeners%0A%0A%0A%20%20let%20SUPPORTS_PASSIVE%20%3D%20false%3B%0A%0A%20%20(function%20()%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20let%20opts%20%3D%20Object.defineProperty(%7B%7D%2C%20&#39;passive&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20get()%20%7B%0A%20%20%20%20%20%20%20%20%20%20SUPPORTS_PASSIVE%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20window.addEventListener(&#39;test&#39;%2C%20null%2C%20opts)%3B%0A%20%20%20%20%20%20window.removeEventListener(&#39;test&#39;%2C%20null%2C%20opts)%3B%0A%20%20%20%20%7D%20catch%20(e)%20%7B%7D%0A%20%20%7D)()%3B%0A%20%20%2F**%0A%20%20%20*%20Generate%20settings%20for%20event%20listeners%2C%20dependant%20on%20%60Polymer.passiveTouchGestures%60%0A%20%20%20*%0A%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20Event%20name%20to%20determine%20if%20%60%7Bpassive%7D%60%20option%20is%20needed%0A%20%20%20*%20%40return%20%7B%7Bpassive%3A%20boolean%7D%20%7C%20undefined%7D%20Options%20to%20use%20for%20addEventListener%20and%20removeEventListener%0A%20%20%20*%2F%0A%0A%0A%20%20function%20PASSIVE_TOUCH(eventName)%20%7B%0A%20%20%20%20if%20(isMouseEvent(eventName)%20%7C%7C%20eventName%20%3D%3D%3D%20&#39;touchend&#39;)%20%7B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(HAS_NATIVE_TA%20%26%26%20SUPPORTS_PASSIVE%20%26%26%20Polymer.passiveTouchGestures)%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20passive%3A%20true%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%7D%20%2F%2F%20Check%20for%20touch-only%20devices%0A%0A%0A%20%20let%20IS_TOUCH_ONLY%20%3D%20navigator.userAgent.match(%2FiP(%3F%3A%5Boa%5Dd%7Chone)%7CAndroid%2F)%3B%0A%0A%20%20let%20GestureRecognizer%20%3D%20function%20()%20%7B%7D%3B%20%2F%2F%20eslint-disable-line%20no-unused-vars%0A%0A%20%20%2F**%20%40type%20%7Bfunction()%3A%20void%7D%20*%2F%0A%0A%0A%20%20GestureRecognizer.prototype.reset%3B%0A%20%20%2F**%20%40type%20%7Bfunction(MouseEvent)%3A%20void%20%7C%20undefined%7D%20*%2F%0A%0A%20%20GestureRecognizer.prototype.mousedown%3B%0A%20%20%2F**%20%40type%20%7B(function(MouseEvent)%3A%20void%20%7C%20undefined)%7D%20*%2F%0A%0A%20%20GestureRecognizer.prototype.mousemove%3B%0A%20%20%2F**%20%40type%20%7B(function(MouseEvent)%3A%20void%20%7C%20undefined)%7D%20*%2F%0A%0A%20%20GestureRecognizer.prototype.mouseup%3B%0A%20%20%2F**%20%40type%20%7B(function(TouchEvent)%3A%20void%20%7C%20undefined)%7D%20*%2F%0A%0A%20%20GestureRecognizer.prototype.touchstart%3B%0A%20%20%2F**%20%40type%20%7B(function(TouchEvent)%3A%20void%20%7C%20undefined)%7D%20*%2F%0A%0A%20%20GestureRecognizer.prototype.touchmove%3B%0A%20%20%2F**%20%40type%20%7B(function(TouchEvent)%3A%20void%20%7C%20undefined)%7D%20*%2F%0A%0A%20%20GestureRecognizer.prototype.touchend%3B%0A%20%20%2F**%20%40type%20%7B(function(MouseEvent)%3A%20void%20%7C%20undefined)%7D%20*%2F%0A%0A%20%20GestureRecognizer.prototype.click%3B%20%2F%2F%20keep%20track%20of%20any%20labels%20hit%20by%20the%20mouseCanceller%0A%0A%20%20%2F**%20%40type%20%7B!Array%3C!HTMLLabelElement%3E%7D%20*%2F%0A%0A%20%20const%20clickedLabels%20%3D%20%5B%5D%3B%0A%20%20%2F**%20%40type%20%7B!Object%3Cboolean%3E%7D%20*%2F%0A%0A%20%20const%20labellable%20%3D%20%7B%0A%20%20%20%20&#39;button&#39;%3A%20true%2C%0A%20%20%20%20&#39;input&#39;%3A%20true%2C%0A%20%20%20%20&#39;keygen&#39;%3A%20true%2C%0A%20%20%20%20&#39;meter&#39;%3A%20true%2C%0A%20%20%20%20&#39;output&#39;%3A%20true%2C%0A%20%20%20%20&#39;textarea&#39;%3A%20true%2C%0A%20%20%20%20&#39;progress&#39;%3A%20true%2C%0A%20%20%20%20&#39;select&#39;%3A%20true%0A%20%20%7D%3B%20%2F%2F%20Defined%20at%20https%3A%2F%2Fhtml.spec.whatwg.org%2Fmultipage%2Fform-control-infrastructure.html%23enabling-and-disabling-form-controls%3A-the-disabled-attribute%0A%0A%20%20%2F**%20%40type%20%7B!Object%3Cboolean%3E%7D%20*%2F%0A%0A%20%20const%20canBeDisabled%20%3D%20%7B%0A%20%20%20%20&#39;button&#39;%3A%20true%2C%0A%20%20%20%20&#39;command&#39;%3A%20true%2C%0A%20%20%20%20&#39;fieldset&#39;%3A%20true%2C%0A%20%20%20%20&#39;input&#39;%3A%20true%2C%0A%20%20%20%20&#39;keygen&#39;%3A%20true%2C%0A%20%20%20%20&#39;optgroup&#39;%3A%20true%2C%0A%20%20%20%20&#39;option&#39;%3A%20true%2C%0A%20%20%20%20&#39;select&#39;%3A%20true%2C%0A%20%20%20%20&#39;textarea&#39;%3A%20true%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BHTMLElement%7D%20el%20Element%20to%20check%20labelling%20status%0A%20%20%20*%20%40return%20%7Bboolean%7D%20element%20can%20have%20labels%0A%20%20%20*%2F%0A%0A%20%20function%20canBeLabelled(el)%20%7B%0A%20%20%20%20return%20labellable%5Bel.localName%5D%20%7C%7C%20false%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BHTMLElement%7D%20el%20Element%20that%20may%20be%20labelled.%0A%20%20%20*%20%40return%20%7B!Array%3C!HTMLLabelElement%3E%7D%20Relevant%20label%20for%20%60el%60%0A%20%20%20*%2F%0A%0A%0A%20%20function%20matchingLabels(el)%20%7B%0A%20%20%20%20let%20labels%20%3D%20Array.from(%0A%20%20%20%20%2F**%20%40type%20%7BHTMLInputElement%7D%20*%2F%0A%20%20%20%20el.labels%20%7C%7C%20%5B%5D)%3B%20%2F%2F%20IE%20doesn&#39;t%20have%20%60labels%60%20and%20Safari%20doesn&#39;t%20populate%20%60labels%60%0A%20%20%20%20%2F%2F%20if%20element%20is%20in%20a%20shadowroot.%0A%20%20%20%20%2F%2F%20In%20this%20instance%2C%20finding%20the%20non-ancestor%20labels%20is%20enough%2C%0A%20%20%20%20%2F%2F%20as%20the%20mouseCancellor%20code%20will%20handle%20ancstor%20labels%0A%0A%20%20%20%20if%20(!labels.length)%20%7B%0A%20%20%20%20%20%20labels%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20let%20root%20%3D%20el.getRootNode()%3B%20%2F%2F%20if%20there%20is%20an%20id%20on%20%60el%60%2C%20check%20for%20all%20labels%20with%20a%20matching%20%60for%60%20attribute%0A%0A%20%20%20%20%20%20if%20(el.id)%20%7B%0A%20%20%20%20%20%20%20%20let%20matching%20%3D%20root.querySelectorAll(%60label%5Bfor%20%3D%20%24%7Bel.id%7D%5D%60)%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20matching.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20labels.push(%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLLabelElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20matching%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20labels%3B%0A%20%20%7D%20%2F%2F%20touch%20will%20make%20synthetic%20mouse%20events%0A%20%20%2F%2F%20%60preventDefault%60%20on%20touchend%20will%20cancel%20them%2C%0A%20%20%2F%2F%20but%20this%20breaks%20%60%3Cinput%3E%60%20focus%20and%20link%20clicks%0A%20%20%2F%2F%20disable%20mouse%20handlers%20for%20MOUSE_TIMEOUT%20ms%20after%0A%20%20%2F%2F%20a%20touchend%20to%20ignore%20synthetic%20mouse%20events%0A%0A%0A%20%20let%20mouseCanceller%20%3D%20function%20(mouseEvent)%20%7B%0A%20%20%20%20%2F%2F%20Check%20for%20sourceCapabilities%2C%20used%20to%20distinguish%20synthetic%20events%0A%20%20%20%20%2F%2F%20if%20mouseEvent%20did%20not%20come%20from%20a%20device%20that%20fires%20touch%20events%2C%0A%20%20%20%20%2F%2F%20it%20was%20made%20by%20a%20real%20mouse%20and%20should%20be%20counted%0A%20%20%20%20%2F%2F%20http%3A%2F%2Fwicg.github.io%2FInputDeviceCapabilities%2F%23dom-inputdevicecapabilities-firestouchevents%0A%20%20%20%20let%20sc%20%3D%20mouseEvent.sourceCapabilities%3B%0A%0A%20%20%20%20if%20(sc%20%26%26%20!sc.firesTouchEvents)%20%7B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%20%2F%2F%20skip%20synthetic%20mouse%20events%0A%0A%0A%20%20%20%20mouseEvent%5BHANDLED_OBJ%5D%20%3D%20%7B%0A%20%20%20%20%20%20skip%3A%20true%0A%20%20%20%20%7D%3B%20%2F%2F%20disable%20%22ghost%20clicks%22%0A%0A%20%20%20%20if%20(mouseEvent.type%20%3D%3D%3D%20&#39;click&#39;)%20%7B%0A%20%20%20%20%20%20let%20clickFromLabel%20%3D%20false%3B%0A%20%20%20%20%20%20let%20path%20%3D%20mouseEvent.composedPath%20%26%26%20mouseEvent.composedPath()%3B%0A%0A%20%20%20%20%20%20if%20(path)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20path.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(path%5Bi%5D.nodeType%20%3D%3D%3D%20Node.ELEMENT_NODE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(path%5Bi%5D.localName%20%3D%3D%3D%20&#39;label&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clickedLabels.push(path%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(canBeLabelled(path%5Bi%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20ownerLabels%20%3D%20matchingLabels(path%5Bi%5D)%3B%20%2F%2F%20check%20if%20one%20of%20the%20clicked%20labels%20is%20labelling%20this%20element%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20ownerLabels.length%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clickFromLabel%20%3D%20clickFromLabel%20%7C%7C%20clickedLabels.indexOf(ownerLabels%5Bj%5D)%20%3E%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(path%5Bi%5D%20%3D%3D%3D%20POINTERSTATE.mouse.target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F%2F%20if%20one%20of%20the%20clicked%20labels%20was%20labelling%20the%20target%20element%2C%0A%20%20%20%20%20%20%2F%2F%20this%20is%20not%20a%20ghost%20click%0A%0A%0A%20%20%20%20%20%20if%20(clickFromLabel)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20mouseEvent.preventDefault()%3B%0A%20%20%20%20%20%20mouseEvent.stopPropagation()%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bboolean%3D%7D%20setup%20True%20to%20add%2C%20false%20to%20remove.%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%0A%20%20function%20setupTeardownMouseCanceller(setup)%20%7B%0A%20%20%20%20let%20events%20%3D%20IS_TOUCH_ONLY%20%3F%20%5B&#39;click&#39;%5D%20%3A%20MOUSE_EVENTS%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%2C%20en%3B%20i%20%3C%20events.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20en%20%3D%20events%5Bi%5D%3B%0A%0A%20%20%20%20%20%20if%20(setup)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20reset%20clickLabels%20array%0A%20%20%20%20%20%20%20%20clickedLabels.length%20%3D%200%3B%0A%20%20%20%20%20%20%20%20document.addEventListener(en%2C%20mouseCanceller%2C%20true)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20document.removeEventListener(en%2C%20mouseCanceller%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20ignoreMouse(e)%20%7B%0A%20%20%20%20if%20(!Polymer.cancelSyntheticClickEvents)%20%7B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(!POINTERSTATE.mouse.mouseIgnoreJob)%20%7B%0A%20%20%20%20%20%20setupTeardownMouseCanceller(true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20let%20unset%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20setupTeardownMouseCanceller()%3B%0A%20%20%20%20%20%20POINTERSTATE.mouse.target%20%3D%20null%3B%0A%20%20%20%20%20%20POINTERSTATE.mouse.mouseIgnoreJob%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20POINTERSTATE.mouse.target%20%3D%20e.composedPath()%5B0%5D%3B%0A%20%20%20%20POINTERSTATE.mouse.mouseIgnoreJob%20%3D%20Polymer.Debouncer.debounce(POINTERSTATE.mouse.mouseIgnoreJob%2C%20Polymer.Async.timeOut.after(MOUSE_TIMEOUT)%2C%20unset)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BMouseEvent%7D%20ev%20event%20to%20test%20for%20left%20mouse%20button%20down%0A%20%20%20*%20%40return%20%7Bboolean%7D%20has%20left%20mouse%20button%20down%0A%20%20%20*%2F%0A%0A%0A%20%20function%20hasLeftMouseButton(ev)%20%7B%0A%20%20%20%20let%20type%20%3D%20ev.type%3B%20%2F%2F%20exit%20early%20if%20the%20event%20is%20not%20a%20mouse%20event%0A%0A%20%20%20%20if%20(!isMouseEvent(type))%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%20%2F%2F%20ev.button%20is%20not%20reliable%20for%20mousemove%20(0%20is%20overloaded%20as%20both%20left%20button%20and%20no%20buttons)%0A%20%20%20%20%2F%2F%20instead%20we%20use%20ev.buttons%20(bitmask%20of%20buttons)%20or%20fall%20back%20to%20ev.which%20(deprecated%2C%200%20for%20no%20buttons%2C%201%20for%20left%20button)%0A%0A%0A%20%20%20%20if%20(type%20%3D%3D%3D%20&#39;mousemove&#39;)%20%7B%0A%20%20%20%20%20%20%2F%2F%20allow%20undefined%20for%20testing%20events%0A%20%20%20%20%20%20let%20buttons%20%3D%20ev.buttons%20%3D%3D%3D%20undefined%20%3F%201%20%3A%20ev.buttons%3B%0A%0A%20%20%20%20%20%20if%20(ev%20instanceof%20window.MouseEvent%20%26%26%20!MOUSE_HAS_BUTTONS)%20%7B%0A%20%20%20%20%20%20%20%20buttons%20%3D%20MOUSE_WHICH_TO_BUTTONS%5Bev.which%5D%20%7C%7C%200%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20buttons%20is%20a%20bitmask%2C%20check%20that%20the%20left%20button%20bit%20is%20set%20(1)%0A%0A%0A%20%20%20%20%20%20return%20Boolean(buttons%20%26%201)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%2F%2F%20allow%20undefined%20for%20testing%20events%0A%20%20%20%20%20%20let%20button%20%3D%20ev.button%20%3D%3D%3D%20undefined%20%3F%200%20%3A%20ev.button%3B%20%2F%2F%20ev.button%20is%200%20in%20mousedown%2Fmouseup%2Fclick%20for%20left%20button%20activation%0A%0A%20%20%20%20%20%20return%20button%20%3D%3D%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20isSyntheticClick(ev)%20%7B%0A%20%20%20%20if%20(ev.type%20%3D%3D%3D%20&#39;click&#39;)%20%7B%0A%20%20%20%20%20%20%2F%2F%20ev.detail%20is%200%20for%20HTMLElement.click%20in%20most%20browsers%0A%20%20%20%20%20%20if%20(ev.detail%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20in%20the%20worst%20case%2C%20check%20that%20the%20x%2Fy%20position%20of%20the%20click%20is%20within%0A%20%20%20%20%20%20%2F%2F%20the%20bounding%20box%20of%20the%20target%20of%20the%20event%0A%20%20%20%20%20%20%2F%2F%20Thanks%20IE%2010%20%3E%3A(%0A%0A%0A%20%20%20%20%20%20let%20t%20%3D%20Gestures._findOriginalTarget(ev)%3B%20%2F%2F%20make%20sure%20the%20target%20of%20the%20event%20is%20an%20element%20so%20we%20can%20use%20getBoundingClientRect%2C%0A%20%20%20%20%20%20%2F%2F%20if%20not%2C%20just%20assume%20it%20is%20a%20synthetic%20click%0A%0A%0A%20%20%20%20%20%20if%20(!t.nodeType%20%7C%7C%0A%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20t.nodeType%20!%3D%3D%20Node.ELEMENT_NODE)%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20bcr%20%3D%0A%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20t.getBoundingClientRect()%3B%20%2F%2F%20use%20page%20x%2Fy%20to%20account%20for%20scrolling%0A%0A%20%20%20%20%20%20let%20x%20%3D%20ev.pageX%2C%0A%20%20%20%20%20%20%20%20%20%20y%20%3D%20ev.pageY%3B%20%2F%2F%20ev%20is%20a%20synthetic%20click%20if%20the%20position%20is%20outside%20the%20bounding%20box%20of%20the%20target%0A%0A%20%20%20%20%20%20return%20!(x%20%3E%3D%20bcr.left%20%26%26%20x%20%3C%3D%20bcr.right%20%26%26%20y%20%3E%3D%20bcr.top%20%26%26%20y%20%3C%3D%20bcr.bottom)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20false%3B%0A%20%20%7D%0A%0A%20%20let%20POINTERSTATE%20%3D%20%7B%0A%20%20%20%20mouse%3A%20%7B%0A%20%20%20%20%20%20target%3A%20null%2C%0A%20%20%20%20%20%20mouseIgnoreJob%3A%20null%0A%20%20%20%20%7D%2C%0A%20%20%20%20touch%3A%20%7B%0A%20%20%20%20%20%20x%3A%200%2C%0A%20%20%20%20%20%20y%3A%200%2C%0A%20%20%20%20%20%20id%3A%20-1%2C%0A%20%20%20%20%20%20scrollDecided%3A%20false%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20function%20firstTouchAction(ev)%20%7B%0A%20%20%20%20let%20ta%20%3D%20&#39;auto&#39;%3B%0A%20%20%20%20let%20path%20%3D%20ev.composedPath%20%26%26%20ev.composedPath()%3B%0A%0A%20%20%20%20if%20(path)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20n%3B%20i%20%3C%20path.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20n%20%3D%20path%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(n%5BTOUCH_ACTION%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ta%20%3D%20n%5BTOUCH_ACTION%5D%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20ta%3B%0A%20%20%7D%0A%0A%20%20function%20trackDocument(stateObj%2C%20movefn%2C%20upfn)%20%7B%0A%20%20%20%20stateObj.movefn%20%3D%20movefn%3B%0A%20%20%20%20stateObj.upfn%20%3D%20upfn%3B%0A%20%20%20%20document.addEventListener(&#39;mousemove&#39;%2C%20movefn)%3B%0A%20%20%20%20document.addEventListener(&#39;mouseup&#39;%2C%20upfn)%3B%0A%20%20%7D%0A%0A%20%20function%20untrackDocument(stateObj)%20%7B%0A%20%20%20%20document.removeEventListener(&#39;mousemove&#39;%2C%20stateObj.movefn)%3B%0A%20%20%20%20document.removeEventListener(&#39;mouseup&#39;%2C%20stateObj.upfn)%3B%0A%20%20%20%20stateObj.movefn%20%3D%20null%3B%0A%20%20%20%20stateObj.upfn%20%3D%20null%3B%0A%20%20%7D%0A%0A%20%20if%20(Polymer.cancelSyntheticClickEvents)%20%7B%0A%20%20%20%20%2F%2F%20use%20a%20document-wide%20touchend%20listener%20to%20start%20the%20ghost-click%20prevention%20mechanism%0A%20%20%20%20%2F%2F%20Use%20passive%20event%20listeners%2C%20if%20supported%2C%20to%20not%20affect%20scrolling%20performance%0A%20%20%20%20document.addEventListener(&#39;touchend&#39;%2C%20ignoreMouse%2C%20SUPPORTS_PASSIVE%20%3F%20%7B%0A%20%20%20%20%20%20passive%3A%20true%0A%20%20%20%20%7D%20%3A%20false)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Module%20for%20adding%20listeners%20to%20a%20node%20for%20the%20following%20normalized%0A%20%20%20*%20cross-platform%20%22gesture%22%20events%3A%0A%20%20%20*%20-%20%60down%60%20-%20mouse%20or%20touch%20went%20down%0A%20%20%20*%20-%20%60up%60%20-%20mouse%20or%20touch%20went%20up%0A%20%20%20*%20-%20%60tap%60%20-%20mouse%20click%20or%20finger%20tap%0A%20%20%20*%20-%20%60track%60%20-%20mouse%20drag%20or%20touch%20move%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Module%20for%20adding%20cross-platform%20gesture%20event%20listeners.%0A%20%20%20*%2F%0A%0A%0A%20%20const%20Gestures%20%3D%20%7B%0A%20%20%20%20gestures%3A%20%7B%7D%2C%0A%20%20%20%20recognizers%3A%20%5B%5D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Finds%20the%20element%20rendered%20on%20the%20screen%20at%20the%20provided%20coordinates.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Similar%20to%20%60document.elementFromPoint%60%2C%20but%20pierces%20through%0A%20%20%20%20%20*%20shadow%20roots.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Gestures%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20x%20Horizontal%20pixel%20coordinate%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20y%20Vertical%20pixel%20coordinate%0A%20%20%20%20%20*%20%40return%20%7BElement%7D%20Returns%20the%20deepest%20shadowRoot%20inclusive%20element%0A%20%20%20%20%20*%20found%20at%20the%20screen%20position%20given.%0A%20%20%20%20%20*%2F%0A%20%20%20%20deepTargetFind%3A%20function%20(x%2C%20y)%20%7B%0A%20%20%20%20%20%20let%20node%20%3D%20document.elementFromPoint(x%2C%20y)%3B%0A%20%20%20%20%20%20let%20next%20%3D%20node%3B%20%2F%2F%20this%20code%20path%20is%20only%20taken%20when%20native%20ShadowDOM%20is%20used%0A%20%20%20%20%20%20%2F%2F%20if%20there%20is%20a%20shadowroot%2C%20it%20may%20have%20a%20node%20at%20x%2Fy%0A%20%20%20%20%20%20%2F%2F%20if%20there%20is%20not%20a%20shadowroot%2C%20exit%20the%20loop%0A%0A%20%20%20%20%20%20while%20(next%20%26%26%20next.shadowRoot%20%26%26%20!window.ShadyDOM)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20there%20is%20a%20node%20at%20x%2Fy%20in%20the%20shadowroot%2C%20look%20deeper%0A%20%20%20%20%20%20%20%20let%20oldNext%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20next%20%3D%20next.shadowRoot.elementFromPoint(x%2C%20y)%3B%20%2F%2F%20on%20Safari%2C%20elementFromPoint%20may%20return%20the%20shadowRoot%20host%0A%0A%20%20%20%20%20%20%20%20if%20(oldNext%20%3D%3D%3D%20next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20a%20cheaper%20check%20than%20ev.composedPath()%5B0%5D%3B%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%20%40param%20%7BEvent%7D%20ev%20Event.%0A%20%20%20%20%20*%20%40return%20%7BEventTarget%7D%20Returns%20the%20event%20target.%0A%20%20%20%20%20*%2F%0A%20%20%20%20_findOriginalTarget%3A%20function%20(ev)%20%7B%0A%20%20%20%20%20%20%2F%2F%20shadowdom%0A%20%20%20%20%20%20if%20(ev.composedPath)%20%7B%0A%20%20%20%20%20%20%20%20const%20targets%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Array%3C!EventTarget%3E%7D%20*%2F%0A%20%20%20%20%20%20%20%20ev.composedPath()%3B%20%2F%2F%20It%20shouldn&#39;t%20be%2C%20but%20sometimes%20targets%20is%20empty%20(window%20on%20Safari).%0A%0A%20%20%20%20%20%20%20%20return%20targets.length%20%3E%200%20%3F%20targets%5B0%5D%20%3A%20ev.target%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20shadydom%0A%0A%0A%20%20%20%20%20%20return%20ev.target%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%20%40param%20%7BEvent%7D%20ev%20Event.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_handleNative%3A%20function%20(ev)%20%7B%0A%20%20%20%20%20%20let%20handled%3B%0A%20%20%20%20%20%20let%20type%20%3D%20ev.type%3B%0A%20%20%20%20%20%20let%20node%20%3D%20ev.currentTarget%3B%0A%20%20%20%20%20%20let%20gobj%20%3D%20node%5BGESTURE_KEY%5D%3B%0A%0A%20%20%20%20%20%20if%20(!gobj)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20gs%20%3D%20gobj%5Btype%5D%3B%0A%0A%20%20%20%20%20%20if%20(!gs)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!ev%5BHANDLED_OBJ%5D)%20%7B%0A%20%20%20%20%20%20%20%20ev%5BHANDLED_OBJ%5D%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(type.slice(0%2C%205)%20%3D%3D%3D%20&#39;touch&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ev%20%3D%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BTouchEvent%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20ev%3B%20%2F%2F%20eslint-disable-line%20no-self-assign%0A%0A%20%20%20%20%20%20%20%20%20%20let%20t%20%3D%20ev.changedTouches%5B0%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20&#39;touchstart&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20only%20handle%20the%20first%20finger%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(ev.touches.length%20%3D%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POINTERSTATE.touch.id%20%3D%20t.identifier%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(POINTERSTATE.touch.id%20!%3D%3D%20t.identifier)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(!HAS_NATIVE_TA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20&#39;touchstart&#39;%20%7C%7C%20type%20%3D%3D%3D%20&#39;touchmove&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gestures._handleTouchAction(ev)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20handled%20%3D%20ev%5BHANDLED_OBJ%5D%3B%20%2F%2F%20used%20to%20ignore%20synthetic%20mouse%20events%0A%0A%20%20%20%20%20%20if%20(handled.skip)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20reset%20recognizer%20state%0A%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20r%3B%20i%20%3C%20Gestures.recognizers.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20r%20%3D%20Gestures.recognizers%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(gs%5Br.name%5D%20%26%26%20!handled%5Br.name%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(r.flow%20%26%26%20r.flow.start.indexOf(ev.type)%20%3E%20-1%20%26%26%20r.reset)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20r.reset()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F%2F%20enforce%20gesture%20recognizer%20order%0A%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20r%3B%20i%20%3C%20Gestures.recognizers.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20r%20%3D%20Gestures.recognizers%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(gs%5Br.name%5D%20%26%26%20!handled%5Br.name%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20handled%5Br.name%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20r%5Btype%5D(ev)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%20%40param%20%7BTouchEvent%7D%20ev%20Event.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_handleTouchAction%3A%20function%20(ev)%20%7B%0A%20%20%20%20%20%20let%20t%20%3D%20ev.changedTouches%5B0%5D%3B%0A%20%20%20%20%20%20let%20type%20%3D%20ev.type%3B%0A%0A%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20&#39;touchstart&#39;)%20%7B%0A%20%20%20%20%20%20%20%20POINTERSTATE.touch.x%20%3D%20t.clientX%3B%0A%20%20%20%20%20%20%20%20POINTERSTATE.touch.y%20%3D%20t.clientY%3B%0A%20%20%20%20%20%20%20%20POINTERSTATE.touch.scrollDecided%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(type%20%3D%3D%3D%20&#39;touchmove&#39;)%20%7B%0A%20%20%20%20%20%20%20%20if%20(POINTERSTATE.touch.scrollDecided)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20POINTERSTATE.touch.scrollDecided%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20let%20ta%20%3D%20firstTouchAction(ev)%3B%0A%20%20%20%20%20%20%20%20let%20prevent%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20let%20dx%20%3D%20Math.abs(POINTERSTATE.touch.x%20-%20t.clientX)%3B%0A%20%20%20%20%20%20%20%20let%20dy%20%3D%20Math.abs(POINTERSTATE.touch.y%20-%20t.clientY)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!ev.cancelable)%20%7B%2F%2F%20scrolling%20is%20happening%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(ta%20%3D%3D%3D%20&#39;none&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20prevent%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(ta%20%3D%3D%3D%20&#39;pan-x&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20prevent%20%3D%20dy%20%3E%20dx%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(ta%20%3D%3D%3D%20&#39;pan-y&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20prevent%20%3D%20dx%20%3E%20dy%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(prevent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ev.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20Gestures.prevent(&#39;track&#39;)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Adds%20an%20event%20listener%20to%20a%20node%20for%20the%20given%20gesture%20type.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Gestures%0A%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20add%20listener%20on%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20evType%20Gesture%20type%3A%20%60down%60%2C%20%60up%60%2C%20%60track%60%2C%20or%20%60tap%60%0A%20%20%20%20%20*%20%40param%20%7B!function(!Event)%3Avoid%7D%20handler%20Event%20listener%20function%20to%20call%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Returns%20true%20if%20a%20gesture%20event%20listener%20was%20added.%0A%20%20%20%20%20*%20%40this%20%7BGestures%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20addListener%3A%20function%20(node%2C%20evType%2C%20handler)%20%7B%0A%20%20%20%20%20%20if%20(this.gestures%5BevType%5D)%20%7B%0A%20%20%20%20%20%20%20%20this._add(node%2C%20evType%2C%20handler)%3B%0A%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Removes%20an%20event%20listener%20from%20a%20node%20for%20the%20given%20gesture%20type.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Gestures%0A%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20remove%20listener%20from%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20evType%20Gesture%20type%3A%20%60down%60%2C%20%60up%60%2C%20%60track%60%2C%20or%20%60tap%60%0A%20%20%20%20%20*%20%40param%20%7B!function(!Event)%3Avoid%7D%20handler%20Event%20listener%20function%20previously%20passed%20to%0A%20%20%20%20%20*%20%20%60addListener%60.%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Returns%20true%20if%20a%20gesture%20event%20listener%20was%20removed.%0A%20%20%20%20%20*%20%40this%20%7BGestures%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20removeListener%3A%20function%20(node%2C%20evType%2C%20handler)%20%7B%0A%20%20%20%20%20%20if%20(this.gestures%5BevType%5D)%20%7B%0A%20%20%20%20%20%20%20%20this._remove(node%2C%20evType%2C%20handler)%3B%0A%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20automate%20the%20event%20listeners%20for%20the%20native%20events%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%20%40param%20%7B!HTMLElement%7D%20node%20Node%20on%20which%20to%20add%20the%20event.%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20evType%20Event%20type%20to%20add.%0A%20%20%20%20%20*%20%40param%20%7Bfunction(!Event)%7D%20handler%20Event%20handler%20function.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40this%20%7BGestures%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_add%3A%20function%20(node%2C%20evType%2C%20handler)%20%7B%0A%20%20%20%20%20%20let%20recognizer%20%3D%20this.gestures%5BevType%5D%3B%0A%20%20%20%20%20%20let%20deps%20%3D%20recognizer.deps%3B%0A%20%20%20%20%20%20let%20name%20%3D%20recognizer.name%3B%0A%20%20%20%20%20%20let%20gobj%20%3D%20node%5BGESTURE_KEY%5D%3B%0A%0A%20%20%20%20%20%20if%20(!gobj)%20%7B%0A%20%20%20%20%20%20%20%20node%5BGESTURE_KEY%5D%20%3D%20gobj%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20dep%2C%20gd%3B%20i%20%3C%20deps.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20dep%20%3D%20deps%5Bi%5D%3B%20%2F%2F%20don&#39;t%20add%20mouse%20handlers%20on%20iOS%20because%20they%20cause%20gray%20selection%20overlays%0A%0A%20%20%20%20%20%20%20%20if%20(IS_TOUCH_ONLY%20%26%26%20isMouseEvent(dep)%20%26%26%20dep%20!%3D%3D%20&#39;click&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20gd%20%3D%20gobj%5Bdep%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!gd)%20%7B%0A%20%20%20%20%20%20%20%20%20%20gobj%5Bdep%5D%20%3D%20gd%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20_count%3A%200%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(gd._count%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node.addEventListener(dep%2C%20this._handleNative%2C%20PASSIVE_TOUCH(dep))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20gd%5Bname%5D%20%3D%20(gd%5Bname%5D%20%7C%7C%200)%20%2B%201%3B%0A%20%20%20%20%20%20%20%20gd._count%20%3D%20(gd._count%20%7C%7C%200)%20%2B%201%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20node.addEventListener(evType%2C%20handler)%3B%0A%0A%20%20%20%20%20%20if%20(recognizer.touchAction)%20%7B%0A%20%20%20%20%20%20%20%20this.setTouchAction(node%2C%20recognizer.touchAction)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20automate%20event%20listener%20removal%20for%20native%20events%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%20%40param%20%7B!HTMLElement%7D%20node%20Node%20on%20which%20to%20remove%20the%20event.%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20evType%20Event%20type%20to%20remove.%0A%20%20%20%20%20*%20%40param%20%7Bfunction(Event%3F)%7D%20handler%20Event%20handler%20function.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40this%20%7BGestures%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_remove%3A%20function%20(node%2C%20evType%2C%20handler)%20%7B%0A%20%20%20%20%20%20let%20recognizer%20%3D%20this.gestures%5BevType%5D%3B%0A%20%20%20%20%20%20let%20deps%20%3D%20recognizer.deps%3B%0A%20%20%20%20%20%20let%20name%20%3D%20recognizer.name%3B%0A%20%20%20%20%20%20let%20gobj%20%3D%20node%5BGESTURE_KEY%5D%3B%0A%0A%20%20%20%20%20%20if%20(gobj)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20dep%2C%20gd%3B%20i%20%3C%20deps.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20dep%20%3D%20deps%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20gd%20%3D%20gobj%5Bdep%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(gd%20%26%26%20gd%5Bname%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gd%5Bname%5D%20%3D%20(gd%5Bname%5D%20%7C%7C%201)%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gd._count%20%3D%20(gd._count%20%7C%7C%201)%20-%201%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(gd._count%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20node.removeEventListener(dep%2C%20this._handleNative%2C%20PASSIVE_TOUCH(dep))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20node.removeEventListener(evType%2C%20handler)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Registers%20a%20new%20gesture%20event%20recognizer%20for%20adding%20new%20custom%0A%20%20%20%20%20*%20gesture%20event%20types.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Gestures%0A%20%20%20%20%20*%20%40param%20%7B!GestureRecognizer%7D%20recog%20Gesture%20recognizer%20descriptor%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40this%20%7BGestures%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20register%3A%20function%20(recog)%20%7B%0A%20%20%20%20%20%20this.recognizers.push(recog)%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20recog.emits.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.gestures%5Brecog.emits%5Bi%5D%5D%20%3D%20recog%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20evName%20Event%20name.%0A%20%20%20%20%20*%20%40return%20%7BObject%7D%20Returns%20the%20gesture%20for%20the%20given%20event%20name.%0A%20%20%20%20%20*%20%40this%20%7BGestures%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_findRecognizerByEvent%3A%20function%20(evName)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20r%3B%20i%20%3C%20this.recognizers.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20r%20%3D%20this.recognizers%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%2C%20n%3B%20j%20%3C%20r.emits.length%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20n%20%3D%20r.emits%5Bj%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(n%20%3D%3D%3D%20evName)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20r%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20scrolling%20direction%20on%20node.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20This%20value%20is%20checked%20on%20first%20move%2C%20thus%20it%20should%20be%20called%20prior%20to%0A%20%20%20%20%20*%20adding%20event%20listeners.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Gestures%0A%20%20%20%20%20*%20%40param%20%7B!Element%7D%20node%20Node%20to%20set%20touch%20action%20setting%20on%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20value%20Touch%20action%20value%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20setTouchAction%3A%20function%20(node%2C%20value)%20%7B%0A%20%20%20%20%20%20if%20(HAS_NATIVE_TA)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20NOTE%3A%20add%20touchAction%20async%20so%20that%20events%20can%20be%20added%20in%0A%20%20%20%20%20%20%20%20%2F%2F%20custom%20element%20constructors.%20Otherwise%20we%20run%20afoul%20of%20custom%0A%20%20%20%20%20%20%20%20%2F%2F%20elements%20restriction%20against%20settings%20attributes%20(style)%20in%20the%0A%20%20%20%20%20%20%20%20%2F%2F%20constructor.%0A%20%20%20%20%20%20%20%20Polymer.Async.microTask.run(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20node.style.touchAction%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20node%5BTOUCH_ACTION%5D%20%3D%20value%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Dispatches%20an%20event%20on%20the%20%60target%60%20element%20of%20%60type%60%20with%20the%20given%0A%20%20%20%20%20*%20%60detail%60.%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%20%40param%20%7B!EventTarget%7D%20target%20The%20element%20on%20which%20to%20fire%20an%20event.%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20type%20The%20type%20of%20event%20to%20fire.%0A%20%20%20%20%20*%20%40param%20%7B!Object%3D%7D%20detail%20The%20detail%20object%20to%20populate%20on%20the%20event.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_fire%3A%20function%20(target%2C%20type%2C%20detail)%20%7B%0A%20%20%20%20%20%20let%20ev%20%3D%20new%20Event(type%2C%20%7B%0A%20%20%20%20%20%20%20%20bubbles%3A%20true%2C%0A%20%20%20%20%20%20%20%20cancelable%3A%20true%2C%0A%20%20%20%20%20%20%20%20composed%3A%20true%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20ev.detail%20%3D%20detail%3B%0A%20%20%20%20%20%20target.dispatchEvent(ev)%3B%20%2F%2F%20forward%20%60preventDefault%60%20in%20a%20clean%20way%0A%0A%20%20%20%20%20%20if%20(ev.defaultPrevented)%20%7B%0A%20%20%20%20%20%20%20%20let%20preventer%20%3D%20detail.preventer%20%7C%7C%20detail.sourceEvent%3B%0A%0A%20%20%20%20%20%20%20%20if%20(preventer%20%26%26%20preventer.preventDefault)%20%7B%0A%20%20%20%20%20%20%20%20%20%20preventer.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Prevents%20the%20dispatch%20and%20default%20action%20of%20the%20given%20event%20name.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Gestures%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20evName%20Event%20name.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40this%20%7BGestures%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20prevent%3A%20function%20(evName)%20%7B%0A%20%20%20%20%20%20let%20recognizer%20%3D%20this._findRecognizerByEvent(evName)%3B%0A%0A%20%20%20%20%20%20if%20(recognizer.info)%20%7B%0A%20%20%20%20%20%20%20%20recognizer.info.prevent%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Reset%20the%202500ms%20timeout%20on%20processing%20mouse%20input%20after%20detecting%20touch%20input.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Touch%20inputs%20create%20synthesized%20mouse%20inputs%20anywhere%20from%200%20to%202000ms%20after%20the%20touch.%0A%20%20%20%20%20*%20This%20method%20should%20only%20be%20called%20during%20testing%20with%20simulated%20touch%20inputs.%0A%20%20%20%20%20*%20Calling%20this%20method%20in%20production%20may%20cause%20duplicate%20taps%20or%20other%20Gestures.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Gestures%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20resetMouseCanceller%3A%20function%20()%20%7B%0A%20%20%20%20%20%20if%20(POINTERSTATE.mouse.mouseIgnoreJob)%20%7B%0A%20%20%20%20%20%20%20%20POINTERSTATE.mouse.mouseIgnoreJob.flush()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20%2F*%20eslint-disable%20valid-jsdoc%20*%2F%0A%0A%20%20Gestures.register(%7B%0A%20%20%20%20name%3A%20&#39;downup&#39;%2C%0A%20%20%20%20deps%3A%20%5B&#39;mousedown&#39;%2C%20&#39;touchstart&#39;%2C%20&#39;touchend&#39;%5D%2C%0A%20%20%20%20flow%3A%20%7B%0A%20%20%20%20%20%20start%3A%20%5B&#39;mousedown&#39;%2C%20&#39;touchstart&#39;%5D%2C%0A%20%20%20%20%20%20end%3A%20%5B&#39;mouseup&#39;%2C%20&#39;touchend&#39;%5D%0A%20%20%20%20%7D%2C%0A%20%20%20%20emits%3A%20%5B&#39;down&#39;%2C%20&#39;up&#39;%5D%2C%0A%20%20%20%20info%3A%20%7B%0A%20%20%20%20%20%20movefn%3A%20null%2C%0A%20%20%20%20%20%20upfn%3A%20null%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20reset%3A%20function%20()%20%7B%0A%20%20%20%20%20%20untrackDocument(this.info)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BMouseEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20mousedown%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20if%20(!hasLeftMouseButton(e))%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20t%20%3D%20Gestures._findOriginalTarget(e)%3B%0A%0A%20%20%20%20%20%20let%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20let%20movefn%20%3D%20function%20movefn(e)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!hasLeftMouseButton(e))%20%7B%0A%20%20%20%20%20%20%20%20%20%20self._fire(&#39;up&#39;%2C%20t%2C%20e)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20untrackDocument(self.info)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20let%20upfn%20%3D%20function%20upfn(e)%20%7B%0A%20%20%20%20%20%20%20%20if%20(hasLeftMouseButton(e))%20%7B%0A%20%20%20%20%20%20%20%20%20%20self._fire(&#39;up&#39;%2C%20t%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20untrackDocument(self.info)%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20trackDocument(this.info%2C%20movefn%2C%20upfn)%3B%0A%0A%20%20%20%20%20%20this._fire(&#39;down&#39;%2C%20t%2C%20e)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BTouchEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20touchstart%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20this._fire(&#39;down&#39;%2C%20Gestures._findOriginalTarget(e)%2C%20e.changedTouches%5B0%5D%2C%20e)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BTouchEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20touchend%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20this._fire(&#39;up&#39;%2C%20Gestures._findOriginalTarget(e)%2C%20e.changedTouches%5B0%5D%2C%20e)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20type%0A%20%20%20%20%20*%20%40param%20%7B!EventTarget%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BEvent%7D%20event%0A%20%20%20%20%20*%20%40param%20%7BFunction%7D%20preventer%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_fire%3A%20function%20(type%2C%20target%2C%20event%2C%20preventer)%20%7B%0A%20%20%20%20%20%20Gestures._fire(target%2C%20type%2C%20%7B%0A%20%20%20%20%20%20%20%20x%3A%20event.clientX%2C%0A%20%20%20%20%20%20%20%20y%3A%20event.clientY%2C%0A%20%20%20%20%20%20%20%20sourceEvent%3A%20event%2C%0A%20%20%20%20%20%20%20%20preventer%3A%20preventer%2C%0A%20%20%20%20%20%20%20%20prevent%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20Gestures.prevent(e)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20Gestures.register(%7B%0A%20%20%20%20name%3A%20&#39;track&#39;%2C%0A%20%20%20%20touchAction%3A%20&#39;none&#39;%2C%0A%20%20%20%20deps%3A%20%5B&#39;mousedown&#39;%2C%20&#39;touchstart&#39;%2C%20&#39;touchmove&#39;%2C%20&#39;touchend&#39;%5D%2C%0A%20%20%20%20flow%3A%20%7B%0A%20%20%20%20%20%20start%3A%20%5B&#39;mousedown&#39;%2C%20&#39;touchstart&#39;%5D%2C%0A%20%20%20%20%20%20end%3A%20%5B&#39;mouseup&#39;%2C%20&#39;touchend&#39;%5D%0A%20%20%20%20%7D%2C%0A%20%20%20%20emits%3A%20%5B&#39;track&#39;%5D%2C%0A%20%20%20%20info%3A%20%7B%0A%20%20%20%20%20%20x%3A%200%2C%0A%20%20%20%20%20%20y%3A%200%2C%0A%20%20%20%20%20%20state%3A%20&#39;start&#39;%2C%0A%20%20%20%20%20%20started%3A%20false%2C%0A%20%20%20%20%20%20moves%3A%20%5B%5D%2C%0A%0A%20%20%20%20%20%20%2F**%20%40this%20%7BGestureRecognizer%7D%20*%2F%0A%20%20%20%20%20%20addMove%3A%20function%20(move)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.moves.length%20%3E%20TRACK_LENGTH)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.moves.shift()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this.moves.push(move)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20movefn%3A%20null%2C%0A%20%20%20%20%20%20upfn%3A%20null%2C%0A%20%20%20%20%20%20prevent%3A%20false%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20reset%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this.info.state%20%3D%20&#39;start&#39;%3B%0A%20%20%20%20%20%20this.info.started%20%3D%20false%3B%0A%20%20%20%20%20%20this.info.moves%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20this.info.x%20%3D%200%3B%0A%20%20%20%20%20%20this.info.y%20%3D%200%3B%0A%20%20%20%20%20%20this.info.prevent%20%3D%20false%3B%0A%20%20%20%20%20%20untrackDocument(this.info)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20x%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20y%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20hasMovedEnough%3A%20function%20(x%2C%20y)%20%7B%0A%20%20%20%20%20%20if%20(this.info.prevent)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(this.info.started)%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20dx%20%3D%20Math.abs(this.info.x%20-%20x)%3B%0A%20%20%20%20%20%20let%20dy%20%3D%20Math.abs(this.info.y%20-%20y)%3B%0A%20%20%20%20%20%20return%20dx%20%3E%3D%20TRACK_DISTANCE%20%7C%7C%20dy%20%3E%3D%20TRACK_DISTANCE%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BMouseEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20mousedown%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20if%20(!hasLeftMouseButton(e))%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20t%20%3D%20Gestures._findOriginalTarget(e)%3B%0A%0A%20%20%20%20%20%20let%20self%20%3D%20this%3B%0A%0A%20%20%20%20%20%20let%20movefn%20%3D%20function%20movefn(e)%20%7B%0A%20%20%20%20%20%20%20%20let%20x%20%3D%20e.clientX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20e.clientY%3B%0A%0A%20%20%20%20%20%20%20%20if%20(self.hasMovedEnough(x%2C%20y))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20first%20move%20is%20&#39;start&#39;%2C%20subsequent%20moves%20are%20&#39;move&#39;%2C%20mouseup%20is%20&#39;end&#39;%0A%20%20%20%20%20%20%20%20%20%20self.info.state%20%3D%20self.info.started%20%3F%20e.type%20%3D%3D%3D%20&#39;mouseup&#39;%20%3F%20&#39;end&#39;%20%3A%20&#39;track&#39;%20%3A%20&#39;start&#39;%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(self.info.state%20%3D%3D%3D%20&#39;start&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20and%20only%20if%20tracking%2C%20always%20prevent%20tap%0A%20%20%20%20%20%20%20%20%20%20%20%20Gestures.prevent(&#39;tap&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20self.info.addMove(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20y%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(!hasLeftMouseButton(e))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20always%20_fire%20%22end%22%0A%20%20%20%20%20%20%20%20%20%20%20%20self.info.state%20%3D%20&#39;end&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20untrackDocument(self.info)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20self._fire(t%2C%20e)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20self.info.started%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20let%20upfn%20%3D%20function%20upfn(e)%20%7B%0A%20%20%20%20%20%20%20%20if%20(self.info.started)%20%7B%0A%20%20%20%20%20%20%20%20%20%20movefn(e)%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20remove%20the%20temporary%20listeners%0A%0A%0A%20%20%20%20%20%20%20%20untrackDocument(self.info)%3B%0A%20%20%20%20%20%20%7D%3B%20%2F%2F%20add%20temporary%20document%20listeners%20as%20mouse%20retargets%0A%0A%0A%20%20%20%20%20%20trackDocument(this.info%2C%20movefn%2C%20upfn)%3B%0A%20%20%20%20%20%20this.info.x%20%3D%20e.clientX%3B%0A%20%20%20%20%20%20this.info.y%20%3D%20e.clientY%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BTouchEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20touchstart%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20let%20ct%20%3D%20e.changedTouches%5B0%5D%3B%0A%20%20%20%20%20%20this.info.x%20%3D%20ct.clientX%3B%0A%20%20%20%20%20%20this.info.y%20%3D%20ct.clientY%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BTouchEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20touchmove%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20let%20t%20%3D%20Gestures._findOriginalTarget(e)%3B%0A%0A%20%20%20%20%20%20let%20ct%20%3D%20e.changedTouches%5B0%5D%3B%0A%20%20%20%20%20%20let%20x%20%3D%20ct.clientX%2C%0A%20%20%20%20%20%20%20%20%20%20y%20%3D%20ct.clientY%3B%0A%0A%20%20%20%20%20%20if%20(this.hasMovedEnough(x%2C%20y))%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.info.state%20%3D%3D%3D%20&#39;start&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20and%20only%20if%20tracking%2C%20always%20prevent%20tap%0A%20%20%20%20%20%20%20%20%20%20Gestures.prevent(&#39;tap&#39;)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this.info.addMove(%7B%0A%20%20%20%20%20%20%20%20%20%20x%3A%20x%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20y%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20this._fire(t%2C%20ct)%3B%0A%0A%20%20%20%20%20%20%20%20this.info.state%20%3D%20&#39;track&#39;%3B%0A%20%20%20%20%20%20%20%20this.info.started%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BTouchEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20touchend%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20let%20t%20%3D%20Gestures._findOriginalTarget(e)%3B%0A%0A%20%20%20%20%20%20let%20ct%20%3D%20e.changedTouches%5B0%5D%3B%20%2F%2F%20only%20trackend%20if%20track%20was%20started%20and%20not%20aborted%0A%0A%20%20%20%20%20%20if%20(this.info.started)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20reset%20started%20state%20on%20up%0A%20%20%20%20%20%20%20%20this.info.state%20%3D%20&#39;end&#39;%3B%0A%20%20%20%20%20%20%20%20this.info.addMove(%7B%0A%20%20%20%20%20%20%20%20%20%20x%3A%20ct.clientX%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20ct.clientY%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20this._fire(t%2C%20ct%2C%20e)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7B!EventTarget%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BTouch%7D%20touch%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_fire%3A%20function%20(target%2C%20touch)%20%7B%0A%20%20%20%20%20%20let%20secondlast%20%3D%20this.info.moves%5Bthis.info.moves.length%20-%202%5D%3B%0A%20%20%20%20%20%20let%20lastmove%20%3D%20this.info.moves%5Bthis.info.moves.length%20-%201%5D%3B%0A%20%20%20%20%20%20let%20dx%20%3D%20lastmove.x%20-%20this.info.x%3B%0A%20%20%20%20%20%20let%20dy%20%3D%20lastmove.y%20-%20this.info.y%3B%0A%20%20%20%20%20%20let%20ddx%2C%0A%20%20%20%20%20%20%20%20%20%20ddy%20%3D%200%3B%0A%0A%20%20%20%20%20%20if%20(secondlast)%20%7B%0A%20%20%20%20%20%20%20%20ddx%20%3D%20lastmove.x%20-%20secondlast.x%3B%0A%20%20%20%20%20%20%20%20ddy%20%3D%20lastmove.y%20-%20secondlast.y%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Gestures._fire(target%2C%20&#39;track&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20state%3A%20this.info.state%2C%0A%20%20%20%20%20%20%20%20x%3A%20touch.clientX%2C%0A%20%20%20%20%20%20%20%20y%3A%20touch.clientY%2C%0A%20%20%20%20%20%20%20%20dx%3A%20dx%2C%0A%20%20%20%20%20%20%20%20dy%3A%20dy%2C%0A%20%20%20%20%20%20%20%20ddx%3A%20ddx%2C%0A%20%20%20%20%20%20%20%20ddy%3A%20ddy%2C%0A%20%20%20%20%20%20%20%20sourceEvent%3A%20touch%2C%0A%20%20%20%20%20%20%20%20hover%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20Gestures.deepTargetFind(touch.clientX%2C%20touch.clientY)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20Gestures.register(%7B%0A%20%20%20%20name%3A%20&#39;tap&#39;%2C%0A%20%20%20%20deps%3A%20%5B&#39;mousedown&#39;%2C%20&#39;click&#39;%2C%20&#39;touchstart&#39;%2C%20&#39;touchend&#39;%5D%2C%0A%20%20%20%20flow%3A%20%7B%0A%20%20%20%20%20%20start%3A%20%5B&#39;mousedown&#39;%2C%20&#39;touchstart&#39;%5D%2C%0A%20%20%20%20%20%20end%3A%20%5B&#39;click&#39;%2C%20&#39;touchend&#39;%5D%0A%20%20%20%20%7D%2C%0A%20%20%20%20emits%3A%20%5B&#39;tap&#39;%5D%2C%0A%20%20%20%20info%3A%20%7B%0A%20%20%20%20%20%20x%3A%20NaN%2C%0A%20%20%20%20%20%20y%3A%20NaN%2C%0A%20%20%20%20%20%20prevent%3A%20false%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20reset%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this.info.x%20%3D%20NaN%3B%0A%20%20%20%20%20%20this.info.y%20%3D%20NaN%3B%0A%20%20%20%20%20%20this.info.prevent%20%3D%20false%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BMouseEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20save%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20this.info.x%20%3D%20e.clientX%3B%0A%20%20%20%20%20%20this.info.y%20%3D%20e.clientY%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BMouseEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20mousedown%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20if%20(hasLeftMouseButton(e))%20%7B%0A%20%20%20%20%20%20%20%20this.save(e)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BMouseEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20click%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20if%20(hasLeftMouseButton(e))%20%7B%0A%20%20%20%20%20%20%20%20this.forward(e)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BTouchEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20touchstart%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20this.save(e.changedTouches%5B0%5D%2C%20e)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BTouchEvent%7D%20e%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20touchend%3A%20function%20(e)%20%7B%0A%20%20%20%20%20%20this.forward(e.changedTouches%5B0%5D%2C%20e)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40this%20%7BGestureRecognizer%7D%0A%20%20%20%20%20*%20%40param%20%7BEvent%20%7C%20Touch%7D%20e%0A%20%20%20%20%20*%20%40param%20%7BEvent%3D%7D%20preventer%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20forward%3A%20function%20(e%2C%20preventer)%20%7B%0A%20%20%20%20%20%20let%20dx%20%3D%20Math.abs(e.clientX%20-%20this.info.x)%3B%0A%20%20%20%20%20%20let%20dy%20%3D%20Math.abs(e.clientY%20-%20this.info.y)%3B%20%2F%2F%20find%20original%20target%20from%20%60preventer%60%20for%20TouchEvents%2C%20or%20%60e%60%20for%20MouseEvents%0A%0A%20%20%20%20%20%20let%20t%20%3D%20Gestures._findOriginalTarget(%0A%20%20%20%20%20%20%2F**%20%40type%20%7BEvent%7D%20*%2F%0A%20%20%20%20%20%20preventer%20%7C%7C%20e)%3B%0A%0A%20%20%20%20%20%20if%20(!t%20%7C%7C%20canBeDisabled%5B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%20%20%20%20%20%20t.localName%5D%20%26%26%20t.hasAttribute(&#39;disabled&#39;))%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20dx%2Cdy%20can%20be%20NaN%20if%20%60click%60%20has%20been%20simulated%20and%20there%20was%20no%20%60down%60%20for%20%60start%60%0A%0A%0A%20%20%20%20%20%20if%20(isNaN(dx)%20%7C%7C%20isNaN(dy)%20%7C%7C%20dx%20%3C%3D%20TAP_DISTANCE%20%26%26%20dy%20%3C%3D%20TAP_DISTANCE%20%7C%7C%20isSyntheticClick(e))%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20prevent%20taps%20from%20being%20generated%20if%20an%20event%20has%20canceled%20them%0A%20%20%20%20%20%20%20%20if%20(!this.info.prevent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20Gestures._fire(t%2C%20&#39;tap&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20e.clientX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20e.clientY%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20sourceEvent%3A%20e%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20preventer%3A%20preventer%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20%2F*%20eslint-enable%20valid-jsdoc%20*%2F%0A%0A%20%20%2F**%20%40deprecated%20*%2F%0A%0A%20%20Gestures.findOriginalTarget%20%3D%20Gestures._findOriginalTarget%3B%0A%20%20%2F**%20%40deprecated%20*%2F%0A%0A%20%20Gestures.add%20%3D%20Gestures.addListener%3B%0A%20%20%2F**%20%40deprecated%20*%2F%0A%0A%20%20Gestures.remove%20%3D%20Gestures.removeListener%3B%0A%20%20Polymer.Gestures%20%3D%20Gestures%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fgestures.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20%40const%20%7BPolymer.Gestures%7D%0A%20%20%20*%2F%0A%0A%20%20const%20gestures%20%3D%20Polymer.Gestures%3B%0A%20%20%2F**%0A%20%20%20*%20Element%20class%20mixin%20that%20provides%20API%20for%20adding%20Polymer&#39;s%20cross-platform%0A%20%20%20*%20gesture%20events%20to%20nodes.%0A%20%20%20*%0A%20%20%20*%20The%20API%20is%20designed%20to%20be%20compatible%20with%20override%20points%20implemented%0A%20%20%20*%20in%20%60Polymer.TemplateStamp%60%20such%20that%20declarative%20event%20listeners%20in%0A%20%20%20*%20templates%20will%20support%20gesture%20events%20when%20this%20mixin%20is%20applied%20along%20with%0A%20%20%20*%20%60Polymer.TemplateStamp%60.%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Element%20class%20mixin%20that%20provides%20API%20for%20adding%20Polymer&#39;s%20cross-platform%0A%20%20%20*%20gesture%20events%20to%20nodes%0A%20%20%20*%2F%0A%0A%20%20Polymer.GestureEventListeners%20%3D%20Polymer.dedupingMixin(superClass%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_GestureEventListeners%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20class%20GestureEventListeners%20extends%20superClass%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Add%20the%20event%20listener%20to%20the%20node%20if%20it%20is%20a%20gestures%20event.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20add%20event%20listener%20to%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20Name%20of%20event%0A%20%20%20%20%20%20%20*%20%40param%20%7Bfunction(!Event)%3Avoid%7D%20handler%20Listener%20function%20to%20add%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20_addEventListenerToNode(node%2C%20eventName%2C%20handler)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!gestures.addListener(node%2C%20eventName%2C%20handler))%20%7B%0A%20%20%20%20%20%20%20%20%20%20super._addEventListenerToNode(node%2C%20eventName%2C%20handler)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Remove%20the%20event%20listener%20to%20the%20node%20if%20it%20is%20a%20gestures%20event.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20remove%20event%20listener%20from%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20Name%20of%20event%0A%20%20%20%20%20%20%20*%20%40param%20%7Bfunction(!Event)%3Avoid%7D%20handler%20Listener%20function%20to%20remove%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_removeEventListenerFromNode(node%2C%20eventName%2C%20handler)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!gestures.removeListener(node%2C%20eventName%2C%20handler))%20%7B%0A%20%20%20%20%20%20%20%20%20%20super._removeEventListenerFromNode(node%2C%20eventName%2C%20handler)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20GestureEventListeners%3B%0A%20%20%7D)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Fmixins%2Fgesture-event-listeners.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/dir-mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/property-accessors.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20const%20HOST_DIR%20%3D%20%2F%3Ahost%5C(%3Adir%5C((ltr%7Crtl)%5C)%5C)%2Fg%3B%0A%20%20const%20HOST_DIR_REPLACMENT%20%3D%20&#39;%3Ahost(%5Bdir%3D%22%241%22%5D)&#39;%3B%0A%20%20const%20EL_DIR%20%3D%20%2F(%5B%5Cs%5Cw-%23%5C.%5C%5B%5C%5D%5C*%5D*)%3Adir%5C((ltr%7Crtl)%5C)%2Fg%3B%0A%20%20const%20EL_DIR_REPLACMENT%20%3D%20&#39;%3Ahost(%5Bdir%3D%22%242%22%5D)%20%241&#39;%3B%0A%20%20const%20DIR_CHECK%20%3D%20%2F%3Adir%5C((%3F%3Altr%7Crtl)%5C)%2F%3B%0A%20%20const%20SHIM_SHADOW%20%3D%20Boolean(window%5B&#39;ShadyDOM&#39;%5D%20%26%26%20window%5B&#39;ShadyDOM&#39;%5D%5B&#39;inUse&#39;%5D)%3B%0A%20%20%2F**%0A%20%20%20*%20%40type%20%7B!Array%3C!Polymer_DirMixin%3E%7D%0A%20%20%20*%2F%0A%0A%20%20const%20DIR_INSTANCES%20%3D%20%5B%5D%3B%0A%20%20%2F**%20%40type%20%7BMutationObserver%7D%20*%2F%0A%0A%20%20let%20observer%20%3D%20null%3B%0A%20%20let%20DOCUMENT_DIR%20%3D%20&#39;&#39;%3B%0A%0A%20%20function%20getRTL()%20%7B%0A%20%20%20%20DOCUMENT_DIR%20%3D%20document.documentElement.getAttribute(&#39;dir&#39;)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B!Polymer_DirMixin%7D%20instance%20Instance%20to%20set%20RTL%20status%20on%0A%20%20%20*%2F%0A%0A%0A%20%20function%20setRTL(instance)%20%7B%0A%20%20%20%20if%20(!instance.__autoDirOptOut)%20%7B%0A%20%20%20%20%20%20const%20el%20%3D%0A%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%20%20%20%20%20%20instance%3B%0A%20%20%20%20%20%20el.setAttribute(&#39;dir&#39;%2C%20DOCUMENT_DIR)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20updateDirection()%20%7B%0A%20%20%20%20getRTL()%3B%0A%20%20%20%20DOCUMENT_DIR%20%3D%20document.documentElement.getAttribute(&#39;dir&#39;)%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20DIR_INSTANCES.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20setRTL(DIR_INSTANCES%5Bi%5D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20takeRecords()%20%7B%0A%20%20%20%20if%20(observer%20%26%26%20observer.takeRecords().length)%20%7B%0A%20%20%20%20%20%20updateDirection()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Element%20class%20mixin%20that%20allows%20elements%20to%20use%20the%20%60%3Adir%60%20CSS%20Selector%20to%20have%0A%20%20%20*%20text%20direction%20specific%20styling.%0A%20%20%20*%0A%20%20%20*%20With%20this%20mixin%2C%20any%20stylesheet%20provided%20in%20the%20template%20will%20transform%20%60%3Adir%60%20into%0A%20%20%20*%20%60%3Ahost(%5Bdir%5D)%60%20and%20sync%20direction%20with%20the%20page%20via%20the%20element&#39;s%20%60dir%60%20attribute.%0A%20%20%20*%0A%20%20%20*%20Elements%20can%20opt%20out%20of%20the%20global%20page%20text%20direction%20by%20setting%20the%20%60dir%60%20attribute%0A%20%20%20*%20directly%20in%20%60ready()%60%20or%20in%20HTML.%0A%20%20%20*%0A%20%20%20*%20Caveats%3A%0A%20%20%20*%20-%20Applications%20must%20set%20%60%3Chtml%20dir%3D%22ltr%22%3E%60%20or%20%60%3Chtml%20dir%3D%22rtl%22%3E%60%20to%20sync%20direction%0A%20%20%20*%20-%20Automatic%20left-to-right%20or%20right-to-left%20styling%20is%20sync&#39;d%20with%20the%20%60%3Chtml%3E%60%20element%20only.%0A%20%20%20*%20-%20Changing%20%60dir%60%20at%20runtime%20is%20supported.%0A%20%20%20*%20-%20Opting%20out%20of%20the%20global%20direction%20styling%20is%20permanent%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40appliesMixin%20Polymer.PropertyAccessors%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.DirMixin%20%3D%20Polymer.dedupingMixin(base%20%3D%3E%20%7B%0A%20%20%20%20if%20(!SHIM_SHADOW)%20%7B%0A%20%20%20%20%20%20if%20(!observer)%20%7B%0A%20%20%20%20%20%20%20%20getRTL()%3B%0A%20%20%20%20%20%20%20%20observer%20%3D%20new%20MutationObserver(updateDirection)%3B%0A%20%20%20%20%20%20%20%20observer.observe(document.documentElement%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20attributes%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20attributeFilter%3A%20%5B&#39;dir&#39;%5D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40constructor%0A%20%20%20%20%20*%20%40extends%20%7Bbase%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_PropertyAccessors%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20const%20elementBase%20%3D%20Polymer.PropertyAccessors(base)%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_DirMixin%7D%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20class%20Dir%20extends%20elementBase%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20Interfaces%20in%20closure%20do%20not%20inherit%20statics%2C%20but%20classes%20do%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20static%20_processStyleText(cssText%2C%20baseURI)%20%7B%0A%20%20%20%20%20%20%20%20cssText%20%3D%20super._processStyleText(cssText%2C%20baseURI)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!SHIM_SHADOW%20%26%26%20DIR_CHECK.test(cssText))%20%7B%0A%20%20%20%20%20%20%20%20%20%20cssText%20%3D%20this._replaceDirInCssText(cssText)%3B%0A%20%20%20%20%20%20%20%20%20%20this.__activateDir%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20cssText%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Replace%20%60%3Adir%60%20in%20the%20given%20CSS%20text%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20text%20CSS%20text%20to%20replace%20DIR%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Modified%20CSS%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20_replaceDirInCssText(text)%20%7B%0A%20%20%20%20%20%20%20%20let%20replacedText%20%3D%20text%3B%0A%20%20%20%20%20%20%20%20replacedText%20%3D%20replacedText.replace(HOST_DIR%2C%20HOST_DIR_REPLACMENT)%3B%0A%20%20%20%20%20%20%20%20replacedText%20%3D%20replacedText.replace(EL_DIR%2C%20EL_DIR_REPLACMENT)%3B%0A%20%20%20%20%20%20%20%20return%20replacedText%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super()%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bboolean%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__autoDirOptOut%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%20Closure%20doesn&#39;t%20understand%20that%20%60this%60%20is%20an%20HTMLElement%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20ready()%20%7B%0A%20%20%20%20%20%20%20%20super.ready()%3B%0A%20%20%20%20%20%20%20%20this.__autoDirOptOut%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20this.hasAttribute(&#39;dir&#39;)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20If%20it%20exists%20on%20elementBase%2C%20it%20can%20be%20super&#39;d%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20connectedCallback()%20%7B%0A%20%20%20%20%20%20%20%20if%20(elementBase.prototype.connectedCallback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20super.connectedCallback()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this.constructor.__activateDir)%20%7B%0A%20%20%20%20%20%20%20%20%20%20takeRecords()%3B%0A%20%20%20%20%20%20%20%20%20%20DIR_INSTANCES.push(this)%3B%0A%20%20%20%20%20%20%20%20%20%20setRTL(this)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20If%20it%20exists%20on%20elementBase%2C%20it%20can%20be%20super&#39;d%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20disconnectedCallback()%20%7B%0A%20%20%20%20%20%20%20%20if%20(elementBase.prototype.disconnectedCallback)%20%7B%0A%20%20%20%20%20%20%20%20%20%20super.disconnectedCallback()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this.constructor.__activateDir)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20idx%20%3D%20DIR_INSTANCES.indexOf(this)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(idx%20%3E%20-1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20DIR_INSTANCES.splice(idx%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20Dir.__activateDir%20%3D%20false%3B%0A%20%20%20%20return%20Dir%3B%0A%20%20%7D)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Fmixins%2Fdir-mixin.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/import-href.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%20%2F%2F%20run%20a%20callback%20when%20HTMLImports%20are%20ready%20or%20immediately%20if%0A%20%20%2F%2F%20this%20api%20is%20not%20available.%0A%0A%20%20function%20whenImportsReady(cb)%20%7B%0A%20%20%20%20if%20(window.HTMLImports)%20%7B%0A%20%20%20%20%20%20HTMLImports.whenReady(cb)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20cb()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Convenience%20method%20for%20importing%20an%20HTML%20document%20imperatively.%0A%20%20%20*%0A%20%20%20*%20This%20method%20creates%20a%20new%20%60%3Clink%20rel%3D%22import%22%3E%60%20element%20with%0A%20%20%20*%20the%20provided%20URL%20and%20appends%20it%20to%20the%20document%20to%20start%20loading.%0A%20%20%20*%20In%20the%20%60onload%60%20callback%2C%20the%20%60import%60%20property%20of%20the%20%60link%60%0A%20%20%20*%20element%20will%20contain%20the%20imported%20document%20contents.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40param%20%7Bstring%7D%20href%20URL%20to%20document%20to%20load.%0A%20%20%20*%20%40param%20%7B%3Ffunction(!Event)%3Avoid%3D%7D%20onload%20Callback%20to%20notify%20when%20an%20import%20successfully%0A%20%20%20*%20%20%20loaded.%0A%20%20%20*%20%40param%20%7B%3Ffunction(!ErrorEvent)%3Avoid%3D%7D%20onerror%20Callback%20to%20notify%20when%20an%20import%0A%20%20%20*%20%20%20unsuccessfully%20loaded.%0A%20%20%20*%20%40param%20%7Bboolean%3D%7D%20optAsync%20True%20if%20the%20import%20should%20be%20loaded%20%60async%60.%0A%20%20%20*%20%20%20Defaults%20to%20%60false%60.%0A%20%20%20*%20%40return%20%7B!HTMLLinkElement%7D%20The%20link%20element%20for%20the%20URL%20to%20be%20loaded.%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.importHref%20%3D%20function%20(href%2C%20onload%2C%20onerror%2C%20optAsync)%20%7B%0A%20%20%20%20let%20link%20%3D%0A%20%20%20%20%2F**%20%40type%20%7BHTMLLinkElement%7D%20*%2F%0A%20%20%20%20document.head.querySelector(&#39;link%5Bhref%3D%22&#39;%20%2B%20href%20%2B%20&#39;%22%5D%5Bimport-href%5D&#39;)%3B%0A%0A%20%20%20%20if%20(!link)%20%7B%0A%20%20%20%20%20%20link%20%3D%0A%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLLinkElement%7D%20*%2F%0A%20%20%20%20%20%20document.createElement(&#39;link&#39;)%3B%0A%20%20%20%20%20%20link.rel%20%3D%20&#39;import&#39;%3B%0A%20%20%20%20%20%20link.href%20%3D%20href%3B%0A%20%20%20%20%20%20link.setAttribute(&#39;import-href&#39;%2C%20&#39;&#39;)%3B%0A%20%20%20%20%7D%20%2F%2F%20always%20ensure%20link%20has%20%60async%60%20attribute%20if%20user%20specified%20one%2C%0A%20%20%20%20%2F%2F%20even%20if%20it%20was%20previously%20not%20async.%20This%20is%20considered%20less%20confusing.%0A%0A%0A%20%20%20%20if%20(optAsync)%20%7B%0A%20%20%20%20%20%20link.setAttribute(&#39;async&#39;%2C%20&#39;&#39;)%3B%0A%20%20%20%20%7D%20%2F%2F%20NOTE%3A%20the%20link%20may%20now%20be%20in%203%20states%3A%20(1)%20pending%20insertion%2C%0A%20%20%20%20%2F%2F%20(2)%20inflight%2C%20(3)%20already%20loaded.%20In%20each%20case%2C%20we%20need%20to%20add%0A%20%20%20%20%2F%2F%20event%20listeners%20to%20process%20callbacks.%0A%0A%0A%20%20%20%20let%20cleanup%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20link.removeEventListener(&#39;load&#39;%2C%20loadListener)%3B%0A%20%20%20%20%20%20link.removeEventListener(&#39;error&#39;%2C%20errorListener)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20let%20loadListener%20%3D%20function%20(event)%20%7B%0A%20%20%20%20%20%20cleanup()%3B%20%2F%2F%20In%20case%20of%20a%20successful%20load%2C%20cache%20the%20load%20event%20on%20the%20link%20so%0A%20%20%20%20%20%20%2F%2F%20that%20it%20can%20be%20used%20to%20short-circuit%20this%20method%20in%20the%20future%20when%0A%20%20%20%20%20%20%2F%2F%20it%20is%20called%20with%20the%20same%20href%20param.%0A%0A%20%20%20%20%20%20link.__dynamicImportLoaded%20%3D%20true%3B%0A%0A%20%20%20%20%20%20if%20(onload)%20%7B%0A%20%20%20%20%20%20%20%20whenImportsReady(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20onload(event)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20let%20errorListener%20%3D%20function%20(event)%20%7B%0A%20%20%20%20%20%20cleanup()%3B%20%2F%2F%20In%20case%20of%20an%20error%2C%20remove%20the%20link%20from%20the%20document%20so%20that%20it%0A%20%20%20%20%20%20%2F%2F%20will%20be%20automatically%20created%20again%20the%20next%20time%20%60importHref%60%20is%0A%20%20%20%20%20%20%2F%2F%20called.%0A%0A%20%20%20%20%20%20if%20(link.parentNode)%20%7B%0A%20%20%20%20%20%20%20%20link.parentNode.removeChild(link)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(onerror)%20%7B%0A%20%20%20%20%20%20%20%20whenImportsReady(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20onerror(event)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20link.addEventListener(&#39;load&#39;%2C%20loadListener)%3B%0A%20%20%20%20link.addEventListener(&#39;error&#39;%2C%20errorListener)%3B%0A%0A%20%20%20%20if%20(link.parentNode%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20document.head.appendChild(link)%3B%20%2F%2F%20if%20the%20link%20already%20loaded%2C%20dispatch%20a%20fake%20load%20event%0A%20%20%20%20%20%20%2F%2F%20so%20that%20listeners%20are%20called%20and%20get%20a%20proper%20event%20argument.%0A%20%20%20%20%7D%20else%20if%20(link.__dynamicImportLoaded)%20%7B%0A%20%20%20%20%20%20link.dispatchEvent(new%20Event(&#39;load&#39;))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20link%3B%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fimport-href.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/render-status.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20let%20scheduled%20%3D%20false%3B%0A%20%20let%20beforeRenderQueue%20%3D%20%5B%5D%3B%0A%20%20let%20afterRenderQueue%20%3D%20%5B%5D%3B%0A%0A%20%20function%20schedule()%20%7B%0A%20%20%20%20scheduled%20%3D%20true%3B%20%2F%2F%20before%20next%20render%0A%0A%20%20%20%20requestAnimationFrame(function%20()%20%7B%0A%20%20%20%20%20%20scheduled%20%3D%20false%3B%0A%20%20%20%20%20%20flushQueue(beforeRenderQueue)%3B%20%2F%2F%20after%20the%20render%0A%0A%20%20%20%20%20%20setTimeout(function%20()%20%7B%0A%20%20%20%20%20%20%20%20runQueue(afterRenderQueue)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20function%20flushQueue(queue)%20%7B%0A%20%20%20%20while%20(queue.length)%20%7B%0A%20%20%20%20%20%20callMethod(queue.shift())%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20runQueue(queue)%20%7B%0A%20%20%20%20for%20(let%20i%20%3D%200%2C%20l%20%3D%20queue.length%3B%20i%20%3C%20l%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20callMethod(queue.shift())%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20callMethod(info)%20%7B%0A%20%20%20%20const%20context%20%3D%20info%5B0%5D%3B%0A%20%20%20%20const%20callback%20%3D%20info%5B1%5D%3B%0A%20%20%20%20const%20args%20%3D%20info%5B2%5D%3B%0A%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20callback.apply(context%2C%20args)%3B%0A%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20throw%20e%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20flush()%20%7B%0A%20%20%20%20while%20(beforeRenderQueue.length%20%7C%7C%20afterRenderQueue.length)%20%7B%0A%20%20%20%20%20%20flushQueue(beforeRenderQueue)%3B%0A%20%20%20%20%20%20flushQueue(afterRenderQueue)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20scheduled%20%3D%20false%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Module%20for%20scheduling%20flushable%20pre-render%20and%20post-render%20tasks.%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Module%20for%20scheduling%20flushable%20pre-render%20and%20post-render%20tasks.%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.RenderStatus%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Enqueues%20a%20callback%20which%20will%20be%20run%20before%20the%20next%20render%2C%20at%0A%20%20%20%20%20*%20%60requestAnimationFrame%60%20timing.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20This%20method%20is%20useful%20for%20enqueuing%20work%20that%20requires%20DOM%20measurement%2C%0A%20%20%20%20%20*%20since%20measurement%20may%20not%20be%20reliable%20in%20custom%20element%20callbacks%20before%0A%20%20%20%20%20*%20the%20first%20render%2C%20as%20well%20as%20for%20batching%20measurement%20tasks%20in%20general.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Tasks%20in%20this%20queue%20may%20be%20flushed%20by%20calling%20%60Polymer.RenderStatus.flush()%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.RenderStatus%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20context%20Context%20object%20the%20callback%20function%20will%20be%20bound%20to%0A%20%20%20%20%20*%20%40param%20%7Bfunction(...*)%3Avoid%7D%20callback%20Callback%20function%0A%20%20%20%20%20*%20%40param%20%7B!Array%3D%7D%20args%20An%20array%20of%20arguments%20to%20call%20the%20callback%20function%20with%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20beforeNextRender%3A%20function%20(context%2C%20callback%2C%20args)%20%7B%0A%20%20%20%20%20%20if%20(!scheduled)%20%7B%0A%20%20%20%20%20%20%20%20schedule()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20beforeRenderQueue.push(%5Bcontext%2C%20callback%2C%20args%5D)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Enqueues%20a%20callback%20which%20will%20be%20run%20after%20the%20next%20render%2C%20equivalent%0A%20%20%20%20%20*%20to%20one%20task%20(%60setTimeout%60)%20after%20the%20next%20%60requestAnimationFrame%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20This%20method%20is%20useful%20for%20tuning%20the%20first-render%20performance%20of%20an%0A%20%20%20%20%20*%20element%20or%20application%20by%20deferring%20non-critical%20work%20until%20after%20the%0A%20%20%20%20%20*%20first%20paint.%20%20Typical%20non-render-critical%20work%20may%20include%20adding%20UI%0A%20%20%20%20%20*%20event%20listeners%20and%20aria%20attributes.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.RenderStatus%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20context%20Context%20object%20the%20callback%20function%20will%20be%20bound%20to%0A%20%20%20%20%20*%20%40param%20%7Bfunction(...*)%3Avoid%7D%20callback%20Callback%20function%0A%20%20%20%20%20*%20%40param%20%7B!Array%3D%7D%20args%20An%20array%20of%20arguments%20to%20call%20the%20callback%20function%20with%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20afterNextRender%3A%20function%20(context%2C%20callback%2C%20args)%20%7B%0A%20%20%20%20%20%20if%20(!scheduled)%20%7B%0A%20%20%20%20%20%20%20%20schedule()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20afterRenderQueue.push(%5Bcontext%2C%20callback%2C%20args%5D)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Flushes%20all%20%60beforeNextRender%60%20tasks%2C%20followed%20by%20all%20%60afterNextRender%60%0A%20%20%20%20%20*%20tasks.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.RenderStatus%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20flush%3A%20flush%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Frender-status.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/unresolved.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%20%2F%2F%20unresolved%0A%0A%20%20function%20resolve()%20%7B%0A%20%20%20%20document.body.removeAttribute(&#39;unresolved&#39;)%3B%0A%20%20%7D%0A%0A%20%20if%20(window.WebComponents)%20%7B%0A%20%20%20%20window.addEventListener(&#39;WebComponentsReady&#39;%2C%20resolve)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20if%20(document.readyState%20%3D%3D%3D%20&#39;interactive&#39;%20%7C%7C%20document.readyState%20%3D%3D%3D%20&#39;complete&#39;)%20%7B%0A%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20window.addEventListener(&#39;DOMContentLoaded&#39;%2C%20resolve)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Funresolved.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/legacy/polymer.dom.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/settings.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/flattened-nodes-observer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/array-splice.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20function%20newSplice(index%2C%20removed%2C%20addedCount)%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20index%3A%20index%2C%0A%20%20%20%20%20%20removed%3A%20removed%2C%0A%20%20%20%20%20%20addedCount%3A%20addedCount%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20const%20EDIT_LEAVE%20%3D%200%3B%0A%20%20const%20EDIT_UPDATE%20%3D%201%3B%0A%20%20const%20EDIT_ADD%20%3D%202%3B%0A%20%20const%20EDIT_DELETE%20%3D%203%3B%20%2F%2F%20Note%3A%20This%20function%20is%20*based*%20on%20the%20computation%20of%20the%20Levenshtein%0A%20%20%2F%2F%20%22edit%22%20distance.%20The%20one%20change%20is%20that%20%22updates%22%20are%20treated%20as%20two%0A%20%20%2F%2F%20edits%20-%20not%20one.%20With%20Array%20splices%2C%20an%20update%20is%20really%20a%20delete%0A%20%20%2F%2F%20followed%20by%20an%20add.%20By%20retaining%20this%2C%20we%20optimize%20for%20%22keeping%22%20the%0A%20%20%2F%2F%20maximum%20array%20items%20in%20the%20original%20array.%20For%20example%3A%0A%20%20%2F%2F%0A%20%20%2F%2F%20%20%20&#39;xxxx123&#39;%20-%3E%20&#39;123yyyy&#39;%0A%20%20%2F%2F%0A%20%20%2F%2F%20With%201-edit%20updates%2C%20the%20shortest%20path%20would%20be%20just%20to%20update%20all%20seven%0A%20%20%2F%2F%20characters.%20With%202-edit%20updates%2C%20we%20delete%204%2C%20leave%203%2C%20and%20add%204.%20This%0A%20%20%2F%2F%20leaves%20the%20substring%20&#39;123&#39;%20intact.%0A%0A%20%20function%20calcEditDistances(current%2C%20currentStart%2C%20currentEnd%2C%20old%2C%20oldStart%2C%20oldEnd)%20%7B%0A%20%20%20%20%2F%2F%20%22Deletion%22%20columns%0A%20%20%20%20let%20rowCount%20%3D%20oldEnd%20-%20oldStart%20%2B%201%3B%0A%20%20%20%20let%20columnCount%20%3D%20currentEnd%20-%20currentStart%20%2B%201%3B%0A%20%20%20%20let%20distances%20%3D%20new%20Array(rowCount)%3B%20%2F%2F%20%22Addition%22%20rows.%20Initialize%20null%20column.%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20rowCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20distances%5Bi%5D%20%3D%20new%20Array(columnCount)%3B%0A%20%20%20%20%20%20distances%5Bi%5D%5B0%5D%20%3D%20i%3B%0A%20%20%20%20%7D%20%2F%2F%20Initialize%20null%20row%0A%0A%0A%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20columnCount%3B%20j%2B%2B)%20distances%5B0%5D%5Bj%5D%20%3D%20j%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20rowCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20for%20(let%20j%20%3D%201%3B%20j%20%3C%20columnCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(equals(current%5BcurrentStart%20%2B%20j%20-%201%5D%2C%20old%5BoldStart%20%2B%20i%20-%201%5D))%20distances%5Bi%5D%5Bj%5D%20%3D%20distances%5Bi%20-%201%5D%5Bj%20-%201%5D%3Belse%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20north%20%3D%20distances%5Bi%20-%201%5D%5Bj%5D%20%2B%201%3B%0A%20%20%20%20%20%20%20%20%20%20let%20west%20%3D%20distances%5Bi%5D%5Bj%20-%201%5D%20%2B%201%3B%0A%20%20%20%20%20%20%20%20%20%20distances%5Bi%5D%5Bj%5D%20%3D%20north%20%3C%20west%20%3F%20north%20%3A%20west%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20distances%3B%0A%20%20%7D%20%2F%2F%20This%20starts%20at%20the%20final%20weight%2C%20and%20walks%20%22backward%22%20by%20finding%0A%20%20%2F%2F%20the%20minimum%20previous%20weight%20recursively%20until%20the%20origin%20of%20the%20weight%0A%20%20%2F%2F%20matrix.%0A%0A%0A%20%20function%20spliceOperationsFromEditDistances(distances)%20%7B%0A%20%20%20%20let%20i%20%3D%20distances.length%20-%201%3B%0A%20%20%20%20let%20j%20%3D%20distances%5B0%5D.length%20-%201%3B%0A%20%20%20%20let%20current%20%3D%20distances%5Bi%5D%5Bj%5D%3B%0A%20%20%20%20let%20edits%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20while%20(i%20%3E%200%20%7C%7C%20j%20%3E%200)%20%7B%0A%20%20%20%20%20%20if%20(i%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20edits.push(EDIT_ADD)%3B%0A%20%20%20%20%20%20%20%20j--%3B%0A%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(j%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20edits.push(EDIT_DELETE)%3B%0A%20%20%20%20%20%20%20%20i--%3B%0A%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20northWest%20%3D%20distances%5Bi%20-%201%5D%5Bj%20-%201%5D%3B%0A%20%20%20%20%20%20let%20west%20%3D%20distances%5Bi%20-%201%5D%5Bj%5D%3B%0A%20%20%20%20%20%20let%20north%20%3D%20distances%5Bi%5D%5Bj%20-%201%5D%3B%0A%20%20%20%20%20%20let%20min%3B%0A%20%20%20%20%20%20if%20(west%20%3C%20north)%20min%20%3D%20west%20%3C%20northWest%20%3F%20west%20%3A%20northWest%3Belse%20min%20%3D%20north%20%3C%20northWest%20%3F%20north%20%3A%20northWest%3B%0A%0A%20%20%20%20%20%20if%20(min%20%3D%3D%20northWest)%20%7B%0A%20%20%20%20%20%20%20%20if%20(northWest%20%3D%3D%20current)%20%7B%0A%20%20%20%20%20%20%20%20%20%20edits.push(EDIT_LEAVE)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20edits.push(EDIT_UPDATE)%3B%0A%20%20%20%20%20%20%20%20%20%20current%20%3D%20northWest%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20i--%3B%0A%20%20%20%20%20%20%20%20j--%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(min%20%3D%3D%20west)%20%7B%0A%20%20%20%20%20%20%20%20edits.push(EDIT_DELETE)%3B%0A%20%20%20%20%20%20%20%20i--%3B%0A%20%20%20%20%20%20%20%20current%20%3D%20west%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20edits.push(EDIT_ADD)%3B%0A%20%20%20%20%20%20%20%20j--%3B%0A%20%20%20%20%20%20%20%20current%20%3D%20north%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20edits.reverse()%3B%0A%20%20%20%20return%20edits%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Splice%20Projection%20functions%3A%0A%20%20%20*%0A%20%20%20*%20A%20splice%20map%20is%20a%20representation%20of%20how%20a%20previous%20array%20of%20items%0A%20%20%20*%20was%20transformed%20into%20a%20new%20array%20of%20items.%20Conceptually%20it%20is%20a%20list%20of%0A%20%20%20*%20tuples%20of%0A%20%20%20*%0A%20%20%20*%20%20%20%3Cindex%2C%20removed%2C%20addedCount%3E%0A%20%20%20*%0A%20%20%20*%20which%20are%20kept%20in%20ascending%20index%20order%20of.%20The%20tuple%20represents%20that%20at%0A%20%20%20*%20the%20%7Cindex%7C%2C%20%7Cremoved%7C%20sequence%20of%20items%20were%20removed%2C%20and%20counting%20forward%0A%20%20%20*%20from%20%7Cindex%7C%2C%20%7CaddedCount%7C%20items%20were%20added.%0A%20%20%20*%2F%0A%0A%20%20%2F**%0A%20%20%20*%20Lacking%20individual%20splice%20mutation%20information%2C%20the%20minimal%20set%20of%0A%20%20%20*%20splices%20can%20be%20synthesized%20given%20the%20previous%20state%20and%20final%20state%20of%20an%0A%20%20%20*%20array.%20The%20basic%20approach%20is%20to%20calculate%20the%20edit%20distance%20matrix%20and%0A%20%20%20*%20choose%20the%20shortest%20path%20through%20it.%0A%20%20%20*%0A%20%20%20*%20Complexity%3A%20O(l%20*%20p)%0A%20%20%20*%20%20%20l%3A%20The%20length%20of%20the%20current%20array%0A%20%20%20*%20%20%20p%3A%20The%20length%20of%20the%20old%20array%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!Array%7D%20current%20The%20current%20%22changed%22%20array%20for%20which%20to%0A%20%20%20*%20calculate%20splices.%0A%20%20%20*%20%40param%20%7Bnumber%7D%20currentStart%20Starting%20index%20in%20the%20%60current%60%20array%20for%0A%20%20%20*%20which%20splices%20are%20calculated.%0A%20%20%20*%20%40param%20%7Bnumber%7D%20currentEnd%20Ending%20index%20in%20the%20%60current%60%20array%20for%0A%20%20%20*%20which%20splices%20are%20calculated.%0A%20%20%20*%20%40param%20%7B!Array%7D%20old%20The%20original%20%22unchanged%22%20array%20to%20compare%20%60current%60%0A%20%20%20*%20against%20to%20determine%20splices.%0A%20%20%20*%20%40param%20%7Bnumber%7D%20oldStart%20Starting%20index%20in%20the%20%60old%60%20array%20for%0A%20%20%20*%20which%20splices%20are%20calculated.%0A%20%20%20*%20%40param%20%7Bnumber%7D%20oldEnd%20Ending%20index%20in%20the%20%60old%60%20array%20for%0A%20%20%20*%20which%20splices%20are%20calculated.%0A%20%20%20*%20%40return%20%7B!Array%7D%20Returns%20an%20array%20of%20splice%20record%20objects.%20Each%20of%20these%0A%20%20%20*%20contains%3A%20%60index%60%20the%20location%20where%20the%20splice%20occurred%3B%20%60removed%60%0A%20%20%20*%20the%20array%20of%20removed%20items%20from%20this%20location%3B%20%60addedCount%60%20the%20number%0A%20%20%20*%20of%20items%20added%20at%20this%20location.%0A%20%20%20*%2F%0A%0A%0A%20%20function%20calcSplices(current%2C%20currentStart%2C%20currentEnd%2C%20old%2C%20oldStart%2C%20oldEnd)%20%7B%0A%20%20%20%20let%20prefixCount%20%3D%200%3B%0A%20%20%20%20let%20suffixCount%20%3D%200%3B%0A%20%20%20%20let%20splice%3B%0A%20%20%20%20let%20minLength%20%3D%20Math.min(currentEnd%20-%20currentStart%2C%20oldEnd%20-%20oldStart)%3B%0A%20%20%20%20if%20(currentStart%20%3D%3D%200%20%26%26%20oldStart%20%3D%3D%200)%20prefixCount%20%3D%20sharedPrefix(current%2C%20old%2C%20minLength)%3B%0A%20%20%20%20if%20(currentEnd%20%3D%3D%20current.length%20%26%26%20oldEnd%20%3D%3D%20old.length)%20suffixCount%20%3D%20sharedSuffix(current%2C%20old%2C%20minLength%20-%20prefixCount)%3B%0A%20%20%20%20currentStart%20%2B%3D%20prefixCount%3B%0A%20%20%20%20oldStart%20%2B%3D%20prefixCount%3B%0A%20%20%20%20currentEnd%20-%3D%20suffixCount%3B%0A%20%20%20%20oldEnd%20-%3D%20suffixCount%3B%0A%20%20%20%20if%20(currentEnd%20-%20currentStart%20%3D%3D%200%20%26%26%20oldEnd%20-%20oldStart%20%3D%3D%200)%20return%20%5B%5D%3B%0A%0A%20%20%20%20if%20(currentStart%20%3D%3D%20currentEnd)%20%7B%0A%20%20%20%20%20%20splice%20%3D%20newSplice(currentStart%2C%20%5B%5D%2C%200)%3B%0A%0A%20%20%20%20%20%20while%20(oldStart%20%3C%20oldEnd)%20splice.removed.push(old%5BoldStart%2B%2B%5D)%3B%0A%0A%20%20%20%20%20%20return%20%5Bsplice%5D%3B%0A%20%20%20%20%7D%20else%20if%20(oldStart%20%3D%3D%20oldEnd)%20return%20%5BnewSplice(currentStart%2C%20%5B%5D%2C%20currentEnd%20-%20currentStart)%5D%3B%0A%0A%20%20%20%20let%20ops%20%3D%20spliceOperationsFromEditDistances(calcEditDistances(current%2C%20currentStart%2C%20currentEnd%2C%20old%2C%20oldStart%2C%20oldEnd))%3B%0A%20%20%20%20splice%20%3D%20undefined%3B%0A%20%20%20%20let%20splices%20%3D%20%5B%5D%3B%0A%20%20%20%20let%20index%20%3D%20currentStart%3B%0A%20%20%20%20let%20oldIndex%20%3D%20oldStart%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20ops.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20switch%20(ops%5Bi%5D)%20%7B%0A%20%20%20%20%20%20%20%20case%20EDIT_LEAVE%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(splice)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20splices.push(splice)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20splice%20%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20index%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20oldIndex%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20EDIT_UPDATE%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(!splice)%20splice%20%3D%20newSplice(index%2C%20%5B%5D%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20splice.addedCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20index%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20splice.removed.push(old%5BoldIndex%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20oldIndex%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20EDIT_ADD%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(!splice)%20splice%20%3D%20newSplice(index%2C%20%5B%5D%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20splice.addedCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20index%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%20EDIT_DELETE%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(!splice)%20splice%20%3D%20newSplice(index%2C%20%5B%5D%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20splice.removed.push(old%5BoldIndex%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20oldIndex%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(splice)%20%7B%0A%20%20%20%20%20%20splices.push(splice)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20splices%3B%0A%20%20%7D%0A%0A%20%20function%20sharedPrefix(current%2C%20old%2C%20searchLength)%20%7B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20searchLength%3B%20i%2B%2B)%20if%20(!equals(current%5Bi%5D%2C%20old%5Bi%5D))%20return%20i%3B%0A%0A%20%20%20%20return%20searchLength%3B%0A%20%20%7D%0A%0A%20%20function%20sharedSuffix(current%2C%20old%2C%20searchLength)%20%7B%0A%20%20%20%20let%20index1%20%3D%20current.length%3B%0A%20%20%20%20let%20index2%20%3D%20old.length%3B%0A%20%20%20%20let%20count%20%3D%200%3B%0A%0A%20%20%20%20while%20(count%20%3C%20searchLength%20%26%26%20equals(current%5B--index1%5D%2C%20old%5B--index2%5D))%20count%2B%2B%3B%0A%0A%20%20%20%20return%20count%3B%0A%20%20%7D%0A%0A%20%20function%20calculateSplices(current%2C%20previous)%20%7B%0A%20%20%20%20return%20calcSplices(current%2C%200%2C%20current.length%2C%20previous%2C%200%2C%20previous.length)%3B%0A%20%20%7D%0A%0A%20%20function%20equals(currentValue%2C%20previousValue)%20%7B%0A%20%20%20%20return%20currentValue%20%3D%3D%3D%20previousValue%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Module%20that%20provides%20utilities%20for%20diffing%20arrays.%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.ArraySplice%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20an%20array%20of%20splice%20records%20indicating%20the%20minimum%20edits%20required%0A%20%20%20%20%20*%20to%20transform%20the%20%60previous%60%20array%20into%20the%20%60current%60%20array.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Splice%20records%20are%20ordered%20by%20index%20and%20contain%20the%20following%20fields%3A%0A%20%20%20%20%20*%20-%20%60index%60%3A%20index%20where%20edit%20started%0A%20%20%20%20%20*%20-%20%60removed%60%3A%20array%20of%20removed%20items%20from%20this%20index%0A%20%20%20%20%20*%20-%20%60addedCount%60%3A%20number%20of%20items%20added%20at%20this%20index%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20This%20function%20is%20based%20on%20the%20Levenshtein%20%22minimum%20edit%20distance%22%0A%20%20%20%20%20*%20algorithm.%20Note%20that%20updates%20are%20treated%20as%20removal%20followed%20by%20addition.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20The%20worst-case%20time%20complexity%20of%20this%20algorithm%20is%20%60O(l%20*%20p)%60%0A%20%20%20%20%20*%20%20%20l%3A%20The%20length%20of%20the%20current%20array%0A%20%20%20%20%20*%20%20%20p%3A%20The%20length%20of%20the%20previous%20array%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20However%2C%20the%20worst-case%20complexity%20is%20reduced%20by%20an%20%60O(n)%60%20optimization%0A%20%20%20%20%20*%20to%20detect%20any%20shared%20prefix%20%26%20suffix%20between%20the%20two%20arrays%20and%20only%0A%20%20%20%20%20*%20perform%20the%20more%20expensive%20minimum%20edit%20distance%20calculation%20over%20the%0A%20%20%20%20%20*%20non-shared%20portions%20of%20the%20arrays.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40function%0A%20%20%20%20%20*%20%40memberof%20Polymer.ArraySplice%0A%20%20%20%20%20*%20%40param%20%7B!Array%7D%20current%20The%20%22changed%22%20array%20for%20which%20splices%20will%20be%0A%20%20%20%20%20*%20calculated.%0A%20%20%20%20%20*%20%40param%20%7B!Array%7D%20previous%20The%20%22unchanged%22%20original%20array%20to%20compare%0A%20%20%20%20%20*%20%60current%60%20against%20to%20determine%20the%20splices.%0A%20%20%20%20%20*%20%40return%20%7B!Array%7D%20Returns%20an%20array%20of%20splice%20record%20objects.%20Each%20of%20these%0A%20%20%20%20%20*%20contains%3A%20%60index%60%20the%20location%20where%20the%20splice%20occurred%3B%20%60removed%60%0A%20%20%20%20%20*%20the%20array%20of%20removed%20items%20from%20this%20location%3B%20%60addedCount%60%20the%20number%0A%20%20%20%20%20*%20of%20items%20added%20at%20this%20location.%0A%20%20%20%20%20*%2F%0A%20%20%20%20calculateSplices%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Farray-splice.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/async.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Returns%20true%20if%20%60node%60%20is%20a%20slot%20element%0A%20%20%20*%20%40param%20%7BNode%7D%20node%20Node%20to%20test.%0A%20%20%20*%20%40return%20%7Bboolean%7D%20Returns%20true%20if%20the%20given%20%60node%60%20is%20a%20slot%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20function%20isSlot(node)%20%7B%0A%20%20%20%20return%20node.localName%20%3D%3D%3D%20&#39;slot&#39;%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Class%20that%20listens%20for%20changes%20(additions%20or%20removals)%20to%0A%20%20%20*%20%22flattened%20nodes%22%20on%20a%20given%20%60node%60.%20The%20list%20of%20flattened%20nodes%20consists%0A%20%20%20*%20of%20a%20node&#39;s%20children%20and%2C%20for%20any%20children%20that%20are%20%60%3Cslot%3E%60%20elements%2C%0A%20%20%20*%20the%20expanded%20flattened%20list%20of%20%60assignedNodes%60.%0A%20%20%20*%20For%20example%2C%20if%20the%20observed%20node%20has%20children%20%60%3Ca%3E%3C%2Fa%3E%3Cslot%3E%3C%2Fslot%3E%3Cb%3E%3C%2Fb%3E%60%0A%20%20%20*%20and%20the%20%60%3Cslot%3E%60%20has%20one%20%60%3Cdiv%3E%60%20assigned%20to%20it%2C%20then%20the%20flattened%0A%20%20%20*%20nodes%20list%20is%20%60%3Ca%3E%3C%2Fa%3E%3Cdiv%3E%3C%2Fdiv%3E%3Cb%3E%3C%2Fb%3E%60.%20If%20the%20%60%3Cslot%3E%60%20has%20other%0A%20%20%20*%20%60%3Cslot%3E%60%20elements%20assigned%20to%20it%2C%20these%20are%20flattened%20as%20well.%0A%20%20%20*%0A%20%20%20*%20The%20provided%20%60callback%60%20is%20called%20whenever%20any%20change%20to%20this%20list%0A%20%20%20*%20of%20flattened%20nodes%20occurs%2C%20where%20an%20addition%20or%20removal%20of%20a%20node%20is%0A%20%20%20*%20considered%20a%20change.%20The%20%60callback%60%20is%20called%20with%20one%20argument%2C%20an%20object%0A%20%20%20*%20containing%20an%20array%20of%20any%20%60addedNodes%60%20and%20%60removedNodes%60.%0A%20%20%20*%0A%20%20%20*%20Note%3A%20the%20callback%20is%20called%20asynchronous%20to%20any%20changes%0A%20%20%20*%20at%20a%20microtask%20checkpoint.%20This%20is%20because%20observation%20is%20performed%20using%0A%20%20%20*%20%60MutationObserver%60%20and%20the%20%60%3Cslot%3E%60%20element&#39;s%20%60slotchange%60%20event%20which%0A%20%20%20*%20are%20asynchronous.%0A%20%20%20*%0A%20%20%20*%20An%20example%3A%0A%20%20%20*%20%60%60%60js%0A%20%20%20*%20class%20TestSelfObserve%20extends%20Polymer.Element%20%7B%0A%20%20%20*%20%20%20static%20get%20is()%20%7B%20return%20&#39;test-self-observe&#39;%3B%7D%0A%20%20%20*%20%20%20connectedCallback()%20%7B%0A%20%20%20*%20%20%20%20%20super.connectedCallback()%3B%0A%20%20%20*%20%20%20%20%20this._observer%20%3D%20new%20Polymer.FlattenedNodesObserver(this%2C%20(info)%20%3D%3E%20%7B%0A%20%20%20*%20%20%20%20%20%20%20this.info%20%3D%20info%3B%0A%20%20%20*%20%20%20%20%20%7D)%3B%0A%20%20%20*%20%20%20%7D%0A%20%20%20*%20%20%20disconnectedCallback()%20%7B%0A%20%20%20*%20%20%20%20%20super.disconnectedCallback()%3B%0A%20%20%20*%20%20%20%20%20this._observer.disconnect()%3B%0A%20%20%20*%20%20%20%7D%0A%20%20%20*%20%7D%0A%20%20%20*%20customElements.define(TestSelfObserve.is%2C%20TestSelfObserve)%3B%0A%20%20%20*%20%60%60%60%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Class%20that%20listens%20for%20changes%20(additions%20or%20removals)%20to%0A%20%20%20*%20%22flattened%20nodes%22%20on%20a%20given%20%60node%60.%0A%20%20%20*%2F%0A%0A%0A%20%20class%20FlattenedNodesObserver%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20list%20of%20flattened%20nodes%20for%20the%20given%20%60node%60.%0A%20%20%20%20%20*%20This%20list%20consists%20of%20a%20node&#39;s%20children%20and%2C%20for%20any%20children%0A%20%20%20%20%20*%20that%20are%20%60%3Cslot%3E%60%20elements%2C%20the%20expanded%20flattened%20list%20of%20%60assignedNodes%60.%0A%20%20%20%20%20*%20For%20example%2C%20if%20the%20observed%20node%20has%20children%20%60%3Ca%3E%3C%2Fa%3E%3Cslot%3E%3C%2Fslot%3E%3Cb%3E%3C%2Fb%3E%60%0A%20%20%20%20%20*%20and%20the%20%60%3Cslot%3E%60%20has%20one%20%60%3Cdiv%3E%60%20assigned%20to%20it%2C%20then%20the%20flattened%0A%20%20%20%20%20*%20nodes%20list%20is%20%60%3Ca%3E%3C%2Fa%3E%3Cdiv%3E%3C%2Fdiv%3E%3Cb%3E%3C%2Fb%3E%60.%20If%20the%20%60%3Cslot%3E%60%20has%20other%0A%20%20%20%20%20*%20%60%3Cslot%3E%60%20elements%20assigned%20to%20it%2C%20these%20are%20flattened%20as%20well.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7BHTMLElement%7CHTMLSlotElement%7D%20node%20The%20node%20for%20which%20to%20return%20the%20list%20of%20flattened%20nodes.%0A%20%20%20%20%20*%20%40return%20%7BArray%7D%20The%20list%20of%20flattened%20nodes%20for%20the%20given%20%60node%60.%0A%20%20%20%20*%2F%0A%20%20%20%20static%20getFlattenedNodes(node)%20%7B%0A%20%20%20%20%20%20if%20(isSlot(node))%20%7B%0A%20%20%20%20%20%20%20%20node%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLSlotElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%3B%20%2F%2F%20eslint-disable-line%20no-self-assign%0A%0A%20%20%20%20%20%20%20%20return%20node.assignedNodes(%7B%0A%20%20%20%20%20%20%20%20%20%20flatten%3A%20true%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20Array.from(node.childNodes).map(node%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(isSlot(node))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLSlotElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20node%3B%20%2F%2F%20eslint-disable-line%20no-self-assign%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20node.assignedNodes(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20flatten%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%5Bnode%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D).reduce((a%2C%20b)%20%3D%3E%20a.concat(b)%2C%20%5B%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BElement%7D%20target%20Node%20on%20which%20to%20listen%20for%20changes.%0A%20%20%20%20%20*%20%40param%20%7B%3Ffunction(!Element%2C%20%7B%20target%3A%20!Element%2C%20addedNodes%3A%20!Array%3C!Element%3E%2C%20removedNodes%3A%20!Array%3C!Element%3E%20%7D)%3Avoid%7D%20callback%20Function%20called%20when%20there%20are%20additions%0A%20%20%20%20%20*%20or%20removals%20from%20the%20target&#39;s%20list%20of%20flattened%20nodes.%0A%20%20%20%20*%2F%0A%0A%0A%20%20%20%20constructor(target%2C%20callback)%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40type%20%7BMutationObserver%7D%0A%20%20%20%20%20%20%20*%20%40private%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20this._shadyChildrenObserver%20%3D%20null%3B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40type%20%7BMutationObserver%7D%0A%20%20%20%20%20%20%20*%20%40private%0A%20%20%20%20%20%20%20*%2F%0A%0A%20%20%20%20%20%20this._nativeChildrenObserver%20%3D%20null%3B%0A%20%20%20%20%20%20this._connected%20%3D%20false%3B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40type%20%7BElement%7D%0A%20%20%20%20%20%20%20*%20%40private%0A%20%20%20%20%20%20%20*%2F%0A%0A%20%20%20%20%20%20this._target%20%3D%20target%3B%0A%20%20%20%20%20%20this.callback%20%3D%20callback%3B%0A%20%20%20%20%20%20this._effectiveNodes%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20this._observer%20%3D%20null%3B%0A%20%20%20%20%20%20this._scheduled%20%3D%20false%3B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40type%20%7Bfunction()%7D%0A%20%20%20%20%20%20%20*%20%40private%0A%20%20%20%20%20%20%20*%2F%0A%0A%20%20%20%20%20%20this._boundSchedule%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._schedule()%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20this.connect()%3B%0A%0A%20%20%20%20%20%20this._schedule()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Activates%20an%20observer.%20This%20method%20is%20automatically%20called%20when%0A%20%20%20%20%20*%20a%20%60FlattenedNodesObserver%60%20is%20created.%20It%20should%20only%20be%20called%20to%0A%20%20%20%20%20*%20re-activate%20an%20observer%20that%20has%20been%20deactivated%20via%20the%20%60disconnect%60%20method.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20connect()%20%7B%0A%20%20%20%20%20%20if%20(isSlot(this._target))%20%7B%0A%20%20%20%20%20%20%20%20this._listenSlots(%5Bthis._target%5D)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(this._target.children)%20%7B%0A%20%20%20%20%20%20%20%20this._listenSlots(this._target.children)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(window.ShadyDOM)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._shadyChildrenObserver%20%3D%20ShadyDOM.observeChildren(this._target%2C%20mutations%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._processMutations(mutations)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._nativeChildrenObserver%20%3D%20new%20MutationObserver(mutations%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._processMutations(mutations)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this._nativeChildrenObserver.observe(this._target%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20childList%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this._connected%20%3D%20true%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Deactivates%20the%20flattened%20nodes%20observer.%20After%20calling%20this%20method%0A%20%20%20%20%20*%20the%20observer%20callback%20will%20not%20be%20called%20when%20changes%20to%20flattened%20nodes%0A%20%20%20%20%20*%20occur.%20The%20%60connect%60%20method%20may%20be%20subsequently%20called%20to%20reactivate%0A%20%20%20%20%20*%20the%20observer.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20disconnect()%20%7B%0A%20%20%20%20%20%20if%20(isSlot(this._target))%20%7B%0A%20%20%20%20%20%20%20%20this._unlistenSlots(%5Bthis._target%5D)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(this._target.children)%20%7B%0A%20%20%20%20%20%20%20%20this._unlistenSlots(this._target.children)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(window.ShadyDOM%20%26%26%20this._shadyChildrenObserver)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ShadyDOM.unobserveChildren(this._shadyChildrenObserver)%3B%0A%20%20%20%20%20%20%20%20%20%20this._shadyChildrenObserver%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this._nativeChildrenObserver)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._nativeChildrenObserver.disconnect()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this._nativeChildrenObserver%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this._connected%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_schedule()%20%7B%0A%20%20%20%20%20%20if%20(!this._scheduled)%20%7B%0A%20%20%20%20%20%20%20%20this._scheduled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20Polymer.Async.microTask.run(()%20%3D%3E%20this.flush())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BArray%3CMutationRecord%3E%7D%20mutations%20Mutations%20signaled%20by%20the%20mutation%20observer%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_processMutations(mutations)%20%7B%0A%20%20%20%20%20%20this._processSlotMutations(mutations)%3B%0A%0A%20%20%20%20%20%20this.flush()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BArray%3CMutationRecord%3E%7D%20mutations%20Mutations%20signaled%20by%20the%20mutation%20observer%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_processSlotMutations(mutations)%20%7B%0A%20%20%20%20%20%20if%20(mutations)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20mutations.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20mutation%20%3D%20mutations%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(mutation.addedNodes)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._listenSlots(mutation.addedNodes)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(mutation.removedNodes)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._unlistenSlots(mutation.removedNodes)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Flushes%20the%20observer%20causing%20any%20pending%20changes%20to%20be%20immediately%0A%20%20%20%20%20*%20delivered%20the%20observer%20callback.%20By%20default%20these%20changes%20are%20delivered%0A%20%20%20%20%20*%20asynchronously%20at%20the%20next%20microtask%20checkpoint.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Returns%20true%20if%20any%20pending%20changes%20caused%20the%20observer%0A%20%20%20%20%20*%20callback%20to%20run.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20flush()%20%7B%0A%20%20%20%20%20%20if%20(!this._connected)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(window.ShadyDOM)%20%7B%0A%20%20%20%20%20%20%20%20ShadyDOM.flush()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(this._nativeChildrenObserver)%20%7B%0A%20%20%20%20%20%20%20%20this._processSlotMutations(this._nativeChildrenObserver.takeRecords())%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(this._shadyChildrenObserver)%20%7B%0A%20%20%20%20%20%20%20%20this._processSlotMutations(this._shadyChildrenObserver.takeRecords())%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this._scheduled%20%3D%20false%3B%0A%20%20%20%20%20%20let%20info%20%3D%20%7B%0A%20%20%20%20%20%20%20%20target%3A%20this._target%2C%0A%20%20%20%20%20%20%20%20addedNodes%3A%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20removedNodes%3A%20%5B%5D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20let%20newNodes%20%3D%20this.constructor.getFlattenedNodes(this._target)%3B%0A%20%20%20%20%20%20let%20splices%20%3D%20Polymer.ArraySplice.calculateSplices(newNodes%2C%20this._effectiveNodes)%3B%20%2F%2F%20process%20removals%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20s%3B%20i%20%3C%20splices.length%20%26%26%20(s%20%3D%20splices%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%2C%20n%3B%20j%20%3C%20s.removed.length%20%26%26%20(n%20%3D%20s.removed%5Bj%5D)%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20info.removedNodes.push(n)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F%2F%20process%20adds%0A%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20s%3B%20i%20%3C%20splices.length%20%26%26%20(s%20%3D%20splices%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%20s.index%3B%20j%20%3C%20s.index%20%2B%20s.addedCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20info.addedNodes.push(newNodes%5Bj%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F%2F%20update%20cache%0A%0A%0A%20%20%20%20%20%20this._effectiveNodes%20%3D%20newNodes%3B%0A%20%20%20%20%20%20let%20didFlush%20%3D%20false%3B%0A%0A%20%20%20%20%20%20if%20(info.addedNodes.length%20%7C%7C%20info.removedNodes.length)%20%7B%0A%20%20%20%20%20%20%20%20didFlush%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.callback.call(this._target%2C%20info)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20didFlush%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7B!Array%3CElement%7CNode%3E%7C!NodeList%3CNode%3E%7D%20nodeList%20Nodes%20that%20could%20change%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_listenSlots(nodeList)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20nodeList.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20let%20n%20%3D%20nodeList%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(isSlot(n))%20%7B%0A%20%20%20%20%20%20%20%20%20%20n.addEventListener(&#39;slotchange&#39;%2C%20this._boundSchedule)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7B!Array%3CElement%7CNode%3E%7C!NodeList%3CNode%3E%7D%20nodeList%20Nodes%20that%20could%20change%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_unlistenSlots(nodeList)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20nodeList.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20let%20n%20%3D%20nodeList%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(isSlot(n))%20%7B%0A%20%20%20%20%20%20%20%20%20%20n.removeEventListener(&#39;slotchange&#39;%2C%20this._boundSchedule)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%0A%20%20Polymer.FlattenedNodesObserver%20%3D%20FlattenedNodesObserver%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fflattened-nodes-observer.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/flush.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/debounce.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Forces%20several%20classes%20of%20asynchronously%20queued%20tasks%20to%20flush%3A%0A%20%20%20*%20-%20Debouncers%20added%20via%20%60enqueueDebouncer%60%0A%20%20%20*%20-%20ShadyDOM%20distribution%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.flush%20%3D%20function%20()%20%7B%0A%20%20%20%20let%20shadyDOM%2C%20debouncers%3B%0A%0A%20%20%20%20do%20%7B%0A%20%20%20%20%20%20shadyDOM%20%3D%20window.ShadyDOM%20%26%26%20ShadyDOM.flush()%3B%0A%0A%20%20%20%20%20%20if%20(window.ShadyCSS%20%26%26%20window.ShadyCSS.ScopingShim)%20%7B%0A%20%20%20%20%20%20%20%20window.ShadyCSS.ScopingShim.flush()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20debouncers%20%3D%20Polymer.flushDebouncers()%3B%0A%20%20%20%20%7D%20while%20(shadyDOM%20%7C%7C%20debouncers)%3B%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Fflush.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20const%20p%20%3D%20Element.prototype%3B%0A%20%20%2F**%0A%20%20%20*%20%40const%20%7Bfunction(this%3ANode%2C%20string)%3A%20boolean%7D%0A%20%20%20*%2F%0A%0A%20%20const%20normalizedMatchesSelector%20%3D%20p.matches%20%7C%7C%20p.matchesSelector%20%7C%7C%20p.mozMatchesSelector%20%7C%7C%20p.msMatchesSelector%20%7C%7C%20p.oMatchesSelector%20%7C%7C%20p.webkitMatchesSelector%3B%0A%20%20%2F**%0A%20%20%20*%20Cross-platform%20%60element.matches%60%20shim.%0A%20%20%20*%0A%20%20%20*%20%40function%20matchesSelector%0A%20%20%20*%20%40memberof%20Polymer.dom%0A%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20check%20selector%20against%0A%20%20%20*%20%40param%20%7Bstring%7D%20selector%20Selector%20to%20match%0A%20%20%20*%20%40return%20%7Bboolean%7D%20True%20if%20node%20matched%20selector%0A%20%20%20*%2F%0A%0A%20%20const%20matchesSelector%20%3D%20function%20(node%2C%20selector)%20%7B%0A%20%20%20%20return%20normalizedMatchesSelector.call(node%2C%20selector)%3B%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20Node%20API%20wrapper%20class%20returned%20from%20%60Polymer.dom.(target)%60%20when%0A%20%20%20*%20%60target%60%20is%20a%20%60Node%60.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%2F%0A%0A%0A%20%20class%20DomApi%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BNode%7D%20node%20Node%20for%20which%20to%20create%20a%20Polymer.dom%20helper%20object.%0A%20%20%20%20%20*%2F%0A%20%20%20%20constructor(node)%20%7B%0A%20%20%20%20%20%20this.node%20%3D%20node%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20an%20instance%20of%20%60Polymer.FlattenedNodesObserver%60%20that%0A%20%20%20%20%20*%20listens%20for%20node%20changes%20on%20this%20element.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7Bfunction(!Element%2C%20%7B%20target%3A%20!Element%2C%20addedNodes%3A%20!Array%3C!Element%3E%2C%20removedNodes%3A%20!Array%3C!Element%3E%20%7D)%3Avoid%7D%20callback%20Called%20when%20direct%20or%20distributed%20children%0A%20%20%20%20%20*%20%20%20of%20this%20element%20changes%0A%20%20%20%20%20*%20%40return%20%7B!Polymer.FlattenedNodesObserver%7D%20Observer%20instance%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20observeNodes(callback)%20%7B%0A%20%20%20%20%20%20return%20new%20Polymer.FlattenedNodesObserver(this.node%2C%20callback)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Disconnects%20an%20observer%20previously%20created%20via%20%60observeNodes%60%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!Polymer.FlattenedNodesObserver%7D%20observerHandle%20Observer%20instance%0A%20%20%20%20%20*%20%20%20to%20disconnect.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20unobserveNodes(observerHandle)%20%7B%0A%20%20%20%20%20%20observerHandle.disconnect()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Provided%20as%20a%20backwards-compatible%20API%20only.%20%20This%20method%20does%20nothing.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20notifyObserver()%20%7B%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20true%20if%20the%20provided%20node%20is%20contained%20with%20this%20element&#39;s%0A%20%20%20%20%20*%20light-DOM%20children%20or%20shadow%20root%2C%20including%20any%20nested%20shadow%20roots%0A%20%20%20%20%20*%20of%20children%20therein.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7BNode%7D%20node%20Node%20to%20test%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Returns%20true%20if%20the%20given%20%60node%60%20is%20contained%20within%0A%20%20%20%20%20*%20%20%20this%20element&#39;s%20light%20or%20shadow%20DOM.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20deepContains(node)%20%7B%0A%20%20%20%20%20%20if%20(this.node.contains(node))%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20n%20%3D%20node%3B%0A%20%20%20%20%20%20let%20doc%20%3D%20node.ownerDocument%3B%20%2F%2F%20walk%20from%20node%20to%20%60this%60%20or%20%60document%60%0A%0A%20%20%20%20%20%20while%20(n%20%26%26%20n%20!%3D%3D%20doc%20%26%26%20n%20!%3D%3D%20this.node)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20use%20logical%20parentnode%2C%20or%20native%20ShadowRoot%20host%0A%20%20%20%20%20%20%20%20n%20%3D%20n.parentNode%20%7C%7C%20n.host%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20n%20%3D%3D%3D%20this.node%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20root%20node%20of%20this%20node.%20%20Equivalent%20to%20%60getRoodNode()%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7BNode%7D%20Top%20most%20element%20in%20the%20dom%20tree%20in%20which%20the%20node%0A%20%20%20%20%20*%20exists.%20If%20the%20node%20is%20connected%20to%20a%20document%20this%20is%20either%20a%0A%20%20%20%20%20*%20shadowRoot%20or%20the%20document%3B%20otherwise%2C%20it%20may%20be%20the%20node%0A%20%20%20%20%20*%20itself%20or%20a%20node%20or%20document%20fragment%20containing%20it.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20getOwnerRoot()%20%7B%0A%20%20%20%20%20%20return%20this.node.getRootNode()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20For%20slot%20elements%2C%20returns%20the%20nodes%20assigned%20to%20the%20slot%3B%20otherwise%0A%20%20%20%20%20*%20an%20empty%20array.%20It%20is%20equivalent%20to%20%60%3Cslot%3E.addignedNodes(%7Bflatten%3Atrue%7D)%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!Node%3E%7D%20Array%20of%20assigned%20nodes%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20getDistributedNodes()%20%7B%0A%20%20%20%20%20%20return%20this.node.localName%20%3D%3D%3D%20&#39;slot&#39;%20%3F%20this.node.assignedNodes(%7B%0A%20%20%20%20%20%20%20%20flatten%3A%20true%0A%20%20%20%20%20%20%7D)%20%3A%20%5B%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20an%20array%20of%20all%20slots%20this%20element%20was%20distributed%20to.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!HTMLSlotElement%3E%7D%20Description%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20getDestinationInsertionPoints()%20%7B%0A%20%20%20%20%20%20let%20ip%24%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20let%20n%20%3D%20this.node.assignedSlot%3B%0A%0A%20%20%20%20%20%20while%20(n)%20%7B%0A%20%20%20%20%20%20%20%20ip%24.push(n)%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20n.assignedSlot%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20ip%24%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Calls%20%60importNode%60%20on%20the%20%60ownerDocument%60%20for%20this%20node.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20import%0A%20%20%20%20%20*%20%40param%20%7Bboolean%7D%20deep%20True%20if%20the%20node%20should%20be%20cloned%20deeply%20during%0A%20%20%20%20%20*%20%20%20import%0A%20%20%20%20%20*%20%40return%20%7BNode%7D%20Clone%20of%20given%20node%20imported%20to%20this%20owner%20document%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20importNode(node%2C%20deep)%20%7B%0A%20%20%20%20%20%20let%20doc%20%3D%20this.node%20instanceof%20Document%20%3F%20this.node%20%3A%20this.node.ownerDocument%3B%0A%20%20%20%20%20%20return%20doc.importNode(node%2C%20deep)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!Node%3E%7D%20Returns%20a%20flattened%20list%20of%20all%20child%20nodes%20and%0A%20%20%20%20%20*%20nodes%20assigned%20to%20child%20slots.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20getEffectiveChildNodes()%20%7B%0A%20%20%20%20%20%20return%20Polymer.FlattenedNodesObserver.getFlattenedNodes(this.node)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20a%20filtered%20list%20of%20flattened%20child%20elements%20for%20this%20element%20based%0A%20%20%20%20%20*%20on%20the%20given%20selector.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20selector%20Selector%20to%20filter%20nodes%20against%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!HTMLElement%3E%7D%20List%20of%20flattened%20child%20elements%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20queryDistributedElements(selector)%20%7B%0A%20%20%20%20%20%20let%20c%24%20%3D%20this.getEffectiveChildNodes()%3B%0A%20%20%20%20%20%20let%20list%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20l%20%3D%20c%24.length%2C%20c%3B%20i%20%3C%20l%20%26%26%20(c%20%3D%20c%24%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(c.nodeType%20%3D%3D%3D%20Node.ELEMENT_NODE%20%26%26%20matchesSelector(c%2C%20selector))%20%7B%0A%20%20%20%20%20%20%20%20%20%20list.push(c)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20list%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20For%20shadow%20roots%2C%20returns%20the%20currently%20focused%20element%20within%20this%0A%20%20%20%20%20*%20shadow%20root.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7BNode%7Cundefined%7D%20Currently%20focused%20element%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20get%20activeElement()%20%7B%0A%20%20%20%20%20%20let%20node%20%3D%20this.node%3B%0A%20%20%20%20%20%20return%20node._activeElement%20!%3D%3D%20undefined%20%3F%20node._activeElement%20%3A%20node.activeElement%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%0A%20%20function%20forwardMethods(proto%2C%20methods)%20%7B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20methods.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20let%20method%20%3D%20methods%5Bi%5D%3B%0A%20%20%20%20%20%20%2F*%20eslint-disable%20valid-jsdoc%20*%2F%0A%0A%20%20%20%20%20%20proto%5Bmethod%5D%20%3D%0A%20%20%20%20%20%20%2F**%20%40this%20%7BDomApi%7D%20*%2F%0A%20%20%20%20%20%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.node%5Bmethod%5D.apply(this.node%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%2F*%20eslint-enable%20*%2F%0A%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20forwardReadOnlyProperties(proto%2C%20properties)%20%7B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20properties.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20let%20name%20%3D%20properties%5Bi%5D%3B%0A%20%20%20%20%20%20Object.defineProperty(proto%2C%20name%2C%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20domApi%20%3D%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BDomApi%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this%3B%0A%20%20%20%20%20%20%20%20%20%20return%20domApi.node%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20forwardProperties(proto%2C%20properties)%20%7B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20properties.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20let%20name%20%3D%20properties%5Bi%5D%3B%0A%20%20%20%20%20%20Object.defineProperty(proto%2C%20name%2C%20%7B%0A%20%20%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20domApi%20%3D%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BDomApi%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this%3B%0A%20%20%20%20%20%20%20%20%20%20return%20domApi.node%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BDomApi%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this.node%5Bname%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20configurable%3A%20true%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20forwardMethods(DomApi.prototype%2C%20%5B&#39;cloneNode&#39;%2C%20&#39;appendChild&#39;%2C%20&#39;insertBefore&#39;%2C%20&#39;removeChild&#39;%2C%20&#39;replaceChild&#39;%2C%20&#39;setAttribute&#39;%2C%20&#39;removeAttribute&#39;%2C%20&#39;querySelector&#39;%2C%20&#39;querySelectorAll&#39;%5D)%3B%0A%20%20forwardReadOnlyProperties(DomApi.prototype%2C%20%5B&#39;parentNode&#39;%2C%20&#39;firstChild&#39;%2C%20&#39;lastChild&#39;%2C%20&#39;nextSibling&#39;%2C%20&#39;previousSibling&#39;%2C%20&#39;firstElementChild&#39;%2C%20&#39;lastElementChild&#39;%2C%20&#39;nextElementSibling&#39;%2C%20&#39;previousElementSibling&#39;%2C%20&#39;childNodes&#39;%2C%20&#39;children&#39;%2C%20&#39;classList&#39;%5D)%3B%0A%20%20forwardProperties(DomApi.prototype%2C%20%5B&#39;textContent&#39;%2C%20&#39;innerHTML&#39;%5D)%3B%0A%20%20%2F**%0A%20%20%20*%20Event%20API%20wrapper%20class%20returned%20from%20%60Polymer.dom.(target)%60%20when%0A%20%20%20*%20%60target%60%20is%20an%20%60Event%60.%0A%20%20%20*%2F%0A%0A%20%20class%20EventApi%20%7B%0A%20%20%20%20constructor(event)%20%7B%0A%20%20%20%20%20%20this.event%20%3D%20event%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20first%20node%20on%20the%20%60composedPath%60%20of%20this%20event.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7B!EventTarget%7D%20The%20node%20this%20event%20was%20dispatched%20to%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20get%20rootTarget()%20%7B%0A%20%20%20%20%20%20return%20this.event.composedPath()%5B0%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20local%20(re-targeted)%20target%20for%20this%20event.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7B!EventTarget%7D%20The%20local%20(re-targeted)%20target%20for%20this%20event.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20get%20localTarget()%20%7B%0A%20%20%20%20%20%20return%20this.event.target%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20%60composedPath%60%20for%20this%20event.%0A%20%20%20%20%20*%20%40return%20%7B!Array%3C!EventTarget%3E%7D%20The%20nodes%20this%20event%20propagated%20through%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20get%20path()%20%7B%0A%20%20%20%20%20%20return%20this.event.composedPath()%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%0A%20%20Polymer.DomApi%20%3D%20DomApi%3B%0A%20%20%2F**%0A%20%20%20*%20%40function%0A%20%20%20*%20%40param%20%7Bboolean%3D%7D%20deep%0A%20%20%20*%20%40return%20%7B!Node%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.DomApi.prototype.cloneNode%3B%0A%20%20%2F**%0A%20%20%20*%20%40function%0A%20%20%20*%20%40param%20%7B!Node%7D%20node%0A%20%20%20*%20%40return%20%7B!Node%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.DomApi.prototype.appendChild%3B%0A%20%20%2F**%0A%20%20%20*%20%40function%0A%20%20%20*%20%40param%20%7B!Node%7D%20newChild%0A%20%20%20*%20%40param%20%7BNode%7D%20refChild%0A%20%20%20*%20%40return%20%7B!Node%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.DomApi.prototype.insertBefore%3B%0A%20%20%2F**%0A%20%20%20*%20%40function%0A%20%20%20*%20%40param%20%7B!Node%7D%20node%0A%20%20%20*%20%40return%20%7B!Node%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.DomApi.prototype.removeChild%3B%0A%20%20%2F**%0A%20%20%20*%20%40function%0A%20%20%20*%20%40param%20%7B!Node%7D%20oldChild%0A%20%20%20*%20%40param%20%7B!Node%7D%20newChild%0A%20%20%20*%20%40return%20%7B!Node%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.DomApi.prototype.replaceChild%3B%0A%20%20%2F**%0A%20%20%20*%20%40function%0A%20%20%20*%20%40param%20%7Bstring%7D%20name%0A%20%20%20*%20%40param%20%7Bstring%7D%20value%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.DomApi.prototype.setAttribute%3B%0A%20%20%2F**%0A%20%20%20*%20%40function%0A%20%20%20*%20%40param%20%7Bstring%7D%20name%0A%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.DomApi.prototype.removeAttribute%3B%0A%20%20%2F**%0A%20%20%20*%20%40function%0A%20%20%20*%20%40param%20%7Bstring%7D%20selector%0A%20%20%20*%20%40return%20%7B%3FElement%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.DomApi.prototype.querySelector%3B%0A%20%20%2F**%0A%20%20%20*%20%40function%0A%20%20%20*%20%40param%20%7Bstring%7D%20selector%0A%20%20%20*%20%40return%20%7B!NodeList%3C!Element%3E%7D%0A%20%20%20*%2F%0A%0A%20%20Polymer.DomApi.prototype.querySelectorAll%3B%0A%20%20%2F**%0A%20%20%20*%20Legacy%20DOM%20and%20Event%20manipulation%20API%20wrapper%20factory%20used%20to%20abstract%0A%20%20%20*%20differences%20between%20native%20Shadow%20DOM%20and%20%22Shady%20DOM%22%20when%20polyfilling%20on%0A%20%20%20*%20older%20browsers.%0A%20%20%20*%0A%20%20%20*%20Note%20that%20in%20Polymer%202.x%20use%20of%20%60Polymer.dom%60%20is%20no%20longer%20required%20and%0A%20%20%20*%20in%20the%20majority%20of%20cases%20simply%20facades%20directly%20to%20the%20standard%20native%0A%20%20%20*%20API.%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40summary%20Legacy%20DOM%20and%20Event%20manipulation%20API%20wrapper%20factory%20used%20to%0A%20%20%20*%20abstract%20differences%20between%20native%20Shadow%20DOM%20and%20%22Shady%20DOM.%22%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40param%20%7B(Node%7CEvent)%3D%7D%20obj%20Node%20or%20event%20to%20operate%20on%0A%20%20%20*%20%40return%20%7B!DomApi%7C!EventApi%7D%20Wrapper%20providing%20either%20node%20API%20or%20event%20API%0A%20%20%20*%2F%0A%0A%20%20Polymer.dom%20%3D%20function%20(obj)%20%7B%0A%20%20%20%20obj%20%3D%20obj%20%7C%7C%20document%3B%0A%0A%20%20%20%20if%20(!obj.__domApi)%20%7B%0A%20%20%20%20%20%20let%20helper%3B%0A%0A%20%20%20%20%20%20if%20(obj%20instanceof%20Event)%20%7B%0A%20%20%20%20%20%20%20%20helper%20%3D%20new%20EventApi(obj)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20helper%20%3D%20new%20DomApi(obj)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20obj.__domApi%20%3D%20helper%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20obj.__domApi%3B%0A%20%20%7D%3B%0A%0A%20%20Polymer.dom.matchesSelector%20%3D%20matchesSelector%3B%0A%20%20%2F**%0A%20%20%20*%20Forces%20several%20classes%20of%20asynchronously%20queued%20tasks%20to%20flush%3A%0A%20%20%20*%20-%20Debouncers%20added%20via%20%60Polymer.enqueueDebouncer%60%0A%20%20%20*%20-%20ShadyDOM%20distribution%0A%20%20%20*%0A%20%20%20*%20This%20method%20facades%20to%20%60Polymer.flush%60.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer.dom%0A%20%20%20*%2F%0A%0A%20%20Polymer.dom.flush%20%3D%20Polymer.flush%3B%0A%20%20%2F**%0A%20%20%20*%20Adds%20a%20%60Polymer.Debouncer%60%20to%20a%20list%20of%20globally%20flushable%20tasks.%0A%20%20%20*%0A%20%20%20*%20This%20method%20facades%20to%20%60Polymer.enqueueDebouncer%60.%0A%20%20%20*%0A%20%20%20*%20%40memberof%20Polymer.dom%0A%20%20%20*%20%40param%20%7B!Polymer.Debouncer%7D%20debouncer%20Debouncer%20to%20enqueue%0A%20%20%20*%2F%0A%0A%20%20Polymer.dom.addDebouncer%20%3D%20Polymer.enqueueDebouncer%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Flegacy%2Fpolymer.dom.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20let%20styleInterface%20%3D%20window.ShadyCSS%3B%0A%20%20%2F**%0A%20%20%20*%20Element%20class%20mixin%20that%20provides%20Polymer&#39;s%20%22legacy%22%20API%20intended%20to%20be%0A%20%20%20*%20backward-compatible%20to%20the%20greatest%20extent%20possible%20with%20the%20API%0A%20%20%20*%20found%20on%20the%20Polymer%201.x%20%60Polymer.Base%60%20prototype%20applied%20to%20all%20elements%0A%20%20%20*%20defined%20using%20the%20%60Polymer(%7B...%7D)%60%20function.%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40appliesMixin%20Polymer.ElementMixin%0A%20%20%20*%20%40appliesMixin%20Polymer.GestureEventListeners%0A%20%20%20*%20%40property%20isAttached%20%7Bboolean%7D%20Set%20to%20%60true%60%20in%20this%20element&#39;s%0A%20%20%20*%20%20%20%60connectedCallback%60%20and%20%60false%60%20in%20%60disconnectedCallback%60%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Element%20class%20mixin%20that%20provides%20Polymer&#39;s%20%22legacy%22%20API%0A%20%20%20*%2F%0A%0A%20%20Polymer.LegacyElementMixin%20%3D%20Polymer.dedupingMixin(base%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40constructor%0A%20%20%20%20%20*%20%40extends%20%7Bbase%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_ElementMixin%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_GestureEventListeners%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_DirMixin%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%20%20%20%20const%20legacyElementBase%20%3D%20Polymer.DirMixin(Polymer.GestureEventListeners(Polymer.ElementMixin(base)))%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Map%20of%20simple%20names%20to%20touch%20action%20names%0A%20%20%20%20%20*%20%40dict%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20const%20DIRECTION_MAP%20%3D%20%7B%0A%20%20%20%20%20%20&#39;x&#39;%3A%20&#39;pan-x&#39;%2C%0A%20%20%20%20%20%20&#39;y&#39;%3A%20&#39;pan-y&#39;%2C%0A%20%20%20%20%20%20&#39;none&#39;%3A%20&#39;none&#39;%2C%0A%20%20%20%20%20%20&#39;all&#39;%3A%20&#39;auto&#39;%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40extends%20%7BlegacyElementBase%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_LegacyElementMixin%7D%0A%20%20%20%20%20*%20%40unrestricted%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20class%20LegacyElement%20extends%20legacyElementBase%20%7B%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super()%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7Bboolean%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.isAttached%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BWeakMap%3C!Element%2C%20!Object%3Cstring%2C%20!Function%3E%3E%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this.__boundListeners%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BObject%3Cstring%2C%20Function%3E%7D%20*%2F%0A%0A%20%20%20%20%20%20%20%20this._debouncers%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Forwards%20%60importMeta%60%20from%20the%20prototype%20(i.e.%20from%20the%20info%20object%0A%20%20%20%20%20%20%20*%20passed%20to%20%60Polymer(%7B...%7D)%60)%20to%20the%20static%20API.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Object%7D%20The%20%60import.meta%60%20object%20set%20on%20the%20prototype%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20%60this%60%20is%20always%20in%20the%20instance%20in%0A%20%20%20%20%20%20%20*%20%20closure%20for%20some%20reason%20even%20in%20a%20static%20method%2C%20rather%20than%20the%20class%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20static%20get%20importMeta()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.prototype.importMeta%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Legacy%20callback%20called%20during%20the%20%60constructor%60%2C%20for%20overriding%0A%20%20%20%20%20%20%20*%20by%20the%20user.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20created()%20%7B%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Provides%20an%20implementation%20of%20%60connectedCallback%60%0A%20%20%20%20%20%20%20*%20which%20adds%20Polymer%20legacy%20API&#39;s%20%60attached%60%20method.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20connectedCallback()%20%7B%0A%20%20%20%20%20%20%20%20super.connectedCallback()%3B%0A%20%20%20%20%20%20%20%20this.isAttached%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.attached()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Legacy%20callback%20called%20during%20%60connectedCallback%60%2C%20for%20overriding%0A%20%20%20%20%20%20%20*%20by%20the%20user.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20attached()%20%7B%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Provides%20an%20implementation%20of%20%60disconnectedCallback%60%0A%20%20%20%20%20%20%20*%20which%20adds%20Polymer%20legacy%20API&#39;s%20%60detached%60%20method.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20disconnectedCallback()%20%7B%0A%20%20%20%20%20%20%20%20super.disconnectedCallback()%3B%0A%20%20%20%20%20%20%20%20this.isAttached%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.detached()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Legacy%20callback%20called%20during%20%60disconnectedCallback%60%2C%20for%20overriding%0A%20%20%20%20%20%20%20*%20by%20the%20user.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20detached()%20%7B%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Provides%20an%20override%20implementation%20of%20%60attributeChangedCallback%60%0A%20%20%20%20%20%20%20*%20which%20adds%20the%20Polymer%20legacy%20API&#39;s%20%60attributeChanged%60%20method.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Name%20of%20attribute.%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20old%20Old%20value%20of%20attribute.%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20value%20Current%20value%20of%20attribute.%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20namespace%20Attribute%20namespace.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20attributeChangedCallback(name%2C%20old%2C%20value%2C%20namespace)%20%7B%0A%20%20%20%20%20%20%20%20if%20(old%20!%3D%3D%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20super.attributeChangedCallback(name%2C%20old%2C%20value%2C%20namespace)%3B%0A%20%20%20%20%20%20%20%20%20%20this.attributeChanged(name%2C%20old%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Legacy%20callback%20called%20during%20%60attributeChangedChallback%60%2C%20for%20overriding%0A%20%20%20%20%20%20%20*%20by%20the%20user.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Name%20of%20attribute.%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20old%20Old%20value%20of%20attribute.%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20value%20Current%20value%20of%20attribute.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20attributeChanged(name%2C%20old%2C%20value)%20%7B%7D%20%2F%2F%20eslint-disable-line%20no-unused-vars%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20the%20default%20%60Polymer.PropertyEffects%60%20implementation%20to%0A%20%20%20%20%20%20%20*%20add%20support%20for%20class%20initialization%20via%20the%20%60_registered%60%20callback.%0A%20%20%20%20%20%20%20*%20This%20is%20called%20only%20when%20the%20first%20instance%20of%20the%20element%20is%20created.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_initializeProperties()%20%7B%0A%20%20%20%20%20%20%20%20let%20proto%20%3D%20Object.getPrototypeOf(this)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!proto.hasOwnProperty(&#39;__hasRegisterFinished&#39;))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._registered()%3B%20%2F%2F%20backstop%20in%20case%20the%20%60_registered%60%20implementation%20does%20not%20set%20this%0A%0A%0A%20%20%20%20%20%20%20%20%20%20proto.__hasRegisterFinished%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20super._initializeProperties()%3B%0A%0A%20%20%20%20%20%20%20%20this.root%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20this%3B%0A%20%20%20%20%20%20%20%20this.created()%3B%20%2F%2F%20Ensure%20listeners%20are%20applied%20immediately%20so%20that%20they%20are%0A%20%20%20%20%20%20%20%20%2F%2F%20added%20before%20declarative%20event%20listeners.%20This%20allows%20an%20element%20to%0A%20%20%20%20%20%20%20%20%2F%2F%20decorate%20itself%20via%20an%20event%20prior%20to%20any%20declarative%20listeners%0A%20%20%20%20%20%20%20%20%2F%2F%20seeing%20the%20event.%20Note%2C%20this%20ensures%20compatibility%20with%201.x%20ordering.%0A%0A%20%20%20%20%20%20%20%20this._applyListeners()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Called%20automatically%20when%20an%20element%20is%20initializing.%0A%20%20%20%20%20%20%20*%20Users%20may%20override%20this%20method%20to%20perform%20class%20registration%20time%0A%20%20%20%20%20%20%20*%20work.%20The%20implementation%20should%20ensure%20the%20work%20is%20performed%0A%20%20%20%20%20%20%20*%20only%20once%20for%20the%20class.%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_registered()%20%7B%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20the%20default%20%60Polymer.PropertyEffects%60%20implementation%20to%0A%20%20%20%20%20%20%20*%20add%20support%20for%20installing%20%60hostAttributes%60%20and%20%60listeners%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%20%40override%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20ready()%20%7B%0A%20%20%20%20%20%20%20%20this._ensureAttributes()%3B%0A%0A%20%20%20%20%20%20%20%20super.ready()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Ensures%20an%20element%20has%20required%20attributes.%20Called%20when%20the%20element%0A%20%20%20%20%20%20%20*%20is%20being%20readied%20via%20%60ready%60.%20Users%20should%20override%20to%20set%20the%0A%20%20%20%20%20%20%20*%20element&#39;s%20required%20attributes.%20The%20implementation%20should%20be%20sure%0A%20%20%20%20%20%20%20*%20to%20check%20and%20not%20override%20existing%20attributes%20added%20by%0A%20%20%20%20%20%20%20*%20the%20user%20of%20the%20element.%20Typically%2C%20setting%20attributes%20should%20be%20left%0A%20%20%20%20%20%20%20*%20to%20the%20element%20user%20and%20not%20done%20here%3B%20reasonable%20exceptions%20include%0A%20%20%20%20%20%20%20*%20setting%20aria%20roles%20and%20focusability.%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_ensureAttributes()%20%7B%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Adds%20element%20event%20listeners.%20Called%20when%20the%20element%0A%20%20%20%20%20%20%20*%20is%20being%20readied%20via%20%60ready%60.%20Users%20should%20override%20to%0A%20%20%20%20%20%20%20*%20add%20any%20required%20element%20event%20listeners.%0A%20%20%20%20%20%20%20*%20In%20performance%20critical%20elements%2C%20the%20work%20done%20here%20should%20be%20kept%0A%20%20%20%20%20%20%20*%20to%20a%20minimum%20since%20it%20is%20done%20before%20the%20element%20is%20rendered.%20In%0A%20%20%20%20%20%20%20*%20these%20elements%2C%20consider%20adding%20listeners%20asynchronously%20so%20as%20not%20to%0A%20%20%20%20%20%20%20*%20block%20render.%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_applyListeners()%20%7B%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Converts%20a%20typed%20JavaScript%20value%20to%20a%20string.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%20this%20method%20is%20provided%20as%20backward-compatible%20legacy%20API%0A%20%20%20%20%20%20%20*%20only.%20%20It%20is%20not%20directly%20called%20by%20any%20Polymer%20features.%20To%20customize%0A%20%20%20%20%20%20%20*%20how%20properties%20are%20serialized%20to%20attributes%20for%20attribute%20bindings%20and%0A%20%20%20%20%20%20%20*%20%60reflectToAttribute%3A%20true%60%20properties%20as%20well%20as%20this%20method%2C%20override%0A%20%20%20%20%20%20%20*%20the%20%60_serializeValue%60%20method%20provided%20by%20%60Polymer.PropertyAccessors%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20deserialize%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%20%7C%20undefined%7D%20Serialized%20value%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20serialize(value)%20%7B%0A%20%20%20%20%20%20%20%20return%20this._serializeValue(value)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Converts%20a%20string%20to%20a%20typed%20JavaScript%20value.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%20this%20method%20is%20provided%20as%20backward-compatible%20legacy%20API%0A%20%20%20%20%20%20%20*%20only.%20%20It%20is%20not%20directly%20called%20by%20any%20Polymer%20features.%20%20To%20customize%0A%20%20%20%20%20%20%20*%20how%20attributes%20are%20deserialized%20to%20properties%20for%20in%0A%20%20%20%20%20%20%20*%20%60attributeChangedCallback%60%2C%20override%20%60_deserializeValue%60%20method%0A%20%20%20%20%20%20%20*%20provided%20by%20%60Polymer.PropertyAccessors%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20value%20String%20to%20deserialize%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20type%20Type%20to%20deserialize%20the%20string%20to%0A%20%20%20%20%20%20%20*%20%40return%20%7B*%7D%20Returns%20the%20deserialized%20value%20in%20the%20%60type%60%20given.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20deserialize(value%2C%20type)%20%7B%0A%20%20%20%20%20%20%20%20return%20this._deserializeValue(value%2C%20type)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Serializes%20a%20property%20to%20its%20associated%20attribute.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%20this%20method%20is%20provided%20as%20backward-compatible%20legacy%20API%0A%20%20%20%20%20%20%20*%20only.%20%20It%20is%20not%20directly%20called%20by%20any%20Polymer%20features.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%20to%20reflect.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%3D%7D%20attribute%20Attribute%20name%20to%20reflect.%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%3D%7D%20value%20Property%20value%20to%20reflect.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20reflectPropertyToAttribute(property%2C%20attribute%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20this._propertyToAttribute(property%2C%20attribute%2C%20value)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Sets%20a%20typed%20value%20to%20an%20HTML%20attribute%20on%20a%20node.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%20this%20method%20is%20provided%20as%20backward-compatible%20legacy%20API%0A%20%20%20%20%20%20%20*%20only.%20%20It%20is%20not%20directly%20called%20by%20any%20Polymer%20features.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20serialize.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20attribute%20Attribute%20name%20to%20serialize%20to.%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%7D%20node%20Element%20to%20set%20attribute%20to.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20serializeValueToAttribute(value%2C%20attribute%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20this._valueToNodeAttribute(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%20%7C%7C%20this%2C%20value%2C%20attribute)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Copies%20own%20properties%20(including%20accessor%20descriptors)%20from%20a%20source%0A%20%20%20%20%20%20%20*%20object%20to%20a%20target%20object.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20prototype%20Target%20object%20to%20copy%20properties%20to.%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20api%20Source%20object%20to%20copy%20properties%20from.%0A%20%20%20%20%20%20%20*%20%40return%20%7BObject%7D%20prototype%20object%20that%20was%20passed%20as%20first%20argument.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20extend(prototype%2C%20api)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!(prototype%20%26%26%20api))%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20prototype%20%7C%7C%20api%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20let%20n%24%20%3D%20Object.getOwnPropertyNames(api)%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20n%3B%20i%20%3C%20n%24.length%20%26%26%20(n%20%3D%20n%24%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20pd%20%3D%20Object.getOwnPropertyDescriptor(api%2C%20n)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(pd)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Object.defineProperty(prototype%2C%20n%2C%20pd)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20prototype%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Copies%20props%20from%20a%20source%20object%20to%20a%20target%20object.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%2C%20this%20method%20uses%20a%20simple%20%60for...in%60%20strategy%20for%20enumerating%0A%20%20%20%20%20%20%20*%20properties.%20%20To%20ensure%20only%20%60ownProperties%60%20are%20copied%20from%20source%0A%20%20%20%20%20%20%20*%20to%20target%20and%20that%20accessor%20implementations%20are%20copied%2C%20use%20%60extend%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20target%20Target%20object%20to%20copy%20properties%20to.%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Object%7D%20source%20Source%20object%20to%20copy%20properties%20from.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Object%7D%20Target%20object%20that%20was%20passed%20as%20first%20argument.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20mixin(target%2C%20source)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20in%20source)%20%7B%0A%20%20%20%20%20%20%20%20%20%20target%5Bi%5D%20%3D%20source%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20target%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Sets%20the%20prototype%20of%20an%20object.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Note%20this%20method%20is%20provided%20as%20backward-compatible%20legacy%20API%0A%20%20%20%20%20%20%20*%20only.%20%20It%20is%20not%20directly%20called%20by%20any%20Polymer%20features.%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20object%20The%20object%20on%20which%20to%20set%20the%20prototype.%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20prototype%20The%20prototype%20that%20will%20be%20set%20on%20the%20given%0A%20%20%20%20%20%20%20*%20%60object%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7BObject%7D%20Returns%20the%20given%20%60object%60%20with%20its%20prototype%20set%0A%20%20%20%20%20%20%20*%20to%20the%20given%20%60prototype%60%20object.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20chainObject(object%2C%20prototype)%20%7B%0A%20%20%20%20%20%20%20%20if%20(object%20%26%26%20prototype%20%26%26%20object%20!%3D%3D%20prototype)%20%7B%0A%20%20%20%20%20%20%20%20%20%20object.__proto__%20%3D%20prototype%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20object%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F*%20****%20Begin%20Template%20****%20*%2F%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Calls%20%60importNode%60%20on%20the%20%60content%60%20of%20the%20%60template%60%20specified%20and%0A%20%20%20%20%20%20%20*%20returns%20a%20document%20fragment%20containing%20the%20imported%20content.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BHTMLTemplateElement%7D%20template%20HTML%20template%20element%20to%20instance.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!DocumentFragment%7D%20Document%20fragment%20containing%20the%20imported%0A%20%20%20%20%20%20%20*%20%20%20template%20content.%0A%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20instanceTemplate(template)%20%7B%0A%20%20%20%20%20%20%20%20let%20content%20%3D%20this.constructor._contentForTemplate(template)%3B%0A%0A%20%20%20%20%20%20%20%20let%20dom%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!DocumentFragment%7D%20*%2F%0A%20%20%20%20%20%20%20%20document.importNode(content%2C%20true)%3B%0A%20%20%20%20%20%20%20%20return%20dom%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F*%20****%20Begin%20Events%20****%20*%2F%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Dispatches%20a%20custom%20event%20with%20an%20optional%20detail%20value.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20type%20Name%20of%20event%20type.%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%3D%7D%20detail%20Detail%20value%20containing%20event-specific%0A%20%20%20%20%20%20%20*%20%20%20payload.%0A%20%20%20%20%20%20%20*%20%40param%20%7B%7B%20bubbles%3A%20(boolean%7Cundefined)%2C%20cancelable%3A%20(boolean%7Cundefined)%2C%20composed%3A%20(boolean%7Cundefined)%20%7D%3D%7D%0A%20%20%20%20%20%20%20*%20%20options%20Object%20specifying%20options.%20%20These%20may%20include%3A%0A%20%20%20%20%20%20%20*%20%20%60bubbles%60%20(boolean%2C%20defaults%20to%20%60true%60)%2C%0A%20%20%20%20%20%20%20*%20%20%60cancelable%60%20(boolean%2C%20defaults%20to%20false)%2C%20and%0A%20%20%20%20%20%20%20*%20%20%60node%60%20on%20which%20to%20fire%20the%20event%20(HTMLElement%2C%20defaults%20to%20%60this%60).%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Event%7D%20The%20new%20event%20that%20was%20fired.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20fire(type%2C%20detail%2C%20options)%20%7B%0A%20%20%20%20%20%20%20%20options%20%3D%20options%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20detail%20%3D%20detail%20%3D%3D%3D%20null%20%7C%7C%20detail%20%3D%3D%3D%20undefined%20%3F%20%7B%7D%20%3A%20detail%3B%0A%20%20%20%20%20%20%20%20let%20event%20%3D%20new%20Event(type%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20bubbles%3A%20options.bubbles%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20options.bubbles%2C%0A%20%20%20%20%20%20%20%20%20%20cancelable%3A%20Boolean(options.cancelable)%2C%0A%20%20%20%20%20%20%20%20%20%20composed%3A%20options.composed%20%3D%3D%3D%20undefined%20%3F%20true%20%3A%20options.composed%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20event.detail%20%3D%20detail%3B%0A%20%20%20%20%20%20%20%20let%20node%20%3D%20options.node%20%7C%7C%20this%3B%0A%20%20%20%20%20%20%20%20node.dispatchEvent(event)%3B%0A%20%20%20%20%20%20%20%20return%20event%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Convenience%20method%20to%20add%20an%20event%20listener%20on%20a%20given%20element%2C%0A%20%20%20%20%20%20%20*%20late%20bound%20to%20a%20named%20method%20on%20this%20element.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%7D%20node%20Element%20to%20add%20event%20listener%20to.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20Name%20of%20event%20to%20listen%20for.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20methodName%20Name%20of%20handler%20method%20on%20%60this%60%20to%20call.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20listen(node%2C%20eventName%2C%20methodName)%20%7B%0A%20%20%20%20%20%20%20%20node%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Element%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%20%7C%7C%20this%3B%0A%20%20%20%20%20%20%20%20let%20hbl%20%3D%20this.__boundListeners%20%7C%7C%20(this.__boundListeners%20%3D%20new%20WeakMap())%3B%0A%20%20%20%20%20%20%20%20let%20bl%20%3D%20hbl.get(node)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!bl)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bl%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20hbl.set(node%2C%20bl)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20let%20key%20%3D%20eventName%20%2B%20methodName%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!bl%5Bkey%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bl%5Bkey%5D%20%3D%20this._addMethodEventListenerToNode(node%2C%20eventName%2C%20methodName%2C%20this)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Convenience%20method%20to%20remove%20an%20event%20listener%20from%20a%20given%20element%2C%0A%20%20%20%20%20%20%20*%20late%20bound%20to%20a%20named%20method%20on%20this%20element.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%7D%20node%20Element%20to%20remove%20event%20listener%20from.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20Name%20of%20event%20to%20stop%20listening%20to.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20methodName%20Name%20of%20handler%20method%20on%20%60this%60%20to%20not%20call%0A%20%20%20%20%20%20%20anymore.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20unlisten(node%2C%20eventName%2C%20methodName)%20%7B%0A%20%20%20%20%20%20%20%20node%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Element%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%20%7C%7C%20this%3B%0A%0A%20%20%20%20%20%20%20%20let%20bl%20%3D%20this.__boundListeners%20%26%26%20this.__boundListeners.get(node)%3B%0A%0A%20%20%20%20%20%20%20%20let%20key%20%3D%20eventName%20%2B%20methodName%3B%0A%20%20%20%20%20%20%20%20let%20handler%20%3D%20bl%20%26%26%20bl%5Bkey%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(handler)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._removeEventListenerFromNode(node%2C%20eventName%2C%20handler)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20bl%5Bkey%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Override%20scrolling%20behavior%20to%20all%20direction%2C%20one%20direction%2C%20or%20none.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20Valid%20scroll%20directions%3A%0A%20%20%20%20%20%20%20*%20%20%20-%20&#39;all&#39;%3A%20scroll%20in%20any%20direction%0A%20%20%20%20%20%20%20*%20%20%20-%20&#39;x&#39;%3A%20scroll%20only%20in%20the%20&#39;x&#39;%20direction%0A%20%20%20%20%20%20%20*%20%20%20-%20&#39;y&#39;%3A%20scroll%20only%20in%20the%20&#39;y&#39;%20direction%0A%20%20%20%20%20%20%20*%20%20%20-%20&#39;none&#39;%3A%20disable%20scrolling%20for%20this%20node%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%3D%7D%20direction%20Direction%20to%20allow%20scrolling%0A%20%20%20%20%20%20%20*%20Defaults%20to%20%60all%60.%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%3D%7D%20node%20Element%20to%20apply%20scroll%20direction%20setting.%0A%20%20%20%20%20%20%20*%20Defaults%20to%20%60this%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20setScrollDirection(direction%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20Polymer.Gestures.setTouchAction(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%20%7C%7C%20this%2C%20DIRECTION_MAP%5Bdirection%5D%20%7C%7C%20&#39;auto&#39;)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F*%20****%20End%20Events%20****%20*%2F%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Convenience%20method%20to%20run%20%60querySelector%60%20on%20this%20local%20DOM%20scope.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20function%20calls%20%60Polymer.dom(this.root).querySelector(slctr)%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20slctr%20Selector%20to%20run%20on%20this%20local%20DOM%20scope%0A%20%20%20%20%20%20%20*%20%40return%20%7BElement%7D%20Element%20found%20by%20the%20selector%2C%20or%20null%20if%20not%20found.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20%24%24(slctr)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.root.querySelector(slctr)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Return%20the%20element%20whose%20local%20dom%20within%20which%20this%20element%0A%20%20%20%20%20%20%20*%20is%20contained.%20This%20is%20a%20shorthand%20for%0A%20%20%20%20%20%20%20*%20%60this.getRootNode().host%60.%0A%20%20%20%20%20%20%20*%20%40this%20%7BElement%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20get%20domHost()%20%7B%0A%20%20%20%20%20%20%20%20let%20root%20%3D%20this.getRootNode()%3B%0A%20%20%20%20%20%20%20%20return%20root%20instanceof%20DocumentFragment%20%3F%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BShadowRoot%7D%20*%2F%0A%20%20%20%20%20%20%20%20root.host%20%3A%20root%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Force%20this%20element%20to%20distribute%20its%20children%20to%20its%20local%20dom.%0A%20%20%20%20%20%20%20*%20This%20should%20not%20be%20necessary%20as%20of%20Polymer%202.0.2%20and%20is%20provided%20only%0A%20%20%20%20%20%20%20*%20for%20backwards%20compatibility.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20distributeContent()%20%7B%0A%20%20%20%20%20%20%20%20if%20(window.ShadyDOM%20%26%26%20this.shadowRoot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ShadyDOM.flush()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20a%20list%20of%20nodes%20that%20are%20the%20effective%20childNodes.%20The%20effective%0A%20%20%20%20%20%20%20*%20childNodes%20list%20is%20the%20same%20as%20the%20element&#39;s%20childNodes%20except%20that%0A%20%20%20%20%20%20%20*%20any%20%60%3Ccontent%3E%60%20elements%20are%20replaced%20with%20the%20list%20of%20nodes%20distributed%0A%20%20%20%20%20%20%20*%20to%20the%20%60%3Ccontent%3E%60%2C%20the%20result%20of%20its%20%60getDistributedNodes%60%20method.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Array%3C!Node%3E%7D%20List%20of%20effective%20child%20nodes.%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%20LegacyElementMixin%20must%20be%20applied%20to%20an%20HTMLElement%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20getEffectiveChildNodes()%20%7B%0A%20%20%20%20%20%20%20%20const%20thisEl%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20this%3B%0A%20%20%20%20%20%20%20%20const%20domApi%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymer.DomApi%7D%20*%2F%0A%20%20%20%20%20%20%20%20Polymer.dom(thisEl)%3B%0A%20%20%20%20%20%20%20%20return%20domApi.getEffectiveChildNodes()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20a%20list%20of%20nodes%20distributed%20within%20this%20element%20that%20match%0A%20%20%20%20%20%20%20*%20%60selector%60.%20These%20can%20be%20dom%20children%20or%20elements%20distributed%20to%0A%20%20%20%20%20%20%20*%20children%20that%20are%20insertion%20points.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20selector%20Selector%20to%20run.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Array%3C!Node%3E%7D%20List%20of%20distributed%20elements%20that%20match%20selector.%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%20LegacyElementMixin%20must%20be%20applied%20to%20an%20HTMLElement%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20queryDistributedElements(selector)%20%7B%0A%20%20%20%20%20%20%20%20const%20thisEl%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20this%3B%0A%20%20%20%20%20%20%20%20const%20domApi%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymer.DomApi%7D%20*%2F%0A%20%20%20%20%20%20%20%20Polymer.dom(thisEl)%3B%0A%20%20%20%20%20%20%20%20return%20domApi.queryDistributedElements(selector)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20a%20list%20of%20elements%20that%20are%20the%20effective%20children.%20The%20effective%0A%20%20%20%20%20%20%20*%20children%20list%20is%20the%20same%20as%20the%20element&#39;s%20children%20except%20that%0A%20%20%20%20%20%20%20*%20any%20%60%3Ccontent%3E%60%20elements%20are%20replaced%20with%20the%20list%20of%20elements%0A%20%20%20%20%20%20%20*%20distributed%20to%20the%20%60%3Ccontent%3E%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Array%3C!Node%3E%7D%20List%20of%20effective%20children.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20getEffectiveChildren()%20%7B%0A%20%20%20%20%20%20%20%20let%20list%20%3D%20this.getEffectiveChildNodes()%3B%0A%20%20%20%20%20%20%20%20return%20list.filter(function%20(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Node%7D%20*%2F%0A%20%20%20%20%20%20%20%20n)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20n.nodeType%20%3D%3D%3D%20Node.ELEMENT_NODE%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20a%20string%20of%20text%20content%20that%20is%20the%20concatenation%20of%20the%0A%20%20%20%20%20%20%20*%20text%20content&#39;s%20of%20the%20element&#39;s%20effective%20childNodes%20(the%20elements%0A%20%20%20%20%20%20%20*%20returned%20by%20%3Ca%20href%3D%22%23getEffectiveChildNodes%3EgetEffectiveChildNodes%3C%2Fa%3E.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%7D%20List%20of%20effective%20children.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20getEffectiveTextContent()%20%7B%0A%20%20%20%20%20%20%20%20let%20cn%20%3D%20this.getEffectiveChildNodes()%3B%0A%20%20%20%20%20%20%20%20let%20tc%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20c%3B%20c%20%3D%20cn%5Bi%5D%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(c.nodeType%20!%3D%3D%20Node.COMMENT_NODE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tc.push(c.textContent)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20tc.join(&#39;&#39;)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20the%20first%20effective%20childNode%20within%20this%20element%20that%0A%20%20%20%20%20%20%20*%20match%20%60selector%60.%20These%20can%20be%20dom%20child%20nodes%20or%20elements%20distributed%0A%20%20%20%20%20%20%20*%20to%20children%20that%20are%20insertion%20points.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20selector%20Selector%20to%20run.%0A%20%20%20%20%20%20%20*%20%40return%20%7BNode%7D%20First%20effective%20child%20node%20that%20matches%20selector.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20queryEffectiveChildren(selector)%20%7B%0A%20%20%20%20%20%20%20%20let%20e%24%20%3D%20this.queryDistributedElements(selector)%3B%0A%20%20%20%20%20%20%20%20return%20e%24%20%26%26%20e%24%5B0%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20a%20list%20of%20effective%20childNodes%20within%20this%20element%20that%0A%20%20%20%20%20%20%20*%20match%20%60selector%60.%20These%20can%20be%20dom%20child%20nodes%20or%20elements%20distributed%0A%20%20%20%20%20%20%20*%20to%20children%20that%20are%20insertion%20points.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20selector%20Selector%20to%20run.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Array%3C!Node%3E%7D%20List%20of%20effective%20child%20nodes%20that%20match%20selector.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20queryAllEffectiveChildren(selector)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.queryDistributedElements(selector)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20a%20list%20of%20nodes%20distributed%20to%20this%20element&#39;s%20%60%3Cslot%3E%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20If%20this%20element%20contains%20more%20than%20one%20%60%3Cslot%3E%60%20in%20its%20local%20DOM%2C%0A%20%20%20%20%20%20%20*%20an%20optional%20selector%20may%20be%20passed%20to%20choose%20the%20desired%20content.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%3D%7D%20slctr%20CSS%20selector%20to%20choose%20the%20desired%0A%20%20%20%20%20%20%20*%20%20%20%60%3Cslot%3E%60.%20%20Defaults%20to%20%60content%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Array%3C!Node%3E%7D%20List%20of%20distributed%20nodes%20for%20the%20%60%3Cslot%3E%60.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20getContentChildNodes(slctr)%20%7B%0A%20%20%20%20%20%20%20%20let%20content%20%3D%20this.root.querySelector(slctr%20%7C%7C%20&#39;slot&#39;)%3B%0A%20%20%20%20%20%20%20%20return%20content%20%3F%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BPolymer.DomApi%7D%20*%2F%0A%20%20%20%20%20%20%20%20Polymer.dom(content).getDistributedNodes()%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20a%20list%20of%20element%20children%20distributed%20to%20this%20element&#39;s%0A%20%20%20%20%20%20%20*%20%60%3Cslot%3E%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20If%20this%20element%20contains%20more%20than%20one%20%60%3Cslot%3E%60%20in%20its%0A%20%20%20%20%20%20%20*%20local%20DOM%2C%20an%20optional%20selector%20may%20be%20passed%20to%20choose%20the%20desired%0A%20%20%20%20%20%20%20*%20content.%20%20This%20method%20differs%20from%20%60getContentChildNodes%60%20in%20that%20only%0A%20%20%20%20%20%20%20*%20elements%20are%20returned.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%3D%7D%20slctr%20CSS%20selector%20to%20choose%20the%20desired%0A%20%20%20%20%20%20%20*%20%20%20%60%3Ccontent%3E%60.%20%20Defaults%20to%20%60content%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Array%3C!HTMLElement%3E%7D%20List%20of%20distributed%20nodes%20for%20the%0A%20%20%20%20%20%20%20*%20%20%20%60%3Cslot%3E%60.%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20getContentChildren(slctr)%20%7B%0A%20%20%20%20%20%20%20%20let%20children%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Array%3C!HTMLElement%3E%7D%20*%2F%0A%20%20%20%20%20%20%20%20this.getContentChildNodes(slctr).filter(function%20(n)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20n.nodeType%20%3D%3D%3D%20Node.ELEMENT_NODE%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20return%20children%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Checks%20whether%20an%20element%20is%20in%20this%20element&#39;s%20light%20DOM%20tree.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3FNode%7D%20node%20The%20element%20to%20be%20checked.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20true%20if%20node%20is%20in%20this%20element&#39;s%20light%20DOM%20tree.%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%20LegacyElementMixin%20must%20be%20applied%20to%20an%20HTMLElement%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20isLightDescendant(node)%20%7B%0A%20%20%20%20%20%20%20%20const%20thisNode%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BNode%7D%20*%2F%0A%20%20%20%20%20%20%20%20this%3B%0A%20%20%20%20%20%20%20%20return%20thisNode%20!%3D%3D%20node%20%26%26%20thisNode.contains(node)%20%26%26%20thisNode.getRootNode()%20%3D%3D%3D%20node.getRootNode()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Checks%20whether%20an%20element%20is%20in%20this%20element&#39;s%20local%20DOM%20tree.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Element%7D%20node%20The%20element%20to%20be%20checked.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20true%20if%20node%20is%20in%20this%20element&#39;s%20local%20DOM%20tree.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20isLocalDescendant(node)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.root%20%3D%3D%3D%20node.getRootNode()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20No-op%20for%20backwards%20compatibility.%20This%20should%20now%20be%20handled%20by%0A%20%20%20%20%20%20%20*%20ShadyCss%20library.%0A%20%20%20%20%20%20%20*%20%40param%20%20%7B*%7D%20container%20Unused%0A%20%20%20%20%20%20%20*%20%40param%20%20%7B*%7D%20shouldObserve%20Unused%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20scopeSubtree(container%2C%20shouldObserve)%20%7B%7D%20%2F%2F%20eslint-disable-line%20no-unused-vars%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20the%20computed%20style%20value%20for%20the%20given%20property.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20The%20css%20property%20name.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bstring%7D%20Returns%20the%20computed%20css%20property%20value%20for%20the%20given%0A%20%20%20%20%20%20%20*%20%60property%60.%0A%20%20%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%20LegacyElementMixin%20must%20be%20applied%20to%20an%20HTMLElement%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20getComputedStyleValue(property)%20%7B%0A%20%20%20%20%20%20%20%20return%20styleInterface.getComputedStyleValue(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Element%7D%20*%2F%0A%20%20%20%20%20%20%20%20this%2C%20property)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20debounce%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Call%20%60debounce%60%20to%20collapse%20multiple%20requests%20for%20a%20named%20task%20into%0A%20%20%20%20%20%20%20*%20one%20invocation%20which%20is%20made%20after%20the%20wait%20time%20has%20elapsed%20with%0A%20%20%20%20%20%20%20*%20no%20new%20request.%20%20If%20no%20wait%20time%20is%20given%2C%20the%20callback%20will%20be%20called%0A%20%20%20%20%20%20%20*%20at%20microtask%20timing%20(guaranteed%20before%20paint).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%20%20%20%20debouncedClickAction(e)%20%7B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%2F%2F%20will%20not%20call%20%60processClick%60%20more%20than%20once%20per%20100ms%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20this.debounce(&#39;click&#39;%2C%20function()%20%7B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%20this.processClick()%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%20%20%7D%20100)%3B%0A%20%20%20%20%20%20%20*%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20jobName%20String%20to%20identify%20the%20debounce%20job.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bfunction()%3Avoid%7D%20callback%20Function%20that%20is%20called%20(with%20%60this%60%0A%20%20%20%20%20%20%20*%20%20%20context)%20when%20the%20wait%20time%20elapses.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20wait%20Optional%20wait%20time%20in%20milliseconds%20(ms)%20after%20the%0A%20%20%20%20%20%20%20*%20%20%20last%20signal%20that%20must%20elapse%20before%20invoking%20%60callback%60%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Object%7D%20Returns%20a%20debouncer%20object%20on%20which%20exists%20the%0A%20%20%20%20%20%20%20*%20following%20methods%3A%20%60isActive()%60%20returns%20true%20if%20the%20debouncer%20is%0A%20%20%20%20%20%20%20*%20active%3B%20%60cancel()%60%20cancels%20the%20debouncer%20if%20it%20is%20active%3B%0A%20%20%20%20%20%20%20*%20%60flush()%60%20immediately%20invokes%20the%20debounced%20callback%20if%20the%20debouncer%0A%20%20%20%20%20%20%20*%20is%20active.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20debounce(jobName%2C%20callback%2C%20wait)%20%7B%0A%20%20%20%20%20%20%20%20this._debouncers%20%3D%20this._debouncers%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20return%20this._debouncers%5BjobName%5D%20%3D%20Polymer.Debouncer.debounce(this._debouncers%5BjobName%5D%2C%20wait%20%3E%200%20%3F%20Polymer.Async.timeOut.after(wait)%20%3A%20Polymer.Async.microTask%2C%20callback.bind(this))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20whether%20a%20named%20debouncer%20is%20active.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20jobName%20The%20name%20of%20the%20debouncer%20started%20with%20%60debounce%60%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20debouncer%20is%20active%20(has%20not%20yet%20fired).%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20isDebouncerActive(jobName)%20%7B%0A%20%20%20%20%20%20%20%20this._debouncers%20%3D%20this._debouncers%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20let%20debouncer%20%3D%20this._debouncers%5BjobName%5D%3B%0A%20%20%20%20%20%20%20%20return%20!!(debouncer%20%26%26%20debouncer.isActive())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Immediately%20calls%20the%20debouncer%20%60callback%60%20and%20inactivates%20it.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20jobName%20The%20name%20of%20the%20debouncer%20started%20with%20%60debounce%60%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20flushDebouncer(jobName)%20%7B%0A%20%20%20%20%20%20%20%20this._debouncers%20%3D%20this._debouncers%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20let%20debouncer%20%3D%20this._debouncers%5BjobName%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(debouncer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20debouncer.flush()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Cancels%20an%20active%20debouncer.%20%20The%20%60callback%60%20will%20not%20be%20called.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20jobName%20The%20name%20of%20the%20debouncer%20started%20with%20%60debounce%60%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20cancelDebouncer(jobName)%20%7B%0A%20%20%20%20%20%20%20%20this._debouncers%20%3D%20this._debouncers%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20let%20debouncer%20%3D%20this._debouncers%5BjobName%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(debouncer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20debouncer.cancel()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Runs%20a%20callback%20function%20asynchronously.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20By%20default%20(if%20no%20waitTime%20is%20specified)%2C%20async%20callbacks%20are%20run%20at%0A%20%20%20%20%20%20%20*%20microtask%20timing%2C%20which%20will%20occur%20before%20paint.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Function%7D%20callback%20The%20callback%20function%20to%20run%2C%20bound%20to%20%60this%60.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%3D%7D%20waitTime%20Time%20to%20wait%20before%20calling%20the%0A%20%20%20%20%20%20%20*%20%20%20%60callback%60.%20%20If%20unspecified%20or%200%2C%20the%20callback%20will%20be%20run%20at%20microtask%0A%20%20%20%20%20%20%20*%20%20%20timing%20(before%20paint).%0A%20%20%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20Handle%20that%20may%20be%20used%20to%20cancel%20the%20async%20job.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20async(callback%2C%20waitTime)%20%7B%0A%20%20%20%20%20%20%20%20return%20waitTime%20%3E%200%20%3F%20Polymer.Async.timeOut.run(callback.bind(this)%2C%20waitTime)%20%3A%20~Polymer.Async.microTask.run(callback.bind(this))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Cancels%20an%20async%20operation%20started%20with%20%60async%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20handle%20Handle%20returned%20from%20original%20%60async%60%20call%20to%0A%20%20%20%20%20%20%20*%20%20%20cancel.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20cancelAsync(handle)%20%7B%0A%20%20%20%20%20%20%20%20handle%20%3C%200%20%3F%20Polymer.Async.microTask.cancel(~handle)%20%3A%20Polymer.Async.timeOut.cancel(handle)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20other%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Convenience%20method%20for%20creating%20an%20element%20and%20configuring%20it.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20tag%20HTML%20element%20tag%20to%20create.%0A%20%20%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20props%20Object%20of%20properties%20to%20configure%20on%20the%0A%20%20%20%20%20%20%20*%20%20%20%20instance.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!Element%7D%20Newly%20created%20and%20configured%20element.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20create(tag%2C%20props)%20%7B%0A%20%20%20%20%20%20%20%20let%20elt%20%3D%20document.createElement(tag)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(elt.setProperties)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20elt.setProperties(props)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20n%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20elt%5Bn%5D%20%3D%20props%5Bn%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20elt%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Convenience%20method%20for%20importing%20an%20HTML%20document%20imperatively.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20creates%20a%20new%20%60%3Clink%20rel%3D%22import%22%3E%60%20element%20with%0A%20%20%20%20%20%20%20*%20the%20provided%20URL%20and%20appends%20it%20to%20the%20document%20to%20start%20loading.%0A%20%20%20%20%20%20%20*%20In%20the%20%60onload%60%20callback%2C%20the%20%60import%60%20property%20of%20the%20%60link%60%0A%20%20%20%20%20%20%20*%20element%20will%20contain%20the%20imported%20document%20contents.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20href%20URL%20to%20document%20to%20load.%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Ffunction(!Event)%3Avoid%3D%7D%20onload%20Callback%20to%20notify%20when%20an%20import%20successfully%0A%20%20%20%20%20%20%20*%20%20%20loaded.%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Ffunction(!ErrorEvent)%3Avoid%3D%7D%20onerror%20Callback%20to%20notify%20when%20an%20import%0A%20%20%20%20%20%20%20*%20%20%20unsuccessfully%20loaded.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20optAsync%20True%20if%20the%20import%20should%20be%20loaded%20%60async%60.%0A%20%20%20%20%20%20%20*%20%20%20Defaults%20to%20%60false%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7B!HTMLLinkElement%7D%20The%20link%20element%20for%20the%20URL%20to%20be%20loaded.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20importHref(href%2C%20onload%2C%20onerror%2C%20optAsync)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20eslint-disable-line%20no-unused-vars%0A%20%20%20%20%20%20%20%20let%20loadFn%20%3D%20onload%20%3F%20onload.bind(this)%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20let%20errorFn%20%3D%20onerror%20%3F%20onerror.bind(this)%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20return%20Polymer.importHref(href%2C%20loadFn%2C%20errorFn%2C%20optAsync)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Polyfill%20for%20Element.prototype.matches%2C%20which%20is%20sometimes%20still%0A%20%20%20%20%20%20%20*%20prefixed.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20selector%20Selector%20to%20test.%0A%20%20%20%20%20%20%20*%20%40param%20%7B!Element%3D%7D%20node%20Element%20to%20test%20the%20selector%20against.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20element%20matches%20the%20selector.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20elementMatches(selector%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20return%20Polymer.dom.matchesSelector(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B!Element%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%20%7C%7C%20this%2C%20selector)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Toggles%20an%20HTML%20attribute%20on%20or%20off.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20HTML%20attribute%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20bool%20Boolean%20to%20force%20the%20attribute%20on%20or%20off.%0A%20%20%20%20%20%20%20*%20%20%20%20When%20unspecified%2C%20the%20state%20of%20the%20attribute%20will%20be%20reversed.%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%3D%7D%20node%20Node%20to%20target.%20%20Defaults%20to%20%60this%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20toggleAttribute(name%2C%20bool%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20node%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%20%7C%7C%20this%3B%0A%0A%20%20%20%20%20%20%20%20if%20(arguments.length%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bool%20%3D%20!node.hasAttribute(name)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node.setAttribute(name%2C%20&#39;&#39;)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node.removeAttribute(name)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Toggles%20a%20CSS%20class%20on%20or%20off.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20CSS%20class%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20bool%20Boolean%20to%20force%20the%20class%20on%20or%20off.%0A%20%20%20%20%20%20%20*%20%20%20%20When%20unspecified%2C%20the%20state%20of%20the%20class%20will%20be%20reversed.%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%3D%7D%20node%20Node%20to%20target.%20%20Defaults%20to%20%60this%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20toggleClass(name%2C%20bool%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20node%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%20%7C%7C%20this%3B%0A%0A%20%20%20%20%20%20%20%20if%20(arguments.length%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bool%20%3D%20!node.classList.contains(name)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node.classList.add(name)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node.classList.remove(name)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Cross-platform%20helper%20for%20setting%20an%20element&#39;s%20CSS%20%60transform%60%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20transformText%20Transform%20setting.%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%3D%7D%20node%20Element%20to%20apply%20the%20transform%20to.%0A%20%20%20%20%20%20%20*%20Defaults%20to%20%60this%60%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20transform(transformText%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20node%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%20%7C%7C%20this%3B%0A%20%20%20%20%20%20%20%20node.style.webkitTransform%20%3D%20transformText%3B%0A%20%20%20%20%20%20%20%20node.style.transform%20%3D%20transformText%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Cross-platform%20helper%20for%20setting%20an%20element&#39;s%20CSS%20%60translate3d%60%0A%20%20%20%20%20%20%20*%20property.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20x%20X%20offset.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20y%20Y%20offset.%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20z%20Z%20offset.%0A%20%20%20%20%20%20%20*%20%40param%20%7BElement%3D%7D%20node%20Element%20to%20apply%20the%20transform%20to.%0A%20%20%20%20%20%20%20*%20Defaults%20to%20%60this%60.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20translate3d(x%2C%20y%2C%20z%2C%20node)%20%7B%0A%20%20%20%20%20%20%20%20node%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20node%20%7C%7C%20this%3B%0A%20%20%20%20%20%20%20%20this.transform(&#39;translate3d(&#39;%20%2B%20x%20%2B%20&#39;%2C&#39;%20%2B%20y%20%2B%20&#39;%2C&#39;%20%2B%20z%20%2B%20&#39;)&#39;%2C%20node)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Removes%20an%20item%20from%20an%20array%2C%20if%20it%20exists.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20If%20the%20array%20is%20specified%20by%20path%2C%20a%20change%20notification%20is%0A%20%20%20%20%20%20%20*%20generated%2C%20so%20that%20observers%2C%20data%20bindings%20and%20computed%0A%20%20%20%20%20%20%20*%20properties%20watching%20that%20path%20can%20update.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20If%20the%20array%20is%20passed%20directly%2C%20**no%20change%0A%20%20%20%20%20%20%20*%20notification%20is%20generated**.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%20%7C%20!Array%3Cnumber%7Cstring%3E%7D%20arrayOrPath%20Path%20to%20array%20from%20which%20to%20remove%20the%20item%0A%20%20%20%20%20%20%20*%20%20%20(or%20the%20array%20itself).%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20item%20Item%20to%20remove.%0A%20%20%20%20%20%20%20*%20%40return%20%7BArray%7D%20Array%20containing%20item%20removed.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20arrayDelete(arrayOrPath%2C%20item)%20%7B%0A%20%20%20%20%20%20%20%20let%20index%3B%0A%0A%20%20%20%20%20%20%20%20if%20(Array.isArray(arrayOrPath))%20%7B%0A%20%20%20%20%20%20%20%20%20%20index%20%3D%20arrayOrPath.indexOf(item)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(index%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20arrayOrPath.splice(index%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20arr%20%3D%20Polymer.Path.get(this%2C%20arrayOrPath)%3B%0A%20%20%20%20%20%20%20%20%20%20index%20%3D%20arr.indexOf(item)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(index%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20this.splice(arrayOrPath%2C%20index%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20logging%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Facades%20%60console.log%60%2F%60warn%60%2F%60error%60%20as%20override%20point.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20level%20One%20of%20&#39;log&#39;%2C%20&#39;warn&#39;%2C%20&#39;error&#39;%0A%20%20%20%20%20%20%20*%20%40param%20%7BArray%7D%20args%20Array%20of%20strings%20or%20objects%20to%20log%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_logger(level%2C%20args)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20accept%20%5B&#39;foo&#39;%2C%20&#39;bar&#39;%5D%20and%20%5B%5B&#39;foo&#39;%2C%20&#39;bar&#39;%5D%5D%0A%20%20%20%20%20%20%20%20if%20(Array.isArray(args)%20%26%26%20args.length%20%3D%3D%3D%201%20%26%26%20Array.isArray(args%5B0%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20args%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20switch%20(level)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20&#39;log&#39;%3A%0A%20%20%20%20%20%20%20%20%20%20case%20&#39;warn&#39;%3A%0A%20%20%20%20%20%20%20%20%20%20case%20&#39;error&#39;%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20console%5Blevel%5D(...args)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Facades%20%60console.log%60%20as%20an%20override%20point.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B...*%7D%20args%20Array%20of%20strings%20or%20objects%20to%20log%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_log(...args)%20%7B%0A%20%20%20%20%20%20%20%20this._logger(&#39;log&#39;%2C%20args)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Facades%20%60console.warn%60%20as%20an%20override%20point.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B...*%7D%20args%20Array%20of%20strings%20or%20objects%20to%20log%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_warn(...args)%20%7B%0A%20%20%20%20%20%20%20%20this._logger(&#39;warn&#39;%2C%20args)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Facades%20%60console.error%60%20as%20an%20override%20point.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B...*%7D%20args%20Array%20of%20strings%20or%20objects%20to%20log%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_error(...args)%20%7B%0A%20%20%20%20%20%20%20%20this._logger(&#39;error&#39;%2C%20args)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Formats%20a%20message%20using%20the%20element%20type%20an%20a%20method%20name.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20methodName%20Method%20name%20to%20associate%20with%20message%0A%20%20%20%20%20%20%20*%20%40param%20%7B...*%7D%20args%20Array%20of%20strings%20or%20objects%20to%20log%0A%20%20%20%20%20%20%20*%20%40return%20%7BArray%7D%20Array%20with%20formatting%20information%20for%20%60console%60%0A%20%20%20%20%20%20%20*%20%20%20logging.%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_logf(methodName%2C%20...args)%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B&#39;%5B%25s%3A%3A%25s%5D&#39;%2C%20this.is%2C%20methodName%2C%20...args%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20LegacyElement.prototype.is%20%3D%20&#39;&#39;%3B%0A%20%20%20%20return%20LegacyElement%3B%0A%20%20%7D)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Flegacy%2Flegacy-element-mixin.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/legacy/polymer-fn.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/legacy/class.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/legacy/legacy-element-mixin.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20const%20lifecycleProps%20%3D%20%7B%0A%20%20%20%20attached%3A%20true%2C%0A%20%20%20%20detached%3A%20true%2C%0A%20%20%20%20ready%3A%20true%2C%0A%20%20%20%20created%3A%20true%2C%0A%20%20%20%20beforeRegister%3A%20true%2C%0A%20%20%20%20registered%3A%20true%2C%0A%20%20%20%20attributeChanged%3A%20true%2C%0A%20%20%20%20listeners%3A%20true%2C%0A%20%20%20%20hostAttributes%3A%20true%0A%20%20%7D%3B%0A%20%20const%20excludeOnInfo%20%3D%20%7B%0A%20%20%20%20attached%3A%20true%2C%0A%20%20%20%20detached%3A%20true%2C%0A%20%20%20%20ready%3A%20true%2C%0A%20%20%20%20created%3A%20true%2C%0A%20%20%20%20beforeRegister%3A%20true%2C%0A%20%20%20%20registered%3A%20true%2C%0A%20%20%20%20attributeChanged%3A%20true%2C%0A%20%20%20%20behaviors%3A%20true%2C%0A%20%20%20%20_noAccessors%3A%20true%0A%20%20%7D%3B%0A%20%20const%20excludeOnBehaviors%20%3D%20Object.assign(%7B%0A%20%20%20%20listeners%3A%20true%2C%0A%20%20%20%20hostAttributes%3A%20true%2C%0A%20%20%20%20properties%3A%20true%2C%0A%20%20%20%20observers%3A%20true%0A%20%20%7D%2C%20excludeOnInfo)%3B%0A%0A%20%20function%20copyProperties(source%2C%20target%2C%20excludeProps)%20%7B%0A%20%20%20%20const%20noAccessors%20%3D%20source._noAccessors%3B%0A%20%20%20%20const%20propertyNames%20%3D%20Object.getOwnPropertyNames(source)%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20propertyNames.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20let%20p%20%3D%20propertyNames%5Bi%5D%3B%0A%0A%20%20%20%20%20%20if%20(p%20in%20excludeProps)%20%7B%0A%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(noAccessors)%20%7B%0A%20%20%20%20%20%20%20%20target%5Bp%5D%20%3D%20source%5Bp%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20let%20pd%20%3D%20Object.getOwnPropertyDescriptor(source%2C%20p)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(pd)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20ensure%20property%20is%20configurable%20so%20that%20a%20later%20behavior%20can%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20re-configure%20it.%0A%20%20%20%20%20%20%20%20%20%20pd.configurable%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20Object.defineProperty(target%2C%20p%2C%20pd)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Applies%20a%20%22legacy%22%20behavior%20or%20array%20of%20behaviors%20to%20the%20provided%20class.%0A%20%20%20*%0A%20%20%20*%20Note%3A%20this%20method%20will%20automatically%20also%20apply%20the%20%60Polymer.LegacyElementMixin%60%0A%20%20%20*%20to%20ensure%20that%20any%20legacy%20behaviors%20can%20rely%20on%20legacy%20Polymer%20API%20on%0A%20%20%20*%20the%20underlying%20element.%0A%20%20%20*%0A%20%20%20*%20%40template%20T%0A%20%20%20*%20%40param%20%7B!Object%7C!Array%3C!Object%3E%7D%20behaviors%20Behavior%20object%20or%20array%20of%20behaviors.%0A%20%20%20*%20%40param%20%7Bfunction(new%3AT)%7D%20klass%20Element%20class.%0A%20%20%20*%20%40return%20%7Bfunction(new%3AT)%7D%20Returns%20a%20new%20Element%20class%20extended%20by%20the%0A%20%20%20*%20passed%20in%20%60behaviors%60%20and%20also%20by%20%60Polymer.LegacyElementMixin%60.%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40suppress%20%7BinvalidCasts%2C%20checkTypes%7D%0A%20%20%20*%2F%0A%0A%0A%20%20function%20mixinBehaviors(behaviors%2C%20klass)%20%7B%0A%20%20%20%20return%20GenerateClassFromInfo(%7B%7D%2C%20Polymer.LegacyElementMixin(klass)%2C%20behaviors)%3B%0A%20%20%7D%20%2F%2F%20NOTE%3A%0A%20%20%2F%2F%201.x%0A%20%20%2F%2F%20Behaviors%20were%20mixed%20in%20*in%20reverse%20order*%20and%20de-duped%20on%20the%20fly.%0A%20%20%2F%2F%20The%20rule%20was%20that%20behavior%20properties%20were%20copied%20onto%20the%20element%0A%20%20%2F%2F%20prototype%20if%20and%20only%20if%20the%20property%20did%20not%20already%20exist.%0A%20%20%2F%2F%20Given%3A%20Polymer%7B%20behaviors%3A%20%5BA%2C%20B%2C%20C%2C%20A%2C%20B%5D%7D%2C%20property%20copy%20order%20was%3A%0A%20%20%2F%2F%20(1)%2C%20B%2C%20(2)%2C%20A%2C%20(3)%20C.%20This%20means%20prototype%20properties%20win%20over%0A%20%20%2F%2F%20B%20properties%20win%20over%20A%20win%20over%20C.%20This%20mirrors%20what%20would%20happen%0A%20%20%2F%2F%20with%20inheritance%20if%20element%20extended%20B%20extended%20A%20extended%20C.%0A%20%20%2F%2F%0A%20%20%2F%2F%20Again%20given%2C%20Polymer%7B%20behaviors%3A%20%5BA%2C%20B%2C%20C%2C%20A%2C%20B%5D%7D%2C%20the%20resulting%0A%20%20%2F%2F%20%60behaviors%60%20array%20was%20%5BC%2C%20A%2C%20B%5D.%0A%20%20%2F%2F%20Behavior%20lifecycle%20methods%20were%20called%20in%20behavior%20array%20order%0A%20%20%2F%2F%20followed%20by%20the%20element%2C%20e.g.%20(1)%20C.created%2C%20(2)%20A.created%2C%0A%20%20%2F%2F%20(3)%20B.created%2C%20(4)%20element.created.%20There%20was%20no%20support%20for%0A%20%20%2F%2F%20super%2C%20and%20%22super-behavior%22%20methods%20were%20callable%20only%20by%20name).%0A%20%20%2F%2F%0A%20%20%2F%2F%202.x%0A%20%20%2F%2F%20Behaviors%20are%20made%20into%20proper%20mixins%20which%20live%20in%20the%0A%20%20%2F%2F%20element&#39;s%20prototype%20chain.%20Behaviors%20are%20placed%20in%20the%20element%20prototype%0A%20%20%2F%2F%20eldest%20to%20youngest%20and%20de-duped%20youngest%20to%20oldest%3A%0A%20%20%2F%2F%20So%2C%20first%20%5BA%2C%20B%2C%20C%2C%20A%2C%20B%5D%20becomes%20%5BC%2C%20A%2C%20B%5D%20then%2C%0A%20%20%2F%2F%20the%20element%20prototype%20becomes%20(oldest)%20(1)%20Polymer.Element%2C%20(2)%20class(C)%2C%0A%20%20%2F%2F%20(3)%20class(A)%2C%20(4)%20class(B)%2C%20(5)%20class(Polymer(%7B...%7D)).%0A%20%20%2F%2F%20Result%3A%0A%20%20%2F%2F%20This%20means%20element%20properties%20win%20over%20B%20properties%20win%20over%20A%20win%0A%20%20%2F%2F%20over%20C.%20(same%20as%201.x)%0A%20%20%2F%2F%20If%20lifecycle%20is%20called%20(super%20then%20me)%2C%20order%20is%0A%20%20%2F%2F%20(1)%20C.created%2C%20(2)%20A.created%2C%20(3)%20B.created%2C%20(4)%20element.created%0A%20%20%2F%2F%20(again%20same%20as%201.x)%0A%0A%0A%20%20function%20applyBehaviors(proto%2C%20behaviors%2C%20lifecycle)%20%7B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20behaviors.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20applyInfo(proto%2C%20behaviors%5Bi%5D%2C%20lifecycle%2C%20excludeOnBehaviors)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20applyInfo(proto%2C%20info%2C%20lifecycle%2C%20excludeProps)%20%7B%0A%20%20%20%20copyProperties(info%2C%20proto%2C%20excludeProps)%3B%0A%0A%20%20%20%20for%20(let%20p%20in%20lifecycleProps)%20%7B%0A%20%20%20%20%20%20if%20(info%5Bp%5D)%20%7B%0A%20%20%20%20%20%20%20%20lifecycle%5Bp%5D%20%3D%20lifecycle%5Bp%5D%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20lifecycle%5Bp%5D.push(info%5Bp%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BArray%7D%20behaviors%20List%20of%20behaviors%20to%20flatten.%0A%20%20%20*%20%40param%20%7BArray%3D%7D%20list%20Target%20list%20to%20flatten%20behaviors%20into.%0A%20%20%20*%20%40param%20%7BArray%3D%7D%20exclude%20List%20of%20behaviors%20to%20exclude%20from%20the%20list.%0A%20%20%20*%20%40return%20%7B!Array%7D%20Returns%20the%20list%20of%20flattened%20behaviors.%0A%20%20%20*%2F%0A%0A%0A%20%20function%20flattenBehaviors(behaviors%2C%20list%2C%20exclude)%20%7B%0A%20%20%20%20list%20%3D%20list%20%7C%7C%20%5B%5D%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%20behaviors.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0A%20%20%20%20%20%20let%20b%20%3D%20behaviors%5Bi%5D%3B%0A%0A%20%20%20%20%20%20if%20(b)%20%7B%0A%20%20%20%20%20%20%20%20if%20(Array.isArray(b))%20%7B%0A%20%20%20%20%20%20%20%20%20%20flattenBehaviors(b%2C%20list)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20dedup%0A%20%20%20%20%20%20%20%20%20%20if%20(list.indexOf(b)%20%3C%200%20%26%26%20(!exclude%20%7C%7C%20exclude.indexOf(b)%20%3C%200))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20list.unshift(b)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20console.warn(&#39;behavior%20is%20null%2C%20check%20for%20missing%20or%20404%20import&#39;)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20list%3B%0A%20%20%7D%0A%20%20%2F*%20Note%20about%20construction%20and%20extension%20of%20legacy%20classes.%0A%20%20%20%20%5BChanged%20in%20Q4%202018%20to%20optimize%20performance.%5D%0A%20%20%20%20%20When%20calling%20%60Polymer%60%20or%20%60mixinBehaviors%60%2C%20the%20generated%20class%20below%20is%0A%20%20%20%20made.%20The%20list%20of%20behaviors%20was%20previously%20made%20into%20one%20generated%20class%20per%0A%20%20%20%20behavior%2C%20but%20this%20is%20no%20longer%20the%20case%20as%20behaviors%20are%20now%20called%0A%20%20%20%20manually.%20Note%2C%20there%20may%20*still*%20be%20multiple%20generated%20classes%20in%20the%0A%20%20%20%20element&#39;s%20prototype%20chain%20if%20extension%20is%20used%20with%20%60mixinBehaviors%60.%0A%20%20%20%20%20The%20generated%20class%20is%20directly%20tied%20to%20the%20info%20object%20and%20behaviors%0A%20%20%20%20used%20to%20create%20it.%20That%20list%20of%20behaviors%20is%20filtered%20so%20it&#39;s%20only%20the%0A%20%20%20%20behaviors%20not%20active%20on%20the%20superclass.%20In%20order%20to%20call%20through%20to%20the%0A%20%20%20%20entire%20list%20of%20lifecycle%20methods%2C%20it&#39;s%20important%20to%20call%20%60super%60.%0A%20%20%20%20%20The%20element&#39;s%20%60properties%60%20and%20%60observers%60%20are%20controlled%20via%20the%20finalization%0A%20%20%20%20mechanism%20provided%20by%20%60PropertiesMixin%60.%20%60Properties%60%20and%20%60observers%60%20are%0A%20%20%20%20collected%20by%20manually%20traversing%20the%20prototype%20chain%20and%20merging.%0A%20%20%20%20%20To%20limit%20changes%2C%20the%20%60_registered%60%20method%20is%20called%20via%20%60_initializeProperties%60%0A%20%20%20%20and%20not%20%60_finalizeClass%60.%0A%20%20*%2F%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B!PolymerInit%7D%20info%20Polymer%20info%20object%0A%20%20%20*%20%40param%20%7Bfunction(new%3AHTMLElement)%7D%20Base%20base%20class%20to%20extend%20with%20info%20object%0A%20%20%20*%20%40param%20%7BObject%7D%20behaviors%20behaviors%20to%20copy%20into%20the%20element%0A%20%20%20*%20%40return%20%7Bfunction(new%3AHTMLElement)%7D%20Generated%20class%0A%20%20%20*%20%40suppress%20%7BcheckTypes%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20function%20GenerateClassFromInfo(info%2C%20Base%2C%20behaviors)%20%7B%0A%20%20%20%20%2F%2F%20manages%20behavior%20and%20lifecycle%20processing%20(filled%20in%20after%20class%20definition)%0A%20%20%20%20let%20behaviorList%3B%0A%20%20%20%20const%20lifecycle%20%3D%20%7B%7D%3B%0A%20%20%20%20%2F**%20%40private%20*%2F%0A%0A%20%20%20%20class%20PolymerGenerated%20extends%20Base%20%7B%0A%20%20%20%20%20%20%2F%2F%20explicitly%20not%20calling%20super._finalizeClass%0A%20%20%20%20%20%20static%20_finalizeClass()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20calling%20via%20a%20subclass%20that%20hasn&#39;t%20been%20generated%2C%20pass%20through%20to%20super%0A%20%20%20%20%20%20%20%20if%20(!this.hasOwnProperty(window.JSCompiler_renameProperty(&#39;generatedFrom&#39;%2C%20this)))%20%7B%0A%20%20%20%20%20%20%20%20%20%20super._finalizeClass()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20interleave%20properties%20and%20observers%20per%20behavior%20and%20%60info%60%0A%20%20%20%20%20%20%20%20%20%20if%20(behaviorList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20b%3B%20i%20%3C%20behaviorList.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20behaviorList%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.properties)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.createProperties(b.properties)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.observers)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.createObservers(b.observers%2C%20b.properties)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(info.properties)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.createProperties(info.properties)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(info.observers)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.createObservers(info.observers%2C%20info.properties)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20make%20sure%20to%20prepare%20the%20element%20template%0A%0A%0A%20%20%20%20%20%20%20%20%20%20this._prepareTemplate()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20get%20properties()%20%7B%0A%20%20%20%20%20%20%20%20const%20properties%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(behaviorList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20behaviorList.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Object.assign(properties%2C%20behaviorList%5Bi%5D.properties)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20Object.assign(properties%2C%20info.properties)%3B%0A%20%20%20%20%20%20%20%20return%20properties%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20get%20observers()%20%7B%0A%20%20%20%20%20%20%20%20let%20observers%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(behaviorList)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20b%3B%20i%20%3C%20behaviorList.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20behaviorList%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.observers)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20observers%20%3D%20observers.concat(b.observers)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(info.observers)%20%7B%0A%20%20%20%20%20%20%20%20%20%20observers%20%3D%20observers.concat(info.observers)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20observers%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20created()%20%7B%0A%20%20%20%20%20%20%20%20super.created()%3B%0A%20%20%20%20%20%20%20%20const%20list%20%3D%20lifecycle.created%3B%0A%0A%20%20%20%20%20%20%20%20if%20(list)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20list.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20list%5Bi%5D.call(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_registered()%20%7B%0A%20%20%20%20%20%20%20%20%2F*%20NOTE%3A%20%60beforeRegister%60%20is%20called%20here%20for%20bc%2C%20but%20the%20behavior%0A%20%20%20%20%20%20%20%20%20%20is%20different%20than%20in%201.x.%20In%201.0%2C%20the%20method%20was%20called%20*after*%0A%20%20%20%20%20%20%20%20%20%20mixing%20prototypes%20together%20but%20*before*%20processing%20of%20meta-objects.%0A%20%20%20%20%20%20%20%20%20%20However%2C%20dynamic%20effects%20can%20still%20be%20set%20here%20and%20can%20be%20done%20either%0A%20%20%20%20%20%20%20%20%20%20in%20%60beforeRegister%60%20or%20%60registered%60.%20It%20is%20no%20longer%20possible%20to%20set%0A%20%20%20%20%20%20%20%20%20%20%60is%60%20in%20%60beforeRegister%60%20as%20you%20could%20in%201.x.%0A%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%2F%2F%20only%20proceed%20if%20the%20generated%20class&#39;%20prototype%20has%20not%20been%20registered.%0A%20%20%20%20%20%20%20%20const%20generatedProto%20%3D%20PolymerGenerated.prototype%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!generatedProto.hasOwnProperty(&#39;__hasRegisterFinished&#39;))%20%7B%0A%20%20%20%20%20%20%20%20%20%20generatedProto.__hasRegisterFinished%20%3D%20true%3B%20%2F%2F%20ensure%20superclass%20is%20registered%20first.%0A%0A%20%20%20%20%20%20%20%20%20%20super._registered()%3B%20%2F%2F%20copy%20properties%20onto%20the%20generated%20class%20lazily%20if%20we&#39;re%20optimizing%2C%0A%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(Polymer.legacyOptimizations)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20copyPropertiesToProto(generatedProto)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20make%20sure%20legacy%20lifecycle%20is%20called%20on%20the%20*element*&#39;s%20prototype%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20and%20not%20the%20generated%20class%20prototype%3B%20if%20the%20element%20has%20been%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20extended%2C%20these%20are%20*not*%20the%20same.%0A%0A%0A%20%20%20%20%20%20%20%20%20%20const%20proto%20%3D%20Object.getPrototypeOf(this)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20list%20%3D%20lifecycle.beforeRegister%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(list)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20list.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20list%5Bi%5D.call(proto)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20list%20%3D%20lifecycle.registered%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(list)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20list.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20list%5Bi%5D.call(proto)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_applyListeners()%20%7B%0A%20%20%20%20%20%20%20%20super._applyListeners()%3B%0A%0A%20%20%20%20%20%20%20%20const%20list%20%3D%20lifecycle.listeners%3B%0A%0A%20%20%20%20%20%20%20%20if%20(list)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20list.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20listeners%20%3D%20list%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(listeners)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20l%20in%20listeners)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this._addMethodEventListenerToNode(this%2C%20l%2C%20listeners%5Bl%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F%2F%20note%3A%20exception%20to%20%22super%20then%20me%22%20rule%3B%0A%20%20%20%20%20%20%2F%2F%20do%20work%20before%20calling%20super%20so%20that%20super%20attributes%0A%20%20%20%20%20%20%2F%2F%20only%20apply%20if%20not%20already%20set.%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_ensureAttributes()%20%7B%0A%20%20%20%20%20%20%20%20const%20list%20%3D%20lifecycle.hostAttributes%3B%0A%0A%20%20%20%20%20%20%20%20if%20(list)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20list.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20hostAttributes%20%3D%20list%5Bi%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20a%20in%20hostAttributes)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this._ensureAttribute(a%2C%20hostAttributes%5Ba%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20super._ensureAttributes()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20ready()%20%7B%0A%20%20%20%20%20%20%20%20super.ready()%3B%0A%20%20%20%20%20%20%20%20let%20list%20%3D%20lifecycle.ready%3B%0A%0A%20%20%20%20%20%20%20%20if%20(list)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20list.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20list%5Bi%5D.call(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20attached()%20%7B%0A%20%20%20%20%20%20%20%20super.attached()%3B%0A%20%20%20%20%20%20%20%20let%20list%20%3D%20lifecycle.attached%3B%0A%0A%20%20%20%20%20%20%20%20if%20(list)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20list.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20list%5Bi%5D.call(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20detached()%20%7B%0A%20%20%20%20%20%20%20%20super.detached()%3B%0A%20%20%20%20%20%20%20%20let%20list%20%3D%20lifecycle.detached%3B%0A%0A%20%20%20%20%20%20%20%20if%20(list)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20list.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20list%5Bi%5D.call(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Implements%20native%20Custom%20Elements%20%60attributeChangedCallback%60%20to%0A%20%20%20%20%20%20%20*%20set%20an%20attribute%20value%20to%20a%20property%20via%20%60_attributeToProperty%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20Name%20of%20attribute%20that%20changed%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20old%20Old%20attribute%20value%0A%20%20%20%20%20%20%20*%20%40param%20%7B%3Fstring%7D%20value%20New%20attribute%20value%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20attributeChanged(name%2C%20old%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20super.attributeChanged()%3B%0A%20%20%20%20%20%20%20%20let%20list%20%3D%20lifecycle.attributeChanged%3B%0A%0A%20%20%20%20%20%20%20%20if%20(list)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20list.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20list%5Bi%5D.call(this%2C%20name%2C%20old%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%20%2F%2F%20apply%20behaviors%2C%20note%20actual%20copying%20is%20done%20lazily%20at%20first%20instance%20creation%0A%0A%0A%20%20%20%20if%20(behaviors)%20%7B%0A%20%20%20%20%20%20%2F%2F%20NOTE%3A%20ensure%20the%20behavior%20is%20extending%20a%20class%20with%0A%20%20%20%20%20%20%2F%2F%20legacy%20element%20api.%20This%20is%20necessary%20since%20behaviors%20expect%20to%20be%20able%0A%20%20%20%20%20%20%2F%2F%20to%20access%201.x%20legacy%20api.%0A%20%20%20%20%20%20if%20(!Array.isArray(behaviors))%20%7B%0A%20%20%20%20%20%20%20%20behaviors%20%3D%20%5Bbehaviors%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20superBehaviors%20%3D%20Base.prototype.behaviors%3B%20%2F%2F%20get%20flattened%2C%20deduped%20list%20of%20behaviors%20*not*%20already%20on%20super%20class%0A%0A%20%20%20%20%20%20behaviorList%20%3D%20flattenBehaviors(behaviors%2C%20null%2C%20superBehaviors)%3B%0A%20%20%20%20%20%20PolymerGenerated.prototype.behaviors%20%3D%20superBehaviors%20%3F%20superBehaviors.concat(behaviors)%20%3A%20behaviorList%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20copyPropertiesToProto%20%3D%20proto%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(behaviorList)%20%7B%0A%20%20%20%20%20%20%20%20applyBehaviors(proto%2C%20behaviorList%2C%20lifecycle)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20applyInfo(proto%2C%20info%2C%20lifecycle%2C%20excludeOnInfo)%3B%0A%20%20%20%20%7D%3B%20%2F%2F%20copy%20properties%20if%20we&#39;re%20not%20optimizing%0A%0A%0A%20%20%20%20if%20(!Polymer.legacyOptimizations)%20%7B%0A%20%20%20%20%20%20copyPropertiesToProto(PolymerGenerated.prototype)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20PolymerGenerated.generatedFrom%20%3D%20info%3B%0A%20%20%20%20return%20PolymerGenerated%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Generates%20a%20class%20that%20extends%20%60Polymer.LegacyElement%60%20based%20on%20the%0A%20%20%20*%20provided%20info%20object.%20%20Metadata%20objects%20on%20the%20%60info%60%20object%0A%20%20%20*%20(%60properties%60%2C%20%60observers%60%2C%20%60listeners%60%2C%20%60behaviors%60%2C%20%60is%60)%20are%20used%0A%20%20%20*%20for%20Polymer&#39;s%20meta-programming%20systems%2C%20and%20any%20functions%20are%20copied%0A%20%20%20*%20to%20the%20generated%20class.%0A%20%20%20*%0A%20%20%20*%20Valid%20%22metadata%22%20values%20are%20as%20follows%3A%0A%20%20%20*%0A%20%20%20*%20%60is%60%3A%20String%20providing%20the%20tag%20name%20to%20register%20the%20element%20under.%20In%0A%20%20%20*%20addition%2C%20if%20a%20%60dom-module%60%20with%20the%20same%20id%20exists%2C%20the%20first%20template%0A%20%20%20*%20in%20that%20%60dom-module%60%20will%20be%20stamped%20into%20the%20shadow%20root%20of%20this%20element%2C%0A%20%20%20*%20with%20support%20for%20declarative%20event%20listeners%20(%60on-...%60)%2C%20Polymer%20data%0A%20%20%20*%20bindings%20(%60%5B%5B...%5D%5D%60%20and%20%60%7B%7B...%7D%7D%60)%2C%20and%20id-based%20node%20finding%20into%0A%20%20%20*%20%60this.%24%60.%0A%20%20%20*%0A%20%20%20*%20%60properties%60%3A%20Object%20describing%20property-related%20metadata%20used%20by%20Polymer%0A%20%20%20*%20features%20(key%3A%20property%20names%2C%20value%3A%20object%20containing%20property%20metadata).%0A%20%20%20*%20Valid%20keys%20in%20per-property%20metadata%20include%3A%0A%20%20%20*%20-%20%60type%60%20(String%7CNumber%7CObject%7CArray%7C...)%3A%20Used%20by%0A%20%20%20*%20%20%20%60attributeChangedCallback%60%20to%20determine%20how%20string-based%20attributes%0A%20%20%20*%20%20%20are%20deserialized%20to%20JavaScript%20property%20values.%0A%20%20%20*%20-%20%60notify%60%20(boolean)%3A%20Causes%20a%20change%20in%20the%20property%20to%20fire%20a%0A%20%20%20*%20%20%20non-bubbling%20event%20called%20%60%3Cproperty%3E-changed%60.%20Elements%20that%20have%0A%20%20%20*%20%20%20enabled%20two-way%20binding%20to%20the%20property%20use%20this%20event%20to%20observe%20changes.%0A%20%20%20*%20-%20%60readOnly%60%20(boolean)%3A%20Creates%20a%20getter%20for%20the%20property%2C%20but%20no%20setter.%0A%20%20%20*%20%20%20To%20set%20a%20read-only%20property%2C%20use%20the%20private%20setter%20method%0A%20%20%20*%20%20%20%60_setProperty(property%2C%20value)%60.%0A%20%20%20*%20-%20%60observer%60%20(string)%3A%20Observer%20method%20name%20that%20will%20be%20called%20when%0A%20%20%20*%20%20%20the%20property%20changes.%20The%20arguments%20of%20the%20method%20are%0A%20%20%20*%20%20%20%60(value%2C%20previousValue)%60.%0A%20%20%20*%20-%20%60computed%60%20(string)%3A%20String%20describing%20method%20and%20dependent%20properties%0A%20%20%20*%20%20%20for%20computing%20the%20value%20of%20this%20property%20(e.g.%20%60&#39;computeFoo(bar%2C%20zot)&#39;%60).%0A%20%20%20*%20%20%20Computed%20properties%20are%20read-only%20by%20default%20and%20can%20only%20be%20changed%0A%20%20%20*%20%20%20via%20the%20return%20value%20of%20the%20computing%20method.%0A%20%20%20*%0A%20%20%20*%20%60observers%60%3A%20Array%20of%20strings%20describing%20multi-property%20observer%20methods%0A%20%20%20*%20%20and%20their%20dependent%20properties%20(e.g.%20%60&#39;observeABC(a%2C%20b%2C%20c)&#39;%60).%0A%20%20%20*%0A%20%20%20*%20%60listeners%60%3A%20Object%20describing%20event%20listeners%20to%20be%20added%20to%20each%0A%20%20%20*%20%20instance%20of%20this%20element%20(key%3A%20event%20name%2C%20value%3A%20method%20name).%0A%20%20%20*%0A%20%20%20*%20%60behaviors%60%3A%20Array%20of%20additional%20%60info%60%20objects%20containing%20metadata%0A%20%20%20*%20and%20callbacks%20in%20the%20same%20format%20as%20the%20%60info%60%20object%20here%20which%20are%0A%20%20%20*%20merged%20into%20this%20element.%0A%20%20%20*%0A%20%20%20*%20%60hostAttributes%60%3A%20Object%20listing%20attributes%20to%20be%20applied%20to%20the%20host%0A%20%20%20*%20%20once%20created%20(key%3A%20attribute%20name%2C%20value%3A%20attribute%20value).%20%20Values%0A%20%20%20*%20%20are%20serialized%20based%20on%20the%20type%20of%20the%20value.%20%20Host%20attributes%20should%0A%20%20%20*%20%20generally%20be%20limited%20to%20attributes%20such%20as%20%60tabIndex%60%20and%20%60aria-...%60.%0A%20%20%20*%20%20Attributes%20in%20%60hostAttributes%60%20are%20only%20applied%20if%20a%20user-supplied%0A%20%20%20*%20%20attribute%20is%20not%20already%20present%20(attributes%20in%20markup%20override%0A%20%20%20*%20%20%60hostAttributes%60).%0A%20%20%20*%0A%20%20%20*%20In%20addition%2C%20the%20following%20Polymer-specific%20callbacks%20may%20be%20provided%3A%0A%20%20%20*%20-%20%60registered%60%3A%20called%20after%20first%20instance%20of%20this%20element%2C%0A%20%20%20*%20-%20%60created%60%3A%20called%20during%20%60constructor%60%0A%20%20%20*%20-%20%60attached%60%3A%20called%20during%20%60connectedCallback%60%0A%20%20%20*%20-%20%60detached%60%3A%20called%20during%20%60disconnectedCallback%60%0A%20%20%20*%20-%20%60ready%60%3A%20called%20before%20first%20%60attached%60%2C%20after%20all%20properties%20of%0A%20%20%20*%20%20%20this%20element%20have%20been%20propagated%20to%20its%20template%20and%20all%20observers%0A%20%20%20*%20%20%20have%20run%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!PolymerInit%7D%20info%20Object%20containing%20Polymer%20metadata%20and%20functions%0A%20%20%20*%20%20%20to%20become%20class%20methods.%0A%20%20%20*%20%40template%20T%0A%20%20%20*%20%40param%20%7Bfunction(T)%3AT%7D%20mixin%20Optional%20mixin%20to%20apply%20to%20legacy%20base%20class%0A%20%20%20*%20%20%20before%20extending%20with%20Polymer%20metaprogramming.%0A%20%20%20*%20%40return%20%7Bfunction(new%3AHTMLElement)%7D%20Generated%20class%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.Class%20%3D%20function%20(info%2C%20mixin)%20%7B%0A%20%20%20%20if%20(!info)%20%7B%0A%20%20%20%20%20%20console.warn(&#39;Polymer.Class%20requires%20%60info%60%20argument&#39;)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20let%20klass%20%3D%20mixin%20%3F%20mixin(Polymer.LegacyElementMixin(HTMLElement))%20%3A%20Polymer.LegacyElementMixin(HTMLElement)%3B%0A%20%20%20%20klass%20%3D%20GenerateClassFromInfo(info%2C%20klass%2C%20info.behaviors)%3B%0A%0A%20%20%20%20if%20(info._enableDisableUpgrade)%20%7B%0A%20%20%20%20%20%20klass%20%3D%20Polymer.DisableUpgradeMixin(klass)%3B%0A%20%20%20%20%7D%20%2F%2F%20decorate%20klass%20with%20registration%20info%0A%0A%0A%20%20%20%20klass.is%20%3D%20klass.prototype.is%20%3D%20info.is%3B%0A%20%20%20%20return%20klass%3B%0A%20%20%7D%3B%0A%0A%20%20Polymer.mixinBehaviors%20%3D%20mixinBehaviors%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Flegacy%2Fclass.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Legacy%20class%20factory%20and%20registration%20helper%20for%20defining%20Polymer%0A%20%20%20*%20elements.%0A%20%20%20*%0A%20%20%20*%20This%20method%20is%20equivalent%20to%0A%20%20%20*%20%60customElements.define(info.is%2C%20Polymer.Class(info))%3B%60%0A%20%20%20*%0A%20%20%20*%20See%20%60Polymer.Class%60%20for%20details%20on%20valid%20legacy%20metadata%20format%20for%20%60info%60.%0A%20%20%20*%0A%20%20%20*%20%40global%0A%20%20%20*%20%40override%0A%20%20%20*%20%40function%20Polymer%0A%20%20%20*%20%40param%20%7B!PolymerInit%7D%20info%20Object%20containing%20Polymer%20metadata%20and%20functions%0A%20%20%20*%20%20%20to%20become%20class%20methods.%0A%20%20%20*%20%40return%20%7Bfunction(new%3A%20HTMLElement)%7D%20Generated%20class%0A%20%20%20*%20%40suppress%20%7Bduplicate%2C%20invalidCasts%2C%20checkTypes%7D%0A%20%20%20*%2F%0A%0A%20%20window.Polymer._polymerFn%20%3D%20function%20(info)%20%7B%0A%20%20%20%20%2F%2F%20if%20input%20is%20a%20%60class%60%20(aka%20a%20function%20with%20a%20prototype)%2C%20use%20the%20prototype%0A%20%20%20%20%2F%2F%20remember%20that%20the%20%60constructor%60%20will%20never%20be%20called%0A%20%20%20%20let%20klass%3B%0A%0A%20%20%20%20if%20(typeof%20info%20%3D%3D%3D%20&#39;function&#39;)%20%7B%0A%20%20%20%20%20%20klass%20%3D%20info%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20klass%20%3D%20Polymer.Class(info)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20customElements.define(klass.is%2C%0A%20%20%20%20%2F**%20%40type%20%7B!HTMLElement%7D%20*%2F%0A%20%20%20%20klass)%3B%0A%20%20%20%20return%20klass%3B%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Flegacy%2Fpolymer-fn.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/legacy/templatizer-behavior.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/templatize.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/property-effects.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/mutable-data.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%20%2F%2F%20Common%20implementation%20for%20mixin%20%26%20behavior%0A%0A%20%20function%20mutablePropertyChange(inst%2C%20property%2C%20value%2C%20old%2C%20mutableData)%20%7B%0A%20%20%20%20let%20isObject%3B%0A%0A%20%20%20%20if%20(mutableData)%20%7B%0A%20%20%20%20%20%20isObject%20%3D%20typeof%20value%20%3D%3D%3D%20&#39;object&#39;%20%26%26%20value%20!%3D%3D%20null%3B%20%2F%2F%20Pull%20%60old%60%20for%20Objects%20from%20temp%20cache%2C%20but%20treat%20%60null%60%20as%20a%20primitive%0A%0A%20%20%20%20%20%20if%20(isObject)%20%7B%0A%20%20%20%20%20%20%20%20old%20%3D%20inst.__dataTemp%5Bproperty%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20%2F%2F%20Strict%20equality%20check%2C%20but%20return%20false%20for%20NaN%3D%3D%3DNaN%0A%0A%0A%20%20%20%20let%20shouldChange%20%3D%20old%20!%3D%3D%20value%20%26%26%20(old%20%3D%3D%3D%20old%20%7C%7C%20value%20%3D%3D%3D%20value)%3B%20%2F%2F%20Objects%20are%20stored%20in%20temporary%20cache%20(cleared%20at%20end%20of%0A%20%20%20%20%2F%2F%20turn)%2C%20which%20is%20used%20for%20dirty-checking%0A%0A%20%20%20%20if%20(isObject%20%26%26%20shouldChange)%20%7B%0A%20%20%20%20%20%20inst.__dataTemp%5Bproperty%5D%20%3D%20value%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20shouldChange%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Element%20class%20mixin%20to%20skip%20strict%20dirty-checking%20for%20objects%20and%20arrays%0A%20%20%20*%20(always%20consider%20them%20to%20be%20%22dirty%22)%2C%20for%20use%20on%20elements%20utilizing%0A%20%20%20*%20%60Polymer.PropertyEffects%60%0A%20%20%20*%0A%20%20%20*%20By%20default%2C%20%60Polymer.PropertyEffects%60%20performs%20strict%20dirty%20checking%20on%0A%20%20%20*%20objects%2C%20which%20means%20that%20any%20deep%20modifications%20to%20an%20object%20or%20array%20will%0A%20%20%20*%20not%20be%20propagated%20unless%20%22immutable%22%20data%20patterns%20are%20used%20(i.e.%20all%20object%0A%20%20%20*%20references%20from%20the%20root%20to%20the%20mutation%20were%20changed).%0A%20%20%20*%0A%20%20%20*%20Polymer%20also%20provides%20a%20proprietary%20data%20mutation%20and%20path%20notification%20API%0A%20%20%20*%20(e.g.%20%60notifyPath%60%2C%20%60set%60%2C%20and%20array%20mutation%20API&#39;s)%20that%20allow%20efficient%0A%20%20%20*%20mutation%20and%20notification%20of%20deep%20changes%20in%20an%20object%20graph%20to%20all%20elements%0A%20%20%20*%20bound%20to%20the%20same%20object%20graph.%0A%20%20%20*%0A%20%20%20*%20In%20cases%20where%20neither%20immutable%20patterns%20nor%20the%20data%20mutation%20API%20can%20be%0A%20%20%20*%20used%2C%20applying%20this%20mixin%20will%20cause%20Polymer%20to%20skip%20dirty%20checking%20for%0A%20%20%20*%20objects%20and%20arrays%20(always%20consider%20them%20to%20be%20%22dirty%22).%20%20This%20allows%20a%0A%20%20%20*%20user%20to%20make%20a%20deep%20modification%20to%20a%20bound%20object%20graph%2C%20and%20then%20either%0A%20%20%20*%20simply%20re-set%20the%20object%20(e.g.%20%60this.items%20%3D%20this.items%60)%20or%20call%20%60notifyPath%60%0A%20%20%20*%20(e.g.%20%60this.notifyPath(&#39;items&#39;)%60)%20to%20update%20the%20tree.%20%20Note%20that%20all%0A%20%20%20*%20elements%20that%20wish%20to%20be%20updated%20based%20on%20deep%20mutations%20must%20apply%20this%0A%20%20%20*%20mixin%20or%20otherwise%20skip%20strict%20dirty%20checking%20for%20objects%2Farrays.%0A%20%20%20*%20Specifically%2C%20any%20elements%20in%20the%20binding%20tree%20between%20the%20source%20of%20a%0A%20%20%20*%20mutation%20and%20the%20consumption%20of%20it%20must%20apply%20this%20mixin%20or%20enable%20the%0A%20%20%20*%20%60Polymer.OptionalMutableData%60%20mixin.%0A%20%20%20*%0A%20%20%20*%20In%20order%20to%20make%20the%20dirty%20check%20strategy%20configurable%2C%20see%0A%20%20%20*%20%60Polymer.OptionalMutableData%60.%0A%20%20%20*%0A%20%20%20*%20Note%2C%20the%20performance%20characteristics%20of%20propagating%20large%20object%20graphs%0A%20%20%20*%20will%20be%20worse%20as%20opposed%20to%20using%20strict%20dirty%20checking%20with%20immutable%0A%20%20%20*%20patterns%20or%20Polymer&#39;s%20path%20notification%20API.%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Element%20class%20mixin%20to%20skip%20strict%20dirty-checking%20for%20objects%0A%20%20%20*%20%20%20and%20arrays%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.MutableData%20%3D%20Polymer.dedupingMixin(superClass%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_MutableData%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20class%20MutableData%20extends%20superClass%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20%60Polymer.PropertyEffects%60%20to%20provide%20option%20for%20skipping%0A%20%20%20%20%20%20%20*%20strict%20equality%20checking%20for%20Objects%20and%20Arrays.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20This%20method%20pulls%20the%20value%20to%20dirty%20check%20against%20from%20the%20%60__dataTemp%60%0A%20%20%20%20%20%20%20*%20cache%20(rather%20than%20the%20normal%20%60__data%60%20cache)%20for%20Objects.%20%20Since%20the%20temp%0A%20%20%20%20%20%20%20*%20cache%20is%20cleared%20at%20the%20end%20of%20a%20turn%2C%20this%20implementation%20allows%0A%20%20%20%20%20%20%20*%20side-effects%20of%20deep%20object%20changes%20to%20be%20processed%20by%20re-setting%20the%0A%20%20%20%20%20%20%20*%20same%20object%20(using%20the%20temp%20cache%20as%20an%20in-turn%20backstop%20to%20prevent%0A%20%20%20%20%20%20%20*%20cycles%20due%20to%202-way%20notification).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20New%20property%20value%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20old%20Previous%20property%20value%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20property%20should%20be%20considered%20a%20change%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20_shouldPropertyChange(property%2C%20value%2C%20old)%20%7B%0A%20%20%20%20%20%20%20%20return%20mutablePropertyChange(this%2C%20property%2C%20value%2C%20old%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20MutableData%3B%0A%20%20%7D)%3B%0A%20%20%2F**%0A%20%20%20*%20Element%20class%20mixin%20to%20add%20the%20optional%20ability%20to%20skip%20strict%0A%20%20%20*%20dirty-checking%20for%20objects%20and%20arrays%20(always%20consider%20them%20to%20be%0A%20%20%20*%20%22dirty%22)%20by%20setting%20a%20%60mutable-data%60%20attribute%20on%20an%20element%20instance.%0A%20%20%20*%0A%20%20%20*%20By%20default%2C%20%60Polymer.PropertyEffects%60%20performs%20strict%20dirty%20checking%20on%0A%20%20%20*%20objects%2C%20which%20means%20that%20any%20deep%20modifications%20to%20an%20object%20or%20array%20will%0A%20%20%20*%20not%20be%20propagated%20unless%20%22immutable%22%20data%20patterns%20are%20used%20(i.e.%20all%20object%0A%20%20%20*%20references%20from%20the%20root%20to%20the%20mutation%20were%20changed).%0A%20%20%20*%0A%20%20%20*%20Polymer%20also%20provides%20a%20proprietary%20data%20mutation%20and%20path%20notification%20API%0A%20%20%20*%20(e.g.%20%60notifyPath%60%2C%20%60set%60%2C%20and%20array%20mutation%20API&#39;s)%20that%20allow%20efficient%0A%20%20%20*%20mutation%20and%20notification%20of%20deep%20changes%20in%20an%20object%20graph%20to%20all%20elements%0A%20%20%20*%20bound%20to%20the%20same%20object%20graph.%0A%20%20%20*%0A%20%20%20*%20In%20cases%20where%20neither%20immutable%20patterns%20nor%20the%20data%20mutation%20API%20can%20be%0A%20%20%20*%20used%2C%20applying%20this%20mixin%20will%20allow%20Polymer%20to%20skip%20dirty%20checking%20for%0A%20%20%20*%20objects%20and%20arrays%20(always%20consider%20them%20to%20be%20%22dirty%22).%20%20This%20allows%20a%0A%20%20%20*%20user%20to%20make%20a%20deep%20modification%20to%20a%20bound%20object%20graph%2C%20and%20then%20either%0A%20%20%20*%20simply%20re-set%20the%20object%20(e.g.%20%60this.items%20%3D%20this.items%60)%20or%20call%20%60notifyPath%60%0A%20%20%20*%20(e.g.%20%60this.notifyPath(&#39;items&#39;)%60)%20to%20update%20the%20tree.%20%20Note%20that%20all%0A%20%20%20*%20elements%20that%20wish%20to%20be%20updated%20based%20on%20deep%20mutations%20must%20apply%20this%0A%20%20%20*%20mixin%20or%20otherwise%20skip%20strict%20dirty%20checking%20for%20objects%2Farrays.%0A%20%20%20*%20Specifically%2C%20any%20elements%20in%20the%20binding%20tree%20between%20the%20source%20of%20a%0A%20%20%20*%20mutation%20and%20the%20consumption%20of%20it%20must%20enable%20this%20mixin%20or%20apply%20the%0A%20%20%20*%20%60Polymer.MutableData%60%20mixin.%0A%20%20%20*%0A%20%20%20*%20While%20this%20mixin%20adds%20the%20ability%20to%20forgo%20Object%2FArray%20dirty%20checking%2C%0A%20%20%20*%20the%20%60mutableData%60%20flag%20defaults%20to%20false%20and%20must%20be%20set%20on%20the%20instance.%0A%20%20%20*%0A%20%20%20*%20Note%2C%20the%20performance%20characteristics%20of%20propagating%20large%20object%20graphs%0A%20%20%20*%20will%20be%20worse%20by%20relying%20on%20%60mutableData%3A%20true%60%20as%20opposed%20to%20using%0A%20%20%20*%20strict%20dirty%20checking%20with%20immutable%20patterns%20or%20Polymer&#39;s%20path%20notification%0A%20%20%20*%20API.%0A%20%20%20*%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Element%20class%20mixin%20to%20optionally%20skip%20strict%20dirty-checking%0A%20%20%20*%20%20%20for%20objects%20and%20arrays%0A%20%20%20*%2F%0A%0A%20%20Polymer.OptionalMutableData%20%3D%20Polymer.dedupingMixin(superClass%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_OptionalMutableData%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20class%20OptionalMutableData%20extends%20superClass%20%7B%0A%20%20%20%20%20%20static%20get%20properties()%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20Instance-level%20flag%20for%20configuring%20the%20dirty-checking%20strategy%0A%20%20%20%20%20%20%20%20%20%20%20*%20for%20this%20element.%20%20When%20true%2C%20Objects%20and%20Arrays%20will%20skip%20dirty%0A%20%20%20%20%20%20%20%20%20%20%20*%20checking%2C%20otherwise%20strict%20equality%20checking%20will%20be%20used.%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20mutableData%3A%20Boolean%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Overrides%20%60Polymer.PropertyEffects%60%20to%20provide%20option%20for%20skipping%0A%20%20%20%20%20%20%20*%20strict%20equality%20checking%20for%20Objects%20and%20Arrays.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20When%20%60this.mutableData%60%20is%20true%20on%20this%20instance%2C%20this%20method%0A%20%20%20%20%20%20%20*%20pulls%20the%20value%20to%20dirty%20check%20against%20from%20the%20%60__dataTemp%60%20cache%0A%20%20%20%20%20%20%20*%20(rather%20than%20the%20normal%20%60__data%60%20cache)%20for%20Objects.%20%20Since%20the%20temp%0A%20%20%20%20%20%20%20*%20cache%20is%20cleared%20at%20the%20end%20of%20a%20turn%2C%20this%20implementation%20allows%0A%20%20%20%20%20%20%20*%20side-effects%20of%20deep%20object%20changes%20to%20be%20processed%20by%20re-setting%20the%0A%20%20%20%20%20%20%20*%20same%20object%20(using%20the%20temp%20cache%20as%20an%20in-turn%20backstop%20to%20prevent%0A%20%20%20%20%20%20%20*%20cycles%20due%20to%202-way%20notification).%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20New%20property%20value%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20old%20Previous%20property%20value%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20property%20should%20be%20considered%20a%20change%0A%20%20%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20_shouldPropertyChange(property%2C%20value%2C%20old)%20%7B%0A%20%20%20%20%20%20%20%20return%20mutablePropertyChange(this%2C%20property%2C%20value%2C%20old%2C%20this.mutableData)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20OptionalMutableData%3B%0A%20%20%7D)%3B%20%2F%2F%20Export%20for%20use%20by%20legacy%20behavior%0A%0A%20%20Polymer.MutableData._mutablePropertyChange%20%3D%20mutablePropertyChange%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Fmixins%2Fmutable-data.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%20%2F%2F%20Base%20class%20for%20HTMLTemplateElement%20extension%20that%20has%20property%20effects%0A%20%20%2F%2F%20machinery%20for%20propagating%20host%20properties%20to%20children.%20This%20is%20an%20ES5%0A%20%20%2F%2F%20class%20only%20because%20Babel%20(incorrectly)%20requires%20super()%20in%20the%20class%0A%20%20%2F%2F%20constructor%20even%20though%20no%20%60this%60%20is%20used%20and%20it%20returns%20an%20instance.%0A%0A%20%20let%20newInstance%20%3D%20null%3B%0A%20%20%2F**%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40extends%20%7BHTMLTemplateElement%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20function%20HTMLTemplateElementExtension()%20%7B%0A%20%20%20%20return%20newInstance%3B%0A%20%20%7D%0A%0A%20%20HTMLTemplateElementExtension.prototype%20%3D%20Object.create(HTMLTemplateElement.prototype%2C%20%7B%0A%20%20%20%20constructor%3A%20%7B%0A%20%20%20%20%20%20value%3A%20HTMLTemplateElementExtension%2C%0A%20%20%20%20%20%20writable%3A%20true%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20%2F**%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40implements%20%7BPolymer_PropertyEffects%7D%0A%20%20%20*%20%40extends%20%7BHTMLTemplateElementExtension%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20const%20DataTemplate%20%3D%20Polymer.PropertyEffects(HTMLTemplateElementExtension)%3B%0A%20%20%2F**%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40implements%20%7BPolymer_MutableData%7D%0A%20%20%20*%20%40extends%20%7BDataTemplate%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20const%20MutableDataTemplate%20%3D%20Polymer.MutableData(DataTemplate)%3B%20%2F%2F%20Applies%20a%20DataTemplate%20subclass%20to%20a%20%3Ctemplate%3E%20instance%0A%0A%20%20function%20upgradeTemplate(template%2C%20constructor)%20%7B%0A%20%20%20%20newInstance%20%3D%20template%3B%0A%20%20%20%20Object.setPrototypeOf(template%2C%20constructor.prototype)%3B%0A%20%20%20%20new%20constructor()%3B%0A%20%20%20%20newInstance%20%3D%20null%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Base%20class%20for%20TemplateInstance.%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40implements%20%7BPolymer_PropertyEffects%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%0A%20%20const%20base%20%3D%20Polymer.PropertyEffects(class%20%7B%7D)%3B%0A%20%20%2F**%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40customElement%0A%20%20%20*%20%40appliesMixin%20Polymer.PropertyEffects%0A%20%20%20*%20%40unrestricted%0A%20%20%20*%2F%0A%0A%20%20class%20TemplateInstanceBase%20extends%20base%20%7B%0A%20%20%20%20constructor(props)%20%7B%0A%20%20%20%20%20%20super()%3B%0A%0A%20%20%20%20%20%20this._configureProperties(props)%3B%0A%0A%20%20%20%20%20%20this.root%20%3D%20this._stampTemplate(this.__dataHost)%3B%20%2F%2F%20Save%20list%20of%20stamped%20children%0A%0A%20%20%20%20%20%20let%20children%20%3D%20this.children%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20for%20(let%20n%20%3D%20this.root.firstChild%3B%20n%3B%20n%20%3D%20n.nextSibling)%20%7B%0A%20%20%20%20%20%20%20%20children.push(n)%3B%0A%20%20%20%20%20%20%20%20n.__templatizeInstance%20%3D%20this%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(this.__templatizeOwner%20%26%26%20this.__templatizeOwner.__hideTemplateChildren__)%20%7B%0A%20%20%20%20%20%20%20%20this._showHideChildren(true)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20Flush%20props%20only%20when%20props%20are%20passed%20if%20instance%20props%20exist%0A%20%20%20%20%20%20%2F%2F%20or%20when%20there%20isn&#39;t%20instance%20props.%0A%0A%0A%20%20%20%20%20%20let%20options%20%3D%20this.__templatizeOptions%3B%0A%0A%20%20%20%20%20%20if%20(props%20%26%26%20options.instanceProps%20%7C%7C%20!options.instanceProps)%20%7B%0A%20%20%20%20%20%20%20%20this._enableProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Configure%20the%20given%20%60props%60%20by%20calling%20%60_setPendingProperty%60.%20Also%0A%20%20%20%20%20*%20sets%20any%20properties%20stored%20in%20%60__hostProps%60.%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%20%40param%20%7BObject%7D%20props%20Object%20of%20property%20name-value%20pairs%20to%20set.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_configureProperties(props)%20%7B%0A%20%20%20%20%20%20let%20options%20%3D%20this.__templatizeOptions%3B%0A%0A%20%20%20%20%20%20if%20(options.forwardHostProp)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20hprop%20in%20this.__hostProps)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._setPendingProperty(hprop%2C%20this.__dataHost%5B&#39;_host_&#39;%20%2B%20hprop%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F%2F%20Any%20instance%20props%20passed%20in%20the%20constructor%20will%20overwrite%20host%20props%3B%0A%20%20%20%20%20%20%2F%2F%20normally%20this%20would%20be%20a%20user%20error%20but%20we%20don&#39;t%20specifically%20filter%20them%0A%0A%0A%20%20%20%20%20%20for%20(let%20iprop%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20this._setPendingProperty(iprop%2C%20props%5Biprop%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Forwards%20a%20host%20property%20to%20this%20instance.%20%20This%20method%20should%20be%0A%20%20%20%20%20*%20called%20on%20instances%20from%20the%20%60options.forwardHostProp%60%20callback%0A%20%20%20%20%20*%20to%20propagate%20changes%20of%20host%20properties%20to%20each%20instance.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Note%20this%20method%20enqueues%20the%20change%2C%20which%20are%20flushed%20as%20a%20batch.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20prop%20Property%20or%20path%20name%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20of%20the%20property%20to%20forward%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20forwardHostProp(prop%2C%20value)%20%7B%0A%20%20%20%20%20%20if%20(this._setPendingPropertyOrPath(prop%2C%20value%2C%20false%2C%20true))%20%7B%0A%20%20%20%20%20%20%20%20this.__dataHost._enqueueClient(this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Override%20point%20for%20adding%20custom%20or%20simulated%20event%20handling.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20Node%20to%20add%20event%20listener%20to%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventName%20Name%20of%20event%0A%20%20%20%20%20*%20%40param%20%7Bfunction(!Event)%3Avoid%7D%20handler%20Listener%20function%20to%20add%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_addEventListenerToNode(node%2C%20eventName%2C%20handler)%20%7B%0A%20%20%20%20%20%20if%20(this._methodHost%20%26%26%20this.__templatizeOptions.parentModel)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20this%20instance%20should%20be%20considered%20a%20parent%20model%2C%20decorate%0A%20%20%20%20%20%20%20%20%2F%2F%20events%20this%20template%20instance%20as%20%60model%60%0A%20%20%20%20%20%20%20%20this._methodHost._addEventListenerToNode(node%2C%20eventName%2C%20e%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20e.model%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%20%20handler(e)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Otherwise%20delegate%20to%20the%20template&#39;s%20host%20(which%20could%20be)%0A%20%20%20%20%20%20%20%20%2F%2F%20another%20template%20instance%0A%20%20%20%20%20%20%20%20let%20templateHost%20%3D%20this.__dataHost.__dataHost%3B%0A%0A%20%20%20%20%20%20%20%20if%20(templateHost)%20%7B%0A%20%20%20%20%20%20%20%20%20%20templateHost._addEventListenerToNode(node%2C%20eventName%2C%20handler)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Shows%20or%20hides%20the%20template%20instance%20top%20level%20child%20elements.%20For%0A%20%20%20%20%20*%20text%20nodes%2C%20%60textContent%60%20is%20removed%20while%20%22hidden%22%20and%20replaced%20when%0A%20%20%20%20%20*%20%22shown.%22%0A%20%20%20%20%20*%20%40param%20%7Bboolean%7D%20hide%20Set%20to%20true%20to%20hide%20the%20children%3B%0A%20%20%20%20%20*%20set%20to%20false%20to%20show%20them.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_showHideChildren(hide)%20%7B%0A%20%20%20%20%20%20let%20c%20%3D%20this.children%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20c.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20let%20n%20%3D%20c%5Bi%5D%3B%20%2F%2F%20Ignore%20non-changes%0A%0A%20%20%20%20%20%20%20%20if%20(Boolean(hide)%20!%3D%20Boolean(n.__hideTemplateChildren__))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(n.nodeType%20%3D%3D%3D%20Node.TEXT_NODE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(hide)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n.__polymerTextContent__%20%3D%20n.textContent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n.textContent%20%3D%20&#39;&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n.textContent%20%3D%20n.__polymerTextContent__%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%2F%2F%20remove%20and%20replace%20slot%0A%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(n.localName%20%3D%3D%3D%20&#39;slot&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(hide)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n.__polymerReplaced__%20%3D%20document.createComment(&#39;hidden-slot&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n.parentNode.replaceChild(n.__polymerReplaced__%2C%20n)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20replace%20%3D%20n.__polymerReplaced__%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(replace)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20replace.parentNode.replaceChild(n%2C%20replace)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(n.style)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(hide)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n.__polymerDisplay__%20%3D%20n.style.display%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n.style.display%20%3D%20&#39;none&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n.style.display%20%3D%20n.__polymerDisplay__%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20n.__hideTemplateChildren__%20%3D%20hide%3B%0A%0A%20%20%20%20%20%20%20%20if%20(n._showHideChildren)%20%7B%0A%20%20%20%20%20%20%20%20%20%20n._showHideChildren(hide)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Overrides%20default%20property-effects%20implementation%20to%20intercept%0A%20%20%20%20%20*%20textContent%20bindings%20while%20children%20are%20%22hidden%22%20and%20cache%20in%0A%20%20%20%20%20*%20private%20storage%20for%20later%20retrieval.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!Node%7D%20node%20The%20node%20to%20set%20a%20property%20on%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20prop%20The%20property%20to%20set%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20The%20value%20to%20set%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_setUnmanagedPropertyToNode(node%2C%20prop%2C%20value)%20%7B%0A%20%20%20%20%20%20if%20(node.__hideTemplateChildren__%20%26%26%20node.nodeType%20%3D%3D%20Node.TEXT_NODE%20%26%26%20prop%20%3D%3D%20&#39;textContent&#39;)%20%7B%0A%20%20%20%20%20%20%20%20node.__polymerTextContent__%20%3D%20value%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20super._setUnmanagedPropertyToNode(node%2C%20prop%2C%20value)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Find%20the%20parent%20model%20of%20this%20template%20instance.%20%20The%20parent%20model%0A%20%20%20%20%20*%20is%20either%20another%20templatize%20instance%20that%20had%20option%20%60parentModel%3A%20true%60%2C%0A%20%20%20%20%20*%20or%20else%20the%20host%20element.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7B!Polymer_PropertyEffects%7D%20The%20parent%20model%20of%20this%20instance%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20get%20parentModel()%20%7B%0A%20%20%20%20%20%20let%20model%20%3D%20this.__parentModel%3B%0A%0A%20%20%20%20%20%20if%20(!model)%20%7B%0A%20%20%20%20%20%20%20%20let%20options%3B%0A%20%20%20%20%20%20%20%20model%20%3D%20this%3B%0A%0A%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20A%20template%20instance&#39;s%20%60__dataHost%60%20is%20a%20%3Ctemplate%3E%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%60model.__dataHost.__dataHost%60%20is%20the%20template&#39;s%20host%0A%20%20%20%20%20%20%20%20%20%20model%20%3D%20model.__dataHost.__dataHost%3B%0A%20%20%20%20%20%20%20%20%7D%20while%20((options%20%3D%20model.__templatizeOptions)%20%26%26%20!options.parentModel)%3B%0A%0A%20%20%20%20%20%20%20%20this.__parentModel%20%3D%20model%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20model%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Stub%20of%20HTMLElement&#39;s%20%60dispatchEvent%60%2C%20so%20that%20effects%20that%20may%0A%20%20%20%20%20*%20dispatch%20events%20safely%20no-op.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7BEvent%7D%20event%20Event%20to%20dispatch%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Always%20true.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20dispatchEvent(event)%20%7B%0A%20%20%20%20%20%20%2F%2F%20eslint-disable-line%20no-unused-vars%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%20%20%2F**%20%40type%20%7B!DataTemplate%7D%20*%2F%0A%0A%0A%20%20TemplateInstanceBase.prototype.__dataHost%3B%0A%20%20%2F**%20%40type%20%7B!TemplatizeOptions%7D%20*%2F%0A%0A%20%20TemplateInstanceBase.prototype.__templatizeOptions%3B%0A%20%20%2F**%20%40type%20%7B!Polymer_PropertyEffects%7D%20*%2F%0A%0A%20%20TemplateInstanceBase.prototype._methodHost%3B%0A%20%20%2F**%20%40type%20%7B!Object%7D%20*%2F%0A%0A%20%20TemplateInstanceBase.prototype.__templatizeOwner%3B%0A%20%20%2F**%20%40type%20%7B!Object%7D%20*%2F%0A%0A%20%20TemplateInstanceBase.prototype.__hostProps%3B%0A%20%20%2F**%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40extends%20%7BTemplateInstanceBase%7D%0A%20%20%20*%20%40implements%20%7BPolymer_MutableData%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20const%20MutableTemplateInstanceBase%20%3D%20Polymer.MutableData(TemplateInstanceBase)%3B%0A%0A%20%20function%20findMethodHost(template)%20%7B%0A%20%20%20%20%2F%2F%20Technically%20this%20should%20be%20the%20owner%20of%20the%20outermost%20template.%0A%20%20%20%20%2F%2F%20In%20shadow%20dom%2C%20this%20is%20always%20getRootNode().host%2C%20but%20we%20can%0A%20%20%20%20%2F%2F%20approximate%20this%20via%20cooperation%20with%20our%20dataHost%20always%20setting%0A%20%20%20%20%2F%2F%20%60_methodHost%60%20as%20long%20as%20there%20were%20bindings%20(or%20id&#39;s)%20on%20this%0A%20%20%20%20%2F%2F%20instance%20causing%20it%20to%20get%20a%20dataHost.%0A%20%20%20%20let%20templateHost%20%3D%20template.__dataHost%3B%0A%20%20%20%20return%20templateHost%20%26%26%20templateHost._methodHost%20%7C%7C%20templateHost%3B%0A%20%20%7D%0A%20%20%2F*%20eslint-disable%20valid-jsdoc%20*%2F%0A%0A%20%20%2F**%0A%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20class.prototype%20is%20not%20defined%20for%20some%20reason%0A%20%20%20*%2F%0A%0A%0A%20%20function%20createTemplatizerClass(template%2C%20templateInfo%2C%20options)%20%7B%0A%20%20%20%20%2F%2F%20Anonymous%20class%20created%20by%20the%20templatize%0A%20%20%20%20let%20base%20%3D%20options.mutableData%20%3F%20MutableTemplateInstanceBase%20%3A%20TemplateInstanceBase%3B%20%2F%2F%20Affordance%20for%20global%20mixins%20onto%20TemplatizeInstance%0A%0A%20%20%20%20if%20(Polymer.Templatize.mixin)%20%7B%0A%20%20%20%20%20%20base%20%3D%20Polymer.Templatize.mixin(base)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40constructor%0A%20%20%20%20%20*%20%40extends%20%7Bbase%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20let%20klass%20%3D%20class%20extends%20base%20%7B%7D%3B%0A%20%20%20%20klass.prototype.__templatizeOptions%20%3D%20options%3B%0A%0A%20%20%20%20klass.prototype._bindTemplate(template)%3B%0A%0A%20%20%20%20addNotifyEffects(klass%2C%20template%2C%20templateInfo%2C%20options)%3B%0A%20%20%20%20return%20klass%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20%40suppress%20%7BmissingProperties%7D%20class.prototype%20is%20not%20defined%20for%20some%20reason%0A%20%20%20*%2F%0A%0A%0A%20%20function%20addPropagateEffects(template%2C%20templateInfo%2C%20options)%20%7B%0A%20%20%20%20let%20userForwardHostProp%20%3D%20options.forwardHostProp%3B%0A%0A%20%20%20%20if%20(userForwardHostProp)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Provide%20data%20API%20and%20property%20effects%20on%20memoized%20template%20class%0A%20%20%20%20%20%20let%20klass%20%3D%20templateInfo.templatizeTemplateClass%3B%0A%0A%20%20%20%20%20%20if%20(!klass)%20%7B%0A%20%20%20%20%20%20%20%20let%20base%20%3D%20options.mutableData%20%3F%20MutableDataTemplate%20%3A%20DataTemplate%3B%0A%20%20%20%20%20%20%20%20%2F**%20%40private%20*%2F%0A%0A%20%20%20%20%20%20%20%20klass%20%3D%20templateInfo.templatizeTemplateClass%20%3D%20class%20TemplatizedTemplate%20extends%20base%20%7B%7D%3B%20%2F%2F%20Add%20template%20-%20%3Einstances%20effects%0A%20%20%20%20%20%20%20%20%2F%2F%20and%20host%20%3C-%20template%20effects%0A%0A%20%20%20%20%20%20%20%20let%20hostProps%20%3D%20templateInfo.hostProps%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20prop%20in%20hostProps)%20%7B%0A%20%20%20%20%20%20%20%20%20%20klass.prototype._addPropertyEffect(&#39;_host_&#39;%20%2B%20prop%2C%20klass.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn%3A%20createForwardHostPropEffect(prop%2C%20userForwardHostProp)%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20klass.prototype._createNotifyingProperty(&#39;_host_&#39;%20%2B%20prop)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20upgradeTemplate(template%2C%20klass)%3B%20%2F%2F%20Mix%20any%20pre-bound%20data%20into%20__data%3B%20no%20need%20to%20flush%20this%20to%0A%20%20%20%20%20%20%2F%2F%20instances%20since%20they%20pull%20from%20the%20template%20at%20instance-time%0A%0A%20%20%20%20%20%20if%20(template.__dataProto)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Note%2C%20generally%20%60__dataProto%60%20could%20be%20chained%2C%20but%20it&#39;s%20guaranteed%0A%20%20%20%20%20%20%20%20%2F%2F%20to%20not%20be%20since%20this%20is%20a%20vanilla%20template%20we%20just%20added%20effects%20to%0A%20%20%20%20%20%20%20%20Object.assign(template.__data%2C%20template.__dataProto)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20Clear%20any%20pending%20data%20for%20performance%0A%0A%0A%20%20%20%20%20%20template.__dataTemp%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20template.__dataPending%20%3D%20null%3B%0A%20%20%20%20%20%20template.__dataOld%20%3D%20null%3B%0A%0A%20%20%20%20%20%20template._enableProperties()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F*%20eslint-enable%20valid-jsdoc%20*%2F%0A%0A%0A%20%20function%20createForwardHostPropEffect(hostProp%2C%20userForwardHostProp)%20%7B%0A%20%20%20%20return%20function%20forwardHostProp(template%2C%20prop%2C%20props)%20%7B%0A%20%20%20%20%20%20userForwardHostProp.call(template.__templatizeOwner%2C%20prop.substring(&#39;_host_&#39;.length)%2C%20props%5Bprop%5D)%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20function%20addNotifyEffects(klass%2C%20template%2C%20templateInfo%2C%20options)%20%7B%0A%20%20%20%20let%20hostProps%20%3D%20templateInfo.hostProps%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20for%20(let%20iprop%20in%20options.instanceProps)%20%7B%0A%20%20%20%20%20%20delete%20hostProps%5Biprop%5D%3B%0A%20%20%20%20%20%20let%20userNotifyInstanceProp%20%3D%20options.notifyInstanceProp%3B%0A%0A%20%20%20%20%20%20if%20(userNotifyInstanceProp)%20%7B%0A%20%20%20%20%20%20%20%20klass.prototype._addPropertyEffect(iprop%2C%20klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20fn%3A%20createNotifyInstancePropEffect(iprop%2C%20userNotifyInstanceProp)%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(options.forwardHostProp%20%26%26%20template.__dataHost)%20%7B%0A%20%20%20%20%20%20for%20(let%20hprop%20in%20hostProps)%20%7B%0A%20%20%20%20%20%20%20%20klass.prototype._addPropertyEffect(hprop%2C%20klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20fn%3A%20createNotifyHostPropEffect()%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20createNotifyInstancePropEffect(instProp%2C%20userNotifyInstanceProp)%20%7B%0A%20%20%20%20return%20function%20notifyInstanceProp(inst%2C%20prop%2C%20props)%20%7B%0A%20%20%20%20%20%20userNotifyInstanceProp.call(inst.__templatizeOwner%2C%20inst%2C%20prop%2C%20props%5Bprop%5D)%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20function%20createNotifyHostPropEffect()%20%7B%0A%20%20%20%20return%20function%20notifyHostProp(inst%2C%20prop%2C%20props)%20%7B%0A%20%20%20%20%20%20inst.__dataHost._setPendingPropertyOrPath(&#39;_host_&#39;%20%2B%20prop%2C%20props%5Bprop%5D%2C%20true%2C%20true)%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Module%20for%20preparing%20and%20stamping%20instances%20of%20templates%20that%20utilize%0A%20%20%20*%20Polymer&#39;s%20data-binding%20and%20declarative%20event%20listener%20features.%0A%20%20%20*%0A%20%20%20*%20Example%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%2F%2F%20Get%20a%20template%20from%20somewhere%2C%20e.g.%20light%20DOM%0A%20%20%20*%20%20%20%20%20let%20template%20%3D%20this.querySelector(&#39;template&#39;)%3B%0A%20%20%20*%20%20%20%20%20%2F%2F%20Prepare%20the%20template%0A%20%20%20*%20%20%20%20%20let%20TemplateClass%20%3D%20Polymer.Templatize.templatize(template)%3B%0A%20%20%20*%20%20%20%20%20%2F%2F%20Instance%20the%20template%20with%20an%20initial%20data%20model%0A%20%20%20*%20%20%20%20%20let%20instance%20%3D%20new%20TemplateClass(%7BmyProp%3A%20&#39;initial&#39;%7D)%3B%0A%20%20%20*%20%20%20%20%20%2F%2F%20Insert%20the%20instance&#39;s%20DOM%20somewhere%2C%20e.g.%20element&#39;s%20shadow%20DOM%0A%20%20%20*%20%20%20%20%20this.shadowRoot.appendChild(instance.root)%3B%0A%20%20%20*%20%20%20%20%20%2F%2F%20Changing%20a%20property%20on%20the%20instance%20will%20propagate%20to%20bindings%0A%20%20%20*%20%20%20%20%20%2F%2F%20in%20the%20template%0A%20%20%20*%20%20%20%20%20instance.myProp%20%3D%20&#39;new%20value&#39;%3B%0A%20%20%20*%0A%20%20%20*%20The%20%60options%60%20dictionary%20passed%20to%20%60templatize%60%20allows%20for%20customizing%0A%20%20%20*%20features%20of%20the%20generated%20template%20class%2C%20including%20how%20outer-scope%20host%0A%20%20%20*%20properties%20should%20be%20forwarded%20into%20template%20instances%2C%20how%20any%20instance%0A%20%20%20*%20properties%20added%20into%20the%20template&#39;s%20scope%20should%20be%20notified%20out%20to%0A%20%20%20*%20the%20host%2C%20and%20whether%20the%20instance%20should%20be%20decorated%20as%20a%20%22parent%20model%22%0A%20%20%20*%20of%20any%20event%20handlers.%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%2F%2F%20Customize%20property%20forwarding%20and%20event%20model%20decoration%0A%20%20%20*%20%20%20%20%20let%20TemplateClass%20%3D%20Polymer.Templatize.templatize(template%2C%20this%2C%20%7B%0A%20%20%20*%20%20%20%20%20%20%20parentModel%3A%20true%2C%0A%20%20%20*%20%20%20%20%20%20%20forwardHostProp(property%2C%20value)%20%7B...%7D%2C%0A%20%20%20*%20%20%20%20%20%20%20instanceProps%3A%20%7B...%7D%2C%0A%20%20%20*%20%20%20%20%20%20%20notifyInstanceProp(instance%2C%20property%2C%20value)%20%7B...%7D%2C%0A%20%20%20*%20%20%20%20%20%7D)%3B%0A%20%20%20*%0A%20%20%20*%20%40namespace%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Module%20for%20preparing%20and%20stamping%20instances%20of%20templates%0A%20%20%20*%20%20%20utilizing%20Polymer%20templating%20features.%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.Templatize%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20an%20anonymous%20%60Polymer.PropertyEffects%60%20class%20bound%20to%20the%0A%20%20%20%20%20*%20%60%3Ctemplate%3E%60%20provided.%20%20Instancing%20the%20class%20will%20result%20in%20the%0A%20%20%20%20%20*%20template%20being%20stamped%20into%20a%20document%20fragment%20stored%20as%20the%20instance&#39;s%0A%20%20%20%20%20*%20%60root%60%20property%2C%20after%20which%20it%20can%20be%20appended%20to%20the%20DOM.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Templates%20may%20utilize%20all%20Polymer%20data-binding%20features%20as%20well%20as%0A%20%20%20%20%20*%20declarative%20event%20listeners.%20%20Event%20listeners%20and%20inline%20computing%0A%20%20%20%20%20*%20functions%20in%20the%20template%20will%20be%20called%20on%20the%20host%20of%20the%20template.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20The%20constructor%20returned%20takes%20a%20single%20argument%20dictionary%20of%20initial%0A%20%20%20%20%20*%20property%20values%20to%20propagate%20into%20template%20bindings.%20%20Additionally%0A%20%20%20%20%20*%20host%20properties%20can%20be%20forwarded%20in%2C%20and%20instance%20properties%20can%20be%0A%20%20%20%20%20*%20notified%20out%20by%20providing%20optional%20callbacks%20in%20the%20%60options%60%20dictionary.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Valid%20configuration%20in%20%60options%60%20are%20as%20follows%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20-%20%60forwardHostProp(property%2C%20value)%60%3A%20Called%20when%20a%20property%20referenced%0A%20%20%20%20%20*%20%20%20in%20the%20template%20changed%20on%20the%20template&#39;s%20host.%20As%20this%20library%20does%0A%20%20%20%20%20*%20%20%20not%20retain%20references%20to%20templates%20instanced%20by%20the%20user%2C%20it%20is%20the%0A%20%20%20%20%20*%20%20%20templatize%20owner&#39;s%20responsibility%20to%20forward%20host%20property%20changes%20into%0A%20%20%20%20%20*%20%20%20user-stamped%20instances.%20%20The%20%60instance.forwardHostProp(property%2C%20value)%60%0A%20%20%20%20%20*%20%20%20%20method%20on%20the%20generated%20class%20should%20be%20called%20to%20forward%20host%0A%20%20%20%20%20*%20%20%20properties%20into%20the%20template%20to%20prevent%20unnecessary%20property-changed%0A%20%20%20%20%20*%20%20%20notifications.%20Any%20properties%20referenced%20in%20the%20template%20that%20are%20not%0A%20%20%20%20%20*%20%20%20defined%20in%20%60instanceProps%60%20will%20be%20notified%20up%20to%20the%20template&#39;s%20host%0A%20%20%20%20%20*%20%20%20automatically.%0A%20%20%20%20%20*%20-%20%60instanceProps%60%3A%20Dictionary%20of%20property%20names%20that%20will%20be%20added%0A%20%20%20%20%20*%20%20%20to%20the%20instance%20by%20the%20templatize%20owner.%20%20These%20properties%20shadow%20any%0A%20%20%20%20%20*%20%20%20host%20properties%2C%20and%20changes%20within%20the%20template%20to%20these%20properties%0A%20%20%20%20%20*%20%20%20will%20result%20in%20%60notifyInstanceProp%60%20being%20called.%0A%20%20%20%20%20*%20-%20%60mutableData%60%3A%20When%20%60true%60%2C%20the%20generated%20class%20will%20skip%20strict%0A%20%20%20%20%20*%20%20%20dirty-checking%20for%20objects%20and%20arrays%20(always%20consider%20them%20to%20be%0A%20%20%20%20%20*%20%20%20%22dirty%22).%0A%20%20%20%20%20*%20-%20%60notifyInstanceProp(instance%2C%20property%2C%20value)%60%3A%20Called%20when%0A%20%20%20%20%20*%20%20%20an%20instance%20property%20changes.%20%20Users%20may%20choose%20to%20call%20%60notifyPath%60%0A%20%20%20%20%20*%20%20%20on%20e.g.%20the%20owner%20to%20notify%20the%20change.%0A%20%20%20%20%20*%20-%20%60parentModel%60%3A%20When%20%60true%60%2C%20events%20handled%20by%20declarative%20event%20listeners%0A%20%20%20%20%20*%20%20%20(%60on-event%3D%22handler%22%60)%20will%20be%20decorated%20with%20a%20%60model%60%20property%20pointing%0A%20%20%20%20%20*%20%20%20to%20the%20template%20instance%20that%20stamped%20it.%20%20It%20will%20also%20be%20returned%0A%20%20%20%20%20*%20%20%20from%20%60instance.parentModel%60%20in%20cases%20where%20template%20instance%20nesting%0A%20%20%20%20%20*%20%20%20causes%20an%20inner%20model%20to%20shadow%20an%20outer%20model.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20All%20callbacks%20are%20called%20bound%20to%20the%20%60owner%60.%20Any%20context%0A%20%20%20%20%20*%20needed%20for%20the%20callbacks%20(such%20as%20references%20to%20%60instances%60%20stamped)%0A%20%20%20%20%20*%20should%20be%20stored%20on%20the%20%60owner%60%20such%20that%20they%20can%20be%20retrieved%20via%0A%20%20%20%20%20*%20%60this%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20When%20%60options.forwardHostProp%60%20is%20declared%20as%20an%20option%2C%20any%20properties%0A%20%20%20%20%20*%20referenced%20in%20the%20template%20will%20be%20automatically%20forwarded%20from%20the%20host%20of%0A%20%20%20%20%20*%20the%20%60%3Ctemplate%3E%60%20to%20instances%2C%20with%20the%20exception%20of%20any%20properties%20listed%20in%0A%20%20%20%20%20*%20the%20%60options.instanceProps%60%20object.%20%20%60instanceProps%60%20are%20assumed%20to%20be%0A%20%20%20%20%20*%20managed%20by%20the%20owner%20of%20the%20instances%2C%20either%20passed%20into%20the%20constructor%0A%20%20%20%20%20*%20or%20set%20after%20the%20fact.%20%20Note%2C%20any%20properties%20passed%20into%20the%20constructor%20will%0A%20%20%20%20%20*%20always%20be%20set%20to%20the%20instance%20(regardless%20of%20whether%20they%20would%20normally%0A%20%20%20%20%20*%20be%20forwarded%20from%20the%20host).%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Note%20that%20%60templatize()%60%20can%20be%20run%20only%20once%20for%20a%20given%20%60%3Ctemplate%3E%60.%0A%20%20%20%20%20*%20Further%20calls%20will%20result%20in%20an%20error.%20Also%2C%20there%20is%20a%20special%0A%20%20%20%20%20*%20behavior%20if%20the%20template%20was%20duplicated%20through%20a%20mechanism%20such%20as%0A%20%20%20%20%20*%20%60%3Cdom-repeat%3E%60%20or%20%60%3Ctest-fixture%3E%60.%20In%20this%20case%2C%20all%20calls%20to%0A%20%20%20%20%20*%20%60templatize()%60%20return%20the%20same%20class%20for%20all%20duplicates%20of%20a%20template.%0A%20%20%20%20%20*%20The%20class%20returned%20from%20%60templatize()%60%20is%20generated%20only%20once%20using%0A%20%20%20%20%20*%20the%20%60options%60%20from%20the%20first%20call.%20This%20means%20that%20any%20%60options%60%0A%20%20%20%20%20*%20provided%20to%20subsequent%20calls%20will%20be%20ignored.%20Therefore%2C%20it%20is%20very%0A%20%20%20%20%20*%20important%20not%20to%20close%20over%20any%20variables%20inside%20the%20callbacks.%20Also%2C%0A%20%20%20%20%20*%20arrow%20functions%20must%20be%20avoided%20because%20they%20bind%20the%20outer%20%60this%60.%0A%20%20%20%20%20*%20Inside%20the%20callbacks%2C%20any%20contextual%20information%20can%20be%20accessed%0A%20%20%20%20%20*%20through%20%60this%60%2C%20which%20points%20to%20the%20%60owner%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Templatize%0A%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20to%20templatize%0A%20%20%20%20%20*%20%40param%20%7BPolymer_PropertyEffects%3D%7D%20owner%20Owner%20of%20the%20template%20instances%3B%0A%20%20%20%20%20*%20%20%20any%20optional%20callbacks%20will%20be%20bound%20to%20this%20owner.%0A%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20options%20Options%20dictionary%20(see%20summary%20for%20details)%0A%20%20%20%20%20*%20%40return%20%7Bfunction(new%3ATemplateInstanceBase)%7D%20Generated%20class%20bound%20to%20the%20template%0A%20%20%20%20%20*%20%20%20provided%0A%20%20%20%20%20*%20%40suppress%20%7BinvalidCasts%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20templatize(template%2C%20owner%2C%20options)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Under%20strictTemplatePolicy%2C%20the%20templatized%20element%20must%20be%20owned%0A%20%20%20%20%20%20%2F%2F%20by%20a%20(trusted)%20Polymer%20element%2C%20indicated%20by%20existence%20of%20_methodHost%3B%0A%20%20%20%20%20%20%2F%2F%20e.g.%20for%20dom-if%20%26%20dom-repeat%20in%20main%20document%2C%20_methodHost%20is%20null%0A%20%20%20%20%20%20if%20(Polymer.strictTemplatePolicy%20%26%26%20!findMethodHost(template))%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error(&#39;strictTemplatePolicy%3A%20template%20owner%20not%20trusted&#39;)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20options%20%3D%0A%20%20%20%20%20%20%2F**%20%40type%20%7B!TemplatizeOptions%7D%20*%2F%0A%20%20%20%20%20%20options%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%20%20if%20(template.__templatizeOwner)%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error(&#39;A%20%3Ctemplate%3E%20can%20only%20be%20templatized%20once&#39;)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20template.__templatizeOwner%20%3D%20owner%3B%0A%20%20%20%20%20%20const%20ctor%20%3D%20owner%20%3F%20owner.constructor%20%3A%20TemplateInstanceBase%3B%0A%0A%20%20%20%20%20%20let%20templateInfo%20%3D%20ctor._parseTemplate(template)%3B%20%2F%2F%20Get%20memoized%20base%20class%20for%20the%20prototypical%20template%2C%20which%0A%20%20%20%20%20%20%2F%2F%20includes%20property%20effects%20for%20binding%20template%20%26%20forwarding%0A%0A%0A%20%20%20%20%20%20let%20baseClass%20%3D%20templateInfo.templatizeInstanceClass%3B%0A%0A%20%20%20%20%20%20if%20(!baseClass)%20%7B%0A%20%20%20%20%20%20%20%20baseClass%20%3D%20createTemplatizerClass(template%2C%20templateInfo%2C%20options)%3B%0A%20%20%20%20%20%20%20%20templateInfo.templatizeInstanceClass%20%3D%20baseClass%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20Host%20property%20forwarding%20must%20be%20installed%20onto%20template%20instance%0A%0A%0A%20%20%20%20%20%20addPropagateEffects(template%2C%20templateInfo%2C%20options)%3B%20%2F%2F%20Subclass%20base%20class%20and%20add%20reference%20for%20this%20specific%20template%0A%0A%20%20%20%20%20%20%2F**%20%40private%20*%2F%0A%0A%20%20%20%20%20%20let%20klass%20%3D%20class%20TemplateInstance%20extends%20baseClass%20%7B%7D%3B%0A%20%20%20%20%20%20klass.prototype._methodHost%20%3D%20findMethodHost(template)%3B%0A%20%20%20%20%20%20klass.prototype.__dataHost%20%3D%20template%3B%0A%20%20%20%20%20%20klass.prototype.__templatizeOwner%20%3D%20owner%3B%0A%20%20%20%20%20%20klass.prototype.__hostProps%20%3D%20templateInfo.hostProps%3B%0A%20%20%20%20%20%20klass%20%3D%0A%20%20%20%20%20%20%2F**%20%40type%20%7Bfunction(new%3ATemplateInstanceBase)%7D%20*%2F%0A%20%20%20%20%20%20klass%3B%20%2F%2Feslint-disable-line%20no-self-assign%0A%0A%20%20%20%20%20%20return%20klass%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20template%20%22model%22%20associated%20with%20a%20given%20element%2C%20which%0A%20%20%20%20%20*%20serves%20as%20the%20binding%20scope%20for%20the%20template%20instance%20the%20element%20is%0A%20%20%20%20%20*%20contained%20in.%20A%20template%20model%20is%20an%20instance%20of%0A%20%20%20%20%20*%20%60TemplateInstanceBase%60%2C%20and%20should%20be%20used%20to%20manipulate%20data%0A%20%20%20%20%20*%20associated%20with%20this%20template%20instance.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%20%20let%20model%20%3D%20modelForElement(el)%3B%0A%20%20%20%20%20*%20%20%20if%20(model.index%20%3C%2010)%20%7B%0A%20%20%20%20%20*%20%20%20%20%20model.set(&#39;item.checked&#39;%2C%20true)%3B%0A%20%20%20%20%20*%20%20%20%7D%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40memberof%20Polymer.Templatize%0A%20%20%20%20%20*%20%40param%20%7BHTMLTemplateElement%7D%20template%20The%20model%20will%20be%20returned%20for%0A%20%20%20%20%20*%20%20%20elements%20stamped%20from%20this%20template%0A%20%20%20%20%20*%20%40param%20%7BNode%3D%7D%20node%20Node%20for%20which%20to%20return%20a%20template%20model.%0A%20%20%20%20%20*%20%40return%20%7BTemplateInstanceBase%7D%20Template%20instance%20representing%20the%0A%20%20%20%20%20*%20%20%20binding%20scope%20for%20the%20element%0A%20%20%20%20%20*%2F%0A%20%20%20%20modelForElement(template%2C%20node)%20%7B%0A%20%20%20%20%20%20let%20model%3B%0A%0A%20%20%20%20%20%20while%20(node)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20An%20element%20with%20a%20__templatizeInstance%20marks%20the%20top%20boundary%0A%20%20%20%20%20%20%20%20%2F%2F%20of%20a%20scope%3B%20walk%20up%20until%20we%20find%20one%2C%20and%20then%20ensure%20that%0A%20%20%20%20%20%20%20%20%2F%2F%20its%20__dataHost%20matches%20%60this%60%2C%20meaning%20this%20dom-repeat%20stamped%20it%0A%20%20%20%20%20%20%20%20if%20(model%20%3D%20node.__templatizeInstance)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Found%20an%20element%20stamped%20by%20another%20template%3B%20keep%20walking%20up%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20from%20its%20__dataHost%0A%20%20%20%20%20%20%20%20%20%20if%20(model.__dataHost%20!%3D%20template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%20model.__dataHost%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20model%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Still%20in%20a%20template%20scope%2C%20keep%20going%20up%20until%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20a%20__templatizeInstance%20is%20found%0A%20%20%20%20%20%20%20%20%20%20node%20%3D%20node.parentNode%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%3B%0A%20%20Polymer.TemplateInstanceBase%20%3D%20TemplateInstanceBase%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Futils%2Ftemplatize.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20let%20TemplateInstanceBase%20%3D%20Polymer.TemplateInstanceBase%3B%20%2F%2F%20eslint-disable-line%0A%0A%20%20%2F**%0A%20%20%20*%20%40typedef%20%7B%7B%0A%20%20%20*%20%20%20_templatizerTemplate%3A%20HTMLTemplateElement%2C%0A%20%20%20*%20%20%20_parentModel%3A%20boolean%2C%0A%20%20%20*%20%20%20_instanceProps%3A%20Object%2C%0A%20%20%20*%20%20%20_forwardHostPropV2%3A%20Function%2C%0A%20%20%20*%20%20%20_notifyInstancePropV2%3A%20Function%2C%0A%20%20%20*%20%20%20ctor%3A%20TemplateInstanceBase%0A%20%20%20*%20%7D%7D%0A%20%20%20*%2F%0A%0A%20%20let%20TemplatizerUser%3B%20%2F%2F%20eslint-disable-line%0A%0A%20%20%2F**%0A%20%20%20*%20The%20%60Polymer.Templatizer%60%20behavior%20adds%20methods%20to%20generate%20instances%20of%0A%20%20%20*%20templates%20that%20are%20each%20managed%20by%20an%20anonymous%20%60Polymer.PropertyEffects%60%0A%20%20%20*%20instance%20where%20data-bindings%20in%20the%20stamped%20template%20content%20are%20bound%20to%0A%20%20%20*%20accessors%20on%20itself.%0A%20%20%20*%0A%20%20%20*%20This%20behavior%20is%20provided%20in%20Polymer%202.x%20as%20a%20hybrid-element%20convenience%0A%20%20%20*%20only.%20%20For%20non-hybrid%20usage%2C%20the%20%60Polymer.Templatize%60%20library%0A%20%20%20*%20should%20be%20used%20instead.%0A%20%20%20*%0A%20%20%20*%20Example%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%2F%2F%20Get%20a%20template%20from%20somewhere%2C%20e.g.%20light%20DOM%0A%20%20%20*%20%20%20%20%20let%20template%20%3D%20this.querySelector(&#39;template&#39;)%3B%0A%20%20%20*%20%20%20%20%20%2F%2F%20Prepare%20the%20template%0A%20%20%20*%20%20%20%20%20this.templatize(template)%3B%0A%20%20%20*%20%20%20%20%20%2F%2F%20Instance%20the%20template%20with%20an%20initial%20data%20model%0A%20%20%20*%20%20%20%20%20let%20instance%20%3D%20this.stamp(%7BmyProp%3A%20&#39;initial&#39;%7D)%3B%0A%20%20%20*%20%20%20%20%20%2F%2F%20Insert%20the%20instance&#39;s%20DOM%20somewhere%2C%20e.g.%20light%20DOM%0A%20%20%20*%20%20%20%20%20Polymer.dom(this).appendChild(instance.root)%3B%0A%20%20%20*%20%20%20%20%20%2F%2F%20Changing%20a%20property%20on%20the%20instance%20will%20propagate%20to%20bindings%0A%20%20%20*%20%20%20%20%20%2F%2F%20in%20the%20template%0A%20%20%20*%20%20%20%20%20instance.myProp%20%3D%20&#39;new%20value&#39;%3B%0A%20%20%20*%0A%20%20%20*%20Users%20of%20%60Templatizer%60%20may%20need%20to%20implement%20the%20following%20abstract%0A%20%20%20*%20API&#39;s%20to%20determine%20how%20properties%20and%20paths%20from%20the%20host%20should%20be%0A%20%20%20*%20forwarded%20into%20to%20instances%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20_forwardHostPropV2%3A%20function(prop%2C%20value)%0A%20%20%20*%0A%20%20%20*%20Likewise%2C%20users%20may%20implement%20these%20additional%20abstract%20API&#39;s%20to%20determine%0A%20%20%20*%20how%20instance-specific%20properties%20that%20change%20on%20the%20instance%20should%20be%0A%20%20%20*%20forwarded%20out%20to%20the%20host%2C%20if%20necessary.%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20_notifyInstancePropV2%3A%20function(inst%2C%20prop%2C%20value)%0A%20%20%20*%0A%20%20%20*%20In%20order%20to%20determine%20which%20properties%20are%20instance-specific%20and%20require%0A%20%20%20*%20custom%20notification%20via%20%60_notifyInstanceProp%60%2C%20define%20an%20%60_instanceProps%60%0A%20%20%20*%20object%20containing%20keys%20for%20each%20instance%20prop%2C%20for%20example%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20_instanceProps%3A%20%7B%0A%20%20%20*%20%20%20%20%20%20%20item%3A%20true%2C%0A%20%20%20*%20%20%20%20%20%20%20index%3A%20true%0A%20%20%20*%20%20%20%20%20%7D%0A%20%20%20*%0A%20%20%20*%20Any%20properties%20used%20in%20the%20template%20that%20are%20not%20defined%20in%20_instanceProp%0A%20%20%20*%20will%20be%20forwarded%20out%20to%20the%20Templatize%20%60owner%60%20automatically.%0A%20%20%20*%0A%20%20%20*%20Users%20may%20also%20implement%20the%20following%20abstract%20function%20to%20show%20or%0A%20%20%20*%20hide%20any%20DOM%20generated%20using%20%60stamp%60%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20_showHideChildren%3A%20function(shouldHide)%0A%20%20%20*%0A%20%20%20*%20Note%20that%20some%20callbacks%20are%20suffixed%20with%20%60V2%60%20in%20the%20Polymer%202.x%20behavior%0A%20%20%20*%20as%20the%20implementations%20will%20need%20to%20differ%20from%20the%20callbacks%20required%0A%20%20%20*%20by%20the%201.x%20Templatizer%20API%20due%20to%20changes%20in%20the%20%60TemplateInstance%60%20API%0A%20%20%20*%20between%20versions%201.x%20and%202.x.%0A%20%20%20*%0A%20%20%20*%20%40polymerBehavior%0A%20%20%20*%2F%0A%0A%20%20Polymer.Templatizer%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Generates%20an%20anonymous%20%60TemplateInstance%60%20class%20(stored%20as%20%60this.ctor%60)%0A%20%20%20%20%20*%20for%20the%20provided%20template.%20%20This%20method%20should%20be%20called%20once%20per%0A%20%20%20%20%20*%20template%20to%20prepare%20an%20element%20for%20stamping%20the%20template%2C%20followed%0A%20%20%20%20%20*%20by%20%60stamp%60%20to%20create%20new%20instances%20of%20the%20template.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!HTMLTemplateElement%7D%20template%20Template%20to%20prepare%0A%20%20%20%20%20*%20%40param%20%7Bboolean%3D%7D%20mutableData%20When%20%60true%60%2C%20the%20generated%20class%20will%20skip%0A%20%20%20%20%20*%20%20%20strict%20dirty-checking%20for%20objects%20and%20arrays%20(always%20consider%20them%20to%0A%20%20%20%20%20*%20%20%20be%20%22dirty%22).%20Defaults%20to%20false.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40this%20%7BTemplatizerUser%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20templatize(template%2C%20mutableData)%20%7B%0A%20%20%20%20%20%20this._templatizerTemplate%20%3D%20template%3B%0A%20%20%20%20%20%20this.ctor%20%3D%20Polymer.Templatize.templatize(template%2C%20this%2C%20%7B%0A%20%20%20%20%20%20%20%20mutableData%3A%20Boolean(mutableData)%2C%0A%20%20%20%20%20%20%20%20parentModel%3A%20this._parentModel%2C%0A%20%20%20%20%20%20%20%20instanceProps%3A%20this._instanceProps%2C%0A%20%20%20%20%20%20%20%20forwardHostProp%3A%20this._forwardHostPropV2%2C%0A%20%20%20%20%20%20%20%20notifyInstanceProp%3A%20this._notifyInstancePropV2%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Creates%20an%20instance%20of%20the%20template%20prepared%20by%20%60templatize%60.%20%20The%20object%0A%20%20%20%20%20*%20returned%20is%20an%20instance%20of%20the%20anonymous%20class%20generated%20by%20%60templatize%60%0A%20%20%20%20%20*%20whose%20%60root%60%20property%20is%20a%20document%20fragment%20containing%20newly%20cloned%0A%20%20%20%20%20*%20template%20content%2C%20and%20which%20has%20property%20accessors%20corresponding%20to%0A%20%20%20%20%20*%20properties%20referenced%20in%20template%20bindings.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7BObject%3D%7D%20model%20Object%20containing%20initial%20property%20values%20to%0A%20%20%20%20%20*%20%20%20populate%20into%20the%20template%20bindings.%0A%20%20%20%20%20*%20%40return%20%7BTemplateInstanceBase%7D%20Returns%20the%20created%20instance%20of%0A%20%20%20%20%20*%20the%20template%20prepared%20by%20%60templatize%60.%0A%20%20%20%20%20*%20%40this%20%7BTemplatizerUser%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20stamp(model)%20%7B%0A%20%20%20%20%20%20return%20new%20this.ctor(model)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20template%20%22model%22%20(%60TemplateInstance%60)%20associated%20with%0A%20%20%20%20%20*%20a%20given%20element%2C%20which%20serves%20as%20the%20binding%20scope%20for%20the%20template%0A%20%20%20%20%20*%20instance%20the%20element%20is%20contained%20in.%20%20A%20template%20model%20should%20be%20used%0A%20%20%20%20%20*%20to%20manipulate%20data%20associated%20with%20this%20template%20instance.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7BHTMLElement%7D%20el%20Element%20for%20which%20to%20return%20a%20template%20model.%0A%20%20%20%20%20*%20%40return%20%7BTemplateInstanceBase%7D%20Model%20representing%20the%20binding%20scope%20for%0A%20%20%20%20%20*%20%20%20the%20element.%0A%20%20%20%20%20*%20%40this%20%7BTemplatizerUser%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20modelForElement(el)%20%7B%0A%20%20%20%20%20%20return%20Polymer.Templatize.modelForElement(this._templatizerTemplate%2C%20el)%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Flegacy%2Ftemplatizer-behavior.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/elements/dom-bind.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/boot.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/property-effects.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/mutable-data.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/gesture-event-listeners.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40extends%20%7BHTMLElement%7D%0A%20%20%20*%20%40implements%20%7BPolymer_PropertyEffects%7D%0A%20%20%20*%20%40implements%20%7BPolymer_OptionalMutableData%7D%0A%20%20%20*%20%40implements%20%7BPolymer_GestureEventListeners%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20const%20domBindBase%20%3D%20Polymer.GestureEventListeners(Polymer.OptionalMutableData(Polymer.PropertyEffects(HTMLElement)))%3B%0A%20%20%2F**%0A%20%20%20*%20Custom%20element%20to%20allow%20using%20Polymer&#39;s%20template%20features%20(data%20binding%2C%0A%20%20%20*%20declarative%20event%20listeners%2C%20etc.)%20in%20the%20main%20document%20without%20defining%0A%20%20%20*%20a%20new%20custom%20element.%0A%20%20%20*%0A%20%20%20*%20%60%3Ctemplate%3E%60%20tags%20utilizing%20bindings%20may%20be%20wrapped%20with%20the%20%60%3Cdom-bind%3E%60%0A%20%20%20*%20element%2C%20which%20will%20immediately%20stamp%20the%20wrapped%20template%20into%20the%20main%0A%20%20%20*%20document%20and%20bind%20elements%20to%20the%20%60dom-bind%60%20element%20itself%20as%20the%0A%20%20%20*%20binding%20scope.%0A%20%20%20*%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40customElement%0A%20%20%20*%20%40appliesMixin%20Polymer.PropertyEffects%0A%20%20%20*%20%40appliesMixin%20Polymer.OptionalMutableData%0A%20%20%20*%20%40appliesMixin%20Polymer.GestureEventListeners%0A%20%20%20*%20%40extends%20%7BdomBindBase%7D%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Custom%20element%20to%20allow%20using%20Polymer&#39;s%20template%20features%20(data%0A%20%20%20*%20%20%20binding%2C%20declarative%20event%20listeners%2C%20etc.)%20in%20the%20main%20document.%0A%20%20%20*%2F%0A%0A%20%20class%20DomBind%20extends%20domBindBase%20%7B%0A%20%20%20%20static%20get%20observedAttributes()%20%7B%0A%20%20%20%20%20%20return%20%5B&#39;mutable-data&#39;%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20super()%3B%0A%0A%20%20%20%20%20%20if%20(Polymer.strictTemplatePolicy)%20%7B%0A%20%20%20%20%20%20%20%20throw%20new%20Error(%60strictTemplatePolicy%3A%20dom-bind%20not%20allowed%60)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.root%20%3D%20null%3B%0A%20%20%20%20%20%20this.%24%20%3D%20null%3B%0A%20%20%20%20%20%20this.__children%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%20%40return%20%7Bvoid%7D%20*%2F%0A%0A%0A%20%20%20%20attributeChangedCallback()%20%7B%0A%20%20%20%20%20%20%2F%2F%20assumes%20only%20one%20observed%20attribute%0A%20%20%20%20%20%20this.mutableData%20%3D%20true%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%20%40return%20%7Bvoid%7D%20*%2F%0A%0A%0A%20%20%20%20connectedCallback()%20%7B%0A%20%20%20%20%20%20this.style.display%20%3D%20&#39;none&#39;%3B%0A%20%20%20%20%20%20this.render()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%20%40return%20%7Bvoid%7D%20*%2F%0A%0A%0A%20%20%20%20disconnectedCallback()%20%7B%0A%20%20%20%20%20%20this.__removeChildren()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__insertChildren()%20%7B%0A%20%20%20%20%20%20this.parentNode.insertBefore(this.root%2C%20this)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__removeChildren()%20%7B%0A%20%20%20%20%20%20if%20(this.__children)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.__children.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.root.appendChild(this.__children%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Forces%20the%20element%20to%20render%20its%20content.%20This%20is%20typically%20only%0A%20%20%20%20%20*%20necessary%20to%20call%20if%20HTMLImports%20with%20the%20async%20attribute%20are%20used.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20render()%20%7B%0A%20%20%20%20%20%20let%20template%3B%0A%0A%20%20%20%20%20%20if%20(!this.__children)%20%7B%0A%20%20%20%20%20%20%20%20template%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLTemplateElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20template%20%7C%7C%20this.querySelector(&#39;template&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20until%20childList%20changes%20and%20template%20should%20be%20there%20by%20then%0A%20%20%20%20%20%20%20%20%20%20let%20observer%20%3D%20new%20MutationObserver(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20template%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLTemplateElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20this.querySelector(&#39;template&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20observer.disconnect()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.render()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(&#39;dom-bind%20requires%20a%20%3Ctemplate%3E%20child&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20observer.observe(this%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20childList%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this.root%20%3D%20this._stampTemplate(template)%3B%0A%20%20%20%20%20%20%20%20this.%24%20%3D%20this.root.%24%3B%0A%20%20%20%20%20%20%20%20this.__children%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20n%20%3D%20this.root.firstChild%3B%20n%3B%20n%20%3D%20n.nextSibling)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__children%5Bthis.__children.length%5D%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this._enableProperties()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.__insertChildren()%3B%0A%0A%20%20%20%20%20%20this.dispatchEvent(new%20CustomEvent(&#39;dom-change&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20bubbles%3A%20true%2C%0A%20%20%20%20%20%20%20%20composed%3A%20true%0A%20%20%20%20%20%20%7D))%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%0A%20%20customElements.define(&#39;dom-bind&#39;%2C%20DomBind)%3B%0A%20%20%2F**%20%40const%20*%2F%0A%0A%20%20Polymer.DomBind%20%3D%20DomBind%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Felements%2Fdom-bind.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/elements/dom-repeat.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer-element.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/templatize.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/debounce.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/flush.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/mutable-data.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20let%20TemplateInstanceBase%20%3D%20Polymer.TemplateInstanceBase%3B%20%2F%2F%20eslint-disable-line%0A%0A%20%20%2F**%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40implements%20%7BPolymer_OptionalMutableData%7D%0A%20%20%20*%20%40extends%20%7BPolymer.Element%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20const%20domRepeatBase%20%3D%20Polymer.OptionalMutableData(Polymer.Element)%3B%0A%20%20%2F**%0A%20%20%20*%20The%20%60%3Cdom-repeat%3E%60%20element%20will%20automatically%20stamp%20and%20binds%20one%20instance%0A%20%20%20*%20of%20template%20content%20to%20each%20object%20in%20a%20user-provided%20array.%0A%20%20%20*%20%60dom-repeat%60%20accepts%20an%20%60items%60%20property%2C%20and%20one%20instance%20of%20the%20template%0A%20%20%20*%20is%20stamped%20for%20each%20item%20into%20the%20DOM%20at%20the%20location%20of%20the%20%60dom-repeat%60%0A%20%20%20*%20element.%20%20The%20%60item%60%20property%20will%20be%20set%20on%20each%20instance&#39;s%20binding%0A%20%20%20*%20scope%2C%20thus%20templates%20should%20bind%20to%20sub-properties%20of%20%60item%60.%0A%20%20%20*%0A%20%20%20*%20Example%3A%0A%20%20%20*%0A%20%20%20*%20%60%60%60html%0A%20%20%20*%20%3Cdom-module%20id%3D%22employee-list%22%3E%0A%20%20%20*%0A%20%20%20*%20%20%20%3Ctemplate%3E%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%3Cdiv%3E%20Employee%20list%3A%20%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%3Cdom-repeat%20items%3D%22%7B%7Bemployees%7D%7D%22%3E%0A%20%20%20*%20%20%20%20%20%20%20%3Ctemplate%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3Cdiv%3EFirst%20name%3A%20%3Cspan%3E%7B%7Bitem.first%7D%7D%3C%2Fspan%3E%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3Cdiv%3ELast%20name%3A%20%3Cspan%3E%7B%7Bitem.last%7D%7D%3C%2Fspan%3E%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20*%20%20%20%20%20%3C%2Fdom-repeat%3E%0A%20%20%20*%0A%20%20%20*%20%20%20%3C%2Ftemplate%3E%0A%20%20%20*%0A%20%20%20*%20%3C%2Fdom-module%3E%0A%20%20%20*%20%60%60%60%0A%20%20%20*%0A%20%20%20*%20With%20the%20following%20custom%20element%20definition%3A%0A%20%20%20*%0A%20%20%20*%20%60%60%60js%0A%20%20%20*%20class%20EmployeeList%20extends%20Polymer.Element%20%7B%0A%20%20%20*%20%20%20static%20get%20is()%20%7B%20return%20&#39;employee-list&#39;%3B%20%7D%0A%20%20%20*%20%20%20static%20get%20properties()%20%7B%0A%20%20%20*%20%20%20%20%20return%20%7B%0A%20%20%20*%20%20%20%20%20%20%20employees%3A%20%7B%0A%20%20%20*%20%20%20%20%20%20%20%20%20value()%20%7B%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20return%20%5B%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bfirst%3A%20&#39;Bob&#39;%2C%20last%3A%20&#39;Smith&#39;%7D%2C%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bfirst%3A%20&#39;Sally&#39;%2C%20last%3A%20&#39;Johnson&#39;%7D%2C%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%20%20...%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20*%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20*%20%20%20%20%20%20%20%7D%0A%20%20%20*%20%20%20%20%20%7D%3B%0A%20%20%20*%20%20%20%7D%0A%20%20%20*%20%7D%0A%20%20%20*%20%60%60%60%0A%20%20%20*%0A%20%20%20*%20Notifications%20for%20changes%20to%20items%20sub-properties%20will%20be%20forwarded%20to%20template%0A%20%20%20*%20instances%2C%20which%20will%20update%20via%20the%20normal%20structured%20data%20notification%20system.%0A%20%20%20*%0A%20%20%20*%20Mutations%20to%20the%20%60items%60%20array%20itself%20should%20be%20made%20using%20the%20Array%0A%20%20%20*%20mutation%20API&#39;s%20on%20%60Polymer.Base%60%20(%60push%60%2C%20%60pop%60%2C%20%60splice%60%2C%20%60shift%60%2C%0A%20%20%20*%20%60unshift%60)%2C%20and%20template%20instances%20will%20be%20kept%20in%20sync%20with%20the%20data%20in%20the%0A%20%20%20*%20array.%0A%20%20%20*%0A%20%20%20*%20Events%20caught%20by%20event%20handlers%20within%20the%20%60dom-repeat%60%20template%20will%20be%0A%20%20%20*%20decorated%20with%20a%20%60model%60%20property%2C%20which%20represents%20the%20binding%20scope%20for%0A%20%20%20*%20each%20template%20instance.%20%20The%20model%20is%20an%20instance%20of%20Polymer.Base%2C%20and%20should%0A%20%20%20*%20be%20used%20to%20manipulate%20data%20on%20the%20instance%2C%20for%20example%0A%20%20%20*%20%60event.model.set(&#39;item.checked&#39;%2C%20true)%3B%60.%0A%20%20%20*%0A%20%20%20*%20Alternatively%2C%20the%20model%20for%20a%20template%20instance%20for%20an%20element%20stamped%20by%0A%20%20%20*%20a%20%60dom-repeat%60%20can%20be%20obtained%20using%20the%20%60modelForElement%60%20API%20on%20the%0A%20%20%20*%20%60dom-repeat%60%20that%20stamped%20it%2C%20for%20example%0A%20%20%20*%20%60this.%24.domRepeat.modelForElement(event.target).set(&#39;item.checked&#39;%2C%20true)%3B%60.%0A%20%20%20*%20This%20may%20be%20useful%20for%20manipulating%20instance%20data%20of%20event%20targets%20obtained%0A%20%20%20*%20by%20event%20handlers%20on%20parents%20of%20the%20%60dom-repeat%60%20(event%20delegation).%0A%20%20%20*%0A%20%20%20*%20A%20view-specific%20filter%2Fsort%20may%20be%20applied%20to%20each%20%60dom-repeat%60%20by%20supplying%20a%0A%20%20%20*%20%60filter%60%20and%2For%20%60sort%60%20property.%20%20This%20may%20be%20a%20string%20that%20names%20a%20function%20on%0A%20%20%20*%20the%20host%2C%20or%20a%20function%20may%20be%20assigned%20to%20the%20property%20directly.%20%20The%20functions%0A%20%20%20*%20should%20implemented%20following%20the%20standard%20%60Array%60%20filter%2Fsort%20API.%0A%20%20%20*%0A%20%20%20*%20In%20order%20to%20re-run%20the%20filter%20or%20sort%20functions%20based%20on%20changes%20to%20sub-fields%0A%20%20%20*%20of%20%60items%60%2C%20the%20%60observe%60%20property%20may%20be%20set%20as%20a%20space-separated%20list%20of%0A%20%20%20*%20%60item%60%20sub-fields%20that%20should%20cause%20a%20re-filter%2Fsort%20when%20modified.%20%20If%0A%20%20%20*%20the%20filter%20or%20sort%20function%20depends%20on%20properties%20not%20contained%20in%20%60items%60%2C%0A%20%20%20*%20the%20user%20should%20observe%20changes%20to%20those%20properties%20and%20call%20%60render%60%20to%20update%0A%20%20%20*%20the%20view%20based%20on%20the%20dependency%20change.%0A%20%20%20*%0A%20%20%20*%20For%20example%2C%20for%20an%20%60dom-repeat%60%20with%20a%20filter%20of%20the%20following%3A%0A%20%20%20*%0A%20%20%20*%20%60%60%60js%0A%20%20%20*%20isEngineer(item)%20%7B%0A%20%20%20*%20%20%20return%20item.type%20%3D%3D%20&#39;engineer&#39;%20%7C%7C%20item.manager.type%20%3D%3D%20&#39;engineer&#39;%3B%0A%20%20%20*%20%7D%0A%20%20%20*%20%60%60%60%0A%20%20%20*%0A%20%20%20*%20Then%20the%20%60observe%60%20property%20should%20be%20configured%20as%20follows%3A%0A%20%20%20*%0A%20%20%20*%20%60%60%60html%0A%20%20%20*%20%3Cdom-repeat%20items%3D%22%7B%7Bemployees%7D%7D%22%20filter%3D%22isEngineer%22%20observe%3D%22type%20manager.type%22%3E%0A%20%20%20*%20%60%60%60%0A%20%20%20*%0A%20%20%20*%20%40customElement%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40extends%20%7BdomRepeatBase%7D%0A%20%20%20*%20%40appliesMixin%20Polymer.OptionalMutableData%0A%20%20%20*%20%40summary%20Custom%20element%20for%20stamping%20instance%20of%20a%20template%20bound%20to%0A%20%20%20*%20%20%20items%20in%20an%20array.%0A%20%20%20*%2F%0A%0A%20%20class%20DomRepeat%20extends%20domRepeatBase%20%7B%0A%20%20%20%20%2F%2F%20Not%20needed%20to%20find%20template%3B%20can%20be%20removed%20once%20the%20analyzer%0A%20%20%20%20%2F%2F%20can%20find%20the%20tag%20name%20from%20customElements.define%20call%0A%20%20%20%20static%20get%20is()%20%7B%0A%20%20%20%20%20%20return%20&#39;dom-repeat&#39;%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20static%20get%20template()%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20static%20get%20properties()%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Fired%20whenever%20DOM%20is%20added%20or%20removed%20by%20this%20template%20(by%0A%20%20%20%20%20%20%20*%20default%2C%20rendering%20occurs%20lazily).%20%20To%20force%20immediate%20rendering%2C%20call%0A%20%20%20%20%20%20%20*%20%60render%60.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40event%20dom-change%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20An%20array%20containing%20items%20determining%20how%20many%20instances%20of%20the%20template%0A%20%20%20%20%20%20%20%20%20*%20to%20stamp%20and%20that%20that%20each%20template%20instance%20should%20bind%20to.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20items%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Array%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20The%20name%20of%20the%20variable%20to%20add%20to%20the%20binding%20scope%20for%20the%20array%0A%20%20%20%20%20%20%20%20%20*%20element%20associated%20with%20a%20given%20template%20instance.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20as%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20&#39;item&#39;%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20The%20name%20of%20the%20variable%20to%20add%20to%20the%20binding%20scope%20with%20the%20index%0A%20%20%20%20%20%20%20%20%20*%20of%20the%20instance%20in%20the%20sorted%20and%20filtered%20list%20of%20rendered%20items.%0A%20%20%20%20%20%20%20%20%20*%20Note%2C%20for%20the%20index%20in%20the%20%60this.items%60%20array%2C%20use%20the%20value%20of%20the%0A%20%20%20%20%20%20%20%20%20*%20%60itemsIndexAs%60%20property.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20indexAs%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20&#39;index&#39;%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20The%20name%20of%20the%20variable%20to%20add%20to%20the%20binding%20scope%20with%20the%20index%0A%20%20%20%20%20%20%20%20%20*%20of%20the%20instance%20in%20the%20%60this.items%60%20array.%20Note%2C%20for%20the%20index%20of%0A%20%20%20%20%20%20%20%20%20*%20this%20instance%20in%20the%20sorted%20and%20filtered%20list%20of%20rendered%20items%2C%0A%20%20%20%20%20%20%20%20%20*%20use%20the%20value%20of%20the%20%60indexAs%60%20property.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20itemsIndexAs%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20&#39;itemsIndex&#39;%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20A%20function%20that%20should%20determine%20the%20sort%20order%20of%20the%20items.%20%20This%0A%20%20%20%20%20%20%20%20%20*%20property%20should%20either%20be%20provided%20as%20a%20string%2C%20indicating%20a%20method%0A%20%20%20%20%20%20%20%20%20*%20name%20on%20the%20element&#39;s%20host%2C%20or%20else%20be%20an%20actual%20function.%20%20The%0A%20%20%20%20%20%20%20%20%20*%20function%20should%20match%20the%20sort%20function%20passed%20to%20%60Array.sort%60.%0A%20%20%20%20%20%20%20%20%20*%20Using%20a%20sort%20function%20has%20no%20effect%20on%20the%20underlying%20%60items%60%20array.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20sort%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Function%2C%0A%20%20%20%20%20%20%20%20%20%20observer%3A%20&#39;__sortChanged&#39;%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20A%20function%20that%20can%20be%20used%20to%20filter%20items%20out%20of%20the%20view.%20%20This%0A%20%20%20%20%20%20%20%20%20*%20property%20should%20either%20be%20provided%20as%20a%20string%2C%20indicating%20a%20method%0A%20%20%20%20%20%20%20%20%20*%20name%20on%20the%20element&#39;s%20host%2C%20or%20else%20be%20an%20actual%20function.%20%20The%0A%20%20%20%20%20%20%20%20%20*%20function%20should%20match%20the%20sort%20function%20passed%20to%20%60Array.filter%60.%0A%20%20%20%20%20%20%20%20%20*%20Using%20a%20filter%20function%20has%20no%20effect%20on%20the%20underlying%20%60items%60%20array.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20filter%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Function%2C%0A%20%20%20%20%20%20%20%20%20%20observer%3A%20&#39;__filterChanged&#39;%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20When%20using%20a%20%60filter%60%20or%20%60sort%60%20function%2C%20the%20%60observe%60%20property%0A%20%20%20%20%20%20%20%20%20*%20should%20be%20set%20to%20a%20space-separated%20list%20of%20the%20names%20of%20item%0A%20%20%20%20%20%20%20%20%20*%20sub-fields%20that%20should%20trigger%20a%20re-sort%20or%20re-filter%20when%20changed.%0A%20%20%20%20%20%20%20%20%20*%20These%20should%20generally%20be%20fields%20of%20%60item%60%20that%20the%20sort%20or%20filter%0A%20%20%20%20%20%20%20%20%20*%20function%20depends%20on.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20observe%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20%20%20observer%3A%20&#39;__observeChanged&#39;%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20When%20using%20a%20%60filter%60%20or%20%60sort%60%20function%2C%20the%20%60delay%60%20property%0A%20%20%20%20%20%20%20%20%20*%20determines%20a%20debounce%20time%20in%20ms%20after%20a%20change%20to%20observed%20item%0A%20%20%20%20%20%20%20%20%20*%20properties%20that%20must%20pass%20before%20the%20filter%20or%20sort%20is%20re-run.%0A%20%20%20%20%20%20%20%20%20*%20This%20is%20useful%20in%20rate-limiting%20shuffling%20of%20the%20view%20when%0A%20%20%20%20%20%20%20%20%20*%20item%20changes%20may%20be%20frequent.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20delay%3A%20Number%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20Count%20of%20currently%20rendered%20items%20after%20%60filter%60%20(if%20any)%20has%20been%20applied.%0A%20%20%20%20%20%20%20%20%20*%20If%20%22chunking%20mode%22%20is%20enabled%2C%20%60renderedItemCount%60%20is%20updated%20each%20time%20a%0A%20%20%20%20%20%20%20%20%20*%20set%20of%20template%20instances%20is%20rendered.%0A%20%20%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20renderedItemCount%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Number%2C%0A%20%20%20%20%20%20%20%20%20%20notify%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20readOnly%3A%20true%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20Defines%20an%20initial%20count%20of%20template%20instances%20to%20render%20after%20setting%0A%20%20%20%20%20%20%20%20%20*%20the%20%60items%60%20array%2C%20before%20the%20next%20paint%2C%20and%20puts%20the%20%60dom-repeat%60%0A%20%20%20%20%20%20%20%20%20*%20into%20%22chunking%20mode%22.%20%20The%20remaining%20items%20will%20be%20created%20and%20rendered%0A%20%20%20%20%20%20%20%20%20*%20incrementally%20at%20each%20animation%20frame%20therof%20until%20all%20instances%20have%0A%20%20%20%20%20%20%20%20%20*%20been%20rendered.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20initialCount%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Number%2C%0A%20%20%20%20%20%20%20%20%20%20observer%3A%20&#39;__initializeChunking&#39;%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20When%20%60initialCount%60%20is%20used%2C%20this%20property%20defines%20a%20frame%20rate%20(in%0A%20%20%20%20%20%20%20%20%20*%20fps)%20to%20target%20by%20throttling%20the%20number%20of%20instances%20rendered%20each%0A%20%20%20%20%20%20%20%20%20*%20frame%20to%20not%20exceed%20the%20budget%20for%20the%20target%20frame%20rate.%20%20The%0A%20%20%20%20%20%20%20%20%20*%20framerate%20is%20effectively%20the%20number%20of%20%60requestAnimationFrame%60s%20that%0A%20%20%20%20%20%20%20%20%20*%20it%20tries%20to%20allow%20to%20actually%20fire%20in%20a%20given%20second.%20It%20does%20this%0A%20%20%20%20%20%20%20%20%20*%20by%20measuring%20the%20time%20between%20%60rAF%60s%20and%20continuously%20adjusting%20the%0A%20%20%20%20%20%20%20%20%20*%20number%20of%20items%20created%20each%20%60rAF%60%20to%20maintain%20the%20target%20framerate.%0A%20%20%20%20%20%20%20%20%20*%20Setting%20this%20to%20a%20higher%20number%20allows%20lower%20latency%20and%20higher%0A%20%20%20%20%20%20%20%20%20*%20throughput%20for%20event%20handlers%20and%20other%20tasks%2C%20but%20results%20in%20a%0A%20%20%20%20%20%20%20%20%20*%20longer%20time%20for%20the%20remaining%20items%20to%20complete%20rendering.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20targetFramerate%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Number%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%2020%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20_targetFrameTime%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Number%2C%0A%20%20%20%20%20%20%20%20%20%20computed%3A%20&#39;__computeFrameTime(targetFramerate)&#39;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20static%20get%20observers()%20%7B%0A%20%20%20%20%20%20return%20%5B&#39;__itemsChanged(items.*)&#39;%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20super()%3B%0A%20%20%20%20%20%20this.__instances%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20this.__limit%20%3D%20Infinity%3B%0A%20%20%20%20%20%20this.__pool%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20this.__renderDebouncer%20%3D%20null%3B%0A%20%20%20%20%20%20this.__itemsIdxToInstIdx%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20this.__chunkCount%20%3D%20null%3B%0A%20%20%20%20%20%20this.__lastChunkTime%20%3D%20null%3B%0A%20%20%20%20%20%20this.__sortFn%20%3D%20null%3B%0A%20%20%20%20%20%20this.__filterFn%20%3D%20null%3B%0A%20%20%20%20%20%20this.__observePaths%20%3D%20null%3B%0A%20%20%20%20%20%20this.__ctor%20%3D%20null%3B%0A%20%20%20%20%20%20this.__isDetached%20%3D%20true%3B%0A%20%20%20%20%20%20this.template%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20disconnectedCallback()%20%7B%0A%20%20%20%20%20%20super.disconnectedCallback()%3B%0A%20%20%20%20%20%20this.__isDetached%20%3D%20true%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.__instances.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.__detachInstance(i)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20connectedCallback()%20%7B%0A%20%20%20%20%20%20super.connectedCallback()%3B%0A%20%20%20%20%20%20this.style.display%20%3D%20&#39;none&#39;%3B%20%2F%2F%20only%20perform%20attachment%20if%20the%20element%20was%20previously%20detached.%0A%0A%20%20%20%20%20%20if%20(this.__isDetached)%20%7B%0A%20%20%20%20%20%20%20%20this.__isDetached%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20let%20parent%20%3D%20this.parentNode%3B%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.__instances.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__attachInstance(i%2C%20parent)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20__ensureTemplatized()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Templatizing%20(generating%20the%20instance%20constructor)%20needs%20to%20wait%0A%20%20%20%20%20%20%2F%2F%20until%20ready%2C%20since%20won&#39;t%20have%20its%20template%20content%20handed%20back%20to%0A%20%20%20%20%20%20%2F%2F%20it%20until%20then%0A%20%20%20%20%20%20if%20(!this.__ctor)%20%7B%0A%20%20%20%20%20%20%20%20let%20template%20%3D%20this.template%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLTemplateElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20this.querySelector(&#39;template&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%2F%2F%20Wait%20until%20childList%20changes%20and%20template%20should%20be%20there%20by%20then%0A%20%20%20%20%20%20%20%20%20%20let%20observer%20%3D%20new%20MutationObserver(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.querySelector(&#39;template&#39;))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20observer.disconnect()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.__render()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(&#39;dom-repeat%20requires%20a%20%3Ctemplate%3E%20child&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20observer.observe(this%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20childList%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Template%20instance%20props%20that%20should%20be%20excluded%20from%20forwarding%0A%0A%0A%20%20%20%20%20%20%20%20let%20instanceProps%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20instanceProps%5Bthis.as%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20instanceProps%5Bthis.indexAs%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20instanceProps%5Bthis.itemsIndexAs%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.__ctor%20%3D%20Polymer.Templatize.templatize(template%2C%20this%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20mutableData%3A%20this.mutableData%2C%0A%20%20%20%20%20%20%20%20%20%20parentModel%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20instanceProps%3A%20instanceProps%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20%40this%20%7Bthis%7D%0A%20%20%20%20%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20prop%20Property%20to%20set%0A%20%20%20%20%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20set%20property%20to%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20forwardHostProp%3A%20function%20(prop%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20i%24%20%3D%20this.__instances%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20inst%3B%20i%20%3C%20i%24.length%20%26%26%20(inst%20%3D%20i%24%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20inst.forwardHostProp(prop%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20%40this%20%7Bthis%7D%0A%20%20%20%20%20%20%20%20%20%20%20*%20%40param%20%7BObject%7D%20inst%20Instance%20to%20notify%0A%20%20%20%20%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20prop%20Property%20to%20notify%0A%20%20%20%20%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20to%20notify%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20notifyInstanceProp%3A%20function%20(inst%2C%20prop%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Polymer.Path.matches(this.as%2C%20prop))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20idx%20%3D%20inst%5Bthis.itemsIndexAs%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(prop%20%3D%3D%20this.as)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.items%5Bidx%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20path%20%3D%20Polymer.Path.translate(this.as%2C%20%60%24%7BJSCompiler_renameProperty(&#39;items&#39;%2C%20this)%7D.%24%7Bidx%7D%60%2C%20prop)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.notifyPath(path%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__getMethodHost()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Technically%20this%20should%20be%20the%20owner%20of%20the%20outermost%20template.%0A%20%20%20%20%20%20%2F%2F%20In%20shadow%20dom%2C%20this%20is%20always%20getRootNode().host%2C%20but%20we%20can%0A%20%20%20%20%20%20%2F%2F%20approximate%20this%20via%20cooperation%20with%20our%20dataHost%20always%20setting%0A%20%20%20%20%20%20%2F%2F%20%60_methodHost%60%20as%20long%20as%20there%20were%20bindings%20(or%20id&#39;s)%20on%20this%0A%20%20%20%20%20%20%2F%2F%20instance%20causing%20it%20to%20get%20a%20dataHost.%0A%20%20%20%20%20%20return%20this.__dataHost._methodHost%20%7C%7C%20this.__dataHost%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__functionFromPropertyValue(functionOrMethodName)%20%7B%0A%20%20%20%20%20%20if%20(typeof%20functionOrMethodName%20%3D%3D%3D%20&#39;string&#39;)%20%7B%0A%20%20%20%20%20%20%20%20let%20methodName%20%3D%20functionOrMethodName%3B%0A%0A%20%20%20%20%20%20%20%20let%20obj%20%3D%20this.__getMethodHost()%3B%0A%0A%20%20%20%20%20%20%20%20return%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20obj%5BmethodName%5D.apply(obj%2C%20arguments)%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20functionOrMethodName%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__sortChanged(sort)%20%7B%0A%20%20%20%20%20%20this.__sortFn%20%3D%20this.__functionFromPropertyValue(sort)%3B%0A%0A%20%20%20%20%20%20if%20(this.items)%20%7B%0A%20%20%20%20%20%20%20%20this.__debounceRender(this.__render)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20__filterChanged(filter)%20%7B%0A%20%20%20%20%20%20this.__filterFn%20%3D%20this.__functionFromPropertyValue(filter)%3B%0A%0A%20%20%20%20%20%20if%20(this.items)%20%7B%0A%20%20%20%20%20%20%20%20this.__debounceRender(this.__render)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20__computeFrameTime(rate)%20%7B%0A%20%20%20%20%20%20return%20Math.ceil(1000%20%2F%20rate)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__initializeChunking()%20%7B%0A%20%20%20%20%20%20if%20(this.initialCount)%20%7B%0A%20%20%20%20%20%20%20%20this.__limit%20%3D%20this.initialCount%3B%0A%20%20%20%20%20%20%20%20this.__chunkCount%20%3D%20this.initialCount%3B%0A%20%20%20%20%20%20%20%20this.__lastChunkTime%20%3D%20performance.now()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20__tryRenderChunk()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Debounced%20so%20that%20multiple%20calls%20through%20%60_render%60%20between%20animation%0A%20%20%20%20%20%20%2F%2F%20frames%20only%20queue%20one%20new%20rAF%20(e.g.%20array%20mutation%20%26%20chunked%20render)%0A%20%20%20%20%20%20if%20(this.items%20%26%26%20this.__limit%20%3C%20this.items.length)%20%7B%0A%20%20%20%20%20%20%20%20this.__debounceRender(this.__requestRenderChunk)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20__requestRenderChunk()%20%7B%0A%20%20%20%20%20%20requestAnimationFrame(()%20%3D%3E%20this.__renderChunk())%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__renderChunk()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Simple%20auto%20chunkSize%20throttling%20algorithm%20based%20on%20feedback%20loop%3A%0A%20%20%20%20%20%20%2F%2F%20measure%20actual%20time%20between%20frames%20and%20scale%20chunk%20count%20by%20ratio%0A%20%20%20%20%20%20%2F%2F%20of%20target%2Factual%20frame%20time%0A%20%20%20%20%20%20let%20currChunkTime%20%3D%20performance.now()%3B%0A%20%20%20%20%20%20let%20ratio%20%3D%20this._targetFrameTime%20%2F%20(currChunkTime%20-%20this.__lastChunkTime)%3B%0A%20%20%20%20%20%20this.__chunkCount%20%3D%20Math.round(this.__chunkCount%20*%20ratio)%20%7C%7C%201%3B%0A%20%20%20%20%20%20this.__limit%20%2B%3D%20this.__chunkCount%3B%0A%20%20%20%20%20%20this.__lastChunkTime%20%3D%20currChunkTime%3B%0A%0A%20%20%20%20%20%20this.__debounceRender(this.__render)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__observeChanged()%20%7B%0A%20%20%20%20%20%20this.__observePaths%20%3D%20this.observe%20%26%26%20this.observe.replace(&#39;.*&#39;%2C%20&#39;.&#39;).split(&#39;%20&#39;)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__itemsChanged(change)%20%7B%0A%20%20%20%20%20%20if%20(this.items%20%26%26%20!Array.isArray(this.items))%20%7B%0A%20%20%20%20%20%20%20%20console.warn(&#39;dom-repeat%20expected%20array%20for%20%60items%60%2C%20found&#39;%2C%20this.items)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20If%20path%20was%20to%20an%20item%20(e.g.%20&#39;items.3&#39;%20or%20&#39;items.3.foo&#39;)%2C%20forward%20the%0A%20%20%20%20%20%20%2F%2F%20path%20to%20that%20instance%20synchronously%20(returns%20false%20for%20non-item%20paths)%0A%0A%0A%20%20%20%20%20%20if%20(!this.__handleItemPath(change.path%2C%20change.value))%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Otherwise%2C%20the%20array%20was%20reset%20(&#39;items&#39;)%20or%20spliced%20(&#39;items.splices&#39;)%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20so%20queue%20a%20full%20refresh%0A%20%20%20%20%20%20%20%20this.__initializeChunking()%3B%0A%0A%20%20%20%20%20%20%20%20this.__debounceRender(this.__render)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20__handleObservedPaths(path)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Handle%20cases%20where%20path%20changes%20should%20cause%20a%20re-sort%2Ffilter%0A%20%20%20%20%20%20if%20(this.__sortFn%20%7C%7C%20this.__filterFn)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!path)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Always%20re-render%20if%20the%20item%20itself%20changed%0A%20%20%20%20%20%20%20%20%20%20this.__debounceRender(this.__render%2C%20this.delay)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.__observePaths)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Otherwise%2C%20re-render%20if%20the%20path%20changed%20matches%20an%20observed%20path%0A%20%20%20%20%20%20%20%20%20%20let%20paths%20%3D%20this.__observePaths%3B%0A%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20paths.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(path.indexOf(paths%5Bi%5D)%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.__debounceRender(this.__render%2C%20this.delay)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7Bfunction(this%3ADomRepeat)%7D%20fn%20Function%20to%20debounce.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%3D%7D%20delay%20Delay%20in%20ms%20to%20debounce%20by.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20__debounceRender(fn%2C%20delay%20%3D%200)%20%7B%0A%20%20%20%20%20%20this.__renderDebouncer%20%3D%20Polymer.Debouncer.debounce(this.__renderDebouncer%2C%20delay%20%3E%200%20%3F%20Polymer.Async.timeOut.after(delay)%20%3A%20Polymer.Async.microTask%2C%20fn.bind(this))%3B%0A%20%20%20%20%20%20Polymer.enqueueDebouncer(this.__renderDebouncer)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Forces%20the%20element%20to%20render%20its%20content.%20Normally%20rendering%20is%0A%20%20%20%20%20*%20asynchronous%20to%20a%20provoking%20change.%20This%20is%20done%20for%20efficiency%20so%0A%20%20%20%20%20*%20that%20multiple%20changes%20trigger%20only%20a%20single%20render.%20The%20render%20method%0A%20%20%20%20%20*%20should%20be%20called%20if%2C%20for%20example%2C%20template%20rendering%20is%20required%20to%0A%20%20%20%20%20*%20validate%20application%20state.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20render()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Queue%20this%20repeater%2C%20then%20flush%20all%20in%20order%0A%20%20%20%20%20%20this.__debounceRender(this.__render)%3B%0A%0A%20%20%20%20%20%20Polymer.flush()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__render()%20%7B%0A%20%20%20%20%20%20if%20(!this.__ensureTemplatized())%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20No%20template%20found%20yet%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.__applyFullRefresh()%3B%20%2F%2F%20Reset%20the%20pool%0A%20%20%20%20%20%20%2F%2F%20TODO(kschaaf)%3A%20Reuse%20pool%20across%20turns%20and%20nested%20templates%0A%20%20%20%20%20%20%2F%2F%20Now%20that%20objects%2Farrays%20are%20re-evaluated%20when%20set%2C%20we%20can%20safely%0A%20%20%20%20%20%20%2F%2F%20reuse%20pooled%20instances%20across%20turns%2C%20however%20we%20still%20need%20to%20decide%0A%20%20%20%20%20%20%2F%2F%20semantics%20regarding%20how%20long%20to%20hold%2C%20how%20many%20to%20hold%2C%20etc.%0A%0A%0A%20%20%20%20%20%20this.__pool.length%20%3D%200%3B%20%2F%2F%20Set%20rendered%20item%20count%0A%0A%20%20%20%20%20%20this._setRenderedItemCount(this.__instances.length)%3B%20%2F%2F%20Notify%20users%0A%0A%0A%20%20%20%20%20%20this.dispatchEvent(new%20CustomEvent(&#39;dom-change&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20bubbles%3A%20true%2C%0A%20%20%20%20%20%20%20%20composed%3A%20true%0A%20%20%20%20%20%20%7D))%3B%20%2F%2F%20Check%20to%20see%20if%20we%20need%20to%20render%20more%20items%0A%0A%20%20%20%20%20%20this.__tryRenderChunk()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__applyFullRefresh()%20%7B%0A%20%20%20%20%20%20let%20items%20%3D%20this.items%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20let%20isntIdxToItemsIdx%20%3D%20new%20Array(items.length)%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20items.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20isntIdxToItemsIdx%5Bi%5D%20%3D%20i%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20Apply%20user%20filter%0A%0A%0A%20%20%20%20%20%20if%20(this.__filterFn)%20%7B%0A%20%20%20%20%20%20%20%20isntIdxToItemsIdx%20%3D%20isntIdxToItemsIdx.filter((i%2C%20idx%2C%20array)%20%3D%3E%20this.__filterFn(items%5Bi%5D%2C%20idx%2C%20array))%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20Apply%20user%20sort%0A%0A%0A%20%20%20%20%20%20if%20(this.__sortFn)%20%7B%0A%20%20%20%20%20%20%20%20isntIdxToItemsIdx.sort((a%2C%20b)%20%3D%3E%20this.__sortFn(items%5Ba%5D%2C%20items%5Bb%5D))%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20items-%3Einst%20map%20kept%20for%20item%20path%20forwarding%0A%0A%0A%20%20%20%20%20%20const%20itemsIdxToInstIdx%20%3D%20this.__itemsIdxToInstIdx%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20let%20instIdx%20%3D%200%3B%20%2F%2F%20Generate%20instances%20and%20assign%20items%0A%0A%20%20%20%20%20%20const%20limit%20%3D%20Math.min(isntIdxToItemsIdx.length%2C%20this.__limit)%3B%0A%0A%20%20%20%20%20%20for%20(%3B%20instIdx%20%3C%20limit%3B%20instIdx%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20let%20inst%20%3D%20this.__instances%5BinstIdx%5D%3B%0A%20%20%20%20%20%20%20%20let%20itemIdx%20%3D%20isntIdxToItemsIdx%5BinstIdx%5D%3B%0A%20%20%20%20%20%20%20%20let%20item%20%3D%20items%5BitemIdx%5D%3B%0A%20%20%20%20%20%20%20%20itemsIdxToInstIdx%5BitemIdx%5D%20%3D%20instIdx%3B%0A%0A%20%20%20%20%20%20%20%20if%20(inst)%20%7B%0A%20%20%20%20%20%20%20%20%20%20inst._setPendingProperty(this.as%2C%20item)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20inst._setPendingProperty(this.indexAs%2C%20instIdx)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20inst._setPendingProperty(this.itemsIndexAs%2C%20itemIdx)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20inst._flushProperties()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__insertInstance(item%2C%20instIdx%2C%20itemIdx)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F%2F%20Remove%20any%20extra%20instances%20from%20previous%20state%0A%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%20this.__instances.length%20-%201%3B%20i%20%3E%3D%20instIdx%3B%20i--)%20%7B%0A%20%20%20%20%20%20%20%20this.__detachAndRemoveInstance(i)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20__detachInstance(idx)%20%7B%0A%20%20%20%20%20%20let%20inst%20%3D%20this.__instances%5Bidx%5D%3B%0A%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20inst.children.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20let%20el%20%3D%20inst.children%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20inst.root.appendChild(el)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20inst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__attachInstance(idx%2C%20parent)%20%7B%0A%20%20%20%20%20%20let%20inst%20%3D%20this.__instances%5Bidx%5D%3B%0A%20%20%20%20%20%20parent.insertBefore(inst.root%2C%20this)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__detachAndRemoveInstance(idx)%20%7B%0A%20%20%20%20%20%20let%20inst%20%3D%20this.__detachInstance(idx)%3B%0A%0A%20%20%20%20%20%20if%20(inst)%20%7B%0A%20%20%20%20%20%20%20%20this.__pool.push(inst)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.__instances.splice(idx%2C%201)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__stampInstance(item%2C%20instIdx%2C%20itemIdx)%20%7B%0A%20%20%20%20%20%20let%20model%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20model%5Bthis.as%5D%20%3D%20item%3B%0A%20%20%20%20%20%20model%5Bthis.indexAs%5D%20%3D%20instIdx%3B%0A%20%20%20%20%20%20model%5Bthis.itemsIndexAs%5D%20%3D%20itemIdx%3B%0A%20%20%20%20%20%20return%20new%20this.__ctor(model)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__insertInstance(item%2C%20instIdx%2C%20itemIdx)%20%7B%0A%20%20%20%20%20%20let%20inst%20%3D%20this.__pool.pop()%3B%0A%0A%20%20%20%20%20%20if%20(inst)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO(kschaaf)%3A%20If%20the%20pool%20is%20shared%20across%20turns%2C%20hostProps%0A%20%20%20%20%20%20%20%20%2F%2F%20need%20to%20be%20re-set%20to%20reused%20instances%20in%20addition%20to%20item%0A%20%20%20%20%20%20%20%20inst._setPendingProperty(this.as%2C%20item)%3B%0A%0A%20%20%20%20%20%20%20%20inst._setPendingProperty(this.indexAs%2C%20instIdx)%3B%0A%0A%20%20%20%20%20%20%20%20inst._setPendingProperty(this.itemsIndexAs%2C%20itemIdx)%3B%0A%0A%20%20%20%20%20%20%20%20inst._flushProperties()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20inst%20%3D%20this.__stampInstance(item%2C%20instIdx%2C%20itemIdx)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20beforeRow%20%3D%20this.__instances%5BinstIdx%20%2B%201%5D%3B%0A%20%20%20%20%20%20let%20beforeNode%20%3D%20beforeRow%20%3F%20beforeRow.children%5B0%5D%20%3A%20this%3B%0A%20%20%20%20%20%20this.parentNode.insertBefore(inst.root%2C%20beforeNode)%3B%0A%20%20%20%20%20%20this.__instances%5BinstIdx%5D%20%3D%20inst%3B%0A%20%20%20%20%20%20return%20inst%3B%0A%20%20%20%20%7D%20%2F%2F%20Implements%20extension%20point%20from%20Templatize%20mixin%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Shows%20or%20hides%20the%20template%20instance%20top%20level%20child%20elements.%20For%0A%20%20%20%20%20*%20text%20nodes%2C%20%60textContent%60%20is%20removed%20while%20%22hidden%22%20and%20replaced%20when%0A%20%20%20%20%20*%20%22shown.%22%0A%20%20%20%20%20*%20%40param%20%7Bboolean%7D%20hidden%20Set%20to%20true%20to%20hide%20the%20children%3B%0A%20%20%20%20%20*%20set%20to%20false%20to%20show%20them.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_showHideChildren(hidden)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.__instances.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.__instances%5Bi%5D._showHideChildren(hidden)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20%2F%2F%20Called%20as%20a%20side%20effect%20of%20a%20host%20items.%3Ckey%3E.%3Cpath%3E%20path%20change%2C%0A%20%20%20%20%2F%2F%20responsible%20for%20notifying%20item.%3Cpath%3E%20changes%20to%20inst%20for%20key%0A%0A%0A%20%20%20%20__handleItemPath(path%2C%20value)%20%7B%0A%20%20%20%20%20%20let%20itemsPath%20%3D%20path.slice(6)%3B%20%2F%2F%20&#39;items.&#39;.length%20%3D%3D%206%0A%0A%20%20%20%20%20%20let%20dot%20%3D%20itemsPath.indexOf(&#39;.&#39;)%3B%0A%20%20%20%20%20%20let%20itemsIdx%20%3D%20dot%20%3C%200%20%3F%20itemsPath%20%3A%20itemsPath.substring(0%2C%20dot)%3B%20%2F%2F%20If%20path%20was%20index%20into%20array...%0A%0A%20%20%20%20%20%20if%20(itemsIdx%20%3D%3D%20parseInt(itemsIdx%2C%2010))%20%7B%0A%20%20%20%20%20%20%20%20let%20itemSubPath%20%3D%20dot%20%3C%200%20%3F%20&#39;&#39;%20%3A%20itemsPath.substring(dot%20%2B%201)%3B%20%2F%2F%20If%20the%20path%20is%20observed%2C%20it%20will%20trigger%20a%20full%20refresh%0A%0A%20%20%20%20%20%20%20%20this.__handleObservedPaths(itemSubPath)%3B%20%2F%2F%20Note%2C%20even%20if%20a%20rull%20refresh%20is%20triggered%2C%20always%20do%20the%20path%0A%20%20%20%20%20%20%20%20%2F%2F%20notification%20because%20unless%20mutableData%20is%20used%20for%20dom-repeat%0A%20%20%20%20%20%20%20%20%2F%2F%20and%20all%20elements%20in%20the%20instance%20subtree%2C%20a%20full%20refresh%20may%0A%20%20%20%20%20%20%20%20%2F%2F%20not%20trigger%20the%20proper%20update.%0A%0A%0A%20%20%20%20%20%20%20%20let%20instIdx%20%3D%20this.__itemsIdxToInstIdx%5BitemsIdx%5D%3B%0A%20%20%20%20%20%20%20%20let%20inst%20%3D%20this.__instances%5BinstIdx%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(inst)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20itemPath%20%3D%20this.as%20%2B%20(itemSubPath%20%3F%20&#39;.&#39;%20%2B%20itemSubPath%20%3A%20&#39;&#39;)%3B%20%2F%2F%20This%20is%20effectively%20%60notifyPath%60%2C%20but%20avoids%20some%20of%20the%20overhead%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20of%20the%20public%20API%0A%0A%20%20%20%20%20%20%20%20%20%20inst._setPendingPropertyOrPath(itemPath%2C%20value%2C%20false%2C%20true)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20inst._flushProperties()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20item%20associated%20with%20a%20given%20element%20stamped%20by%0A%20%20%20%20%20*%20this%20%60dom-repeat%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Note%2C%20to%20modify%20sub-properties%20of%20the%20item%2C%0A%20%20%20%20%20*%20%60modelForElement(el).set(&#39;item.%3Csub-prop%3E&#39;%2C%20value)%60%0A%20%20%20%20%20*%20should%20be%20used.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!HTMLElement%7D%20el%20Element%20for%20which%20to%20return%20the%20item.%0A%20%20%20%20%20*%20%40return%20%7B*%7D%20Item%20associated%20with%20the%20element.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20itemForElement(el)%20%7B%0A%20%20%20%20%20%20let%20instance%20%3D%20this.modelForElement(el)%3B%0A%20%20%20%20%20%20return%20instance%20%26%26%20instance%5Bthis.as%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20inst%20index%20for%20a%20given%20element%20stamped%20by%20this%20%60dom-repeat%60.%0A%20%20%20%20%20*%20If%20%60sort%60%20is%20provided%2C%20the%20index%20will%20reflect%20the%20sorted%20order%20(rather%0A%20%20%20%20%20*%20than%20the%20original%20array%20order).%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!HTMLElement%7D%20el%20Element%20for%20which%20to%20return%20the%20index.%0A%20%20%20%20%20*%20%40return%20%7B%3Fnumber%7D%20Row%20index%20associated%20with%20the%20element%20(note%20this%20may%0A%20%20%20%20%20*%20%20%20not%20correspond%20to%20the%20array%20index%20if%20a%20user%20%60sort%60%20is%20applied).%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20indexForElement(el)%20%7B%0A%20%20%20%20%20%20let%20instance%20%3D%20this.modelForElement(el)%3B%0A%20%20%20%20%20%20return%20instance%20%26%26%20instance%5Bthis.indexAs%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20template%20%22model%22%20associated%20with%20a%20given%20element%2C%20which%0A%20%20%20%20%20*%20serves%20as%20the%20binding%20scope%20for%20the%20template%20instance%20the%20element%20is%0A%20%20%20%20%20*%20contained%20in.%20A%20template%20model%20is%20an%20instance%20of%20%60Polymer.Base%60%2C%20and%0A%20%20%20%20%20*%20should%20be%20used%20to%20manipulate%20data%20associated%20with%20this%20template%20instance.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Example%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%20%20let%20model%20%3D%20modelForElement(el)%3B%0A%20%20%20%20%20*%20%20%20if%20(model.index%20%3C%2010)%20%7B%0A%20%20%20%20%20*%20%20%20%20%20model.set(&#39;item.checked&#39;%2C%20true)%3B%0A%20%20%20%20%20*%20%20%20%7D%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7B!HTMLElement%7D%20el%20Element%20for%20which%20to%20return%20a%20template%20model.%0A%20%20%20%20%20*%20%40return%20%7BTemplateInstanceBase%7D%20Model%20representing%20the%20binding%20scope%20for%0A%20%20%20%20%20*%20%20%20the%20element.%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20modelForElement(el)%20%7B%0A%20%20%20%20%20%20return%20Polymer.Templatize.modelForElement(this.template%2C%20el)%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%0A%20%20customElements.define(DomRepeat.is%2C%20DomRepeat)%3B%0A%20%20%2F**%20%40const%20*%2F%0A%0A%20%20Polymer.DomRepeat%20%3D%20DomRepeat%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Felements%2Fdom-repeat.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/elements/dom-if.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer-element.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/templatize.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/debounce.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/flush.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20The%20%60%3Cdom-if%3E%60%20element%20will%20stamp%20a%20light-dom%20%60%3Ctemplate%3E%60%20child%20when%0A%20%20%20*%20the%20%60if%60%20property%20becomes%20truthy%2C%20and%20the%20template%20can%20use%20Polymer%0A%20%20%20*%20data-binding%20and%20declarative%20event%20features%20when%20used%20in%20the%20context%20of%0A%20%20%20*%20a%20Polymer%20element&#39;s%20template.%0A%20%20%20*%0A%20%20%20*%20When%20%60if%60%20becomes%20falsy%2C%20the%20stamped%20content%20is%20hidden%20but%20not%0A%20%20%20*%20removed%20from%20dom.%20When%20%60if%60%20subsequently%20becomes%20truthy%20again%2C%20the%20content%0A%20%20%20*%20is%20simply%20re-shown.%20This%20approach%20is%20used%20due%20to%20its%20favorable%20performance%0A%20%20%20*%20characteristics%3A%20the%20expense%20of%20creating%20template%20content%20is%20paid%20only%0A%20%20%20*%20once%20and%20lazily.%0A%20%20%20*%0A%20%20%20*%20Set%20the%20%60restamp%60%20property%20to%20true%20to%20force%20the%20stamped%20content%20to%20be%0A%20%20%20*%20created%20%2F%20destroyed%20when%20the%20%60if%60%20condition%20changes.%0A%20%20%20*%0A%20%20%20*%20%40customElement%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40extends%20Polymer.Element%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Custom%20element%20that%20conditionally%20stamps%20and%20hides%20or%20removes%0A%20%20%20*%20%20%20template%20content%20based%20on%20a%20boolean%20flag.%0A%20%20%20*%2F%0A%0A%20%20class%20DomIf%20extends%20Polymer.Element%20%7B%0A%20%20%20%20%2F%2F%20Not%20needed%20to%20find%20template%3B%20can%20be%20removed%20once%20the%20analyzer%0A%20%20%20%20%2F%2F%20can%20find%20the%20tag%20name%20from%20customElements.define%20call%0A%20%20%20%20static%20get%20is()%20%7B%0A%20%20%20%20%20%20return%20&#39;dom-if&#39;%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20static%20get%20template()%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20static%20get%20properties()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20Fired%20whenever%20DOM%20is%20added%20or%20removed%2Fhidden%20by%20this%20template%20(by%0A%20%20%20%20%20%20%20%20%20*%20default%2C%20rendering%20occurs%20lazily).%20%20To%20force%20immediate%20rendering%2C%20call%0A%20%20%20%20%20%20%20%20%20*%20%60render%60.%0A%20%20%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20%20%20*%20%40event%20dom-change%0A%20%20%20%20%20%20%20%20%20*%2F%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20A%20boolean%20indicating%20whether%20this%20template%20should%20stamp.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20if%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20%20%20observer%3A%20&#39;__debounceRender&#39;%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20*%20When%20true%2C%20elements%20will%20be%20removed%20from%20DOM%20and%20discarded%20when%20%60if%60%0A%20%20%20%20%20%20%20%20%20*%20becomes%20false%20and%20re-created%20and%20added%20back%20to%20the%20DOM%20when%20%60if%60%0A%20%20%20%20%20%20%20%20%20*%20becomes%20true.%20%20By%20default%2C%20stamped%20elements%20will%20be%20hidden%20but%20left%0A%20%20%20%20%20%20%20%20%20*%20in%20the%20DOM%20when%20%60if%60%20becomes%20false%2C%20which%20is%20generally%20results%0A%20%20%20%20%20%20%20%20%20*%20in%20better%20performance.%0A%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20restamp%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20%20%20observer%3A%20&#39;__debounceRender&#39;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20super()%3B%0A%20%20%20%20%20%20this.__renderDebouncer%20%3D%20null%3B%0A%20%20%20%20%20%20this.__invalidProps%20%3D%20null%3B%0A%20%20%20%20%20%20this.__instance%20%3D%20null%3B%0A%20%20%20%20%20%20this._lastIf%20%3D%20false%3B%0A%20%20%20%20%20%20this.__ctor%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__debounceRender()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Render%20is%20async%20for%202%20reasons%3A%0A%20%20%20%20%20%20%2F%2F%201.%20To%20eliminate%20dom%20creation%20trashing%20if%20user%20code%20thrashes%20%60if%60%20in%20the%0A%20%20%20%20%20%20%2F%2F%20%20%20%20same%20turn.%20This%20was%20more%20common%20in%201.x%20where%20a%20compound%20computed%0A%20%20%20%20%20%20%2F%2F%20%20%20%20property%20could%20result%20in%20the%20result%20changing%20multiple%20times%2C%20but%20is%0A%20%20%20%20%20%20%2F%2F%20%20%20%20mitigated%20to%20a%20large%20extent%20by%20batched%20property%20processing%20in%202.x.%0A%20%20%20%20%20%20%2F%2F%202.%20To%20avoid%20double%20object%20propagation%20when%20a%20bag%20including%20values%20bound%0A%20%20%20%20%20%20%2F%2F%20%20%20%20to%20the%20%60if%60%20property%20as%20well%20as%20one%20or%20more%20hostProps%20could%20enqueue%0A%20%20%20%20%20%20%2F%2F%20%20%20%20the%20%3Cdom-if%3E%20to%20flush%20before%20the%20%3Ctemplate%3E&#39;s%20host%20property%0A%20%20%20%20%20%20%2F%2F%20%20%20%20forwarding.%20In%20that%20scenario%20creating%20an%20instance%20would%20result%20in%0A%20%20%20%20%20%20%2F%2F%20%20%20%20the%20host%20props%20being%20set%20once%2C%20and%20then%20the%20enqueued%20changes%20on%20the%0A%20%20%20%20%20%20%2F%2F%20%20%20%20template%20would%20set%20properties%20a%20second%20time%2C%20potentially%20causing%20an%0A%20%20%20%20%20%20%2F%2F%20%20%20%20object%20to%20be%20set%20to%20an%20instance%20more%20than%20once.%20%20Creating%20the%0A%20%20%20%20%20%20%2F%2F%20%20%20%20instance%20async%20from%20flushing%20data%20ensures%20this%20doesn&#39;t%20happen.%20If%0A%20%20%20%20%20%20%2F%2F%20%20%20%20we%20wanted%20a%20sync%20option%20in%20the%20future%2C%20simply%20having%20%3Cdom-if%3E%20flush%0A%20%20%20%20%20%20%2F%2F%20%20%20%20(or%20clear)%20its%20template&#39;s%20pending%20host%20properties%20before%20creating%0A%20%20%20%20%20%20%2F%2F%20%20%20%20the%20instance%20would%20also%20avoid%20the%20problem.%0A%20%20%20%20%20%20this.__renderDebouncer%20%3D%20Polymer.Debouncer.debounce(this.__renderDebouncer%2C%20Polymer.Async.microTask%2C%20()%20%3D%3E%20this.__render())%3B%0A%20%20%20%20%20%20Polymer.enqueueDebouncer(this.__renderDebouncer)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20disconnectedCallback()%20%7B%0A%20%20%20%20%20%20super.disconnectedCallback()%3B%0A%0A%20%20%20%20%20%20if%20(!this.parentNode%20%7C%7C%20this.parentNode.nodeType%20%3D%3D%20Node.DOCUMENT_FRAGMENT_NODE%20%26%26%20!this.parentNode.host)%20%7B%0A%20%20%20%20%20%20%20%20this.__teardownInstance()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20connectedCallback()%20%7B%0A%20%20%20%20%20%20super.connectedCallback()%3B%0A%20%20%20%20%20%20this.style.display%20%3D%20&#39;none&#39;%3B%0A%0A%20%20%20%20%20%20if%20(this.if)%20%7B%0A%20%20%20%20%20%20%20%20this.__debounceRender()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Forces%20the%20element%20to%20render%20its%20content.%20Normally%20rendering%20is%0A%20%20%20%20%20*%20asynchronous%20to%20a%20provoking%20change.%20This%20is%20done%20for%20efficiency%20so%0A%20%20%20%20%20*%20that%20multiple%20changes%20trigger%20only%20a%20single%20render.%20The%20render%20method%0A%20%20%20%20%20*%20should%20be%20called%20if%2C%20for%20example%2C%20template%20rendering%20is%20required%20to%0A%20%20%20%20%20*%20validate%20application%20state.%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20render()%20%7B%0A%20%20%20%20%20%20Polymer.flush()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__render()%20%7B%0A%20%20%20%20%20%20if%20(this.if)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.__ensureInstance())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20No%20template%20found%20yet%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this._showHideChildren()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(this.restamp)%20%7B%0A%20%20%20%20%20%20%20%20this.__teardownInstance()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!this.restamp%20%26%26%20this.__instance)%20%7B%0A%20%20%20%20%20%20%20%20this._showHideChildren()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(this.if%20!%3D%20this._lastIf)%20%7B%0A%20%20%20%20%20%20%20%20this.dispatchEvent(new%20CustomEvent(&#39;dom-change&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20bubbles%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20composed%3A%20true%0A%20%20%20%20%20%20%20%20%7D))%3B%0A%20%20%20%20%20%20%20%20this._lastIf%20%3D%20this.if%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20__ensureInstance()%20%7B%0A%20%20%20%20%20%20let%20parentNode%20%3D%20this.parentNode%3B%20%2F%2F%20Guard%20against%20element%20being%20detached%20while%20render%20was%20queued%0A%0A%20%20%20%20%20%20if%20(parentNode)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.__ctor)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20template%20%3D%0A%20%20%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLTemplateElement%7D%20*%2F%0A%20%20%20%20%20%20%20%20%20%20this.querySelector(&#39;template&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(!template)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20until%20childList%20changes%20and%20template%20should%20be%20there%20by%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20observer%20%3D%20new%20MutationObserver(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.querySelector(&#39;template&#39;))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20observer.disconnect()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.__render()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(&#39;dom-if%20requires%20a%20%3Ctemplate%3E%20child&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20observer.observe(this%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20childList%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20this.__ctor%20%3D%20Polymer.Templatize.templatize(template%2C%20this%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20dom-if%20templatizer%20instances%20require%20%60mutable%3A%20true%60%2C%20as%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%60__syncHostProperties%60%20relies%20on%20that%20behavior%20to%20sync%20objects%0A%20%20%20%20%20%20%20%20%20%20%20%20mutableData%3A%20true%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20%20%20*%20%40param%20%7Bstring%7D%20prop%20Property%20to%20forward%0A%20%20%20%20%20%20%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20Value%20of%20property%0A%20%20%20%20%20%20%20%20%20%20%20%20%20*%20%40this%20%7Bthis%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20forwardHostProp%3A%20function%20(prop%2C%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.__instance)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.if)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.__instance.forwardHostProp(prop%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20we%20have%20an%20instance%20but%20are%20squelching%20host%20property%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20forwarding%20due%20to%20if%20being%20false%2C%20note%20the%20invalidated%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20properties%20so%20%60__syncHostProperties%60%20can%20sync%20them%20the%20next%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20time%20%60if%60%20becomes%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.__invalidProps%20%3D%20this.__invalidProps%20%7C%7C%20Object.create(null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.__invalidProps%5BPolymer.Path.root(prop)%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(!this.__instance)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__instance%20%3D%20new%20this.__ctor()%3B%0A%20%20%20%20%20%20%20%20%20%20parentNode.insertBefore(this.__instance.root%2C%20this)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__syncHostProperties()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20let%20c%24%20%3D%20this.__instance.children%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(c%24%20%26%26%20c%24.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Detect%20case%20where%20dom-if%20was%20re-attached%20in%20new%20position%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20lastChild%20%3D%20this.previousSibling%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(lastChild%20!%3D%3D%20c%24%5Bc%24.length%20-%201%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20n%3B%20i%20%3C%20c%24.length%20%26%26%20(n%20%3D%20c%24%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parentNode.insertBefore(n%2C%20this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20__syncHostProperties()%20%7B%0A%20%20%20%20%20%20let%20props%20%3D%20this.__invalidProps%3B%0A%0A%20%20%20%20%20%20if%20(props)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20prop%20in%20props)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__instance._setPendingProperty(prop%2C%20this.__dataHost%5Bprop%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this.__invalidProps%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20this.__instance._flushProperties()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20__teardownInstance()%20%7B%0A%20%20%20%20%20%20if%20(this.__instance)%20%7B%0A%20%20%20%20%20%20%20%20let%20c%24%20%3D%20this.__instance.children%3B%0A%0A%20%20%20%20%20%20%20%20if%20(c%24%20%26%26%20c%24.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20use%20first%20child%20parent%2C%20for%20case%20when%20dom-if%20may%20have%20been%20detached%0A%20%20%20%20%20%20%20%20%20%20let%20parent%20%3D%20c%24%5B0%5D.parentNode%3B%20%2F%2F%20Instance%20children%20may%20be%20disconnected%20from%20parents%20when%20dom-if%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20detaches%20if%20a%20tree%20was%20innerHTML&#39;ed%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(parent)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%2C%20n%3B%20i%20%3C%20c%24.length%20%26%26%20(n%20%3D%20c%24%5Bi%5D)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent.removeChild(n)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this.__instance%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.__invalidProps%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Shows%20or%20hides%20the%20template%20instance%20top%20level%20child%20elements.%20For%0A%20%20%20%20%20*%20text%20nodes%2C%20%60textContent%60%20is%20removed%20while%20%22hidden%22%20and%20replaced%20when%0A%20%20%20%20%20*%20%22shown.%22%0A%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20_showHideChildren()%20%7B%0A%20%20%20%20%20%20let%20hidden%20%3D%20this.__hideTemplateChildren__%20%7C%7C%20!this.if%3B%0A%0A%20%20%20%20%20%20if%20(this.__instance)%20%7B%0A%20%20%20%20%20%20%20%20this.__instance._showHideChildren(hidden)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%0A%20%20customElements.define(DomIf.is%2C%20DomIf)%3B%0A%20%20%2F**%20%40const%20*%2F%0A%0A%20%20Polymer.DomIf%20%3D%20DomIf%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Felements%2Fdom-if.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/elements/array-selector.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer-element.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/mixin.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/array-splice.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Element%20mixin%20for%20recording%20dynamic%20associations%20between%20item%20paths%20in%20a%0A%20%20%20*%20master%20%60items%60%20array%20and%20a%20%60selected%60%20array%20such%20that%20path%20changes%20to%20the%0A%20%20%20*%20master%20array%20(at%20the%20host)%20element%20or%20elsewhere%20via%20data-binding)%20are%0A%20%20%20*%20correctly%20propagated%20to%20items%20in%20the%20selected%20array%20and%20vice-versa.%0A%20%20%20*%0A%20%20%20*%20The%20%60items%60%20property%20accepts%20an%20array%20of%20user%20data%2C%20and%20via%20the%0A%20%20%20*%20%60select(item)%60%20and%20%60deselect(item)%60%20API%2C%20updates%20the%20%60selected%60%20property%0A%20%20%20*%20which%20may%20be%20bound%20to%20other%20parts%20of%20the%20application%2C%20and%20any%20changes%20to%0A%20%20%20*%20sub-fields%20of%20%60selected%60%20item(s)%20will%20be%20kept%20in%20sync%20with%20items%20in%20the%0A%20%20%20*%20%60items%60%20array.%20%20When%20%60multi%60%20is%20false%2C%20%60selected%60%20is%20a%20property%0A%20%20%20*%20representing%20the%20last%20selected%20item.%20%20When%20%60multi%60%20is%20true%2C%20%60selected%60%0A%20%20%20*%20is%20an%20array%20of%20multiply%20selected%20items.%0A%20%20%20*%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40mixinFunction%0A%20%20%20*%20%40appliesMixin%20Polymer.ElementMixin%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Element%20mixin%20for%20recording%20dynamic%20associations%20between%20item%20paths%20in%20a%0A%20%20%20*%20master%20%60items%60%20array%20and%20a%20%60selected%60%20array%0A%20%20%20*%2F%0A%0A%20%20let%20ArraySelectorMixin%20%3D%20Polymer.dedupingMixin(superClass%20%3D%3E%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40constructor%0A%20%20%20%20%20*%20%40extends%20%7BsuperClass%7D%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_ElementMixin%7D%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%20%20%20%20let%20elementBase%20%3D%20Polymer.ElementMixin(superClass)%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40polymer%0A%20%20%20%20%20*%20%40mixinClass%0A%20%20%20%20%20*%20%40implements%20%7BPolymer_ArraySelectorMixin%7D%0A%20%20%20%20%20*%20%40unrestricted%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20class%20ArraySelectorMixin%20extends%20elementBase%20%7B%0A%20%20%20%20%20%20static%20get%20properties()%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20An%20array%20containing%20items%20from%20which%20selection%20will%20be%20made.%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20items%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Array%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20When%20%60true%60%2C%20multiple%20items%20may%20be%20selected%20at%20once%20(in%20this%20case%2C%0A%20%20%20%20%20%20%20%20%20%20%20*%20%60selected%60%20is%20an%20array%20of%20currently%20selected%20items).%20%20When%20%60false%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20*%20only%20one%20item%20may%20be%20selected%20at%20a%20time.%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20multi%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20When%20%60multi%60%20is%20true%2C%20this%20is%20an%20array%20that%20contains%20any%20selected.%0A%20%20%20%20%20%20%20%20%20%20%20*%20When%20%60multi%60%20is%20false%2C%20this%20is%20the%20currently%20selected%20item%2C%20or%20%60null%60%0A%20%20%20%20%20%20%20%20%20%20%20*%20if%20no%20item%20is%20selected.%0A%20%20%20%20%20%20%20%20%20%20%20*%20%40type%20%7B%3F(Object%7CArray%3C!Object%3E)%7D%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20selected%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Object%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20notify%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20When%20%60multi%60%20is%20false%2C%20this%20is%20the%20currently%20selected%20item%2C%20or%20%60null%60%0A%20%20%20%20%20%20%20%20%20%20%20*%20if%20no%20item%20is%20selected.%0A%20%20%20%20%20%20%20%20%20%20%20*%20%40type%20%7B%3FObject%7D%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20selectedItem%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Object%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20notify%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20When%20%60true%60%2C%20calling%20%60select%60%20on%20an%20item%20that%20is%20already%20selected%0A%20%20%20%20%20%20%20%20%20%20%20*%20will%20deselect%20the%20item.%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20toggle%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20static%20get%20observers()%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B&#39;__updateSelection(multi%2C%20items.*)&#39;%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20super()%3B%0A%20%20%20%20%20%20%20%20this.__lastItems%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.__lastMulti%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.__selectedMap%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20__updateSelection(multi%2C%20itemsInfo)%20%7B%0A%20%20%20%20%20%20%20%20let%20path%20%3D%20itemsInfo.path%3B%0A%0A%20%20%20%20%20%20%20%20if%20(path%20%3D%3D%20JSCompiler_renameProperty(&#39;items&#39;%2C%20this))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Case%201%20-%20items%20array%20changed%2C%20so%20diff%20against%20previous%20array%20and%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20deselect%20any%20removed%20items%20and%20adjust%20selected%20indices%0A%20%20%20%20%20%20%20%20%20%20let%20newItems%20%3D%20itemsInfo.base%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20lastItems%20%3D%20this.__lastItems%3B%0A%20%20%20%20%20%20%20%20%20%20let%20lastMulti%20%3D%20this.__lastMulti%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(multi%20!%3D%3D%20lastMulti)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.clearSelection()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(lastItems)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20splices%20%3D%20Polymer.ArraySplice.calculateSplices(newItems%2C%20lastItems)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__applySplices(splices)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20this.__lastItems%20%3D%20newItems%3B%0A%20%20%20%20%20%20%20%20%20%20this.__lastMulti%20%3D%20multi%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(itemsInfo.path%20%3D%3D%20%60%24%7BJSCompiler_renameProperty(&#39;items&#39;%2C%20this)%7D.splices%60)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Case%202%20-%20got%20specific%20splice%20information%20describing%20the%20array%20mutation%3A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20deselect%20any%20removed%20items%20and%20adjust%20selected%20indices%0A%20%20%20%20%20%20%20%20%20%20this.__applySplices(itemsInfo.value.indexSplices)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Case%203%20-%20an%20array%20element%20was%20changed%2C%20so%20deselect%20the%20previous%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20item%20for%20that%20index%20if%20it%20was%20previously%20selected%0A%20%20%20%20%20%20%20%20%20%20let%20part%20%3D%20path.slice(%60%24%7BJSCompiler_renameProperty(&#39;items&#39;%2C%20this)%7D.%60.length)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20idx%20%3D%20parseInt(part%2C%2010)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(part.indexOf(&#39;.&#39;)%20%3C%200%20%26%26%20part%20%3D%3D%20idx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__deselectChangedIdx(idx)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20__applySplices(splices)%20%7B%0A%20%20%20%20%20%20%20%20let%20selected%20%3D%20this.__selectedMap%3B%20%2F%2F%20Adjust%20selected%20indices%20and%20mark%20removals%0A%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20splices.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20s%20%3D%20splices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20selected.forEach((idx%2C%20item)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(idx%20%3C%20s.index)%20%7B%2F%2F%20no%20change%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(idx%20%3E%3D%20s.index%20%2B%20s.removed.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20adjust%20index%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20selected.set(item%2C%20idx%20%2B%20s.addedCount%20-%20s.removed.length)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20remove%20index%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20selected.set(item%2C%20-1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20j%20%3D%200%3B%20j%20%3C%20s.addedCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20idx%20%3D%20s.index%20%2B%20j%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(selected.has(this.items%5Bidx%5D))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20selected.set(this.items%5Bidx%5D%2C%20idx)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20%2F%2F%20Update%20linked%20paths%0A%0A%0A%20%20%20%20%20%20%20%20this.__updateLinks()%3B%20%2F%2F%20Remove%20selected%20items%20that%20were%20removed%20from%20the%20items%20array%0A%0A%0A%20%20%20%20%20%20%20%20let%20sidx%20%3D%200%3B%0A%20%20%20%20%20%20%20%20selected.forEach((idx%2C%20item)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(idx%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.multi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.splice(JSCompiler_renameProperty(&#39;selected&#39;%2C%20this)%2C%20sidx%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.selected%20%3D%20this.selectedItem%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20selected.delete(item)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sidx%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20__updateLinks()%20%7B%0A%20%20%20%20%20%20%20%20this.__dataLinkedPaths%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(this.multi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20sidx%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this.__selectedMap.forEach(idx%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(idx%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.linkPaths(%60%24%7BJSCompiler_renameProperty(&#39;items&#39;%2C%20this)%7D.%24%7Bidx%7D%60%2C%20%60%24%7BJSCompiler_renameProperty(&#39;selected&#39;%2C%20this)%7D.%24%7Bsidx%2B%2B%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__selectedMap.forEach(idx%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.linkPaths(JSCompiler_renameProperty(&#39;selected&#39;%2C%20this)%2C%20%60%24%7BJSCompiler_renameProperty(&#39;items&#39;%2C%20this)%7D.%24%7Bidx%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.linkPaths(JSCompiler_renameProperty(&#39;selectedItem&#39;%2C%20this)%2C%20%60%24%7BJSCompiler_renameProperty(&#39;items&#39;%2C%20this)%7D.%24%7Bidx%7D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Clears%20the%20selection%20state.%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20clearSelection()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Unbind%20previous%20selection%0A%20%20%20%20%20%20%20%20this.__dataLinkedPaths%20%3D%20%7B%7D%3B%20%2F%2F%20The%20selected%20map%20stores%203%20pieces%20of%20information%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20key%3A%20items%20array%20object%0A%20%20%20%20%20%20%20%20%2F%2F%20value%3A%20items%20array%20index%0A%20%20%20%20%20%20%20%20%2F%2F%20order%3A%20selected%20array%20index%0A%0A%20%20%20%20%20%20%20%20this.__selectedMap%20%3D%20new%20Map()%3B%20%2F%2F%20Initialize%20selection%0A%0A%20%20%20%20%20%20%20%20this.selected%20%3D%20this.multi%20%3F%20%5B%5D%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.selectedItem%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20whether%20the%20item%20is%20currently%20selected.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20item%20Item%20from%20%60items%60%20array%20to%20test%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20item%20is%20selected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20isSelected(item)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.__selectedMap.has(item)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Returns%20whether%20the%20item%20is%20currently%20selected.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20idx%20Index%20from%20%60items%60%20array%20to%20test%0A%20%20%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20item%20is%20selected%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20isIndexSelected(idx)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.isSelected(this.items%5Bidx%5D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20__deselectChangedIdx(idx)%20%7B%0A%20%20%20%20%20%20%20%20let%20sidx%20%3D%20this.__selectedIndexForItemIndex(idx)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(sidx%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this.__selectedMap.forEach((idx%2C%20item)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(sidx%20%3D%3D%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.deselect(item)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20__selectedIndexForItemIndex(idx)%20%7B%0A%20%20%20%20%20%20%20%20let%20selected%20%3D%20this.__dataLinkedPaths%5B%60%24%7BJSCompiler_renameProperty(&#39;items&#39;%2C%20this)%7D.%24%7Bidx%7D%60%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(selected)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20parseInt(selected.slice(%60%24%7BJSCompiler_renameProperty(&#39;selected&#39;%2C%20this)%7D.%60.length)%2C%2010)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Deselects%20the%20given%20item%20if%20it%20is%20already%20selected.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20item%20Item%20from%20%60items%60%20array%20to%20deselect%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20deselect(item)%20%7B%0A%20%20%20%20%20%20%20%20let%20idx%20%3D%20this.__selectedMap.get(item)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(idx%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.__selectedMap.delete(item)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20let%20sidx%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(this.multi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sidx%20%3D%20this.__selectedIndexForItemIndex(idx)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20this.__updateLinks()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(this.multi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.splice(JSCompiler_renameProperty(&#39;selected&#39;%2C%20this)%2C%20sidx%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.selected%20%3D%20this.selectedItem%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Deselects%20the%20given%20index%20if%20it%20is%20already%20selected.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20idx%20Index%20from%20%60items%60%20array%20to%20deselect%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20deselectIndex(idx)%20%7B%0A%20%20%20%20%20%20%20%20this.deselect(this.items%5Bidx%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Selects%20the%20given%20item.%20%20When%20%60toggle%60%20is%20true%2C%20this%20will%20automatically%0A%20%20%20%20%20%20%20*%20deselect%20the%20item%20if%20already%20selected.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7B*%7D%20item%20Item%20from%20%60items%60%20array%20to%20select%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20select(item)%20%7B%0A%20%20%20%20%20%20%20%20this.selectIndex(this.items.indexOf(item))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Selects%20the%20given%20index.%20%20When%20%60toggle%60%20is%20true%2C%20this%20will%20automatically%0A%20%20%20%20%20%20%20*%20deselect%20the%20item%20if%20already%20selected.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20idx%20Index%20from%20%60items%60%20array%20to%20select%0A%20%20%20%20%20%20%20*%20%40return%20%7Bvoid%7D%0A%20%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20selectIndex(idx)%20%7B%0A%20%20%20%20%20%20%20%20let%20item%20%3D%20this.items%5Bidx%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!this.isSelected(item))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!this.multi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.__selectedMap.clear()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20this.__selectedMap.set(item%2C%20idx)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this.__updateLinks()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(this.multi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.push(JSCompiler_renameProperty(&#39;selected&#39;%2C%20this)%2C%20item)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.selected%20%3D%20this.selectedItem%20%3D%20item%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.toggle)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.deselectIndex(idx)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20ArraySelectorMixin%3B%0A%20%20%7D)%3B%20%2F%2F%20export%20mixin%0A%0A%20%20Polymer.ArraySelectorMixin%20%3D%20ArraySelectorMixin%3B%0A%20%20%2F**%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40extends%20%7BPolymer.Element%7D%0A%20%20%20*%20%40implements%20%7BPolymer_ArraySelectorMixin%7D%0A%20%20%20*%20%40private%0A%20%20%20*%2F%0A%0A%20%20let%20baseArraySelector%20%3D%20ArraySelectorMixin(Polymer.Element)%3B%0A%20%20%2F**%0A%20%20%20*%20Element%20implementing%20the%20%60Polymer.ArraySelector%60%20mixin%2C%20which%20records%0A%20%20%20*%20dynamic%20associations%20between%20item%20paths%20in%20a%20master%20%60items%60%20array%20and%20a%0A%20%20%20*%20%60selected%60%20array%20such%20that%20path%20changes%20to%20the%20master%20array%20(at%20the%20host)%0A%20%20%20*%20element%20or%20elsewhere%20via%20data-binding)%20are%20correctly%20propagated%20to%20items%0A%20%20%20*%20in%20the%20selected%20array%20and%20vice-versa.%0A%20%20%20*%0A%20%20%20*%20The%20%60items%60%20property%20accepts%20an%20array%20of%20user%20data%2C%20and%20via%20the%0A%20%20%20*%20%60select(item)%60%20and%20%60deselect(item)%60%20API%2C%20updates%20the%20%60selected%60%20property%0A%20%20%20*%20which%20may%20be%20bound%20to%20other%20parts%20of%20the%20application%2C%20and%20any%20changes%20to%0A%20%20%20*%20sub-fields%20of%20%60selected%60%20item(s)%20will%20be%20kept%20in%20sync%20with%20items%20in%20the%0A%20%20%20*%20%60items%60%20array.%20%20When%20%60multi%60%20is%20false%2C%20%60selected%60%20is%20a%20property%0A%20%20%20*%20representing%20the%20last%20selected%20item.%20%20When%20%60multi%60%20is%20true%2C%20%60selected%60%0A%20%20%20*%20is%20an%20array%20of%20multiply%20selected%20items.%0A%20%20%20*%0A%20%20%20*%20Example%3A%0A%20%20%20*%0A%20%20%20*%20%60%60%60html%0A%20%20%20*%20%3Cdom-module%20id%3D%22employee-list%22%3E%0A%20%20%20*%0A%20%20%20*%20%20%20%3Ctemplate%3E%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%3Cdiv%3E%20Employee%20list%3A%20%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%3Cdom-repeat%20id%3D%22employeeList%22%20items%3D%22%7B%7Bemployees%7D%7D%22%3E%0A%20%20%20*%20%20%20%20%20%20%20%3Ctemplate%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3Cdiv%3EFirst%20name%3A%20%3Cspan%3E%7B%7Bitem.first%7D%7D%3C%2Fspan%3E%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3ELast%20name%3A%20%3Cspan%3E%7B%7Bitem.last%7D%7D%3C%2Fspan%3E%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20on-click%3D%22toggleSelection%22%3ESelect%3C%2Fbutton%3E%0A%20%20%20*%20%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20*%20%20%20%20%20%3C%2Fdom-repeat%3E%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%3Carray-selector%20id%3D%22selector%22%20items%3D%22%7B%7Bemployees%7D%7D%22%20selected%3D%22%7B%7Bselected%7D%7D%22%20multi%20toggle%3E%3C%2Farray-selector%3E%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%3Cdiv%3E%20Selected%20employees%3A%20%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%3Cdom-repeat%20items%3D%22%7B%7Bselected%7D%7D%22%3E%0A%20%20%20*%20%20%20%20%20%20%20%3Ctemplate%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3Cdiv%3EFirst%20name%3A%20%3Cspan%3E%7B%7Bitem.first%7D%7D%3C%2Fspan%3E%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%20%20%20%20%3Cdiv%3ELast%20name%3A%20%3Cspan%3E%7B%7Bitem.last%7D%7D%3C%2Fspan%3E%3C%2Fdiv%3E%0A%20%20%20*%20%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20*%20%20%20%20%20%3C%2Fdom-repeat%3E%0A%20%20%20*%0A%20%20%20*%20%20%20%3C%2Ftemplate%3E%0A%20%20%20*%0A%20%20%20*%20%3C%2Fdom-module%3E%0A%20%20%20*%20%60%60%60%0A%20%20%20*%0A%20%20%20*%20%60%60%60js%0A%20%20%20*class%20EmployeeList%20extends%20Polymer.Element%20%7B%0A%20%20%20*%20%20static%20get%20is()%20%7B%20return%20&#39;employee-list&#39;%3B%20%7D%0A%20%20%20*%20%20static%20get%20properties()%20%7B%0A%20%20%20*%20%20%20%20return%20%7B%0A%20%20%20*%20%20%20%20%20%20employees%3A%20%7B%0A%20%20%20*%20%20%20%20%20%20%20%20value()%20%7B%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20return%20%5B%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%20%7Bfirst%3A%20&#39;Bob&#39;%2C%20last%3A%20&#39;Smith&#39;%7D%2C%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%20%7Bfirst%3A%20&#39;Sally&#39;%2C%20last%3A%20&#39;Johnson&#39;%7D%2C%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%20%20...%0A%20%20%20*%20%20%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20*%20%20%20%20%20%20%20%20%7D%0A%20%20%20*%20%20%20%20%20%20%7D%0A%20%20%20*%20%20%20%20%7D%3B%0A%20%20%20*%20%20%7D%0A%20%20%20*%20%20toggleSelection(e)%20%7B%0A%20%20%20*%20%20%20%20let%20item%20%3D%20this.%24.employeeList.itemForElement(e.target)%3B%0A%20%20%20*%20%20%20%20this.%24.selector.select(item)%3B%0A%20%20%20*%20%20%7D%0A%20%20%20*%7D%0A%20%20%20*%20%60%60%60%0A%20%20%20*%0A%20%20%20*%20%40polymer%0A%20%20%20*%20%40customElement%0A%20%20%20*%20%40extends%20%7BbaseArraySelector%7D%0A%20%20%20*%20%40appliesMixin%20Polymer.ArraySelectorMixin%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Custom%20element%20that%20links%20paths%20between%20an%20input%20%60items%60%20array%20and%0A%20%20%20*%20%20%20an%20output%20%60selected%60%20item%20or%20array%20based%20on%20calls%20to%20its%20selection%20API.%0A%20%20%20*%2F%0A%0A%20%20class%20ArraySelector%20extends%20baseArraySelector%20%7B%0A%20%20%20%20%2F%2F%20Not%20needed%20to%20find%20template%3B%20can%20be%20removed%20once%20the%20analyzer%0A%20%20%20%20%2F%2F%20can%20find%20the%20tag%20name%20from%20customElements.define%20call%0A%20%20%20%20static%20get%20is()%20%7B%0A%20%20%20%20%20%20return%20&#39;array-selector&#39;%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%0A%20%20customElements.define(ArraySelector.is%2C%20ArraySelector)%3B%0A%20%20%2F**%20%40const%20*%2F%0A%0A%20%20Polymer.ArraySelector%20%3D%20ArraySelector%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Felements%2Farray-selector.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/elements/custom-style.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/shadycss/custom-style-interface.html" import-dependency=""><script src="./for loop_files/custom-style-interface.min.js.download"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/style-gather.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20const%20attr%20%3D%20&#39;include&#39;%3B%0A%20%20const%20CustomStyleInterface%20%3D%20window.ShadyCSS.CustomStyleInterface%3B%0A%20%20%2F**%0A%20%20%20*%20Custom%20element%20for%20defining%20styles%20in%20the%20main%20document%20that%20can%20take%0A%20%20%20*%20advantage%20of%20%5Bshady%20DOM%5D(https%3A%2F%2Fgithub.com%2Fwebcomponents%2Fshadycss)%20shims%0A%20%20%20*%20for%20style%20encapsulation%2C%20custom%20properties%2C%20and%20custom%20mixins.%0A%20%20%20*%0A%20%20%20*%20-%20Document%20styles%20defined%20in%20a%20%60%3Ccustom-style%3E%60%20are%20shimmed%20to%20ensure%20they%0A%20%20%20*%20%20%20do%20not%20leak%20into%20local%20DOM%20when%20running%20on%20browsers%20without%20native%0A%20%20%20*%20%20%20Shadow%20DOM.%0A%20%20%20*%20-%20Custom%20properties%20can%20be%20defined%20in%20a%20%60%3Ccustom-style%3E%60.%20Use%20the%20%60html%60%20selector%0A%20%20%20*%20%20%20to%20define%20custom%20properties%20that%20apply%20to%20all%20custom%20elements.%0A%20%20%20*%20-%20Custom%20mixins%20can%20be%20defined%20in%20a%20%60%3Ccustom-style%3E%60%2C%20if%20you%20import%20the%20optional%0A%20%20%20*%20%20%20%5Bapply%20shim%5D(https%3A%2F%2Fgithub.com%2Fwebcomponents%2Fshadycss%23about-applyshim)%0A%20%20%20*%20%20%20(%60shadycss%2Fapply-shim.html%60).%0A%20%20%20*%0A%20%20%20*%20To%20use%3A%0A%20%20%20*%0A%20%20%20*%20-%20Import%20%60custom-style.html%60.%0A%20%20%20*%20-%20Place%20a%20%60%3Ccustom-style%3E%60%20element%20in%20the%20main%20document%2C%20wrapping%20an%20inline%20%60%3Cstyle%3E%60%20tag%20that%0A%20%20%20*%20%20%20contains%20the%20CSS%20rules%20you%20want%20to%20shim.%0A%20%20%20*%0A%20%20%20*%20For%20example%3A%0A%20%20%20*%0A%20%20%20*%20%60%60%60html%0A%20%20%20*%20%3C!--%20import%20apply%20shim--only%20required%20if%20using%20mixins%20--%3E%0A%20%20%20*%20%3Clink%20rel%3D%22import%22%20href%3D%22bower_components%2Fshadycss%2Fapply-shim.html%22%3E%0A%20%20%20*%20%3C!--%20import%20custom-style%20element%20--%3E%0A%20%20%20*%20%3Clink%20rel%3D%22import%22%20href%3D%22bower_components%2Fpolymer%2Flib%2Felements%2Fcustom-style.html%22%3E%0A%20%20%20*%0A%20%20%20*%20%3Ccustom-style%3E%0A%20%20%20*%20%20%20%3Cstyle%3E%0A%20%20%20*%20%20%20%20%20html%20%7B%0A%20%20%20*%20%20%20%20%20%20%20--custom-color%3A%20blue%3B%0A%20%20%20*%20%20%20%20%20%20%20--custom-mixin%3A%20%7B%0A%20%20%20*%20%20%20%20%20%20%20%20%20font-weight%3A%20bold%3B%0A%20%20%20*%20%20%20%20%20%20%20%20%20color%3A%20red%3B%0A%20%20%20*%20%20%20%20%20%20%20%7D%3B%0A%20%20%20*%20%20%20%20%20%7D%0A%20%20%20*%20%20%20%3C%2Fstyle%3E%0A%20%20%20*%20%3C%2Fcustom-style%3E%0A%20%20%20*%20%60%60%60%0A%20%20%20*%0A%20%20%20*%20%40customElement%0A%20%20%20*%20%40extends%20HTMLElement%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Custom%20element%20for%20defining%20styles%20in%20the%20main%20document%20that%20can%0A%20%20%20*%20%20%20take%20advantage%20of%20Polymer&#39;s%20style%20scoping%20and%20custom%20properties%20shims.%0A%20%20%20*%2F%0A%0A%20%20class%20CustomStyle%20extends%20HTMLElement%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20super()%3B%0A%20%20%20%20%20%20this._style%20%3D%20null%3B%0A%20%20%20%20%20%20CustomStyleInterface.addCustomStyle(this)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20the%20light-DOM%20%60%3Cstyle%3E%60%20child%20this%20element%20wraps.%20%20Upon%20first%0A%20%20%20%20%20*%20call%20any%20style%20modules%20referenced%20via%20the%20%60include%60%20attribute%20will%20be%0A%20%20%20%20%20*%20concatenated%20to%20this%20element&#39;s%20%60%3Cstyle%3E%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40return%20%7BHTMLStyleElement%7D%20This%20element&#39;s%20light-DOM%20%60%3Cstyle%3E%60%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20&#39;getStyle&#39;()%20%7B%0A%20%20%20%20%20%20if%20(this._style)%20%7B%0A%20%20%20%20%20%20%20%20return%20this._style%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20style%20%3D%0A%20%20%20%20%20%20%2F**%20%40type%20%7BHTMLStyleElement%7D%20*%2F%0A%20%20%20%20%20%20this.querySelector(&#39;style&#39;)%3B%0A%0A%20%20%20%20%20%20if%20(!style)%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this._style%20%3D%20style%3B%0A%20%20%20%20%20%20const%20include%20%3D%20style.getAttribute(attr)%3B%0A%0A%20%20%20%20%20%20if%20(include)%20%7B%0A%20%20%20%20%20%20%20%20style.removeAttribute(attr)%3B%0A%20%20%20%20%20%20%20%20style.textContent%20%3D%20Polymer.StyleGather.cssFromModules(include)%20%2B%20style.textContent%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20HTML%20Imports%20styling%20the%20main%20document%20are%20deprecated%20in%20Chrome%0A%20%20%20%20%20%20https%3A%2F%2Fcrbug.com%2F523952%0A%20%20%20%20%20%20%20If%20this%20element%20is%20not%20in%20the%20main%20document%2C%20then%20it%20must%20be%20in%20an%20HTML%20Import%20document.%0A%20%20%20%20%20%20In%20that%20case%2C%20move%20the%20custom%20style%20to%20the%20main%20document.%0A%20%20%20%20%20%20%20The%20ordering%20of%20%60%3Ccustom-style%3E%60%20should%20stay%20the%20same%20as%20when%20loaded%20by%20HTML%20Imports%2C%20but%20there%20may%20be%20odd%0A%20%20%20%20%20%20cases%20of%20ordering%20w.r.t%20the%20main%20document%20styles.%0A%20%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20%20%20if%20(this.ownerDocument%20!%3D%3D%20window.document)%20%7B%0A%20%20%20%20%20%20%20%20window.document.head.appendChild(this)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20this._style%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%0A%0A%20%20window.customElements.define(&#39;custom-style&#39;%2C%20CustomStyle)%3B%0A%20%20%2F**%20%40const%20*%2F%0A%0A%20%20Polymer.CustomStyle%20%3D%20CustomStyle%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Felements%2Fcustom-style.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/legacy/mutable-data-behavior.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/mixins/mutable-data.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20let%20mutablePropertyChange%3B%0A%20%20%2F**%20%40suppress%20%7BmissingProperties%7D%20*%2F%0A%0A%20%20(()%20%3D%3E%20%7B%0A%20%20%20%20mutablePropertyChange%20%3D%20Polymer.MutableData._mutablePropertyChange%3B%0A%20%20%7D)()%3B%0A%20%20%2F**%0A%20%20%20*%20Legacy%20element%20behavior%20to%20skip%20strict%20dirty-checking%20for%20objects%20and%20arrays%2C%0A%20%20%20*%20(always%20consider%20them%20to%20be%20%22dirty%22)%20for%20use%20on%20legacy%20API%20Polymer%20elements.%0A%20%20%20*%0A%20%20%20*%20By%20default%2C%20%60Polymer.PropertyEffects%60%20performs%20strict%20dirty%20checking%20on%0A%20%20%20*%20objects%2C%20which%20means%20that%20any%20deep%20modifications%20to%20an%20object%20or%20array%20will%0A%20%20%20*%20not%20be%20propagated%20unless%20%22immutable%22%20data%20patterns%20are%20used%20(i.e.%20all%20object%0A%20%20%20*%20references%20from%20the%20root%20to%20the%20mutation%20were%20changed).%0A%20%20%20*%0A%20%20%20*%20Polymer%20also%20provides%20a%20proprietary%20data%20mutation%20and%20path%20notification%20API%0A%20%20%20*%20(e.g.%20%60notifyPath%60%2C%20%60set%60%2C%20and%20array%20mutation%20API&#39;s)%20that%20allow%20efficient%0A%20%20%20*%20mutation%20and%20notification%20of%20deep%20changes%20in%20an%20object%20graph%20to%20all%20elements%0A%20%20%20*%20bound%20to%20the%20same%20object%20graph.%0A%20%20%20*%0A%20%20%20*%20In%20cases%20where%20neither%20immutable%20patterns%20nor%20the%20data%20mutation%20API%20can%20be%0A%20%20%20*%20used%2C%20applying%20this%20mixin%20will%20cause%20Polymer%20to%20skip%20dirty%20checking%20for%0A%20%20%20*%20objects%20and%20arrays%20(always%20consider%20them%20to%20be%20%22dirty%22).%20%20This%20allows%20a%0A%20%20%20*%20user%20to%20make%20a%20deep%20modification%20to%20a%20bound%20object%20graph%2C%20and%20then%20either%0A%20%20%20*%20simply%20re-set%20the%20object%20(e.g.%20%60this.items%20%3D%20this.items%60)%20or%20call%20%60notifyPath%60%0A%20%20%20*%20(e.g.%20%60this.notifyPath(&#39;items&#39;)%60)%20to%20update%20the%20tree.%20%20Note%20that%20all%0A%20%20%20*%20elements%20that%20wish%20to%20be%20updated%20based%20on%20deep%20mutations%20must%20apply%20this%0A%20%20%20*%20mixin%20or%20otherwise%20skip%20strict%20dirty%20checking%20for%20objects%2Farrays.%0A%20%20%20*%20Specifically%2C%20any%20elements%20in%20the%20binding%20tree%20between%20the%20source%20of%20a%0A%20%20%20*%20mutation%20and%20the%20consumption%20of%20it%20must%20apply%20this%20behavior%20or%20enable%20the%0A%20%20%20*%20%60Polymer.OptionalMutableDataBehavior%60.%0A%20%20%20*%0A%20%20%20*%20In%20order%20to%20make%20the%20dirty%20check%20strategy%20configurable%2C%20see%0A%20%20%20*%20%60Polymer.OptionalMutableDataBehavior%60.%0A%20%20%20*%0A%20%20%20*%20Note%2C%20the%20performance%20characteristics%20of%20propagating%20large%20object%20graphs%0A%20%20%20*%20will%20be%20worse%20as%20opposed%20to%20using%20strict%20dirty%20checking%20with%20immutable%0A%20%20%20*%20patterns%20or%20Polymer&#39;s%20path%20notification%20API.%0A%20%20%20*%0A%20%20%20*%20%40polymerBehavior%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Behavior%20to%20skip%20strict%20dirty-checking%20for%20objects%20and%0A%20%20%20*%20%20%20arrays%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.MutableDataBehavior%20%3D%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Overrides%20%60Polymer.PropertyEffects%60%20to%20provide%20option%20for%20skipping%0A%20%20%20%20%20*%20strict%20equality%20checking%20for%20Objects%20and%20Arrays.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20This%20method%20pulls%20the%20value%20to%20dirty%20check%20against%20from%20the%20%60__dataTemp%60%0A%20%20%20%20%20*%20cache%20(rather%20than%20the%20normal%20%60__data%60%20cache)%20for%20Objects.%20%20Since%20the%20temp%0A%20%20%20%20%20*%20cache%20is%20cleared%20at%20the%20end%20of%20a%20turn%2C%20this%20implementation%20allows%0A%20%20%20%20%20*%20side-effects%20of%20deep%20object%20changes%20to%20be%20processed%20by%20re-setting%20the%0A%20%20%20%20%20*%20same%20object%20(using%20the%20temp%20cache%20as%20an%20in-turn%20backstop%20to%20prevent%0A%20%20%20%20%20*%20cycles%20due%20to%202-way%20notification).%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20New%20property%20value%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20old%20Previous%20property%20value%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20property%20should%20be%20considered%20a%20change%0A%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20*%2F%0A%20%20%20%20_shouldPropertyChange(property%2C%20value%2C%20old)%20%7B%0A%20%20%20%20%20%20return%20mutablePropertyChange(this%2C%20property%2C%20value%2C%20old%2C%20true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20Legacy%20element%20behavior%20to%20add%20the%20optional%20ability%20to%20skip%20strict%0A%20%20%20*%20dirty-checking%20for%20objects%20and%20arrays%20(always%20consider%20them%20to%20be%0A%20%20%20*%20%22dirty%22)%20by%20setting%20a%20%60mutable-data%60%20attribute%20on%20an%20element%20instance.%0A%20%20%20*%0A%20%20%20*%20By%20default%2C%20%60Polymer.PropertyEffects%60%20performs%20strict%20dirty%20checking%20on%0A%20%20%20*%20objects%2C%20which%20means%20that%20any%20deep%20modifications%20to%20an%20object%20or%20array%20will%0A%20%20%20*%20not%20be%20propagated%20unless%20%22immutable%22%20data%20patterns%20are%20used%20(i.e.%20all%20object%0A%20%20%20*%20references%20from%20the%20root%20to%20the%20mutation%20were%20changed).%0A%20%20%20*%0A%20%20%20*%20Polymer%20also%20provides%20a%20proprietary%20data%20mutation%20and%20path%20notification%20API%0A%20%20%20*%20(e.g.%20%60notifyPath%60%2C%20%60set%60%2C%20and%20array%20mutation%20API&#39;s)%20that%20allow%20efficient%0A%20%20%20*%20mutation%20and%20notification%20of%20deep%20changes%20in%20an%20object%20graph%20to%20all%20elements%0A%20%20%20*%20bound%20to%20the%20same%20object%20graph.%0A%20%20%20*%0A%20%20%20*%20In%20cases%20where%20neither%20immutable%20patterns%20nor%20the%20data%20mutation%20API%20can%20be%0A%20%20%20*%20used%2C%20applying%20this%20mixin%20will%20allow%20Polymer%20to%20skip%20dirty%20checking%20for%0A%20%20%20*%20objects%20and%20arrays%20(always%20consider%20them%20to%20be%20%22dirty%22).%20%20This%20allows%20a%0A%20%20%20*%20user%20to%20make%20a%20deep%20modification%20to%20a%20bound%20object%20graph%2C%20and%20then%20either%0A%20%20%20*%20simply%20re-set%20the%20object%20(e.g.%20%60this.items%20%3D%20this.items%60)%20or%20call%20%60notifyPath%60%0A%20%20%20*%20(e.g.%20%60this.notifyPath(&#39;items&#39;)%60)%20to%20update%20the%20tree.%20%20Note%20that%20all%0A%20%20%20*%20elements%20that%20wish%20to%20be%20updated%20based%20on%20deep%20mutations%20must%20apply%20this%0A%20%20%20*%20mixin%20or%20otherwise%20skip%20strict%20dirty%20checking%20for%20objects%2Farrays.%0A%20%20%20*%20Specifically%2C%20any%20elements%20in%20the%20binding%20tree%20between%20the%20source%20of%20a%0A%20%20%20*%20mutation%20and%20the%20consumption%20of%20it%20must%20enable%20this%20behavior%20or%20apply%20the%0A%20%20%20*%20%60Polymer.OptionalMutableDataBehavior%60.%0A%20%20%20*%0A%20%20%20*%20While%20this%20behavior%20adds%20the%20ability%20to%20forgo%20Object%2FArray%20dirty%20checking%2C%0A%20%20%20*%20the%20%60mutableData%60%20flag%20defaults%20to%20false%20and%20must%20be%20set%20on%20the%20instance.%0A%20%20%20*%0A%20%20%20*%20Note%2C%20the%20performance%20characteristics%20of%20propagating%20large%20object%20graphs%0A%20%20%20*%20will%20be%20worse%20by%20relying%20on%20%60mutableData%3A%20true%60%20as%20opposed%20to%20using%0A%20%20%20*%20strict%20dirty%20checking%20with%20immutable%20patterns%20or%20Polymer&#39;s%20path%20notification%0A%20%20%20*%20API.%0A%20%20%20*%0A%20%20%20*%20%40polymerBehavior%0A%20%20%20*%20%40memberof%20Polymer%0A%20%20%20*%20%40summary%20Behavior%20to%20optionally%20skip%20strict%20dirty-checking%20for%20objects%20and%0A%20%20%20*%20%20%20arrays%0A%20%20%20*%2F%0A%0A%20%20Polymer.OptionalMutableDataBehavior%20%3D%20%7B%0A%20%20%20%20properties%3A%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20Instance-level%20flag%20for%20configuring%20the%20dirty-checking%20strategy%0A%20%20%20%20%20%20%20*%20for%20this%20element.%20%20When%20true%2C%20Objects%20and%20Arrays%20will%20skip%20dirty%0A%20%20%20%20%20%20%20*%20checking%2C%20otherwise%20strict%20equality%20checking%20will%20be%20used.%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20mutableData%3A%20Boolean%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Overrides%20%60Polymer.PropertyEffects%60%20to%20skip%20strict%20equality%20checking%0A%20%20%20%20%20*%20for%20Objects%20and%20Arrays.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Pulls%20the%20value%20to%20dirty%20check%20against%20from%20the%20%60__dataTemp%60%20cache%0A%20%20%20%20%20*%20(rather%20than%20the%20normal%20%60__data%60%20cache)%20for%20Objects.%20%20Since%20the%20temp%0A%20%20%20%20%20*%20cache%20is%20cleared%20at%20the%20end%20of%20a%20turn%2C%20this%20implementation%20allows%0A%20%20%20%20%20*%20side-effects%20of%20deep%20object%20changes%20to%20be%20processed%20by%20re-setting%20the%0A%20%20%20%20%20*%20same%20object%20(using%20the%20temp%20cache%20as%20an%20in-turn%20backstop%20to%20prevent%0A%20%20%20%20%20*%20cycles%20due%20to%202-way%20notification).%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20property%20Property%20name%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20value%20New%20property%20value%0A%20%20%20%20%20*%20%40param%20%7B*%7D%20old%20Previous%20property%20value%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20Whether%20the%20property%20should%20be%20considered%20a%20change%0A%20%20%20%20%20*%20%40this%20%7Bthis%7D%0A%20%20%20%20%20*%20%40protected%0A%20%20%20%20%20*%2F%0A%20%20%20%20_shouldPropertyChange(property%2C%20value%2C%20old)%20%7B%0A%20%20%20%20%20%20return%20mutablePropertyChange(this%2C%20property%2C%20value%2C%20old%2C%20this.mutableData)%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Flib%2Flegacy%2Fmutable-data-behavior.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/lib/utils/html-tag.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,%2F%2F%20bc%0APolymer.Base%20%3D%20Polymer.LegacyElementMixin(HTMLElement).prototype%3B%20%2F%2F%20NOTE%3A%20this%20is%20here%20for%20modulizer%20to%20export%20%60html%60%20for%20the%20module%20version%20of%20this%20file%0A%0APolymer.html%20%3D%20Polymer.html%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpolymer%2Fpolymer.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/uvalib-theme/color.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><custom-style><style is="custom-style">html {
  --uvalib-brand-blue-lightest:#87B9D9;--uvalib-brand-blue-lighter:#3395D4;--uvalib-brand-blue-light:#0370B7;--uvalib-brand-blue:#232D4B;--uvalib-brand-orange-lightest:#FFEAD6;--uvalib-brand-orange-lighter:#FFC999;--uvalib-brand-orange-light:#FFB370;--uvalib-brand-orange:#E57200;--uvalib-brand-orange-dark:#B35900;--uvalib-brand-orange-darker:#854200;--uvalib-blue-alt-lightest:#BFE7F7;--uvalib-blue-alt-lighter:#91D8F2;--uvalib-blue-alt-light:#55C4EC;--uvalib-blue-alt:#007BAC;--uvalib-blue-alt-dark:#005679;--uvalib-blue-alt-darkest:#141E3C;--uvalib-teal-lightest:#C8F2F4;--uvalib-teal-light:#5BD7DE;--uvalib-teal:#25CAD3;--uvalib-teal-dark:#1DA1A8;--uvalib-teal-darker:#16777C;--uvalib-green-lightest:#DDEFDC;--uvalib-green-lighter:#89CC74;--uvalib-green:#62BB46;--uvalib-green-dark:#4E9737;--uvalib-red-lightest:#FBCFDA;--uvalib-red:#EF3F6B;--uvalib-red-dark:#DF1E43;--uvalib-red-darker:#B30000;--uvalib-yellow-lightest:#FEF6C8;--uvalib-yellow:#ECC602;--uvalib-yellow-dark:#B99C02;--uvalib-beige:#F7EFE1;--uvalib-beige-dark:#C0B298;--uvalib-grey-lightest:#F1F1F1;--uvalib-grey-light:#DADADA;--uvalib-grey:#808080;--uvalib-grey-dark:#4F4F4F;--uvalib-grey-darkest:#2B2B2B;--uvalib-text-light:#FFFFFF;--uvalib-text:var(--uvalib-grey-dark);--uvalib-text-dark:var(--uvalib-grey-darkest);--uvalib-red-emergency:var(--uvalib-red-darker);--uvalib-alert-a1-bg:var(--uvalib-red-lightest);--uvalib-alert-a1-border:var(--uvalib-red-dark);--uvalib-alert-a2-bg:var(--uvalib-yellow-lightest);--uvalib-alert-a2-border:var(--uvalib-yellow);--uvalib-alert-a3-bg:var(--uvalib-blue-alt-lightest);--uvalib-alert-a3-border:var(--uvalib-blue-alt);--uvalib-alert-a4-bg:var(--uvalib-teal);--uvalib-alert-r1-bg:var(--uvalib-yellow-lightest);--uvalib-alert-r1-border:var(--uvalib-yellow);--uvalib-alert-r2-bg:var(--uvalib-teal-lightest);--uvalib-alert-r2-border:var(--uvalib-teal);--uvalib-alert-error-inline:var(--uvalib-red-darker);--uvalib-alert-confirmation-inline:var(--uvalib-green-dark);--uvalib-alert-info-bg:var(--uvalib-blue-alt-lightest);--uvalib-alert-info-border:var(--uvalib-blue-alt);--uvalib-alert-confirmation-bg:var(--uvalib-green-lightest);--uvalib-alert-confirmation-border:var(--uvalib-green-dark);--uvalib-status-available:var(--uvalib-blue-alt);--uvalib-status-modified:var(--uvalib-yellow);--uvalib-status-notavailable:var(--uvalib-red-darker);--accessibility-outline-color--bgislight:var(--uvalib-blue-alt-dark);--accessibility-outline-color--bgisdark:var(--uvalib-blue-alt-lightest);--uvalib-main-white:var(--uvalib-white);--uvalib-main-black:var(--uvalib-black);--uvalib-main-rotunda-orange:#E57200;--uvalib-main-jefferson-blue:#232D4B;--uvalib-secondary-orange:var(--uvalib-secondary-web-orange);--uvalib-secondary-blue:var(--uvalib-secondary-web-blue);--uvalib-secondary-lt-grey:#F1F1EF;--uvalib-secondary-md-grey:var(--uvalib-secondary-medium-gray);--uvalib-secondary-web-orange:#EB5F0C;--uvalib-secondary-web-blue:#141E3C;--uvalib-secondary-cyan:#009FDF;--uvalib-secondary-yellow:#FDDA24;--uvalib-secondary-teal:#25CAD3;--uvalib-secondary-magenta:#EF3F6B;--uvalib-secondary-green:#008000;--uvalib-secondary-light-gray:#F1F1F1;--uvalib-secondary-medium-gray:#DADADA;--uvalib-text-grey:#595959;--uvalib-text-dk-grey:#474747;--uvalib-text-almost-black:#212121;--uvalib-secondary-emergency-red:#E00000;--uvalib-link-color:#0000FF;--uvalib-link-color-visited:#660099;--uvalib-blue-50:#B3D4FF;--uvalib-blue-100:#67A9FF;--uvalib-blue-200:#2F8AFF;--uvalib-blue-300:#0065E6;--uvalib-blue-400:#0057C8;--uvalib-blue-500:#004AA9;--uvalib-blue-600:#003D8A;--uvalib-blue-700:#002F6C;--uvalib-blue-800:#00224D;--uvalib-blue-900:#00142F;--uvalib-blue-a100:#82B1FF;--uvalib-blue-a200:#448AFF;--uvalib-blue-a400:#2979FF;--uvalib-blue-a700:#2962FF;--uvalib-orange-50:#FFF4EA;--uvalib-orange-100:#FFE8D2;--uvalib-orange-200:#FFD3A8;--uvalib-orange-300:#FFB060;--uvalib-orange-400:#FFA042;--uvalib-orange-500:#FF9123;--uvalib-orange-600:#FF8204;--uvalib-orange-700:var(--uvalib-main-rotunda-orange);--uvalib-orange-800:#C66300;--uvalib-orange-900:#A85400;--uvalib-orange-a100:#FFD180;--uvalib-orange-a200:#FFAB40;--uvalib-orange-a400:#FF9100;--uvalib-orange-a700:#FF6D00;--uvalib-grey-50:#FAFAFA;--uvalib-grey-100:#F5F5F5;--uvalib-grey-200:#EEEEEE;--uvalib-grey-300:#E0E0E0;--uvalib-grey-400:#BDBDBD;--uvalib-grey-500:#9E9E9E;--uvalib-grey-600:#757575;--uvalib-grey-700:#616161;--uvalib-grey-800:#424242;--uvalib-grey-900:#212121;--uvalib-black-alpha-12:rgba(0, 0, 0, 0.12);--uvalib-black-alpha-38:rgba(0, 0, 0, 0.38);--uvalib-black-alpha-54:rgba(0, 0, 0, 0.54);--uvalib-black-alpha-87:rgba(0, 0, 0, 0.87);--uvalib-white-alpha-12:rgba(255, 255, 255, 0.12);--uvalib-white-alpha-30:rgba(255, 255, 255, 0.30);--uvalib-white-alpha-70:rgba(255, 255, 255, 0.70);--uvalib-black:#000;--uvalib-white:#FFF;--uvalib-danger:#B30000;--uvalib-success:#00D66E;--color-primary-color:var(--uvalib-brand-blue);--color-primary-color-dark:var(--uvalib-blue-800);--color-primary-color-light:var(--uvalib-blue-500);--accent-color:var(--uvalib-orange-a200);--color-accent-color:var(--uvalib-orange-a200);--color-accent-color-dark:var(--uvalib-orange-a400);--color-accent-color-light:var(--uvalib-orange-a100);--color-text-blue:var(--uvalib-blue-a400);--color-text-gray:var(--uvalib-grey-700);--color-text-dark:var(--uvalib-text-grey);--color-text-dark-secondary:var(--uvalib-text-grey);--color-text-disabled:var(--uvalib-black-alpha-38);--color-text-light:var(--uvalib-white);--color-text-light-secondary:var(--white-alpha-70);--color-primary-orange:var(--uvalib-orange-700);--color-primary-blue:var(--uvalib-blue-700);--color-white:var(--uvalib-white);--color-secondary-orange:#eb5f0c;--color-secondary-blue:var(--uvalib-blue-alt-darkest);--color-medium-blue:#344D9E;--color-light-blue:#9FB2CE;--color-light-gray:var(--uvalib-grey-100);--color-medium-gray:var(--uvalib-grey-400);--color-emergency-red:var(--uvalib-danger);--color-accessibility-outline:cyan;--color-accessibility-outline-light-bg:var(--uvalib-grey-700);--color-accessibility-outline-dark-bg:var(--uvalib-grey-400);--uvalib-captions-bg:var(--uvalib-grey-200);--uvalib-sidebar-bg:var(--uvalib-white);
}

</style></custom-style></link><link rel="import" href="https://www.library.virginia.edu/bower_components/uvalib-theme/uvalib-styles.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/uvalib-theme/uvalib-icons.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-icon/iron-icon.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-meta/iron-meta.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20%2F**%0A%20%20%20*%20%40constructor%0A%20%20%20*%20%40param%20%7B%7B%0A%20%20%20*%20%20%20type%3A%20(string%7Cnull%7Cundefined)%2C%0A%20%20%20*%20%20%20key%3A%20(string%7Cnull%7Cundefined)%2C%0A%20%20%20*%20%20%20value%3A%20*%2C%0A%20%20%20*%20%7D%3D%7D%20options%0A%20%20%20*%2F%0A%20%20Polymer.IronMeta%20%3D%20function%20(options)%20%7B%0A%20%20%20%20Polymer.IronMeta%5B&#39;%20&#39;%5D(options)%3B%0A%20%20%20%20this.type%20%3D%20options%20%26%26%20options.type%20%7C%7C%20&#39;default&#39;%3B%0A%20%20%20%20this.key%20%3D%20options%20%26%26%20options.key%3B%0A%0A%20%20%20%20if%20(options%20%26%26%20&#39;value&#39;%20in%20options)%20%7B%0A%20%20%20%20%20%20this.value%20%3D%20options.value%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%20%2F%2F%20This%20function%20is%20used%20to%20convince%20Closure%20not%20to%20remove%20constructor%20calls%0A%20%20%2F%2F%20for%20instances%20that%20are%20not%20held%20anywhere.%20For%20example%2C%20when%0A%20%20%2F%2F%20%60new%20Polymer.IronMeta(%7B...%7D)%60%20is%20used%20only%20for%20the%20side%20effect%20of%20adding%0A%20%20%2F%2F%20a%20value.%0A%0A%0A%20%20Polymer.IronMeta%5B&#39;%20&#39;%5D%20%3D%20function%20()%20%7B%7D%3B%0A%0A%20%20Polymer.IronMeta.types%20%3D%20%7B%7D%3B%0A%20%20Polymer.IronMeta.prototype%20%3D%20%7B%0A%20%20%20%20get%20value()%20%7B%0A%20%20%20%20%20%20var%20type%20%3D%20this.type%3B%0A%20%20%20%20%20%20var%20key%20%3D%20this.key%3B%0A%0A%20%20%20%20%20%20if%20(type%20%26%26%20key)%20%7B%0A%20%20%20%20%20%20%20%20return%20Polymer.IronMeta.types%5Btype%5D%20%26%26%20Polymer.IronMeta.types%5Btype%5D%5Bkey%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20set%20value(value)%20%7B%0A%20%20%20%20%20%20var%20type%20%3D%20this.type%3B%0A%20%20%20%20%20%20var%20key%20%3D%20this.key%3B%0A%0A%20%20%20%20%20%20if%20(type%20%26%26%20key)%20%7B%0A%20%20%20%20%20%20%20%20type%20%3D%20Polymer.IronMeta.types%5Btype%5D%20%3D%20Polymer.IronMeta.types%5Btype%5D%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20delete%20type%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20list()%20%7B%0A%20%20%20%20%20%20var%20type%20%3D%20this.type%3B%0A%0A%20%20%20%20%20%20if%20(type)%20%7B%0A%20%20%20%20%20%20%20%20var%20items%20%3D%20Polymer.IronMeta.types%5Bthis.type%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!items)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20Object.keys(items).map(function%20(key)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20metaDatas%5Bthis.type%5D%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20byKey%3A%20function%20(key)%20%7B%0A%20%20%20%20%20%20this.key%20%3D%20key%3B%0A%20%20%20%20%20%20return%20this.value%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20var%20metaDatas%20%3D%20Polymer.IronMeta.types%3B%0A%20%20Polymer(%7B%0A%20%20%20%20is%3A%20&#39;iron-meta&#39;%2C%0A%20%20%20%20properties%3A%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20The%20type%20of%20meta-data.%20%20All%20meta-data%20of%20the%20same%20type%20is%20stored%0A%20%20%20%20%20%20%20*%20together.%0A%20%20%20%20%20%20%20*%20%40type%20%7Bstring%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20type%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20&#39;default&#39;%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20The%20key%20used%20to%20store%20%60value%60%20under%20the%20%60type%60%20namespace.%0A%20%20%20%20%20%20%20*%20%40type%20%7B%3Fstring%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20key%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20The%20meta-data%20to%20store%20or%20retrieve.%0A%20%20%20%20%20%20%20*%20%40type%20%7B*%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20value%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20notify%3A%20true%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20If%20true%2C%20%60value%60%20is%20set%20to%20the%20iron-meta%20instance%20itself.%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20self%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20observer%3A%20&#39;_selfChanged&#39;%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20__meta%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20computed%3A%20&#39;__computeMeta(type%2C%20key%2C%20value)&#39;%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20hostAttributes%3A%20%7B%0A%20%20%20%20%20%20hidden%3A%20true%0A%20%20%20%20%7D%2C%0A%20%20%20%20__computeMeta%3A%20function%20(type%2C%20key%2C%20value)%20%7B%0A%20%20%20%20%20%20var%20meta%20%3D%20new%20Polymer.IronMeta(%7B%0A%20%20%20%20%20%20%20%20type%3A%20type%2C%0A%20%20%20%20%20%20%20%20key%3A%20key%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20if%20(value%20!%3D%3D%20undefined%20%26%26%20value%20!%3D%3D%20meta.value)%20%7B%0A%20%20%20%20%20%20%20%20meta.value%20%3D%20value%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(this.value%20!%3D%3D%20meta.value)%20%7B%0A%20%20%20%20%20%20%20%20this.value%20%3D%20meta.value%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20meta%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20list()%20%7B%0A%20%20%20%20%20%20return%20this.__meta%20%26%26%20this.__meta.list%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20_selfChanged%3A%20function%20(self)%20%7B%0A%20%20%20%20%20%20if%20(self)%20%7B%0A%20%20%20%20%20%20%20%20this.value%20%3D%20this%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Retrieves%20meta%20data%20value%20by%20key.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40method%20byKey%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20key%20The%20key%20of%20the%20meta-data%20to%20be%20returned.%0A%20%20%20%20%20*%20%40return%20%7B*%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20byKey%3A%20function%20(key)%20%7B%0A%20%20%20%20%20%20return%20new%20Polymer.IronMeta(%7B%0A%20%20%20%20%20%20%20%20type%3A%20this.type%2C%0A%20%20%20%20%20%20%20%20key%3A%20key%0A%20%20%20%20%20%20%7D).value%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Firon-meta%2Firon-meta.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-flex-layout/iron-flex-layout.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,%2F%2F%20This%20is%20left%20only%20for%20backward%20compatibility%20with%20projects%0A%2F%2F%20that%20incorrectly%20relied%20on%20unscoped%20global%20%5Bhidden%5D%20rules%3B%0A%2F%2F%20removing%20would%20be%20a%20breaking%20change%2C%20but%20new%20projects%0A%2F%2F%20should%20never%20rely%20on%20this.%0A(function%20()%20%7B%0A%20%20var%20style%20%3D%20document.createElement(&#39;style&#39;)%3B%0A%20%20style.textContent%20%3D%20&#39;%5Bhidden%5D%20%7B%20display%3A%20none%20!important%3B%20%7D&#39;%3B%0A%20%20document.head.appendChild(style)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Firon-flex-layout%2Firon-flex-layout.html.js%0A"></script><custom-style><style is="custom-style">[hidden] {
  display:none !important;
}

</style></custom-style><custom-style><style is="custom-style">html {
  --layout_-_display: flex;;--layout-inline_-_display: inline-flex;;--layout-horizontal_-_display:  var(--layout_-_display); --layout-horizontal_-_-ms-flex-direction: row; --layout-horizontal_-_-webkit-flex-direction: row; --layout-horizontal_-_flex-direction: row;;--layout-horizontal-reverse_-_display:  var(--layout_-_display); --layout-horizontal-reverse_-_-ms-flex-direction: row-reverse; --layout-horizontal-reverse_-_-webkit-flex-direction: row-reverse; --layout-horizontal-reverse_-_flex-direction: row-reverse;;--layout-vertical_-_display:  var(--layout_-_display); --layout-vertical_-_-ms-flex-direction: column; --layout-vertical_-_-webkit-flex-direction: column; --layout-vertical_-_flex-direction: column;;--layout-vertical-reverse_-_display:  var(--layout_-_display); --layout-vertical-reverse_-_-ms-flex-direction: column-reverse; --layout-vertical-reverse_-_-webkit-flex-direction: column-reverse; --layout-vertical-reverse_-_flex-direction: column-reverse;;--layout-wrap_-_-ms-flex-wrap: wrap; --layout-wrap_-_-webkit-flex-wrap: wrap; --layout-wrap_-_flex-wrap: wrap;;--layout-wrap-reverse_-_-ms-flex-wrap: wrap-reverse; --layout-wrap-reverse_-_-webkit-flex-wrap: wrap-reverse; --layout-wrap-reverse_-_flex-wrap: wrap-reverse;;--layout-flex-auto_-_-ms-flex: 1 1 auto; --layout-flex-auto_-_-webkit-flex: 1 1 auto; --layout-flex-auto_-_flex: 1 1 auto;;--layout-flex-none_-_-ms-flex: none; --layout-flex-none_-_-webkit-flex: none; --layout-flex-none_-_flex: none;;--layout-flex_-_-ms-flex: 1 1 0.000000001px; --layout-flex_-_-webkit-flex: 1; --layout-flex_-_flex: 1; --layout-flex_-_-webkit-flex-basis: 0.000000001px; --layout-flex_-_flex-basis: 0.000000001px;;--layout-flex-2_-_-ms-flex: 2; --layout-flex-2_-_-webkit-flex: 2; --layout-flex-2_-_flex: 2;;--layout-flex-3_-_-ms-flex: 3; --layout-flex-3_-_-webkit-flex: 3; --layout-flex-3_-_flex: 3;;--layout-flex-4_-_-ms-flex: 4; --layout-flex-4_-_-webkit-flex: 4; --layout-flex-4_-_flex: 4;;--layout-flex-5_-_-ms-flex: 5; --layout-flex-5_-_-webkit-flex: 5; --layout-flex-5_-_flex: 5;;--layout-flex-6_-_-ms-flex: 6; --layout-flex-6_-_-webkit-flex: 6; --layout-flex-6_-_flex: 6;;--layout-flex-7_-_-ms-flex: 7; --layout-flex-7_-_-webkit-flex: 7; --layout-flex-7_-_flex: 7;;--layout-flex-8_-_-ms-flex: 8; --layout-flex-8_-_-webkit-flex: 8; --layout-flex-8_-_flex: 8;;--layout-flex-9_-_-ms-flex: 9; --layout-flex-9_-_-webkit-flex: 9; --layout-flex-9_-_flex: 9;;--layout-flex-10_-_-ms-flex: 10; --layout-flex-10_-_-webkit-flex: 10; --layout-flex-10_-_flex: 10;;--layout-flex-11_-_-ms-flex: 11; --layout-flex-11_-_-webkit-flex: 11; --layout-flex-11_-_flex: 11;;--layout-flex-12_-_-ms-flex: 12; --layout-flex-12_-_-webkit-flex: 12; --layout-flex-12_-_flex: 12;;--layout-start_-_-ms-flex-align: start; --layout-start_-_-webkit-align-items: flex-start; --layout-start_-_align-items: flex-start;;--layout-center_-_-ms-flex-align: center; --layout-center_-_-webkit-align-items: center; --layout-center_-_align-items: center;;--layout-end_-_-ms-flex-align: end; --layout-end_-_-webkit-align-items: flex-end; --layout-end_-_align-items: flex-end;;--layout-baseline_-_-ms-flex-align: baseline; --layout-baseline_-_-webkit-align-items: baseline; --layout-baseline_-_align-items: baseline;;--layout-start-justified_-_-ms-flex-pack: start; --layout-start-justified_-_-webkit-justify-content: flex-start; --layout-start-justified_-_justify-content: flex-start;;--layout-center-justified_-_-ms-flex-pack: center; --layout-center-justified_-_-webkit-justify-content: center; --layout-center-justified_-_justify-content: center;;--layout-end-justified_-_-ms-flex-pack: end; --layout-end-justified_-_-webkit-justify-content: flex-end; --layout-end-justified_-_justify-content: flex-end;;--layout-around-justified_-_-ms-flex-pack: distribute; --layout-around-justified_-_-webkit-justify-content: space-around; --layout-around-justified_-_justify-content: space-around;;--layout-justified_-_-ms-flex-pack: justify; --layout-justified_-_-webkit-justify-content: space-between; --layout-justified_-_justify-content: space-between;;--layout-center-center_-_-ms-flex-align:  var(--layout-center_-_-ms-flex-align); --layout-center-center_-_-webkit-align-items:  var(--layout-center_-_-webkit-align-items); --layout-center-center_-_align-items:  var(--layout-center_-_align-items); --layout-center-center_-_-ms-flex-pack:  var(--layout-center-justified_-_-ms-flex-pack); --layout-center-center_-_-webkit-justify-content:  var(--layout-center-justified_-_-webkit-justify-content); --layout-center-center_-_justify-content:  var(--layout-center-justified_-_justify-content);;--layout-self-start_-_-ms-align-self: flex-start; --layout-self-start_-_-webkit-align-self: flex-start; --layout-self-start_-_align-self: flex-start;;--layout-self-center_-_-ms-align-self: center; --layout-self-center_-_-webkit-align-self: center; --layout-self-center_-_align-self: center;;--layout-self-end_-_-ms-align-self: flex-end; --layout-self-end_-_-webkit-align-self: flex-end; --layout-self-end_-_align-self: flex-end;;--layout-self-stretch_-_-ms-align-self: stretch; --layout-self-stretch_-_-webkit-align-self: stretch; --layout-self-stretch_-_align-self: stretch;;--layout-self-baseline_-_-ms-align-self: baseline; --layout-self-baseline_-_-webkit-align-self: baseline; --layout-self-baseline_-_align-self: baseline;;--layout-start-aligned_-_-ms-flex-line-pack: start; --layout-start-aligned_-_-ms-align-content: flex-start; --layout-start-aligned_-_-webkit-align-content: flex-start; --layout-start-aligned_-_align-content: flex-start;;--layout-end-aligned_-_-ms-flex-line-pack: end; --layout-end-aligned_-_-ms-align-content: flex-end; --layout-end-aligned_-_-webkit-align-content: flex-end; --layout-end-aligned_-_align-content: flex-end;;--layout-center-aligned_-_-ms-flex-line-pack: center; --layout-center-aligned_-_-ms-align-content: center; --layout-center-aligned_-_-webkit-align-content: center; --layout-center-aligned_-_align-content: center;;--layout-between-aligned_-_-ms-flex-line-pack: justify; --layout-between-aligned_-_-ms-align-content: space-between; --layout-between-aligned_-_-webkit-align-content: space-between; --layout-between-aligned_-_align-content: space-between;;--layout-around-aligned_-_-ms-flex-line-pack: distribute; --layout-around-aligned_-_-ms-align-content: space-around; --layout-around-aligned_-_-webkit-align-content: space-around; --layout-around-aligned_-_align-content: space-around;;--layout-block_-_display: block;;--layout-invisible_-_visibility: hidden !important;;--layout-relative_-_position: relative;;--layout-fit_-_position: absolute; --layout-fit_-_top: 0; --layout-fit_-_right: 0; --layout-fit_-_bottom: 0; --layout-fit_-_left: 0;;--layout-scroll_-_-webkit-overflow-scrolling: touch; --layout-scroll_-_overflow: auto;;--layout-fullbleed_-_margin: 0; --layout-fullbleed_-_height: 100vh;;--layout-fixed-top_-_position: fixed; --layout-fixed-top_-_top: 0; --layout-fixed-top_-_left: 0; --layout-fixed-top_-_right: 0;;--layout-fixed-right_-_position: fixed; --layout-fixed-right_-_top: 0; --layout-fixed-right_-_right: 0; --layout-fixed-right_-_bottom: 0;;--layout-fixed-bottom_-_position: fixed; --layout-fixed-bottom_-_right: 0; --layout-fixed-bottom_-_bottom: 0; --layout-fixed-bottom_-_left: 0;;--layout-fixed-left_-_position: fixed; --layout-fixed-left_-_top: 0; --layout-fixed-left_-_bottom: 0; --layout-fixed-left_-_left: 0;;
}

</style></custom-style></link><dom-module id="iron-icon"><template></template><script src="data:text/javascript;charset=utf-8,Polymer(%7B%0A%20%20is%3A%20&#39;iron-icon&#39;%2C%0A%20%20properties%3A%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20The%20name%20of%20the%20icon%20to%20use.%20The%20name%20should%20be%20of%20the%20form%3A%0A%20%20%20%20%20*%20%60iconset_name%3Aicon_name%60.%0A%20%20%20%20%20*%2F%0A%20%20%20%20icon%3A%20%7B%0A%20%20%20%20%20%20type%3A%20String%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20The%20name%20of%20the%20theme%20to%20used%2C%20if%20one%20is%20specified%20by%20the%0A%20%20%20%20%20*%20iconset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20theme%3A%20%7B%0A%20%20%20%20%20%20type%3A%20String%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20If%20using%20iron-icon%20without%20an%20iconset%2C%20you%20can%20set%20the%20src%20to%20be%0A%20%20%20%20%20*%20the%20URL%20of%20an%20individual%20icon%20image%20file.%20Note%20that%20this%20will%20take%0A%20%20%20%20%20*%20precedence%20over%20a%20given%20icon%20attribute.%0A%20%20%20%20%20*%2F%0A%20%20%20%20src%3A%20%7B%0A%20%20%20%20%20%20type%3A%20String%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40type%20%7B!Polymer.IronMeta%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_meta%3A%20%7B%0A%20%20%20%20%20%20value%3A%20Polymer.Base.create(&#39;iron-meta&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20&#39;iconset&#39;%0A%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20observers%3A%20%5B&#39;_updateIcon(_meta%2C%20isAttached)&#39;%2C%20&#39;_updateIcon(theme%2C%20isAttached)&#39;%2C%20&#39;_srcChanged(src%2C%20isAttached)&#39;%2C%20&#39;_iconChanged(icon%2C%20isAttached)&#39;%5D%2C%0A%20%20_DEFAULT_ICONSET%3A%20&#39;icons&#39;%2C%0A%20%20_iconChanged%3A%20function%20(icon)%20%7B%0A%20%20%20%20var%20parts%20%3D%20(icon%20%7C%7C%20&#39;&#39;).split(&#39;%3A&#39;)%3B%0A%20%20%20%20this._iconName%20%3D%20parts.pop()%3B%0A%20%20%20%20this._iconsetName%20%3D%20parts.pop()%20%7C%7C%20this._DEFAULT_ICONSET%3B%0A%0A%20%20%20%20this._updateIcon()%3B%0A%20%20%7D%2C%0A%20%20_srcChanged%3A%20function%20(src)%20%7B%0A%20%20%20%20this._updateIcon()%3B%0A%20%20%7D%2C%0A%20%20_usesIconset%3A%20function%20()%20%7B%0A%20%20%20%20return%20this.icon%20%7C%7C%20!this.src%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%20%40suppress%20%7Bvisibility%7D%20*%2F%0A%20%20_updateIcon%3A%20function%20()%20%7B%0A%20%20%20%20if%20(this._usesIconset())%20%7B%0A%20%20%20%20%20%20if%20(this._img%20%26%26%20this._img.parentNode)%20%7B%0A%20%20%20%20%20%20%20%20Polymer.dom(this.root).removeChild(this._img)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(this._iconName%20%3D%3D%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._iconset)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._iconset.removeIcon(this)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(this._iconsetName%20%26%26%20this._meta)%20%7B%0A%20%20%20%20%20%20%20%20this._iconset%20%3D%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7B%3FPolymer.Iconset%7D%20*%2F%0A%20%20%20%20%20%20%20%20this._meta.byKey(this._iconsetName)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(this._iconset)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._iconset.applyIcon(this%2C%20this._iconName%2C%20this.theme)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20this.unlisten(window%2C%20&#39;iron-iconset-added&#39;%2C%20&#39;_updateIcon&#39;)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.listen(window%2C%20&#39;iron-iconset-added&#39;%2C%20&#39;_updateIcon&#39;)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20if%20(this._iconset)%20%7B%0A%20%20%20%20%20%20%20%20this._iconset.removeIcon(this)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!this._img)%20%7B%0A%20%20%20%20%20%20%20%20this._img%20%3D%20document.createElement(&#39;img&#39;)%3B%0A%20%20%20%20%20%20%20%20this._img.style.width%20%3D%20&#39;100%25&#39;%3B%0A%20%20%20%20%20%20%20%20this._img.style.height%20%3D%20&#39;100%25&#39;%3B%0A%20%20%20%20%20%20%20%20this._img.draggable%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this._img.src%20%3D%20this.src%3B%0A%20%20%20%20%20%20Polymer.dom(this.root).appendChild(this._img)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D)%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Firon-icon%2Firon-icon.html.js%0A"></script></dom-module></link><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-iconset-svg/iron-iconset-svg.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-meta/iron-meta.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,%2F**%0A%20*%20The%20%60iron-iconset-svg%60%20element%20allows%20users%20to%20define%20their%20own%20icon%20sets%0A%20*%20that%20contain%20svg%20icons.%20The%20svg%20icon%20elements%20should%20be%20children%20of%20the%0A%20*%20%60iron-iconset-svg%60%20element.%20Multiple%20icons%20should%20be%20given%20distinct%20id&#39;s.%0A%20*%0A%20*%20Using%20svg%20elements%20to%20create%20icons%20has%20a%20few%20advantages%20over%20traditional%0A%20*%20bitmap%20graphics%20like%20jpg%20or%20png.%20Icons%20that%20use%20svg%20are%20vector%20based%20so%0A%20*%20they%20are%20resolution%20independent%20and%20should%20look%20good%20on%20any%20device.%20They%0A%20*%20are%20stylable%20via%20css.%20Icons%20can%20be%20themed%2C%20colorized%2C%20and%20even%20animated.%0A%20*%0A%20*%20Example%3A%0A%20*%0A%20*%20%20%20%20%20%3Ciron-iconset-svg%20name%3D%22my-svg-icons%22%20size%3D%2224%22%3E%0A%20*%20%20%20%20%20%20%20%3Csvg%3E%0A%20*%20%20%20%20%20%20%20%20%20%3Cdefs%3E%0A%20*%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22shape%22%3E%0A%20*%20%20%20%20%20%20%20%20%20%20%20%20%20%3Crect%20x%3D%2212%22%20y%3D%220%22%20width%3D%2212%22%20height%3D%2224%22%20%2F%3E%0A%20*%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ccircle%20cx%3D%2212%22%20cy%3D%2212%22%20r%3D%2212%22%20%2F%3E%0A%20*%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%0A%20*%20%20%20%20%20%20%20%20%20%3C%2Fdefs%3E%0A%20*%20%20%20%20%20%20%20%3C%2Fsvg%3E%0A%20*%20%20%20%20%20%3C%2Firon-iconset-svg%3E%0A%20*%0A%20*%20This%20will%20automatically%20register%20the%20icon%20set%20%22my-svg-icons%22%20to%20the%20iconset%0A%20*%20database.%20%20To%20use%20these%20icons%20from%20within%20another%20element%2C%20make%20a%0A%20*%20%60iron-iconset%60%20element%20and%20call%20the%20%60byId%60%20method%0A%20*%20to%20retrieve%20a%20given%20iconset.%20To%20apply%20a%20particular%20icon%20inside%20an%0A%20*%20element%20use%20the%20%60applyIcon%60%20method.%20For%20example%3A%0A%20*%0A%20*%20%20%20%20%20iconset.applyIcon(iconNode%2C%20&#39;car&#39;)%3B%0A%20*%0A%20*%20%40element%20iron-iconset-svg%0A%20*%20%40demo%20demo%2Findex.html%0A%20*%20%40implements%20%7BPolymer.Iconset%7D%0A%20*%2F%0APolymer(%7B%0A%20%20is%3A%20&#39;iron-iconset-svg&#39;%2C%0A%20%20properties%3A%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20The%20name%20of%20the%20iconset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20name%3A%20%7B%0A%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20observer%3A%20&#39;_nameChanged&#39;%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20The%20size%20of%20an%20individual%20icon.%20Note%20that%20icons%20must%20be%20square.%0A%20%20%20%20%20*%2F%0A%20%20%20%20size%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Number%2C%0A%20%20%20%20%20%20value%3A%2024%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Set%20to%20true%20to%20enable%20mirroring%20of%20icons%20where%20specified%20when%20they%20are%0A%20%20%20%20%20*%20stamped.%20Icons%20that%20should%20be%20mirrored%20should%20be%20decorated%20with%20a%0A%20%20%20%20%20*%20%60mirror-in-rtl%60%20attribute.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20NOTE%3A%20For%20performance%20reasons%2C%20direction%20will%20be%20resolved%20once%20per%0A%20%20%20%20%20*%20document%20per%20iconset%2C%20so%20moving%20icons%20in%20and%20out%20of%20RTL%20subtrees%20will%0A%20%20%20%20%20*%20not%20cause%20their%20mirrored%20state%20to%20change.%0A%20%20%20%20%20*%2F%0A%20%20%20%20rtlMirroring%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Set%20to%20true%20to%20measure%20RTL%20based%20on%20the%20dir%20attribute%20on%20the%20body%20or%0A%20%20%20%20%20*%20html%20elements%20(measured%20on%20document.body%20or%20document.documentElement%20as%0A%20%20%20%20%20*%20available).%0A%20%20%20%20%20*%2F%0A%20%20%20%20useGlobalRtlAttribute%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20created%3A%20function%20()%20%7B%0A%20%20%20%20this._meta%20%3D%20new%20Polymer.IronMeta(%7B%0A%20%20%20%20%20%20type%3A%20&#39;iconset&#39;%2C%0A%20%20%20%20%20%20key%3A%20null%2C%0A%20%20%20%20%20%20value%3A%20null%0A%20%20%20%20%7D)%3B%0A%20%20%7D%2C%0A%20%20attached%3A%20function%20()%20%7B%0A%20%20%20%20this.style.display%20%3D%20&#39;none&#39;%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Construct%20an%20array%20of%20all%20icon%20names%20in%20this%20iconset.%0A%20%20%20*%0A%20%20%20*%20%40return%20%7B!Array%7D%20Array%20of%20icon%20names.%0A%20%20%20*%2F%0A%20%20getIconNames%3A%20function%20()%20%7B%0A%20%20%20%20this._icons%20%3D%20this._createIconMap()%3B%0A%20%20%20%20return%20Object.keys(this._icons).map(function%20(n)%20%7B%0A%20%20%20%20%20%20return%20this.name%20%2B%20&#39;%3A&#39;%20%2B%20n%3B%0A%20%20%20%20%7D%2C%20this)%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Applies%20an%20icon%20to%20the%20given%20element.%0A%20%20%20*%0A%20%20%20*%20An%20svg%20icon%20is%20prepended%20to%20the%20element&#39;s%20shadowRoot%20if%20it%20exists%2C%0A%20%20%20*%20otherwise%20to%20the%20element%20itself.%0A%20%20%20*%0A%20%20%20*%20If%20RTL%20mirroring%20is%20enabled%2C%20and%20the%20icon%20is%20marked%20to%20be%20mirrored%20in%0A%20%20%20*%20RTL%2C%20the%20element%20will%20be%20tested%20(once%20and%20only%20once%20ever%20for%20each%0A%20%20%20*%20iconset)%20to%20determine%20the%20direction%20of%20the%20subtree%20the%20element%20is%20in.%0A%20%20%20*%20This%20direction%20will%20apply%20to%20all%20future%20icon%20applications%2C%20although%20only%0A%20%20%20*%20icons%20marked%20to%20be%20mirrored%20will%20be%20affected.%0A%20%20%20*%0A%20%20%20*%20%40method%20applyIcon%0A%20%20%20*%20%40param%20%7BElement%7D%20element%20Element%20to%20which%20the%20icon%20is%20applied.%0A%20%20%20*%20%40param%20%7Bstring%7D%20iconName%20Name%20of%20the%20icon%20to%20apply.%0A%20%20%20*%20%40return%20%7B%3FElement%7D%20The%20svg%20element%20which%20renders%20the%20icon.%0A%20%20%20*%2F%0A%20%20applyIcon%3A%20function%20(element%2C%20iconName)%20%7B%0A%20%20%20%20%2F%2F%20Remove%20old%20svg%20element%0A%20%20%20%20this.removeIcon(element)%3B%20%2F%2F%20install%20new%20svg%20element%0A%0A%20%20%20%20var%20svg%20%3D%20this._cloneIcon(iconName%2C%20this.rtlMirroring%20%26%26%20this._targetIsRTL(element))%3B%0A%0A%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%2F%2F%20insert%20svg%20element%20into%20shadow%20root%2C%20if%20it%20exists%0A%20%20%20%20%20%20var%20pde%20%3D%20Polymer.dom(element.root%20%7C%7C%20element)%3B%0A%20%20%20%20%20%20pde.insertBefore(svg%2C%20pde.childNodes%5B0%5D)%3B%0A%20%20%20%20%20%20return%20element._svgIcon%20%3D%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20null%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Remove%20an%20icon%20from%20the%20given%20element%20by%20undoing%20the%20changes%20effected%0A%20%20%20*%20by%20%60applyIcon%60.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7BElement%7D%20element%20The%20element%20from%20which%20the%20icon%20is%20removed.%0A%20%20%20*%2F%0A%20%20removeIcon%3A%20function%20(element)%20%7B%0A%20%20%20%20%2F%2F%20Remove%20old%20svg%20element%0A%20%20%20%20if%20(element._svgIcon)%20%7B%0A%20%20%20%20%20%20Polymer.dom(element.root%20%7C%7C%20element).removeChild(element._svgIcon)%3B%0A%20%20%20%20%20%20element._svgIcon%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Measures%20and%20memoizes%20the%20direction%20of%20the%20element.%20Note%20that%20this%0A%20%20%20*%20measurement%20is%20only%20done%20once%20and%20the%20result%20is%20memoized%20for%20future%0A%20%20%20*%20invocations.%0A%20%20%20*%2F%0A%20%20_targetIsRTL%3A%20function%20(target)%20%7B%0A%20%20%20%20if%20(this.__targetIsRTL%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20if%20(this.useGlobalRtlAttribute)%20%7B%0A%20%20%20%20%20%20%20%20var%20globalElement%20%3D%20document.body%20%26%26%20document.body.hasAttribute(&#39;dir&#39;)%20%3F%20document.body%20%3A%20document.documentElement%3B%0A%20%20%20%20%20%20%20%20this.__targetIsRTL%20%3D%20globalElement.getAttribute(&#39;dir&#39;)%20%3D%3D%3D%20&#39;rtl&#39;%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(target%20%26%26%20target.nodeType%20!%3D%3D%20Node.ELEMENT_NODE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20target%20%3D%20target.host%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20this.__targetIsRTL%20%3D%20target%20%26%26%20window.getComputedStyle(target)%5B&#39;direction&#39;%5D%20%3D%3D%3D%20&#39;rtl&#39;%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20this.__targetIsRTL%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%0A%20%20%20*%20When%20name%20is%20changed%2C%20register%20iconset%20metadata%0A%20%20%20*%0A%20%20%20*%2F%0A%20%20_nameChanged%3A%20function%20()%20%7B%0A%20%20%20%20this._meta.value%20%3D%20null%3B%0A%20%20%20%20this._meta.key%20%3D%20this.name%3B%0A%20%20%20%20this._meta.value%20%3D%20this%3B%0A%20%20%20%20this.async(function%20()%20%7B%0A%20%20%20%20%20%20this.fire(&#39;iron-iconset-added&#39;%2C%20this%2C%20%7B%0A%20%20%20%20%20%20%20%20node%3A%20window%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Create%20a%20map%20of%20child%20SVG%20elements%20by%20id.%0A%20%20%20*%0A%20%20%20*%20%40return%20%7B!Object%7D%20Map%20of%20id&#39;s%20to%20SVG%20elements.%0A%20%20%20*%2F%0A%20%20_createIconMap%3A%20function%20()%20%7B%0A%20%20%20%20%2F%2F%20Objects%20chained%20to%20Object.prototype%20(%60%7B%7D%60)%20have%20members.%20Specifically%2C%0A%20%20%20%20%2F%2F%20on%20FF%20there%20is%20a%20%60watch%60%20method%20that%20confuses%20the%20icon%20map%2C%20so%20we%0A%20%20%20%20%2F%2F%20need%20to%20use%20a%20null-based%20object%20here.%0A%20%20%20%20var%20icons%20%3D%20Object.create(null)%3B%0A%20%20%20%20Polymer.dom(this).querySelectorAll(&#39;%5Bid%5D&#39;).forEach(function%20(icon)%20%7B%0A%20%20%20%20%20%20icons%5Bicon.id%5D%20%3D%20icon%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20return%20icons%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Produce%20installable%20clone%20of%20the%20SVG%20element%20matching%20%60id%60%20in%20this%0A%20%20%20*%20iconset%2C%20or%20%60undefined%60%20if%20there%20is%20no%20matching%20element.%0A%20%20%20*%0A%20%20%20*%20%40return%20%7BElement%7D%20Returns%20an%20installable%20clone%20of%20the%20SVG%20element%0A%20%20%20*%20matching%20%60id%60.%0A%20%20%20*%2F%0A%20%20_cloneIcon%3A%20function%20(id%2C%20mirrorAllowed)%20%7B%0A%20%20%20%20%2F%2F%20create%20the%20icon%20map%20on-demand%2C%20since%20the%20iconset%20itself%20has%20no%20discrete%0A%20%20%20%20%2F%2F%20signal%20to%20know%20when%20it&#39;s%20children%20are%20fully%20parsed%0A%20%20%20%20this._icons%20%3D%20this._icons%20%7C%7C%20this._createIconMap()%3B%0A%20%20%20%20return%20this._prepareSvgClone(this._icons%5Bid%5D%2C%20this.size%2C%20mirrorAllowed)%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BElement%7D%20sourceSvg%0A%20%20%20*%20%40param%20%7Bnumber%7D%20size%0A%20%20%20*%20%40param%20%7BBoolean%7D%20mirrorAllowed%0A%20%20%20*%20%40return%20%7BElement%7D%0A%20%20%20*%2F%0A%20%20_prepareSvgClone%3A%20function%20(sourceSvg%2C%20size%2C%20mirrorAllowed)%20%7B%0A%20%20%20%20if%20(sourceSvg)%20%7B%0A%20%20%20%20%20%20var%20content%20%3D%20sourceSvg.cloneNode(true)%2C%0A%20%20%20%20%20%20%20%20%20%20svg%20%3D%20document.createElementNS(&#39;http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg&#39;%2C%20&#39;svg&#39;)%2C%0A%20%20%20%20%20%20%20%20%20%20viewBox%20%3D%20content.getAttribute(&#39;viewBox&#39;)%20%7C%7C%20&#39;0%200%20&#39;%20%2B%20size%20%2B%20&#39;%20&#39;%20%2B%20size%2C%0A%20%20%20%20%20%20%20%20%20%20cssText%20%3D%20&#39;pointer-events%3A%20none%3B%20display%3A%20block%3B%20width%3A%20100%25%3B%20height%3A%20100%25%3B&#39;%3B%0A%0A%20%20%20%20%20%20if%20(mirrorAllowed%20%26%26%20content.hasAttribute(&#39;mirror-in-rtl&#39;))%20%7B%0A%20%20%20%20%20%20%20%20cssText%20%2B%3D%20&#39;-webkit-transform%3Ascale(-1%2C1)%3Btransform%3Ascale(-1%2C1)%3Btransform-origin%3Acenter%3B&#39;%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20svg.setAttribute(&#39;viewBox&#39;%2C%20viewBox)%3B%0A%20%20%20%20%20%20svg.setAttribute(&#39;preserveAspectRatio&#39;%2C%20&#39;xMidYMid%20meet&#39;)%3B%0A%20%20%20%20%20%20svg.setAttribute(&#39;focusable&#39;%2C%20&#39;false&#39;)%3B%20%2F%2F%20TODO(dfreedm)%3A%20%60pointer-events%3A%20none%60%20works%20around%0A%20%20%20%20%20%20%2F%2F%20https%3A%2F%2Fcrbug.com%2F370136%0A%20%20%20%20%20%20%2F%2F%20TODO(sjmiles)%3A%20inline%20style%20may%20not%20be%20ideal%2C%20but%20avoids%20requiring%20a%0A%20%20%20%20%20%20%2F%2F%20shadow-root%0A%0A%20%20%20%20%20%20svg.style.cssText%20%3D%20cssText%3B%0A%20%20%20%20%20%20svg.appendChild(content).removeAttribute(&#39;id&#39;)%3B%0A%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20null%3B%0A%20%20%7D%0A%7D)%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Firon-iconset-svg%2Firon-iconset-svg.html.js%0A"></script></link><iron-iconset-svg name="icons" size="1792" style="display: none;"><svg><defs><g id="arrow-left" transform="scale(1 -1) translate(128 -1536)"><path d="M1536 640v-128q0 -53 -32.5 -90.5t-84.5 -37.5h-704l293 -294q38 -36 38 -90t-38 -90l-75 -76q-37 -37 -90 -37q-52 0 -91 37l-651 652q-37 37 -37 90q0 52 37 91l651 650q38 38 91 38q52 0 90 -38l75 -74q38 -38 38 -91t-38 -91l-293 -293h704q52 0 84.5 -37.5 t32.5 -90.5z"></path></g><g id="arrow-right" transform="scale(1 -1) translate(128 -1536)"><path d="M1472 576q0 -54 -37 -91l-651 -651q-39 -37 -91 -37q-51 0 -90 37l-75 75q-38 38 -38 91t38 91l293 293h-704q-52 0 -84.5 37.5t-32.5 90.5v128q0 53 32.5 90.5t84.5 37.5h704l-293 294q-38 36 -38 90t38 90l75 75q38 38 90 38q53 0 91 -38l651 -651q37 -35 37 -90z"></path></g><g id="angle-left" transform="scale(1 -1) translate(576 -1536)"><path d="M627 992q0 -13 -10 -23l-393 -393l393 -393q10 -10 10 -23t-10 -23l-50 -50q-10 -10 -23 -10t-23 10l-466 466q-10 10 -10 23t10 23l466 466q10 10 23 10t23 -10l50 -50q10 -10 10 -23z"></path></g><g id="angle-right" transform="scale(1 -1) translate(576 -1536)"><path d="M595 576q0 -13 -10 -23l-466 -466q-10 -10 -23 -10t-23 10l-50 50q-10 10 -10 23t10 23l393 393l-393 393q-10 10 -10 23t10 23l50 50q10 10 23 10t23 -10l466 -466q10 -10 10 -23z"></path></g><g id="angle-down" transform="scale(1 -1) translate(320 -1536)"><path d="M1075 800q0 -13 -10 -23l-466 -466q-10 -10 -23 -10t-23 10l-466 466q-10 10 -10 23t10 23l50 50q10 10 23 10t23 -10l393 -393l393 393q10 10 23 10t23 -10l50 -50q10 -10 10 -23z"></path></g><g id="angle-up" transform="scale(1 -1) translate(320 -1536)"><path d="M1075 352q0 -13 -10 -23l-50 -50q-10 -10 -23 -10t-23 10l-393 393l-393 -393q-10 -10 -23 -10t-23 10l-50 50q-10 10 -10 23t10 23l466 466q10 10 23 10t23 -10l466 -466q10 -10 10 -23z"></path></g><g id="angle-double-up" transform="scale(1 -1) translate(320 -1536)"><path d="M1075 224q0 -13 -10 -23l-50 -50q-10 -10 -23 -10t-23 10l-393 393l-393 -393q-10 -10 -23 -10t-23 10l-50 50q-10 10 -10 23t10 23l466 466q10 10 23 10t23 -10l466 -466q10 -10 10 -23zM1075 608q0 -13 -10 -23l-50 -50q-10 -10 -23 -10t-23 10l-393 393l-393 -393 q-10 -10 -23 -10t-23 10l-50 50q-10 10 -10 23t10 23l466 466q10 10 23 10t23 -10l466 -466q10 -10 10 -23z"></path></g><g id="bell" transform="scale(1 -1) translate(0 -1536)"><path d="M912 -160q0 16 -16 16q-59 0 -101.5 42.5t-42.5 101.5q0 16 -16 16t-16 -16q0 -73 51.5 -124.5t124.5 -51.5q16 0 16 16zM1728 128q0 -52 -38 -90t-90 -38h-448q0 -106 -75 -181t-181 -75t-181 75t-75 181h-448q-52 0 -90 38t-38 90q50 42 91 88t85 119.5t74.5 158.5 t50 206t19.5 260q0 152 117 282.5t307 158.5q-8 19 -8 39q0 40 28 68t68 28t68 -28t28 -68q0 -20 -8 -39q190 -28 307 -158.5t117 -282.5q0 -139 19.5 -260t50 -206t74.5 -158.5t85 -119.5t91 -88z"></path></g><g id="search" transform="scale(1 -1) translate(64 -1536)"><path d="M1152 704q0 185 -131.5 316.5t-316.5 131.5t-316.5 -131.5t-131.5 -316.5t131.5 -316.5t316.5 -131.5t316.5 131.5t131.5 316.5zM1664 -128q0 -52 -38 -90t-90 -38q-54 0 -90 38l-343 342q-179 -124 -399 -124q-143 0 -273.5 55.5t-225 150t-150 225t-55.5 273.5 t55.5 273.5t150 225t225 150t273.5 55.5t273.5 -55.5t225 -150t150 -225t55.5 -273.5q0 -220 -124 -399l343 -343q37 -37 37 -90z"></path></g><g id="bars" transform="scale(1 -1) translate(128 -1536)"><path d="M1536 192v-128q0 -26 -19 -45t-45 -19h-1408q-26 0 -45 19t-19 45v128q0 26 19 45t45 19h1408q26 0 45 -19t19 -45zM1536 704v-128q0 -26 -19 -45t-45 -19h-1408q-26 0 -45 19t-19 45v128q0 26 19 45t45 19h1408q26 0 45 -19t19 -45zM1536 1216v-128q0 -26 -19 -45 t-45 -19h-1408q-26 0 -45 19t-19 45v128q0 26 19 45t45 19h1408q26 0 45 -19t19 -45z"></path></g><g id="user" transform="scale(1 -1) translate(192 -1536)"><path d="M1408 131q0 -120 -73 -189.5t-194 -69.5h-874q-121 0 -194 69.5t-73 189.5q0 53 3.5 103.5t14 109t26.5 108.5t43 97.5t62 81t85.5 53.5t111.5 20q9 0 42 -21.5t74.5 -48t108 -48t133.5 -21.5t133.5 21.5t108 48t74.5 48t42 21.5q61 0 111.5 -20t85.5 -53.5t62 -81 t43 -97.5t26.5 -108.5t14 -109t3.5 -103.5zM1088 1024q0 -159 -112.5 -271.5t-271.5 -112.5t-271.5 112.5t-112.5 271.5t112.5 271.5t271.5 112.5t271.5 -112.5t112.5 -271.5z"></path></g><g id="clock-o" transform="scale(1 -1) translate(128 -1536)"><path d="M896 992v-448q0 -14 -9 -23t-23 -9h-320q-14 0 -23 9t-9 23v64q0 14 9 23t23 9h224v352q0 14 9 23t23 9h64q14 0 23 -9t9 -23zM1312 640q0 148 -73 273t-198 198t-273 73t-273 -73t-198 -198t-73 -273t73 -273t198 -198t273 -73t273 73t198 198t73 273zM1536 640 q0 -209 -103 -385.5t-279.5 -279.5t-385.5 -103t-385.5 103t-279.5 279.5t-103 385.5t103 385.5t279.5 279.5t385.5 103t385.5 -103t279.5 -279.5t103 -385.5z"></path></g><g id="comments" transform="scale(1 -1) translate(0 -1536)"><path d="M1408 768q0 -139 -94 -257t-256.5 -186.5t-353.5 -68.5q-86 0 -176 16q-124 -88 -278 -128q-36 -9 -86 -16h-3q-11 0 -20.5 8t-11.5 21q-1 3 -1 6.5t0.5 6.5t2 6l2.5 5t3.5 5.5t4 5t4.5 5t4 4.5q5 6 23 25t26 29.5t22.5 29t25 38.5t20.5 44q-124 72 -195 177t-71 224 q0 139 94 257t256.5 186.5t353.5 68.5t353.5 -68.5t256.5 -186.5t94 -257zM1792 512q0 -120 -71 -224.5t-195 -176.5q10 -24 20.5 -44t25 -38.5t22.5 -29t26 -29.5t23 -25q1 -1 4 -4.5t4.5 -5t4 -5t3.5 -5.5l2.5 -5t2 -6t0.5 -6.5t-1 -6.5q-3 -14 -13 -22t-22 -7 q-50 7 -86 16q-154 40 -278 128q-90 -16 -176 -16q-271 0 -472 132q58 -4 88 -4q161 0 309 45t264 129q125 92 192 212t67 254q0 77 -23 152q129 -71 204 -178t75 -230z"></path></g><g id="circle-o" transform="scale(1 -1) translate(128 -1536)"><path d="M768 1184q-148 0 -273 -73t-198 -198t-73 -273t73 -273t198 -198t273 -73t273 73t198 198t73 273t-73 273t-198 198t-273 73zM1536 640q0 -209 -103 -385.5t-279.5 -279.5t-385.5 -103t-385.5 103t-279.5 279.5t-103 385.5t103 385.5t279.5 279.5t385.5 103t385.5 -103 t279.5 -279.5t103 -385.5z"></path></g><g id="circle" transform="scale(1 -1) translate(128 -1536)"><path d="M1536 640q0 -209 -103 -385.5t-279.5 -279.5t-385.5 -103t-385.5 103t-279.5 279.5t-103 385.5t103 385.5t279.5 279.5t385.5 103t385.5 -103t279.5 -279.5t103 -385.5z"></path></g><g id="chevron-left" transform="scale(1 -1) translate(256 -1536)"><path d="M1171 1235l-531 -531l531 -531q19 -19 19 -45t-19 -45l-166 -166q-19 -19 -45 -19t-45 19l-742 742q-19 19 -19 45t19 45l742 742q19 19 45 19t45 -19l166 -166q19 -19 19 -45t-19 -45z"></path></g><g id="chevron-right" transform="scale(1 -1) translate(256 -1536)"><path d="M1107 659l-742 -742q-19 -19 -45 -19t-45 19l-166 166q-19 19 -19 45t19 45l531 531l-531 531q-19 19 -19 45t19 45l166 166q19 19 45 19t45 -19l742 -742q19 -19 19 -45t-19 -45z"></path></g><g id="calendar" transform="scale(1 -1) translate(64 -1536)"><path d="M128 -128h288v288h-288v-288zM480 -128h320v288h-320v-288zM128 224h288v320h-288v-320zM480 224h320v320h-320v-320zM128 608h288v288h-288v-288zM864 -128h320v288h-320v-288zM480 608h320v288h-320v-288zM1248 -128h288v288h-288v-288zM864 224h320v320h-320v-320z M512 1088v288q0 13 -9.5 22.5t-22.5 9.5h-64q-13 0 -22.5 -9.5t-9.5 -22.5v-288q0 -13 9.5 -22.5t22.5 -9.5h64q13 0 22.5 9.5t9.5 22.5zM1248 224h288v320h-288v-320zM864 608h320v288h-320v-288zM1248 608h288v288h-288v-288zM1280 1088v288q0 13 -9.5 22.5t-22.5 9.5h-64 q-13 0 -22.5 -9.5t-9.5 -22.5v-288q0 -13 9.5 -22.5t22.5 -9.5h64q13 0 22.5 9.5t9.5 22.5zM1664 1152v-1280q0 -52 -38 -90t-90 -38h-1408q-52 0 -90 38t-38 90v1280q0 52 38 90t90 38h128v96q0 66 47 113t113 47h64q66 0 113 -47t47 -113v-96h384v96q0 66 47 113t113 47 h64q66 0 113 -47t47 -113v-96h128q52 0 90 -38t38 -90z"></path></g><g id="envelope-o" transform="scale(1 -1) translate(0 -1536)"><path d="M1664 32v768q-32 -36 -69 -66q-268 -206 -426 -338q-51 -43 -83 -67t-86.5 -48.5t-102.5 -24.5h-1h-1q-48 0 -102.5 24.5t-86.5 48.5t-83 67q-158 132 -426 338q-37 30 -69 66v-768q0 -13 9.5 -22.5t22.5 -9.5h1472q13 0 22.5 9.5t9.5 22.5zM1664 1083v11v13.5t-0.5 13 t-3 12.5t-5.5 9t-9 7.5t-14 2.5h-1472q-13 0 -22.5 -9.5t-9.5 -22.5q0 -168 147 -284q193 -152 401 -317q6 -5 35 -29.5t46 -37.5t44.5 -31.5t50.5 -27.5t43 -9h1h1q20 0 43 9t50.5 27.5t44.5 31.5t46 37.5t35 29.5q208 165 401 317q54 43 100.5 115.5t46.5 131.5z M1792 1120v-1088q0 -66 -47 -113t-113 -47h-1472q-66 0 -113 47t-47 113v1088q0 66 47 113t113 47h1472q66 0 113 -47t47 -113z"></path></g><g id="exclamation-circle" transform="scale(1 -1) translate(128 -1536)"><path d="M768 1408q209 0 385.5 -103t279.5 -279.5t103 -385.5t-103 -385.5t-279.5 -279.5t-385.5 -103t-385.5 103t-279.5 279.5t-103 385.5t103 385.5t279.5 279.5t385.5 103zM896 161v190q0 14 -9 23.5t-22 9.5h-192q-13 0 -23 -10t-10 -23v-190q0 -13 10 -23t23 -10h192 q13 0 22 9.5t9 23.5zM894 505l18 621q0 12 -10 18q-10 8 -24 8h-220q-14 0 -24 -8q-10 -6 -10 -18l17 -621q0 -10 10 -17.5t24 -7.5h185q14 0 23.5 7.5t10.5 17.5z"></path></g><g id="twitter-square" transform="scale(1 -1) translate(128 -1536)"><path d="M1280 926q-56 -25 -121 -34q68 40 93 117q-65 -38 -134 -51q-61 66 -153 66q-87 0 -148.5 -61.5t-61.5 -148.5q0 -29 5 -48q-129 7 -242 65t-192 155q-29 -50 -29 -106q0 -114 91 -175q-47 1 -100 26v-2q0 -75 50 -133.5t123 -72.5q-29 -8 -51 -8q-13 0 -39 4 q21 -63 74.5 -104t121.5 -42q-116 -90 -261 -90q-26 0 -50 3q148 -94 322 -94q112 0 210 35.5t168 95t120.5 137t75 162t24.5 168.5q0 18 -1 27q63 45 105 109zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5 t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"></path></g><g id="facebook-square" transform="scale(1 -1) translate(128 -1536)"><path d="M1248 1408q119 0 203.5 -84.5t84.5 -203.5v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-188v595h199l30 232h-229v148q0 56 23.5 84t91.5 28l122 1v207q-63 9 -178 9q-136 0 -217.5 -80t-81.5 -226v-171h-200v-232h200v-595h-532q-119 0 -203.5 84.5t-84.5 203.5v960 q0 119 84.5 203.5t203.5 84.5h960z"></path></g><g id="pinterest-square" transform="scale(1 -1) translate(128 -1536)"><path d="M1248 1408q119 0 203.5 -84.5t84.5 -203.5v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-725q85 122 108 210q9 34 53 209q21 -39 73.5 -67t112.5 -28q181 0 295.5 147.5t114.5 373.5q0 84 -35 162.5t-96.5 139t-152.5 97t-197 36.5q-104 0 -194.5 -28.5t-153 -76.5 t-107.5 -109.5t-66.5 -128t-21.5 -132.5q0 -102 39.5 -180t116.5 -110q13 -5 23.5 0t14.5 19q10 44 15 61q6 23 -11 42q-50 62 -50 150q0 150 103.5 256.5t270.5 106.5q149 0 232.5 -81t83.5 -210q0 -168 -67.5 -286t-173.5 -118q-60 0 -97 43.5t-23 103.5q8 34 26.5 92.5 t29.5 102t11 74.5q0 49 -26.5 81.5t-75.5 32.5q-61 0 -103.5 -56.5t-42.5 -139.5q0 -72 24 -121l-98 -414q-24 -100 -7 -254h-183q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960z"></path></g><g id="instagram" transform="scale(1 -1) translate(128 -1536)"><path d="M1024 640q0 106 -75 181t-181 75t-181 -75t-75 -181t75 -181t181 -75t181 75t75 181zM1162 640q0 -164 -115 -279t-279 -115t-279 115t-115 279t115 279t279 115t279 -115t115 -279zM1270 1050q0 -38 -27 -65t-65 -27t-65 27t-27 65t27 65t65 27t65 -27t27 -65zM768 1270 q-7 0 -76.5 0.5t-105.5 0t-96.5 -3t-103 -10t-71.5 -18.5q-50 -20 -88 -58t-58 -88q-11 -29 -18.5 -71.5t-10 -103t-3 -96.5t0 -105.5t0.5 -76.5t-0.5 -76.5t0 -105.5t3 -96.5t10 -103t18.5 -71.5q20 -50 58 -88t88 -58q29 -11 71.5 -18.5t103 -10t96.5 -3t105.5 0t76.5 0.5 t76.5 -0.5t105.5 0t96.5 3t103 10t71.5 18.5q50 20 88 58t58 88q11 29 18.5 71.5t10 103t3 96.5t0 105.5t-0.5 76.5t0.5 76.5t0 105.5t-3 96.5t-10 103t-18.5 71.5q-20 50 -58 88t-88 58q-29 11 -71.5 18.5t-103 10t-96.5 3t-105.5 0t-76.5 -0.5zM1536 640q0 -229 -5 -317 q-10 -208 -124 -322t-322 -124q-88 -5 -317 -5t-317 5q-208 10 -322 124t-124 322q-5 88 -5 317t5 317q10 208 124 322t322 124q88 5 317 5t317 -5q208 -10 322 -124t124 -322q5 -88 5 -317z"></path></g><g id="linkedin-square" transform="scale(1 -1) translate(128 -1536)"><path d="M237 122h231v694h-231v-694zM483 1030q-1 52 -36 86t-93 34t-94.5 -34t-36.5 -86q0 -51 35.5 -85.5t92.5 -34.5h1q59 0 95 34.5t36 85.5zM1068 122h231v398q0 154 -73 233t-193 79q-136 0 -209 -117h2v101h-231q3 -66 0 -694h231v388q0 38 7 56q15 35 45 59.5t74 24.5 q116 0 116 -157v-371zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"></path></g><g id="university" transform="scale(0.875 -0.875) translate(0 -1536)"><path d="M960 1536l960 -384v-128h-128q0 -26 -20.5 -45t-48.5 -19h-1526q-28 0 -48.5 19t-20.5 45h-128v128zM256 896h256v-768h128v768h256v-768h128v768h256v-768h128v768h256v-768h59q28 0 48.5 -19t20.5 -45v-64h-1664v64q0 26 20.5 45t48.5 19h59v768zM1851 -64 q28 0 48.5 -19t20.5 -45v-128h-1920v128q0 26 20.5 45t48.5 19h1782z"></path></g><g id="book" transform="scale(1 -1) translate(64 -1536)"><path d="M1639 1058q40 -57 18 -129l-275 -906q-19 -64 -76.5 -107.5t-122.5 -43.5h-923q-77 0 -148.5 53.5t-99.5 131.5q-24 67 -2 127q0 4 3 27t4 37q1 8 -3 21.5t-3 19.5q2 11 8 21t16.5 23.5t16.5 23.5q23 38 45 91.5t30 91.5q3 10 0.5 30t-0.5 28q3 11 17 28t17 23 q21 36 42 92t25 90q1 9 -2.5 32t0.5 28q4 13 22 30.5t22 22.5q19 26 42.5 84.5t27.5 96.5q1 8 -3 25.5t-2 26.5q2 8 9 18t18 23t17 21q8 12 16.5 30.5t15 35t16 36t19.5 32t26.5 23.5t36 11.5t47.5 -5.5l-1 -3q38 9 51 9h761q74 0 114 -56t18 -130l-274 -906 q-36 -119 -71.5 -153.5t-128.5 -34.5h-869q-27 0 -38 -15q-11 -16 -1 -43q24 -70 144 -70h923q29 0 56 15.5t35 41.5l300 987q7 22 5 57q38 -15 59 -43zM575 1056q-4 -13 2 -22.5t20 -9.5h608q13 0 25.5 9.5t16.5 22.5l21 64q4 13 -2 22.5t-20 9.5h-608q-13 0 -25.5 -9.5 t-16.5 -22.5zM492 800q-4 -13 2 -22.5t20 -9.5h608q13 0 25.5 9.5t16.5 22.5l21 64q4 13 -2 22.5t-20 9.5h-608q-13 0 -25.5 -9.5t-16.5 -22.5z"></path></g><g id="graduation-cap" transform="scale(0.7777777777777778 -0.7777777777777778) translate(0 -1536)"><path d="M1774 700l18 -316q4 -69 -82 -128t-235 -93.5t-323 -34.5t-323 34.5t-235 93.5t-82 128l18 316l574 -181q22 -7 48 -7t48 7zM2304 1024q0 -23 -22 -31l-1120 -352q-4 -1 -10 -1t-10 1l-652 206q-43 -34 -71 -111.5t-34 -178.5q63 -36 63 -109q0 -69 -58 -107l58 -433 q2 -14 -8 -25q-9 -11 -24 -11h-192q-15 0 -24 11q-10 11 -8 25l58 433q-58 38 -58 107q0 73 65 111q11 207 98 330l-333 104q-22 8 -22 31t22 31l1120 352q4 1 10 1t10 -1l1120 -352q22 -8 22 -31z"></path></g><g id="cloud" transform="scale(0.9333333333333333 -0.9333333333333333) translate(0 -1536)"><path d="M1920 384q0 -159 -112.5 -271.5t-271.5 -112.5h-1088q-185 0 -316.5 131.5t-131.5 316.5q0 132 71 241.5t187 163.5q-2 28 -2 43q0 212 150 362t362 150q158 0 286.5 -88t187.5 -230q70 62 166 62q106 0 181 -75t75 -181q0 -75 -41 -138q129 -30 213 -134.5t84 -239.5z "></path></g><g id="times" transform="scale(1 -1) translate(192 -1536)"><path d="M1298 214q0 -40 -28 -68l-136 -136q-28 -28 -68 -28t-68 28l-294 294l-294 -294q-28 -28 -68 -28t-68 28l-136 136q-28 28 -28 68t28 68l294 294l-294 294q-28 28 -28 68t28 68l136 136q28 28 68 28t68 -28l294 -294l294 294q28 28 68 28t68 -28l136 -136q28 -28 28 -68 t-28 -68l-294 -294l294 -294q28 -28 28 -68z"></path></g><g id="home" transform="scale(1 -1) translate(64 -1536)"><path d="M1408 544v-480q0 -26 -19 -45t-45 -19h-384v384h-256v-384h-384q-26 0 -45 19t-19 45v480q0 1 0.5 3t0.5 3l575 474l575 -474q1 -2 1 -6zM1631 613l-62 -74q-8 -9 -21 -11h-3q-13 0 -21 7l-692 577l-692 -577q-12 -8 -24 -7q-13 2 -21 11l-62 74q-8 10 -7 23.5t11 21.5 l719 599q32 26 76 26t76 -26l244 -204v195q0 14 9 23t23 9h192q14 0 23 -9t9 -23v-408l219 -182q10 -8 11 -21.5t-7 -23.5z"></path></g><g id="globe" transform="scale(1 -1) translate(64 -1536)"><path d="M768 1408q209 0 385.5 -103t279.5 -279.5t103 -385.5t-103 -385.5t-279.5 -279.5t-385.5 -103t-385.5 103t-279.5 279.5t-103 385.5t103 385.5t279.5 279.5t385.5 103zM1042 887q-2 -1 -9.5 -9.5t-13.5 -9.5q2 0 4.5 5t5 11t3.5 7q6 7 22 15q14 6 52 12q34 8 51 -11 q-2 2 9.5 13t14.5 12q3 2 15 4.5t15 7.5l2 22q-12 -1 -17.5 7t-6.5 21q0 -2 -6 -8q0 7 -4.5 8t-11.5 -1t-9 -1q-10 3 -15 7.5t-8 16.5t-4 15q-2 5 -9.5 10.5t-9.5 10.5q-1 2 -2.5 5.5t-3 6.5t-4 5.5t-5.5 2.5t-7 -5t-7.5 -10t-4.5 -5q-3 2 -6 1.5t-4.5 -1t-4.5 -3t-5 -3.5 q-3 -2 -8.5 -3t-8.5 -2q15 5 -1 11q-10 4 -16 3q9 4 7.5 12t-8.5 14h5q-1 4 -8.5 8.5t-17.5 8.5t-13 6q-8 5 -34 9.5t-33 0.5q-5 -6 -4.5 -10.5t4 -14t3.5 -12.5q1 -6 -5.5 -13t-6.5 -12q0 -7 14 -15.5t10 -21.5q-3 -8 -16 -16t-16 -12q-5 -8 -1.5 -18.5t10.5 -16.5 q2 -2 1.5 -4t-3.5 -4.5t-5.5 -4t-6.5 -3.5l-3 -2q-11 -5 -20.5 6t-13.5 26q-7 25 -16 30q-23 8 -29 -1q-5 13 -41 26q-25 9 -58 4q6 1 0 15q-7 15 -19 12q3 6 4 17.5t1 13.5q3 13 12 23q1 1 7 8.5t9.5 13.5t0.5 6q35 -4 50 11q5 5 11.5 17t10.5 17q9 6 14 5.5t14.5 -5.5 t14.5 -5q14 -1 15.5 11t-7.5 20q12 -1 3 17q-5 7 -8 9q-12 4 -27 -5q-8 -4 2 -8q-1 1 -9.5 -10.5t-16.5 -17.5t-16 5q-1 1 -5.5 13.5t-9.5 13.5q-8 0 -16 -15q3 8 -11 15t-24 8q19 12 -8 27q-7 4 -20.5 5t-19.5 -4q-5 -7 -5.5 -11.5t5 -8t10.5 -5.5t11.5 -4t8.5 -3 q14 -10 8 -14q-2 -1 -8.5 -3.5t-11.5 -4.5t-6 -4q-3 -4 0 -14t-2 -14q-5 5 -9 17.5t-7 16.5q7 -9 -25 -6l-10 1q-4 0 -16 -2t-20.5 -1t-13.5 8q-4 8 0 20q1 4 4 2q-4 3 -11 9.5t-10 8.5q-46 -15 -94 -41q6 -1 12 1q5 2 13 6.5t10 5.5q34 14 42 7l5 5q14 -16 20 -25 q-7 4 -30 1q-20 -6 -22 -12q7 -12 5 -18q-4 3 -11.5 10t-14.5 11t-15 5q-16 0 -22 -1q-146 -80 -235 -222q7 -7 12 -8q4 -1 5 -9t2.5 -11t11.5 3q9 -8 3 -19q1 1 44 -27q19 -17 21 -21q3 -11 -10 -18q-1 2 -9 9t-9 4q-3 -5 0.5 -18.5t10.5 -12.5q-7 0 -9.5 -16t-2.5 -35.5 t-1 -23.5l2 -1q-3 -12 5.5 -34.5t21.5 -19.5q-13 -3 20 -43q6 -8 8 -9q3 -2 12 -7.5t15 -10t10 -10.5q4 -5 10 -22.5t14 -23.5q-2 -6 9.5 -20t10.5 -23q-1 0 -2.5 -1t-2.5 -1q3 -7 15.5 -14t15.5 -13q1 -3 2 -10t3 -11t8 -2q2 20 -24 62q-15 25 -17 29q-3 5 -5.5 15.5 t-4.5 14.5q2 0 6 -1.5t8.5 -3.5t7.5 -4t2 -3q-3 -7 2 -17.5t12 -18.5t17 -19t12 -13q6 -6 14 -19.5t0 -13.5q9 0 20 -10t17 -20q5 -8 8 -26t5 -24q2 -7 8.5 -13.5t12.5 -9.5l16 -8t13 -7q5 -2 18.5 -10.5t21.5 -11.5q10 -4 16 -4t14.5 2.5t13.5 3.5q15 2 29 -15t21 -21 q36 -19 55 -11q-2 -1 0.5 -7.5t8 -15.5t9 -14.5t5.5 -8.5q5 -6 18 -15t18 -15q6 4 7 9q-3 -8 7 -20t18 -10q14 3 14 32q-31 -15 -49 18q0 1 -2.5 5.5t-4 8.5t-2.5 8.5t0 7.5t5 3q9 0 10 3.5t-2 12.5t-4 13q-1 8 -11 20t-12 15q-5 -9 -16 -8t-16 9q0 -1 -1.5 -5.5t-1.5 -6.5 q-13 0 -15 1q1 3 2.5 17.5t3.5 22.5q1 4 5.5 12t7.5 14.5t4 12.5t-4.5 9.5t-17.5 2.5q-19 -1 -26 -20q-1 -3 -3 -10.5t-5 -11.5t-9 -7q-7 -3 -24 -2t-24 5q-13 8 -22.5 29t-9.5 37q0 10 2.5 26.5t3 25t-5.5 24.5q3 2 9 9.5t10 10.5q2 1 4.5 1.5t4.5 0t4 1.5t3 6q-1 1 -4 3 q-3 3 -4 3q7 -3 28.5 1.5t27.5 -1.5q15 -11 22 2q0 1 -2.5 9.5t-0.5 13.5q5 -27 29 -9q3 -3 15.5 -5t17.5 -5q3 -2 7 -5.5t5.5 -4.5t5 0.5t8.5 6.5q10 -14 12 -24q11 -40 19 -44q7 -3 11 -2t4.5 9.5t0 14t-1.5 12.5l-1 8v18l-1 8q-15 3 -18.5 12t1.5 18.5t15 18.5q1 1 8 3.5 t15.5 6.5t12.5 8q21 19 15 35q7 0 11 9q-1 0 -5 3t-7.5 5t-4.5 2q9 5 2 16q5 3 7.5 11t7.5 10q9 -12 21 -2q7 8 1 16q5 7 20.5 10.5t18.5 9.5q7 -2 8 2t1 12t3 12q4 5 15 9t13 5l17 11q3 4 0 4q18 -2 31 11q10 11 -6 20q3 6 -3 9.5t-15 5.5q3 1 11.5 0.5t10.5 1.5 q15 10 -7 16q-17 5 -43 -12zM879 10q206 36 351 189q-3 3 -12.5 4.5t-12.5 3.5q-18 7 -24 8q1 7 -2.5 13t-8 9t-12.5 8t-11 7q-2 2 -7 6t-7 5.5t-7.5 4.5t-8.5 2t-10 -1l-3 -1q-3 -1 -5.5 -2.5t-5.5 -3t-4 -3t0 -2.5q-21 17 -36 22q-5 1 -11 5.5t-10.5 7t-10 1.5t-11.5 -7 q-5 -5 -6 -15t-2 -13q-7 5 0 17.5t2 18.5q-3 6 -10.5 4.5t-12 -4.5t-11.5 -8.5t-9 -6.5t-8.5 -5.5t-8.5 -7.5q-3 -4 -6 -12t-5 -11q-2 4 -11.5 6.5t-9.5 5.5q2 -10 4 -35t5 -38q7 -31 -12 -48q-27 -25 -29 -40q-4 -22 12 -26q0 -7 -8 -20.5t-7 -21.5q0 -6 2 -16z"></path></g><g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="cloud-off"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"></path></g><g id="mail"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g><g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></g><g id="share" transform="scale(1 -1) translate(0 -1536)"><path d="M1792 896q0 -26 -19 -45l-512 -512q-19 -19 -45 -19t-45 19t-19 45v256h-224q-98 0 -175.5 -6t-154 -21.5t-133 -42.5t-105.5 -69.5t-80 -101t-48.5 -138.5t-17.5 -181q0 -55 5 -123q0 -6 2.5 -23.5t2.5 -26.5q0 -15 -8.5 -25t-23.5 -10q-16 0 -28 17q-7 9 -13 22 t-13.5 30t-10.5 24q-127 285 -127 451q0 199 53 333q162 403 875 403h224v256q0 26 19 45t45 19t45 -19l512 -512q19 -19 19 -45z"></path></g><g id="share-alt" transform="scale(1 -1) translate(128 -1536)"><path d="M1216 512q133 0 226.5 -93.5t93.5 -226.5t-93.5 -226.5t-226.5 -93.5t-226.5 93.5t-93.5 226.5q0 12 2 34l-360 180q-92 -86 -218 -86q-133 0 -226.5 93.5t-93.5 226.5t93.5 226.5t226.5 93.5q126 0 218 -86l360 180q-2 22 -2 34q0 133 93.5 226.5t226.5 93.5 t226.5 -93.5t93.5 -226.5t-93.5 -226.5t-226.5 -93.5q-126 0 -218 86l-360 -180q2 -22 2 -34t-2 -34l360 -180q92 86 218 86z"></path></g><g id="timer"><path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path></g><g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g><g id="caret-down" transform="scale(1 -1) translate(384 -1536)"><path d="M1024 832q0 -26 -19 -45l-448 -448q-19 -19 -45 -19t-45 19l-448 448q-19 19 -19 45t19 45t45 19h896q26 0 45 -19t19 -45z"></path></g><g id="caret-up" transform="scale(1 -1) translate(384 -1536)"><path d="M1024 320q0 -26 -19 -45t-45 -19h-896q-26 0 -45 19t-19 45t19 45l448 448q19 19 45 19t45 -19l448 -448q19 -19 19 -45z"></path></g><g id="caret-left" transform="scale(1 -1) translate(576 -1536)"><path d="M640 1088v-896q0 -26 -19 -45t-45 -19t-45 19l-448 448q-19 19 -19 45t19 45l448 448q19 19 45 19t45 -19t19 -45z"></path></g><g id="caret-right" transform="scale(1 -1) translate(576 -1536)"><path d="M576 640q0 -26 -19 -45l-448 -448q-19 -19 -45 -19t-45 19t-19 45v896q0 26 19 45t45 19t45 -19l448 -448q19 -19 19 -45z"></path></g></defs></svg></iron-iconset-svg></link><link rel="import" href="https://www.library.virginia.edu/bower_components/uvalib-theme/uvalib-fonts.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><dom-module id="uvalib-fonts"><template></template></dom-module></link><link rel="import" href="https://www.library.virginia.edu/bower_components/uvalib-theme/uvalib-academicons.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><dom-module id="uvalib-academicons"><template></template></dom-module></link><dom-module id="uvalib-theme"><template></template></dom-module></link><link rel="stylesheet" href="./for loop_files/xgw7owp.css"><script src="./for loop_files/tgy5tlj.js.download"></script><script src="data:text/javascript;charset=utf-8,try%20%7B%0A%20%20Typekit.load(%7B%0A%20%20%20%20async%3A%20true%0A%20%20%7D)%3B%0A%7D%20catch%20(e)%20%7B%7D%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fuvalib-theme%2Fuvalib-theme.html.js%0A"></script><custom-style><style is="custom-style">@font-face {
  font-family:'uvalib-custom-icons';src:url('https://static.lib.virginia.edu/files/fonts/uvalib-icon-font-03222019.woff2') format('woff2'),
             url('https://static.lib.virginia.edu/files/fonts/uvalib-icon-font-03222019.woff') format('woff');font-weight:normal;font-style:normal;
}

@font-face {
  font-family:'uvalib-custom-academicons';src:url('https://static.lib.virginia.edu/files/fonts/academicons.woff2') format('woff2'),
               url('https://static.lib.virginia.edu/files/fonts/academicons.woff') format('woff');font-weight:normal;font-style:normal;
}

body {
  margin:0;
}

html {
  --uvalib-display-width-max:1200px;--small-viewport_-_max-width: 30em;;--font-primary:var(--uva-font-family);--uva-font-family:'franklin-gothic-urw',arial,sans-serif;--uva-font-family-condensed:'franklin-gothic-urw-cond',arial narrow,sans-serif;--uva-font-family-compressed:'franklin-gothic-urw-comp',arial narrow,sans-serif;--uva-font-decorative_-_font-family: 'bodoni-urw',georgia,serif; --uva-font-decorative_-_font-style: italic; --uva-font-decorative_-_font-weight: 900; --uva-font-decorative_-_text-transform: uppercase;;--font-weight-light:300;--font-weight-book:400;--font-weight-medium:500;--font-weight-demi:700;--font-weight-heavy:900;--uvalib-main-font-size-unit:16px;--uvalib-spacing-unit:1em;--uvalib-font-base_-_font-family: var(--font-primary); --uvalib-font-base_-_font-weight: 300; --uvalib-font-base_-_text-transform: none; --uvalib-font-base_-_color: var(--uvalib-text-grey);;--h1_-_font-family: var(--uva-font-family); --h1_-_font-weight: var(--font-weight-demi); --h1_-_color: var(--uvalib-brand-blue); --h1_-_font-size: 3.05em; --h1_-_line-height: 2.5rem;;--h2_-_font-family: var(--uva-font-family); --h2_-_font-weight: var(--font-weight-demi); --h2_-_color: var(--uvalib-brand-blue); --h2_-_font-size: 2.44em; --h2_-_line-height: 2.3rem;;--h3_-_font-family: var(--uva-font-family); --h3_-_font-weight: var(--font-weight-demi); --h3_-_color: var(--uvalib-brand-blue); --h3_-_font-size: 1.95em; --h3_-_line-height: 1.95rem;;--h4_-_font-family: var(--uva-font-family); --h4_-_font-weight: var(--font-weight-demi); --h4_-_color: var(--uvalib-brand-blue); --h4_-_font-size: 1.56em; --h4_-_line-height: 1.5rem;;--h5_-_font-family: var(--uva-font-family); --h5_-_font-weight: var(--font-weight-demi); --h5_-_color: var(--uvalib-brand-blue); --h5_-_font-size: 1.25em;;--h3-with-flair_-_font-family:  var(--uva-font-decorative_-_font-family); --h3-with-flair_-_font-style:  var(--uva-font-decorative_-_font-style); --h3-with-flair_-_font-weight:  var(--uva-font-decorative_-_font-weight); --h3-with-flair_-_text-transform:  var(--uva-font-decorative_-_text-transform); --h3-with-flair_-_font-size: calc(var(--uvalib-main-font-size-unit)*1.5); --h3-with-flair_-_line-height: calc(var(--uvalib-main-font-size-unit)*1.5); --h3-with-flair_-_color: var(--uvalib-main-jefferson-blue);;--font-headline_-_font-family: var(--font-primary); --font-headline_-_font-size: 24px; --font-headline_-_font-weight: 400; --font-headline_-_line-height: 32px; --font-headline_-_color: var(--uvalib-text-grey);;--font-title_-_font-family: var(--font-primary); --font-title_-_font-size: 20px; --font-title_-_font-weight: 400; --font-title_-_line-height: 28px; --font-title_-_color: var(--uvalib-text-grey);;--font-body1_-_font-family: var(--font-primary); --font-body1_-_font-weight: 400; --font-body1_-_font-style: normal; --font-body1_-_font-size: var(--uvalib-main-font-size-unit); --font-body1_-_line-height: calc(var(--uvalib-main-font-size-unit)*1.25); --font-body1_-_color: var(--uvalib-text-grey);;--uvalib-liame-link-color:var(--uvalib-link-color);--link-hover_-_text-decoration: underline;;
}

</style></custom-style></link><link rel="import" href="https://www.library.virginia.edu/bower_components/uvalib-search-box/uvalib-simple-search-box.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer-element.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/uvalib-theme/uvalib-theme.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/paper-button/paper-button.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-flex-layout/iron-flex-layout.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/paper-behaviors/paper-button-behavior.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-behaviors/iron-button-state.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%20%20%2F**%0A%20%20%20*%20Chrome%20uses%20an%20older%20version%20of%20DOM%20Level%203%20Keyboard%20Events%0A%20%20%20*%0A%20%20%20*%20Most%20keys%20are%20labeled%20as%20text%2C%20but%20some%20are%20Unicode%20codepoints.%0A%20%20%20*%20Values%20taken%20from%3A%0A%20%20%20*%20http%3A%2F%2Fwww.w3.org%2FTR%2F2007%2FWD-DOM-Level-3-Events-20071221%2Fkeyset.html%23KeySet-Set%0A%20%20%20*%2F%0A%0A%20%20var%20KEY_IDENTIFIER%20%3D%20%7B%0A%20%20%20%20&#39;U%2B0008&#39;%3A%20&#39;backspace&#39;%2C%0A%20%20%20%20&#39;U%2B0009&#39;%3A%20&#39;tab&#39;%2C%0A%20%20%20%20&#39;U%2B001B&#39;%3A%20&#39;esc&#39;%2C%0A%20%20%20%20&#39;U%2B0020&#39;%3A%20&#39;space&#39;%2C%0A%20%20%20%20&#39;U%2B007F&#39;%3A%20&#39;del&#39;%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20Special%20table%20for%20KeyboardEvent.keyCode.%0A%20%20%20*%20KeyboardEvent.keyIdentifier%20is%20better%2C%20and%20KeyBoardEvent.key%20is%20even%20better%0A%20%20%20*%20than%20that.%0A%20%20%20*%0A%20%20%20*%20Values%20from%3A%0A%20%20%20*%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FKeyboardEvent.keyCode%23Value_of_keyCode%0A%20%20%20*%2F%0A%0A%20%20var%20KEY_CODE%20%3D%20%7B%0A%20%20%20%208%3A%20&#39;backspace&#39;%2C%0A%20%20%20%209%3A%20&#39;tab&#39;%2C%0A%20%20%20%2013%3A%20&#39;enter&#39;%2C%0A%20%20%20%2027%3A%20&#39;esc&#39;%2C%0A%20%20%20%2033%3A%20&#39;pageup&#39;%2C%0A%20%20%20%2034%3A%20&#39;pagedown&#39;%2C%0A%20%20%20%2035%3A%20&#39;end&#39;%2C%0A%20%20%20%2036%3A%20&#39;home&#39;%2C%0A%20%20%20%2032%3A%20&#39;space&#39;%2C%0A%20%20%20%2037%3A%20&#39;left&#39;%2C%0A%20%20%20%2038%3A%20&#39;up&#39;%2C%0A%20%20%20%2039%3A%20&#39;right&#39;%2C%0A%20%20%20%2040%3A%20&#39;down&#39;%2C%0A%20%20%20%2046%3A%20&#39;del&#39;%2C%0A%20%20%20%20106%3A%20&#39;*&#39;%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20MODIFIER_KEYS%20maps%20the%20short%20name%20for%20modifier%20keys%20used%20in%20a%20key%0A%20%20%20*%20combo%20string%20to%20the%20property%20name%20that%20references%20those%20same%20keys%0A%20%20%20*%20in%20a%20KeyboardEvent%20instance.%0A%20%20%20*%2F%0A%0A%20%20var%20MODIFIER_KEYS%20%3D%20%7B%0A%20%20%20%20&#39;shift&#39;%3A%20&#39;shiftKey&#39;%2C%0A%20%20%20%20&#39;ctrl&#39;%3A%20&#39;ctrlKey&#39;%2C%0A%20%20%20%20&#39;alt&#39;%3A%20&#39;altKey&#39;%2C%0A%20%20%20%20&#39;meta&#39;%3A%20&#39;metaKey&#39;%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20KeyboardEvent.key%20is%20mostly%20represented%20by%20printable%20character%20made%20by%0A%20%20%20*%20the%20keyboard%2C%20with%20unprintable%20keys%20labeled%20nicely.%0A%20%20%20*%0A%20%20%20*%20However%2C%20on%20OS%20X%2C%20Alt%2Bchar%20can%20make%20a%20Unicode%20character%20that%20follows%20an%0A%20%20%20*%20Apple-specific%20mapping.%20In%20this%20case%2C%20we%20fall%20back%20to%20.keyCode.%0A%20%20%20*%2F%0A%0A%20%20var%20KEY_CHAR%20%3D%20%2F%5Ba-z0-9*%5D%2F%3B%0A%20%20%2F**%0A%20%20%20*%20Matches%20a%20keyIdentifier%20string.%0A%20%20%20*%2F%0A%0A%20%20var%20IDENT_CHAR%20%3D%20%2FU%5C%2B%2F%3B%0A%20%20%2F**%0A%20%20%20*%20Matches%20arrow%20keys%20in%20Gecko%2027.0%2B%0A%20%20%20*%2F%0A%0A%20%20var%20ARROW_KEY%20%3D%20%2F%5Earrow%2F%3B%0A%20%20%2F**%0A%20%20%20*%20Matches%20space%20keys%20everywhere%20(notably%20including%20IE10&#39;s%20exceptional%20name%0A%20%20%20*%20%60spacebar%60).%0A%20%20%20*%2F%0A%0A%20%20var%20SPACE_KEY%20%3D%20%2F%5Espace(bar)%3F%2F%3B%0A%20%20%2F**%0A%20%20%20*%20Matches%20ESC%20key.%0A%20%20%20*%0A%20%20%20*%20Value%20from%3A%20http%3A%2F%2Fw3c.github.io%2Fuievents-key%2F%23key-Escape%0A%20%20%20*%2F%0A%0A%20%20var%20ESC_KEY%20%3D%20%2F%5Eescape%24%2F%3B%0A%20%20%2F**%0A%20%20%20*%20Transforms%20the%20key.%0A%20%20%20*%20%40param%20%7Bstring%7D%20key%20The%20KeyBoardEvent.key%0A%20%20%20*%20%40param%20%7BBoolean%7D%20%5BnoSpecialChars%5D%20Limits%20the%20transformation%20to%0A%20%20%20*%20alpha-numeric%20characters.%0A%20%20%20*%2F%0A%0A%20%20function%20transformKey(key%2C%20noSpecialChars)%20%7B%0A%20%20%20%20var%20validKey%20%3D%20&#39;&#39;%3B%0A%0A%20%20%20%20if%20(key)%20%7B%0A%20%20%20%20%20%20var%20lKey%20%3D%20key.toLowerCase()%3B%0A%0A%20%20%20%20%20%20if%20(lKey%20%3D%3D%3D%20&#39;%20&#39;%20%7C%7C%20SPACE_KEY.test(lKey))%20%7B%0A%20%20%20%20%20%20%20%20validKey%20%3D%20&#39;space&#39;%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ESC_KEY.test(lKey))%20%7B%0A%20%20%20%20%20%20%20%20validKey%20%3D%20&#39;esc&#39;%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(lKey.length%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!noSpecialChars%20%7C%7C%20KEY_CHAR.test(lKey))%20%7B%0A%20%20%20%20%20%20%20%20%20%20validKey%20%3D%20lKey%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(ARROW_KEY.test(lKey))%20%7B%0A%20%20%20%20%20%20%20%20validKey%20%3D%20lKey.replace(&#39;arrow&#39;%2C%20&#39;&#39;)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(lKey%20%3D%3D%20&#39;multiply&#39;)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20numpad%20&#39;*&#39;%20can%20map%20to%20Multiply%20on%20IE%2FWindows%0A%20%20%20%20%20%20%20%20validKey%20%3D%20&#39;*&#39;%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20validKey%20%3D%20lKey%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20validKey%3B%0A%20%20%7D%0A%0A%20%20function%20transformKeyIdentifier(keyIdent)%20%7B%0A%20%20%20%20var%20validKey%20%3D%20&#39;&#39;%3B%0A%0A%20%20%20%20if%20(keyIdent)%20%7B%0A%20%20%20%20%20%20if%20(keyIdent%20in%20KEY_IDENTIFIER)%20%7B%0A%20%20%20%20%20%20%20%20validKey%20%3D%20KEY_IDENTIFIER%5BkeyIdent%5D%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(IDENT_CHAR.test(keyIdent))%20%7B%0A%20%20%20%20%20%20%20%20keyIdent%20%3D%20parseInt(keyIdent.replace(&#39;U%2B&#39;%2C%20&#39;0x&#39;)%2C%2016)%3B%0A%20%20%20%20%20%20%20%20validKey%20%3D%20String.fromCharCode(keyIdent).toLowerCase()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20validKey%20%3D%20keyIdent.toLowerCase()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20validKey%3B%0A%20%20%7D%0A%0A%20%20function%20transformKeyCode(keyCode)%20%7B%0A%20%20%20%20var%20validKey%20%3D%20&#39;&#39;%3B%0A%0A%20%20%20%20if%20(Number(keyCode))%20%7B%0A%20%20%20%20%20%20if%20(keyCode%20%3E%3D%2065%20%26%26%20keyCode%20%3C%3D%2090)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20ascii%20a-z%0A%20%20%20%20%20%20%20%20%2F%2F%20lowercase%20is%2032%20offset%20from%20uppercase%0A%20%20%20%20%20%20%20%20validKey%20%3D%20String.fromCharCode(32%20%2B%20keyCode)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(keyCode%20%3E%3D%20112%20%26%26%20keyCode%20%3C%3D%20123)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20function%20keys%20f1-f12%0A%20%20%20%20%20%20%20%20validKey%20%3D%20&#39;f&#39;%20%2B%20(keyCode%20-%20112%20%2B%201)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(keyCode%20%3E%3D%2048%20%26%26%20keyCode%20%3C%3D%2057)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20top%200-9%20keys%0A%20%20%20%20%20%20%20%20validKey%20%3D%20String(keyCode%20-%2048)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(keyCode%20%3E%3D%2096%20%26%26%20keyCode%20%3C%3D%20105)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20num%20pad%200-9%0A%20%20%20%20%20%20%20%20validKey%20%3D%20String(keyCode%20-%2096)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20validKey%20%3D%20KEY_CODE%5BkeyCode%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20validKey%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20Calculates%20the%20normalized%20key%20for%20a%20KeyboardEvent.%0A%20%20%20*%20%40param%20%7BKeyboardEvent%7D%20keyEvent%0A%20%20%20*%20%40param%20%7BBoolean%7D%20%5BnoSpecialChars%5D%20Set%20to%20true%20to%20limit%20keyEvent.key%0A%20%20%20*%20transformation%20to%20alpha-numeric%20chars.%20This%20is%20useful%20with%20key%0A%20%20%20*%20combinations%20like%20shift%20%2B%202%2C%20which%20on%20FF%20for%20MacOS%20produces%0A%20%20%20*%20keyEvent.key%20%3D%20%40%0A%20%20%20*%20To%20get%202%20returned%2C%20set%20noSpecialChars%20%3D%20true%0A%20%20%20*%20To%20get%20%40%20returned%2C%20set%20noSpecialChars%20%3D%20false%0A%20%20%20*%2F%0A%0A%0A%20%20function%20normalizedKeyForEvent(keyEvent%2C%20noSpecialChars)%20%7B%0A%20%20%20%20%2F%2F%20Fall%20back%20from%20.key%2C%20to%20.detail.key%20for%20artifical%20keyboard%20events%2C%0A%20%20%20%20%2F%2F%20and%20then%20to%20deprecated%20.keyIdentifier%20and%20.keyCode.%0A%20%20%20%20if%20(keyEvent.key)%20%7B%0A%20%20%20%20%20%20return%20transformKey(keyEvent.key%2C%20noSpecialChars)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(keyEvent.detail%20%26%26%20keyEvent.detail.key)%20%7B%0A%20%20%20%20%20%20return%20transformKey(keyEvent.detail.key%2C%20noSpecialChars)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20transformKeyIdentifier(keyEvent.keyIdentifier)%20%7C%7C%20transformKeyCode(keyEvent.keyCode)%20%7C%7C%20&#39;&#39;%3B%0A%20%20%7D%0A%0A%20%20function%20keyComboMatchesEvent(keyCombo%2C%20event)%20%7B%0A%20%20%20%20%2F%2F%20For%20combos%20with%20modifiers%20we%20support%20only%20alpha-numeric%20keys%0A%20%20%20%20var%20keyEvent%20%3D%20normalizedKeyForEvent(event%2C%20keyCombo.hasModifiers)%3B%0A%20%20%20%20return%20keyEvent%20%3D%3D%3D%20keyCombo.key%20%26%26%20(!keyCombo.hasModifiers%20%7C%7C%20!!event.shiftKey%20%3D%3D%3D%20!!keyCombo.shiftKey%20%26%26%20!!event.ctrlKey%20%3D%3D%3D%20!!keyCombo.ctrlKey%20%26%26%20!!event.altKey%20%3D%3D%3D%20!!keyCombo.altKey%20%26%26%20!!event.metaKey%20%3D%3D%3D%20!!keyCombo.metaKey)%3B%0A%20%20%7D%0A%0A%20%20function%20parseKeyComboString(keyComboString)%20%7B%0A%20%20%20%20if%20(keyComboString.length%20%3D%3D%3D%201)%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20combo%3A%20keyComboString%2C%0A%20%20%20%20%20%20%20%20key%3A%20keyComboString%2C%0A%20%20%20%20%20%20%20%20event%3A%20&#39;keydown&#39;%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20keyComboString.split(&#39;%2B&#39;).reduce(function%20(parsedKeyCombo%2C%20keyComboPart)%20%7B%0A%20%20%20%20%20%20var%20eventParts%20%3D%20keyComboPart.split(&#39;%3A&#39;)%3B%0A%20%20%20%20%20%20var%20keyName%20%3D%20eventParts%5B0%5D%3B%0A%20%20%20%20%20%20var%20event%20%3D%20eventParts%5B1%5D%3B%0A%0A%20%20%20%20%20%20if%20(keyName%20in%20MODIFIER_KEYS)%20%7B%0A%20%20%20%20%20%20%20%20parsedKeyCombo%5BMODIFIER_KEYS%5BkeyName%5D%5D%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20parsedKeyCombo.hasModifiers%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20parsedKeyCombo.key%20%3D%20keyName%3B%0A%20%20%20%20%20%20%20%20parsedKeyCombo.event%20%3D%20event%20%7C%7C%20&#39;keydown&#39;%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20parsedKeyCombo%3B%0A%20%20%20%20%7D%2C%20%7B%0A%20%20%20%20%20%20combo%3A%20keyComboString.split(&#39;%3A&#39;).shift()%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20function%20parseEventString(eventString)%20%7B%0A%20%20%20%20return%20eventString.trim().split(&#39;%20&#39;).map(function%20(keyComboString)%20%7B%0A%20%20%20%20%20%20return%20parseKeyComboString(keyComboString)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%2F**%0A%20%20%20*%20%60Polymer.IronA11yKeysBehavior%60%20provides%20a%20normalized%20interface%20for%20processing%0A%20%20%20*%20keyboard%20commands%20that%20pertain%20to%20%5BWAI-ARIA%20best%0A%20%20%20*%20practices%5D(http%3A%2F%2Fwww.w3.org%2FTR%2Fwai-aria-practices%2F%23kbd_general_binding).%20The%0A%20%20%20*%20element%20takes%20care%20of%20browser%20differences%20with%20respect%20to%20Keyboard%20events%20and%0A%20%20%20*%20uses%20an%20expressive%20syntax%20to%20filter%20key%20presses.%0A%20%20%20*%0A%20%20%20*%20Use%20the%20%60keyBindings%60%20prototype%20property%20to%20express%20what%20combination%20of%20keys%0A%20%20%20*%20will%20trigger%20the%20callback.%20A%20key%20binding%20has%20the%20format%0A%20%20%20*%20%60%22KEY%2BMODIFIER%3AEVENT%22%3A%20%22callback%22%60%20(%60%22KEY%22%3A%20%22callback%22%60%20or%0A%20%20%20*%20%60%22KEY%3AEVENT%22%3A%20%22callback%22%60%20are%20valid%20as%20well).%20Some%20examples%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%20keyBindings%3A%20%7B%0A%20%20%20*%20%20%20%20%20%20%20%20&#39;space&#39;%3A%20&#39;_onKeydown&#39;%2C%20%2F%2F%20same%20as%20&#39;space%3Akeydown&#39;%0A%20%20%20*%20%20%20%20%20%20%20%20&#39;shift%2Btab&#39;%3A%20&#39;_onKeydown&#39;%2C%0A%20%20%20*%20%20%20%20%20%20%20%20&#39;enter%3Akeypress&#39;%3A%20&#39;_onKeypress&#39;%2C%0A%20%20%20*%20%20%20%20%20%20%20%20&#39;esc%3Akeyup&#39;%3A%20&#39;_onKeyup&#39;%0A%20%20%20*%20%20%20%20%20%20%7D%0A%20%20%20*%0A%20%20%20*%20The%20callback%20will%20receive%20with%20an%20event%20containing%20the%20following%20information%0A%20%20%20*%20in%20%60event.detail%60%3A%0A%20%20%20*%0A%20%20%20*%20%20%20%20%20%20_onKeydown%3A%20function(event)%20%7B%0A%20%20%20*%20%20%20%20%20%20%20%20console.log(event.detail.combo)%3B%20%2F%2F%20KEY%2BMODIFIER%2C%20e.g.%20%22shift%2Btab%22%0A%20%20%20*%20%20%20%20%20%20%20%20console.log(event.detail.key)%3B%20%2F%2F%20KEY%20only%2C%20e.g.%20%22tab%22%0A%20%20%20*%20%20%20%20%20%20%20%20console.log(event.detail.event)%3B%20%2F%2F%20EVENT%2C%20e.g.%20%22keydown%22%0A%20%20%20*%20%20%20%20%20%20%20%20console.log(event.detail.keyboardEvent)%3B%20%2F%2F%20the%20original%20KeyboardEvent%0A%20%20%20*%20%20%20%20%20%20%7D%0A%20%20%20*%0A%20%20%20*%20Use%20the%20%60keyEventTarget%60%20attribute%20to%20set%20up%20event%20handlers%20on%20a%20specific%0A%20%20%20*%20node.%0A%20%20%20*%0A%20%20%20*%20See%20the%20%5Bdemo%20source%0A%20%20%20*%20code%5D(https%3A%2F%2Fgithub.com%2FPolymerElements%2Firon-a11y-keys-behavior%2Fblob%2Fmaster%2Fdemo%2Fx-key-aware.html)%0A%20%20%20*%20for%20an%20example.%0A%20%20%20*%0A%20%20%20*%20%40demo%20demo%2Findex.html%0A%20%20%20*%20%40polymerBehavior%0A%20%20%20*%2F%0A%0A%0A%20%20Polymer.IronA11yKeysBehavior%20%3D%20%7B%0A%20%20%20%20properties%3A%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20The%20EventTarget%20that%20will%20be%20firing%20relevant%20KeyboardEvents.%20Set%20it%20to%0A%20%20%20%20%20%20%20*%20%60null%60%20to%20disable%20the%20listeners.%0A%20%20%20%20%20%20%20*%20%40type%20%7B%3FEventTarget%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20keyEventTarget%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Object%2C%0A%20%20%20%20%20%20%20%20value%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20If%20true%2C%20this%20property%20will%20cause%20the%20implementing%20element%20to%0A%20%20%20%20%20%20%20*%20automatically%20stop%20propagation%20on%20any%20handled%20KeyboardEvents.%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20stopKeyboardEventPropagation%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20_boundKeyHandlers%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Array%2C%0A%20%20%20%20%20%20%20%20value%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%2F%2F%20We%20use%20this%20due%20to%20a%20limitation%20in%20IE10%20where%20instances%20will%20have%0A%20%20%20%20%20%20%2F%2F%20own%20properties%20of%20everything%20on%20the%20%22prototype%22.%0A%20%20%20%20%20%20_imperativeKeyBindings%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Object%2C%0A%20%20%20%20%20%20%20%20value%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20observers%3A%20%5B&#39;_resetKeyEventListeners(keyEventTarget%2C%20_boundKeyHandlers)&#39;%5D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20To%20be%20used%20to%20express%20what%20combination%20of%20keys%20%20will%20trigger%20the%20relative%0A%20%20%20%20%20*%20callback.%20e.g.%20%60keyBindings%3A%20%7B%20&#39;esc&#39;%3A%20&#39;_onEscPressed&#39;%7D%60%0A%20%20%20%20%20*%20%40type%20%7B!Object%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20keyBindings%3A%20%7B%7D%2C%0A%20%20%20%20registered%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this._prepKeyBindings()%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20attached%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this._listenKeyEventListeners()%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20detached%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this._unlistenKeyEventListeners()%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Can%20be%20used%20to%20imperatively%20add%20a%20key%20binding%20to%20the%20implementing%0A%20%20%20%20%20*%20element.%20This%20is%20the%20imperative%20equivalent%20of%20declaring%20a%20keybinding%0A%20%20%20%20%20*%20in%20the%20%60keyBindings%60%20prototype%20property.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventString%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20handlerName%0A%20%20%20%20%20*%2F%0A%20%20%20%20addOwnKeyBinding%3A%20function%20(eventString%2C%20handlerName)%20%7B%0A%20%20%20%20%20%20this._imperativeKeyBindings%5BeventString%5D%20%3D%20handlerName%3B%0A%0A%20%20%20%20%20%20this._prepKeyBindings()%3B%0A%0A%20%20%20%20%20%20this._resetKeyEventListeners()%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20When%20called%2C%20will%20remove%20all%20imperatively-added%20key%20bindings.%0A%20%20%20%20%20*%2F%0A%20%20%20%20removeOwnKeyBindings%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this._imperativeKeyBindings%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20this._prepKeyBindings()%3B%0A%0A%20%20%20%20%20%20this._resetKeyEventListeners()%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Returns%20true%20if%20a%20keyboard%20event%20matches%20%60eventString%60.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20%7BKeyboardEvent%7D%20event%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20eventString%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20keyboardEventMatchesKeys%3A%20function%20(event%2C%20eventString)%20%7B%0A%20%20%20%20%20%20var%20keyCombos%20%3D%20parseEventString(eventString)%3B%0A%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20keyCombos.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20if%20(keyComboMatchesEvent(keyCombos%5Bi%5D%2C%20event))%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20_collectKeyBindings%3A%20function%20()%20%7B%0A%20%20%20%20%20%20var%20keyBindings%20%3D%20this.behaviors.map(function%20(behavior)%20%7B%0A%20%20%20%20%20%20%20%20return%20behavior.keyBindings%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20if%20(keyBindings.indexOf(this.keyBindings)%20%3D%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20keyBindings.push(this.keyBindings)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20keyBindings%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20_prepKeyBindings%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this._keyBindings%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20this._collectKeyBindings().forEach(function%20(keyBindings)%20%7B%0A%20%20%20%20%20%20%20%20for%20(var%20eventString%20in%20keyBindings)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._addKeyBinding(eventString%2C%20keyBindings%5BeventString%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%20this)%3B%0A%0A%20%20%20%20%20%20for%20(var%20eventString%20in%20this._imperativeKeyBindings)%20%7B%0A%20%20%20%20%20%20%20%20this._addKeyBinding(eventString%2C%20this._imperativeKeyBindings%5BeventString%5D)%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20Give%20precedence%20to%20combos%20with%20modifiers%20to%20be%20checked%20first.%0A%0A%0A%20%20%20%20%20%20for%20(var%20eventName%20in%20this._keyBindings)%20%7B%0A%20%20%20%20%20%20%20%20this._keyBindings%5BeventName%5D.sort(function%20(kb1%2C%20kb2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20b1%20%3D%20kb1%5B0%5D.hasModifiers%3B%0A%20%20%20%20%20%20%20%20%20%20var%20b2%20%3D%20kb2%5B0%5D.hasModifiers%3B%0A%20%20%20%20%20%20%20%20%20%20return%20b1%20%3D%3D%3D%20b2%20%3F%200%20%3A%20b1%20%3F%20-1%20%3A%201%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20_addKeyBinding%3A%20function%20(eventString%2C%20handlerName)%20%7B%0A%20%20%20%20%20%20parseEventString(eventString).forEach(function%20(keyCombo)%20%7B%0A%20%20%20%20%20%20%20%20this._keyBindings%5BkeyCombo.event%5D%20%3D%20this._keyBindings%5BkeyCombo.event%5D%20%7C%7C%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20this._keyBindings%5BkeyCombo.event%5D.push(%5BkeyCombo%2C%20handlerName%5D)%3B%0A%20%20%20%20%20%20%7D%2C%20this)%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20_resetKeyEventListeners%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this._unlistenKeyEventListeners()%3B%0A%0A%20%20%20%20%20%20if%20(this.isAttached)%20%7B%0A%20%20%20%20%20%20%20%20this._listenKeyEventListeners()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20_listenKeyEventListeners%3A%20function%20()%20%7B%0A%20%20%20%20%20%20if%20(!this.keyEventTarget)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20Object.keys(this._keyBindings).forEach(function%20(eventName)%20%7B%0A%20%20%20%20%20%20%20%20var%20keyBindings%20%3D%20this._keyBindings%5BeventName%5D%3B%0A%0A%20%20%20%20%20%20%20%20var%20boundKeyHandler%20%3D%20this._onKeyBindingEvent.bind(this%2C%20keyBindings)%3B%0A%0A%20%20%20%20%20%20%20%20this._boundKeyHandlers.push(%5Bthis.keyEventTarget%2C%20eventName%2C%20boundKeyHandler%5D)%3B%0A%0A%20%20%20%20%20%20%20%20this.keyEventTarget.addEventListener(eventName%2C%20boundKeyHandler)%3B%0A%20%20%20%20%20%20%7D%2C%20this)%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20_unlistenKeyEventListeners%3A%20function%20()%20%7B%0A%20%20%20%20%20%20var%20keyHandlerTuple%3B%0A%20%20%20%20%20%20var%20keyEventTarget%3B%0A%20%20%20%20%20%20var%20eventName%3B%0A%20%20%20%20%20%20var%20boundKeyHandler%3B%0A%0A%20%20%20%20%20%20while%20(this._boundKeyHandlers.length)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20My%20kingdom%20for%20block-scope%20binding%20and%20destructuring%20assignment..%0A%20%20%20%20%20%20%20%20keyHandlerTuple%20%3D%20this._boundKeyHandlers.pop()%3B%0A%20%20%20%20%20%20%20%20keyEventTarget%20%3D%20keyHandlerTuple%5B0%5D%3B%0A%20%20%20%20%20%20%20%20eventName%20%3D%20keyHandlerTuple%5B1%5D%3B%0A%20%20%20%20%20%20%20%20boundKeyHandler%20%3D%20keyHandlerTuple%5B2%5D%3B%0A%20%20%20%20%20%20%20%20keyEventTarget.removeEventListener(eventName%2C%20boundKeyHandler)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20_onKeyBindingEvent%3A%20function%20(keyBindings%2C%20event)%20%7B%0A%20%20%20%20%20%20if%20(this.stopKeyboardEventPropagation)%20%7B%0A%20%20%20%20%20%20%20%20event.stopPropagation()%3B%0A%20%20%20%20%20%20%7D%20%2F%2F%20if%20event%20has%20been%20already%20prevented%2C%20don&#39;t%20do%20anything%0A%0A%0A%20%20%20%20%20%20if%20(event.defaultPrevented)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20keyBindings.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20keyCombo%20%3D%20keyBindings%5Bi%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20var%20handlerName%20%3D%20keyBindings%5Bi%5D%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(keyComboMatchesEvent(keyCombo%2C%20event))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._triggerKeyHandler(keyCombo%2C%20handlerName%2C%20event)%3B%20%2F%2F%20exit%20the%20loop%20if%20eventDefault%20was%20prevented%0A%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(event.defaultPrevented)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20_triggerKeyHandler%3A%20function%20(keyCombo%2C%20handlerName%2C%20keyboardEvent)%20%7B%0A%20%20%20%20%20%20var%20detail%20%3D%20Object.create(keyCombo)%3B%0A%20%20%20%20%20%20detail.keyboardEvent%20%3D%20keyboardEvent%3B%0A%20%20%20%20%20%20var%20event%20%3D%20new%20CustomEvent(keyCombo.event%2C%20%7B%0A%20%20%20%20%20%20%20%20detail%3A%20detail%2C%0A%20%20%20%20%20%20%20%20cancelable%3A%20true%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20this%5BhandlerName%5D.call(this%2C%20event)%3B%0A%0A%20%20%20%20%20%20if%20(event.defaultPrevented)%20%7B%0A%20%20%20%20%20%20%20%20keyboardEvent.preventDefault()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Firon-a11y-keys-behavior%2Firon-a11y-keys-behavior.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-behaviors/iron-control-state.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><script src="data:text/javascript;charset=utf-8,%2F**%0A%20*%20%40demo%20demo%2Findex.html%0A%20*%20%40polymerBehavior%0A%20*%2F%0APolymer.IronControlState%20%3D%20%7B%0A%20%20properties%3A%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20If%20true%2C%20the%20element%20currently%20has%20focus.%0A%20%20%20%20%20*%2F%0A%20%20%20%20focused%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20value%3A%20false%2C%0A%20%20%20%20%20%20notify%3A%20true%2C%0A%20%20%20%20%20%20readOnly%3A%20true%2C%0A%20%20%20%20%20%20reflectToAttribute%3A%20true%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20If%20true%2C%20the%20user%20cannot%20interact%20with%20this%20element.%0A%20%20%20%20%20*%2F%0A%20%20%20%20disabled%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20value%3A%20false%2C%0A%20%20%20%20%20%20notify%3A%20true%2C%0A%20%20%20%20%20%20observer%3A%20&#39;_disabledChanged&#39;%2C%0A%20%20%20%20%20%20reflectToAttribute%3A%20true%0A%20%20%20%20%7D%2C%0A%20%20%20%20_oldTabIndex%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Number%0A%20%20%20%20%7D%2C%0A%20%20%20%20_boundFocusBlurHandler%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Function%2C%0A%20%20%20%20%20%20value%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._focusBlurHandler.bind(this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20observers%3A%20%5B&#39;_changedControlState(focused%2C%20disabled)&#39;%5D%2C%0A%20%20ready%3A%20function%20()%20%7B%0A%20%20%20%20this.addEventListener(&#39;focus&#39;%2C%20this._boundFocusBlurHandler%2C%20true)%3B%0A%20%20%20%20this.addEventListener(&#39;blur&#39;%2C%20this._boundFocusBlurHandler%2C%20true)%3B%0A%20%20%7D%2C%0A%20%20_focusBlurHandler%3A%20function%20(event)%20%7B%0A%20%20%20%20%2F%2F%20NOTE(cdata)%3A%20%20if%20we%20are%20in%20ShadowDOM%20land%2C%20%60event.target%60%20will%0A%20%20%20%20%2F%2F%20eventually%20become%20%60this%60%20due%20to%20retargeting%3B%20if%20we%20are%20not%20in%0A%20%20%20%20%2F%2F%20ShadowDOM%20land%2C%20%60event.target%60%20will%20eventually%20become%20%60this%60%20due%0A%20%20%20%20%2F%2F%20to%20the%20second%20conditional%20which%20fires%20a%20synthetic%20event%20(that%20is%20also%0A%20%20%20%20%2F%2F%20handled).%20In%20either%20case%2C%20we%20can%20disregard%20%60event.path%60.%0A%20%20%20%20if%20(event.target%20%3D%3D%3D%20this)%20%7B%0A%20%20%20%20%20%20this._setFocused(event.type%20%3D%3D%3D%20&#39;focus&#39;)%3B%0A%20%20%20%20%7D%20else%20if%20(!this.shadowRoot)%20%7B%0A%20%20%20%20%20%20var%20target%20%3D%0A%20%20%20%20%20%20%2F**%20%40type%20%7BNode%7D%20*%2F%0A%20%20%20%20%20%20Polymer.dom(event).localTarget%3B%0A%0A%20%20%20%20%20%20if%20(!this.isLightDescendant(target))%20%7B%0A%20%20%20%20%20%20%20%20this.fire(event.type%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20sourceEvent%3A%20event%0A%20%20%20%20%20%20%20%20%7D%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%3A%20this%2C%0A%20%20%20%20%20%20%20%20%20%20bubbles%3A%20event.bubbles%2C%0A%20%20%20%20%20%20%20%20%20%20cancelable%3A%20event.cancelable%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20_disabledChanged%3A%20function%20(disabled%2C%20old)%20%7B%0A%20%20%20%20this.setAttribute(&#39;aria-disabled&#39;%2C%20disabled%20%3F%20&#39;true&#39;%20%3A%20&#39;false&#39;)%3B%0A%20%20%20%20this.style.pointerEvents%20%3D%20disabled%20%3F%20&#39;none&#39;%20%3A%20&#39;&#39;%3B%0A%0A%20%20%20%20if%20(disabled)%20%7B%0A%20%20%20%20%20%20this._oldTabIndex%20%3D%20this.tabIndex%3B%0A%0A%20%20%20%20%20%20this._setFocused(false)%3B%0A%0A%20%20%20%20%20%20this.tabIndex%20%3D%20-1%3B%0A%20%20%20%20%20%20this.blur()%3B%0A%20%20%20%20%7D%20else%20if%20(this._oldTabIndex%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20this.tabIndex%20%3D%20this._oldTabIndex%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20_changedControlState%3A%20function%20()%20%7B%0A%20%20%20%20%2F%2F%20_controlStateChanged%20is%20abstract%2C%20follow-on%20behaviors%20may%20implement%20it%0A%20%20%20%20if%20(this._controlStateChanged)%20%7B%0A%20%20%20%20%20%20this._controlStateChanged()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Firon-behaviors%2Firon-control-state.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,%2F**%0A%20*%20%40demo%20demo%2Findex.html%0A%20*%20%40polymerBehavior%20Polymer.IronButtonState%0A%20*%2F%0APolymer.IronButtonStateImpl%20%3D%20%7B%0A%20%20properties%3A%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20If%20true%2C%20the%20user%20is%20currently%20holding%20down%20the%20button.%0A%20%20%20%20%20*%2F%0A%20%20%20%20pressed%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20readOnly%3A%20true%2C%0A%20%20%20%20%20%20value%3A%20false%2C%0A%20%20%20%20%20%20reflectToAttribute%3A%20true%2C%0A%20%20%20%20%20%20observer%3A%20&#39;_pressedChanged&#39;%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20If%20true%2C%20the%20button%20toggles%20the%20active%20state%20with%20each%20tap%20or%20press%0A%20%20%20%20%20*%20of%20the%20spacebar.%0A%20%20%20%20%20*%2F%0A%20%20%20%20toggles%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20value%3A%20false%2C%0A%20%20%20%20%20%20reflectToAttribute%3A%20true%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20If%20true%2C%20the%20button%20is%20a%20toggle%20and%20is%20currently%20in%20the%20active%20state.%0A%20%20%20%20%20*%2F%0A%20%20%20%20active%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20value%3A%20false%2C%0A%20%20%20%20%20%20notify%3A%20true%2C%0A%20%20%20%20%20%20reflectToAttribute%3A%20true%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20True%20if%20the%20element%20is%20currently%20being%20pressed%20by%20a%20%22pointer%2C%22%20which%0A%20%20%20%20%20*%20is%20loosely%20defined%20as%20mouse%20or%20touch%20input%20(but%20specifically%20excluding%0A%20%20%20%20%20*%20keyboard%20input).%0A%20%20%20%20%20*%2F%0A%20%20%20%20pointerDown%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20readOnly%3A%20true%2C%0A%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20True%20if%20the%20input%20device%20that%20caused%20the%20element%20to%20receive%20focus%0A%20%20%20%20%20*%20was%20a%20keyboard.%0A%20%20%20%20%20*%2F%0A%20%20%20%20receivedFocusFromKeyboard%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20readOnly%3A%20true%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20The%20aria%20attribute%20to%20be%20set%20if%20the%20button%20is%20a%20toggle%20and%20in%20the%0A%20%20%20%20%20*%20active%20state.%0A%20%20%20%20%20*%2F%0A%20%20%20%20ariaActiveAttribute%3A%20%7B%0A%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20value%3A%20&#39;aria-pressed&#39;%2C%0A%20%20%20%20%20%20observer%3A%20&#39;_ariaActiveAttributeChanged&#39;%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20listeners%3A%20%7B%0A%20%20%20%20down%3A%20&#39;_downHandler&#39;%2C%0A%20%20%20%20up%3A%20&#39;_upHandler&#39;%2C%0A%20%20%20%20tap%3A%20&#39;_tapHandler&#39;%0A%20%20%7D%2C%0A%20%20observers%3A%20%5B&#39;_focusChanged(focused)&#39;%2C%20&#39;_activeChanged(active%2C%20ariaActiveAttribute)&#39;%5D%2C%0A%20%20keyBindings%3A%20%7B%0A%20%20%20%20&#39;enter%3Akeydown&#39;%3A%20&#39;_asyncClick&#39;%2C%0A%20%20%20%20&#39;space%3Akeydown&#39;%3A%20&#39;_spaceKeyDownHandler&#39;%2C%0A%20%20%20%20&#39;space%3Akeyup&#39;%3A%20&#39;_spaceKeyUpHandler&#39;%0A%20%20%7D%2C%0A%20%20_mouseEventRe%3A%20%2F%5Emouse%2F%2C%0A%20%20_tapHandler%3A%20function%20()%20%7B%0A%20%20%20%20if%20(this.toggles)%20%7B%0A%20%20%20%20%20%20%2F%2F%20a%20tap%20is%20needed%20to%20toggle%20the%20active%20state%0A%20%20%20%20%20%20this._userActivate(!this.active)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this.active%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20_focusChanged%3A%20function%20(focused)%20%7B%0A%20%20%20%20this._detectKeyboardFocus(focused)%3B%0A%0A%20%20%20%20if%20(!focused)%20%7B%0A%20%20%20%20%20%20this._setPressed(false)%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20_detectKeyboardFocus%3A%20function%20(focused)%20%7B%0A%20%20%20%20this._setReceivedFocusFromKeyboard(!this.pointerDown%20%26%26%20focused)%3B%0A%20%20%7D%2C%0A%20%20%2F%2F%20to%20emulate%20native%20checkbox%2C%20(de-)activations%20from%20a%20user%20interaction%20fire%0A%20%20%2F%2F%20&#39;change&#39;%20events%0A%20%20_userActivate%3A%20function%20(active)%20%7B%0A%20%20%20%20if%20(this.active%20!%3D%3D%20active)%20%7B%0A%20%20%20%20%20%20this.active%20%3D%20active%3B%0A%20%20%20%20%20%20this.fire(&#39;change&#39;)%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20_downHandler%3A%20function%20(event)%20%7B%0A%20%20%20%20this._setPointerDown(true)%3B%0A%0A%20%20%20%20this._setPressed(true)%3B%0A%0A%20%20%20%20this._setReceivedFocusFromKeyboard(false)%3B%0A%20%20%7D%2C%0A%20%20_upHandler%3A%20function%20()%20%7B%0A%20%20%20%20this._setPointerDown(false)%3B%0A%0A%20%20%20%20this._setPressed(false)%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B!KeyboardEvent%7D%20event%20.%0A%20%20%20*%2F%0A%20%20_spaceKeyDownHandler%3A%20function%20(event)%20%7B%0A%20%20%20%20var%20keyboardEvent%20%3D%20event.detail.keyboardEvent%3B%0A%20%20%20%20var%20target%20%3D%20Polymer.dom(keyboardEvent).localTarget%3B%20%2F%2F%20Ignore%20the%20event%20if%20this%20is%20coming%20from%20a%20focused%20light%20child%2C%20since%20that%0A%20%20%20%20%2F%2F%20element%20will%20deal%20with%20it.%0A%0A%20%20%20%20if%20(this.isLightDescendant(%0A%20%20%20%20%2F**%20%40type%20%7BNode%7D%20*%2F%0A%20%20%20%20target))%20return%3B%0A%20%20%20%20keyboardEvent.preventDefault()%3B%0A%20%20%20%20keyboardEvent.stopImmediatePropagation()%3B%0A%0A%20%20%20%20this._setPressed(true)%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B!KeyboardEvent%7D%20event%20.%0A%20%20%20*%2F%0A%20%20_spaceKeyUpHandler%3A%20function%20(event)%20%7B%0A%20%20%20%20var%20keyboardEvent%20%3D%20event.detail.keyboardEvent%3B%0A%20%20%20%20var%20target%20%3D%20Polymer.dom(keyboardEvent).localTarget%3B%20%2F%2F%20Ignore%20the%20event%20if%20this%20is%20coming%20from%20a%20focused%20light%20child%2C%20since%20that%0A%20%20%20%20%2F%2F%20element%20will%20deal%20with%20it.%0A%0A%20%20%20%20if%20(this.isLightDescendant(%0A%20%20%20%20%2F**%20%40type%20%7BNode%7D%20*%2F%0A%20%20%20%20target))%20return%3B%0A%0A%20%20%20%20if%20(this.pressed)%20%7B%0A%20%20%20%20%20%20this._asyncClick()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this._setPressed(false)%3B%0A%20%20%7D%2C%0A%20%20%2F%2F%20trigger%20click%20asynchronously%2C%20the%20asynchrony%20is%20useful%20to%20allow%20one%0A%20%20%2F%2F%20event%20handler%20to%20unwind%20before%20triggering%20another%20event%0A%20%20_asyncClick%3A%20function%20()%20%7B%0A%20%20%20%20this.async(function%20()%20%7B%0A%20%20%20%20%20%20this.click()%3B%0A%20%20%20%20%7D%2C%201)%3B%0A%20%20%7D%2C%0A%20%20%2F%2F%20any%20of%20these%20changes%20are%20considered%20a%20change%20to%20button%20state%0A%20%20_pressedChanged%3A%20function%20(pressed)%20%7B%0A%20%20%20%20this._changedButtonState()%3B%0A%20%20%7D%2C%0A%20%20_ariaActiveAttributeChanged%3A%20function%20(value%2C%20oldValue)%20%7B%0A%20%20%20%20if%20(oldValue%20%26%26%20oldValue%20!%3D%20value%20%26%26%20this.hasAttribute(oldValue))%20%7B%0A%20%20%20%20%20%20this.removeAttribute(oldValue)%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20_activeChanged%3A%20function%20(active%2C%20ariaActiveAttribute)%20%7B%0A%20%20%20%20if%20(this.toggles)%20%7B%0A%20%20%20%20%20%20this.setAttribute(this.ariaActiveAttribute%2C%20active%20%3F%20&#39;true&#39;%20%3A%20&#39;false&#39;)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this.removeAttribute(this.ariaActiveAttribute)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this._changedButtonState()%3B%0A%20%20%7D%2C%0A%20%20_controlStateChanged%3A%20function%20()%20%7B%0A%20%20%20%20if%20(this.disabled)%20%7B%0A%20%20%20%20%20%20this._setPressed(false)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this._changedButtonState()%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20%2F%2F%20provide%20hook%20for%20follow-on%20behaviors%20to%20react%20to%20button-state%0A%20%20_changedButtonState%3A%20function%20()%20%7B%0A%20%20%20%20if%20(this._buttonStateChanged)%20%7B%0A%20%20%20%20%20%20this._buttonStateChanged()%3B%20%2F%2F%20abstract%0A%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%3B%0A%2F**%20%40polymerBehavior%20*%2F%0A%0APolymer.IronButtonState%20%3D%20%5BPolymer.IronA11yKeysBehavior%2C%20Polymer.IronButtonStateImpl%5D%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Firon-behaviors%2Firon-button-state.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/paper-behaviors/paper-ripple-behavior.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-behaviors/iron-button-state.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/paper-ripple/paper-ripple.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html" import-dependency=""><dom-module id="paper-ripple"><template></template></dom-module><script src="data:text/javascript;charset=utf-8,(function%20()%20%7B%0A%20%20&#39;use%20strict&#39;%3B%0A%0A%20%20var%20Utility%20%3D%20%7B%0A%20%20%20%20distance%3A%20function%20(x1%2C%20y1%2C%20x2%2C%20y2)%20%7B%0A%20%20%20%20%20%20var%20xDelta%20%3D%20x1%20-%20x2%3B%0A%20%20%20%20%20%20var%20yDelta%20%3D%20y1%20-%20y2%3B%0A%20%20%20%20%20%20return%20Math.sqrt(xDelta%20*%20xDelta%20%2B%20yDelta%20*%20yDelta)%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20now%3A%20window.performance%20%26%26%20window.performance.now%20%3F%20window.performance.now.bind(window.performance)%20%3A%20Date.now%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BHTMLElement%7D%20element%0A%20%20%20*%20%40constructor%0A%20%20%20*%2F%0A%0A%20%20function%20ElementMetrics(element)%20%7B%0A%20%20%20%20this.element%20%3D%20element%3B%0A%20%20%20%20this.width%20%3D%20this.boundingRect.width%3B%0A%20%20%20%20this.height%20%3D%20this.boundingRect.height%3B%0A%20%20%20%20this.size%20%3D%20Math.max(this.width%2C%20this.height)%3B%0A%20%20%7D%0A%0A%20%20ElementMetrics.prototype%20%3D%20%7B%0A%20%20%20%20get%20boundingRect()%20%7B%0A%20%20%20%20%20%20return%20this.element.getBoundingClientRect()%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20furthestCornerDistanceFrom%3A%20function%20(x%2C%20y)%20%7B%0A%20%20%20%20%20%20var%20topLeft%20%3D%20Utility.distance(x%2C%20y%2C%200%2C%200)%3B%0A%20%20%20%20%20%20var%20topRight%20%3D%20Utility.distance(x%2C%20y%2C%20this.width%2C%200)%3B%0A%20%20%20%20%20%20var%20bottomLeft%20%3D%20Utility.distance(x%2C%20y%2C%200%2C%20this.height)%3B%0A%20%20%20%20%20%20var%20bottomRight%20%3D%20Utility.distance(x%2C%20y%2C%20this.width%2C%20this.height)%3B%0A%20%20%20%20%20%20return%20Math.max(topLeft%2C%20topRight%2C%20bottomLeft%2C%20bottomRight)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BHTMLElement%7D%20element%0A%20%20%20*%20%40constructor%0A%20%20%20*%2F%0A%0A%20%20function%20Ripple(element)%20%7B%0A%20%20%20%20this.element%20%3D%20element%3B%0A%20%20%20%20this.color%20%3D%20window.getComputedStyle(element).color%3B%0A%20%20%20%20this.wave%20%3D%20document.createElement(&#39;div&#39;)%3B%0A%20%20%20%20this.waveContainer%20%3D%20document.createElement(&#39;div&#39;)%3B%0A%20%20%20%20this.wave.style.backgroundColor%20%3D%20this.color%3B%0A%20%20%20%20this.wave.classList.add(&#39;wave&#39;)%3B%0A%20%20%20%20this.waveContainer.classList.add(&#39;wave-container&#39;)%3B%0A%20%20%20%20Polymer.dom(this.waveContainer).appendChild(this.wave)%3B%0A%20%20%20%20this.resetInteractionState()%3B%0A%20%20%7D%0A%0A%20%20Ripple.MAX_RADIUS%20%3D%20300%3B%0A%20%20Ripple.prototype%20%3D%20%7B%0A%20%20%20%20get%20recenters()%20%7B%0A%20%20%20%20%20%20return%20this.element.recenters%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20center()%20%7B%0A%20%20%20%20%20%20return%20this.element.center%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20mouseDownElapsed()%20%7B%0A%20%20%20%20%20%20var%20elapsed%3B%0A%0A%20%20%20%20%20%20if%20(!this.mouseDownStart)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20elapsed%20%3D%20Utility.now()%20-%20this.mouseDownStart%3B%0A%0A%20%20%20%20%20%20if%20(this.mouseUpStart)%20%7B%0A%20%20%20%20%20%20%20%20elapsed%20-%3D%20this.mouseUpElapsed%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20elapsed%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20mouseUpElapsed()%20%7B%0A%20%20%20%20%20%20return%20this.mouseUpStart%20%3F%20Utility.now()%20-%20this.mouseUpStart%20%3A%200%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20mouseDownElapsedSeconds()%20%7B%0A%20%20%20%20%20%20return%20this.mouseDownElapsed%20%2F%201000%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20mouseUpElapsedSeconds()%20%7B%0A%20%20%20%20%20%20return%20this.mouseUpElapsed%20%2F%201000%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20mouseInteractionSeconds()%20%7B%0A%20%20%20%20%20%20return%20this.mouseDownElapsedSeconds%20%2B%20this.mouseUpElapsedSeconds%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20initialOpacity()%20%7B%0A%20%20%20%20%20%20return%20this.element.initialOpacity%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20opacityDecayVelocity()%20%7B%0A%20%20%20%20%20%20return%20this.element.opacityDecayVelocity%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20radius()%20%7B%0A%20%20%20%20%20%20var%20width2%20%3D%20this.containerMetrics.width%20*%20this.containerMetrics.width%3B%0A%20%20%20%20%20%20var%20height2%20%3D%20this.containerMetrics.height%20*%20this.containerMetrics.height%3B%0A%20%20%20%20%20%20var%20waveRadius%20%3D%20Math.min(Math.sqrt(width2%20%2B%20height2)%2C%20Ripple.MAX_RADIUS)%20*%201.1%20%2B%205%3B%0A%20%20%20%20%20%20var%20duration%20%3D%201.1%20-%200.2%20*%20(waveRadius%20%2F%20Ripple.MAX_RADIUS)%3B%0A%20%20%20%20%20%20var%20timeNow%20%3D%20this.mouseInteractionSeconds%20%2F%20duration%3B%0A%20%20%20%20%20%20var%20size%20%3D%20waveRadius%20*%20(1%20-%20Math.pow(80%2C%20-timeNow))%3B%0A%20%20%20%20%20%20return%20Math.abs(size)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20opacity()%20%7B%0A%20%20%20%20%20%20if%20(!this.mouseUpStart)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.initialOpacity%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20Math.max(0%2C%20this.initialOpacity%20-%20this.mouseUpElapsedSeconds%20*%20this.opacityDecayVelocity)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20outerOpacity()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Linear%20increase%20in%20background%20opacity%2C%20capped%20at%20the%20opacity%0A%20%20%20%20%20%20%2F%2F%20of%20the%20wavefront%20(waveOpacity).%0A%20%20%20%20%20%20var%20outerOpacity%20%3D%20this.mouseUpElapsedSeconds%20*%200.3%3B%0A%20%20%20%20%20%20var%20waveOpacity%20%3D%20this.opacity%3B%0A%20%20%20%20%20%20return%20Math.max(0%2C%20Math.min(outerOpacity%2C%20waveOpacity))%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20isOpacityFullyDecayed()%20%7B%0A%20%20%20%20%20%20return%20this.opacity%20%3C%200.01%20%26%26%20this.radius%20%3E%3D%20Math.min(this.maxRadius%2C%20Ripple.MAX_RADIUS)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20isRestingAtMaxRadius()%20%7B%0A%20%20%20%20%20%20return%20this.opacity%20%3E%3D%20this.initialOpacity%20%26%26%20this.radius%20%3E%3D%20Math.min(this.maxRadius%2C%20Ripple.MAX_RADIUS)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20isAnimationComplete()%20%7B%0A%20%20%20%20%20%20return%20this.mouseUpStart%20%3F%20this.isOpacityFullyDecayed%20%3A%20this.isRestingAtMaxRadius%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20translationFraction()%20%7B%0A%20%20%20%20%20%20return%20Math.min(1%2C%20this.radius%20%2F%20this.containerMetrics.size%20*%202%20%2F%20Math.sqrt(2))%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20xNow()%20%7B%0A%20%20%20%20%20%20if%20(this.xEnd)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.xStart%20%2B%20this.translationFraction%20*%20(this.xEnd%20-%20this.xStart)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20this.xStart%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20yNow()%20%7B%0A%20%20%20%20%20%20if%20(this.yEnd)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.yStart%20%2B%20this.translationFraction%20*%20(this.yEnd%20-%20this.yStart)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20this.yStart%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20isMouseDown()%20%7B%0A%20%20%20%20%20%20return%20this.mouseDownStart%20%26%26%20!this.mouseUpStart%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20resetInteractionState%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this.maxRadius%20%3D%200%3B%0A%20%20%20%20%20%20this.mouseDownStart%20%3D%200%3B%0A%20%20%20%20%20%20this.mouseUpStart%20%3D%200%3B%0A%20%20%20%20%20%20this.xStart%20%3D%200%3B%0A%20%20%20%20%20%20this.yStart%20%3D%200%3B%0A%20%20%20%20%20%20this.xEnd%20%3D%200%3B%0A%20%20%20%20%20%20this.yEnd%20%3D%200%3B%0A%20%20%20%20%20%20this.slideDistance%20%3D%200%3B%0A%20%20%20%20%20%20this.containerMetrics%20%3D%20new%20ElementMetrics(this.element)%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20draw%3A%20function%20()%20%7B%0A%20%20%20%20%20%20var%20scale%3B%0A%20%20%20%20%20%20var%20dx%3B%0A%20%20%20%20%20%20var%20dy%3B%0A%20%20%20%20%20%20this.wave.style.opacity%20%3D%20this.opacity%3B%0A%20%20%20%20%20%20scale%20%3D%20this.radius%20%2F%20(this.containerMetrics.size%20%2F%202)%3B%0A%20%20%20%20%20%20dx%20%3D%20this.xNow%20-%20this.containerMetrics.width%20%2F%202%3B%0A%20%20%20%20%20%20dy%20%3D%20this.yNow%20-%20this.containerMetrics.height%20%2F%202%3B%20%2F%2F%202d%20transform%20for%20safari%20because%20of%20border-radius%20and%20overflow%3Ahidden%0A%20%20%20%20%20%20%2F%2F%20clipping%20bug.%20https%3A%2F%2Fbugs.webkit.org%2Fshow_bug.cgi%3Fid%3D98538%0A%0A%20%20%20%20%20%20this.waveContainer.style.webkitTransform%20%3D%20&#39;translate(&#39;%20%2B%20dx%20%2B%20&#39;px%2C%20&#39;%20%2B%20dy%20%2B%20&#39;px)&#39;%3B%0A%20%20%20%20%20%20this.waveContainer.style.transform%20%3D%20&#39;translate3d(&#39;%20%2B%20dx%20%2B%20&#39;px%2C%20&#39;%20%2B%20dy%20%2B%20&#39;px%2C%200)&#39;%3B%0A%20%20%20%20%20%20this.wave.style.webkitTransform%20%3D%20&#39;scale(&#39;%20%2B%20scale%20%2B%20&#39;%2C&#39;%20%2B%20scale%20%2B%20&#39;)&#39;%3B%0A%20%20%20%20%20%20this.wave.style.transform%20%3D%20&#39;scale3d(&#39;%20%2B%20scale%20%2B%20&#39;%2C&#39;%20%2B%20scale%20%2B%20&#39;%2C1)&#39;%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%20%40param%20%7BEvent%3D%7D%20event%20*%2F%0A%20%20%20%20downAction%3A%20function%20(event)%20%7B%0A%20%20%20%20%20%20var%20xCenter%20%3D%20this.containerMetrics.width%20%2F%202%3B%0A%20%20%20%20%20%20var%20yCenter%20%3D%20this.containerMetrics.height%20%2F%202%3B%0A%20%20%20%20%20%20this.resetInteractionState()%3B%0A%20%20%20%20%20%20this.mouseDownStart%20%3D%20Utility.now()%3B%0A%0A%20%20%20%20%20%20if%20(this.center)%20%7B%0A%20%20%20%20%20%20%20%20this.xStart%20%3D%20xCenter%3B%0A%20%20%20%20%20%20%20%20this.yStart%20%3D%20yCenter%3B%0A%20%20%20%20%20%20%20%20this.slideDistance%20%3D%20Utility.distance(this.xStart%2C%20this.yStart%2C%20this.xEnd%2C%20this.yEnd)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.xStart%20%3D%20event%20%3F%20event.detail.x%20-%20this.containerMetrics.boundingRect.left%20%3A%20this.containerMetrics.width%20%2F%202%3B%0A%20%20%20%20%20%20%20%20this.yStart%20%3D%20event%20%3F%20event.detail.y%20-%20this.containerMetrics.boundingRect.top%20%3A%20this.containerMetrics.height%20%2F%202%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(this.recenters)%20%7B%0A%20%20%20%20%20%20%20%20this.xEnd%20%3D%20xCenter%3B%0A%20%20%20%20%20%20%20%20this.yEnd%20%3D%20yCenter%3B%0A%20%20%20%20%20%20%20%20this.slideDistance%20%3D%20Utility.distance(this.xStart%2C%20this.yStart%2C%20this.xEnd%2C%20this.yEnd)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.maxRadius%20%3D%20this.containerMetrics.furthestCornerDistanceFrom(this.xStart%2C%20this.yStart)%3B%0A%20%20%20%20%20%20this.waveContainer.style.top%20%3D%20(this.containerMetrics.height%20-%20this.containerMetrics.size)%20%2F%202%20%2B%20&#39;px&#39;%3B%0A%20%20%20%20%20%20this.waveContainer.style.left%20%3D%20(this.containerMetrics.width%20-%20this.containerMetrics.size)%20%2F%202%20%2B%20&#39;px&#39;%3B%0A%20%20%20%20%20%20this.waveContainer.style.width%20%3D%20this.containerMetrics.size%20%2B%20&#39;px&#39;%3B%0A%20%20%20%20%20%20this.waveContainer.style.height%20%3D%20this.containerMetrics.size%20%2B%20&#39;px&#39;%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%20%40param%20%7BEvent%3D%7D%20event%20*%2F%0A%20%20%20%20upAction%3A%20function%20(event)%20%7B%0A%20%20%20%20%20%20if%20(!this.isMouseDown)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.mouseUpStart%20%3D%20Utility.now()%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20remove%3A%20function%20()%20%7B%0A%20%20%20%20%20%20Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20Polymer(%7B%0A%20%20%20%20is%3A%20&#39;paper-ripple&#39;%2C%0A%20%20%20%20behaviors%3A%20%5BPolymer.IronA11yKeysBehavior%5D%2C%0A%20%20%20%20properties%3A%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20The%20initial%20opacity%20set%20on%20the%20wave.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40attribute%20initialOpacity%0A%20%20%20%20%20%20%20*%20%40type%20number%0A%20%20%20%20%20%20%20*%20%40default%200.25%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20initialOpacity%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Number%2C%0A%20%20%20%20%20%20%20%20value%3A%200.25%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20How%20fast%20(opacity%20per%20second)%20the%20wave%20fades%20out.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40attribute%20opacityDecayVelocity%0A%20%20%20%20%20%20%20*%20%40type%20number%0A%20%20%20%20%20%20%20*%20%40default%200.8%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20opacityDecayVelocity%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Number%2C%0A%20%20%20%20%20%20%20%20value%3A%200.8%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20If%20true%2C%20ripples%20will%20exhibit%20a%20gravitational%20pull%20towards%0A%20%20%20%20%20%20%20*%20the%20center%20of%20their%20container%20as%20they%20fade%20away.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40attribute%20recenters%0A%20%20%20%20%20%20%20*%20%40type%20boolean%0A%20%20%20%20%20%20%20*%20%40default%20false%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20recenters%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20If%20true%2C%20ripples%20will%20center%20inside%20its%20container%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40attribute%20recenters%0A%20%20%20%20%20%20%20*%20%40type%20boolean%0A%20%20%20%20%20%20%20*%20%40default%20false%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20center%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20A%20list%20of%20the%20visual%20ripples.%0A%20%20%20%20%20%20%20*%0A%20%20%20%20%20%20%20*%20%40attribute%20ripples%0A%20%20%20%20%20%20%20*%20%40type%20Array%0A%20%20%20%20%20%20%20*%20%40default%20%5B%5D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20ripples%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Array%2C%0A%20%20%20%20%20%20%20%20value%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20True%20when%20there%20are%20visible%20ripples%20animating%20within%20the%0A%20%20%20%20%20%20%20*%20element.%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20animating%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20readOnly%3A%20true%2C%0A%20%20%20%20%20%20%20%20reflectToAttribute%3A%20true%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20If%20true%2C%20the%20ripple%20will%20remain%20in%20the%20%22down%22%20state%20until%20%60holdDown%60%0A%20%20%20%20%20%20%20*%20is%20set%20to%20false%20again.%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20holdDown%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%2C%0A%20%20%20%20%20%20%20%20observer%3A%20&#39;_holdDownChanged&#39;%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20If%20true%2C%20the%20ripple%20will%20not%20generate%20a%20ripple%20effect%0A%20%20%20%20%20%20%20*%20via%20pointer%20interaction.%0A%20%20%20%20%20%20%20*%20Calling%20ripple&#39;s%20imperative%20api%20like%20%60simulatedRipple%60%20will%0A%20%20%20%20%20%20%20*%20still%20generate%20the%20ripple%20effect.%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20noink%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20_animating%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20_boundAnimate%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Function%2C%0A%20%20%20%20%20%20%20%20value%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this.animate.bind(this)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20target()%20%7B%0A%20%20%20%20%20%20return%20this.keyEventTarget%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40type%20%7B!Object%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20keyBindings%3A%20%7B%0A%20%20%20%20%20%20&#39;enter%3Akeydown&#39;%3A%20&#39;_onEnterKeydown&#39;%2C%0A%20%20%20%20%20%20&#39;space%3Akeydown&#39;%3A%20&#39;_onSpaceKeydown&#39;%2C%0A%20%20%20%20%20%20&#39;space%3Akeyup&#39;%3A%20&#39;_onSpaceKeyup&#39;%0A%20%20%20%20%7D%2C%0A%20%20%20%20attached%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Set%20up%20a11yKeysBehavior%20to%20listen%20to%20key%20events%20on%20the%20target%2C%0A%20%20%20%20%20%20%2F%2F%20so%20that%20space%20and%20enter%20activate%20the%20ripple%20even%20if%20the%20target%20doesn&#39;t%0A%20%20%20%20%20%20%2F%2F%20handle%20key%20events.%20The%20key%20handlers%20deal%20with%20%60noink%60%20themselves.%0A%20%20%20%20%20%20if%20(this.parentNode.nodeType%20%3D%3D%2011)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20DOCUMENT_FRAGMENT_NODE%0A%20%20%20%20%20%20%20%20this.keyEventTarget%20%3D%20Polymer.dom(this).getOwnerRoot().host%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.keyEventTarget%20%3D%20this.parentNode%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20var%20keyEventTarget%20%3D%0A%20%20%20%20%20%20%2F**%20%40type%20%7B!EventTarget%7D%20*%2F%0A%20%20%20%20%20%20this.keyEventTarget%3B%0A%20%20%20%20%20%20this.listen(keyEventTarget%2C%20&#39;up&#39;%2C%20&#39;uiUpAction&#39;)%3B%0A%20%20%20%20%20%20this.listen(keyEventTarget%2C%20&#39;down&#39;%2C%20&#39;uiDownAction&#39;)%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20detached%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this.unlisten(this.keyEventTarget%2C%20&#39;up&#39;%2C%20&#39;uiUpAction&#39;)%3B%0A%20%20%20%20%20%20this.unlisten(this.keyEventTarget%2C%20&#39;down&#39;%2C%20&#39;uiDownAction&#39;)%3B%0A%20%20%20%20%20%20this.keyEventTarget%20%3D%20null%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20get%20shouldKeepAnimating()%20%7B%0A%20%20%20%20%20%20for%20(var%20index%20%3D%200%3B%20index%20%3C%20this.ripples.length%3B%20%2B%2Bindex)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.ripples%5Bindex%5D.isAnimationComplete)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20simulatedRipple%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this.downAction(null)%3B%20%2F%2F%20Please%20see%20polymer%2Fpolymer%231305%0A%0A%20%20%20%20%20%20this.async(function%20()%20%7B%0A%20%20%20%20%20%20%20%20this.upAction()%3B%0A%20%20%20%20%20%20%7D%2C%201)%3B%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Provokes%20a%20ripple%20down%20effect%20via%20a%20UI%20event%2C%0A%20%20%20%20%20*%20respecting%20the%20%60noink%60%20property.%0A%20%20%20%20%20*%20%40param%20%7BEvent%3D%7D%20event%0A%20%20%20%20%20*%2F%0A%20%20%20%20uiDownAction%3A%20function%20(event)%20%7B%0A%20%20%20%20%20%20if%20(!this.noink)%20%7B%0A%20%20%20%20%20%20%20%20this.downAction(event)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Provokes%20a%20ripple%20down%20effect%20via%20a%20UI%20event%2C%0A%20%20%20%20%20*%20*not*%20respecting%20the%20%60noink%60%20property.%0A%20%20%20%20%20*%20%40param%20%7BEvent%3D%7D%20event%0A%20%20%20%20%20*%2F%0A%20%20%20%20downAction%3A%20function%20(event)%20%7B%0A%20%20%20%20%20%20if%20(this.holdDown%20%26%26%20this.ripples.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20var%20ripple%20%3D%20this.addRipple()%3B%0A%20%20%20%20%20%20ripple.downAction(event)%3B%0A%0A%20%20%20%20%20%20if%20(!this._animating)%20%7B%0A%20%20%20%20%20%20%20%20this._animating%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.animate()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Provokes%20a%20ripple%20up%20effect%20via%20a%20UI%20event%2C%0A%20%20%20%20%20*%20respecting%20the%20%60noink%60%20property.%0A%20%20%20%20%20*%20%40param%20%7BEvent%3D%7D%20event%0A%20%20%20%20%20*%2F%0A%20%20%20%20uiUpAction%3A%20function%20(event)%20%7B%0A%20%20%20%20%20%20if%20(!this.noink)%20%7B%0A%20%20%20%20%20%20%20%20this.upAction(event)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Provokes%20a%20ripple%20up%20effect%20via%20a%20UI%20event%2C%0A%20%20%20%20%20*%20*not*%20respecting%20the%20%60noink%60%20property.%0A%20%20%20%20%20*%20%40param%20%7BEvent%3D%7D%20event%0A%20%20%20%20%20*%2F%0A%20%20%20%20upAction%3A%20function%20(event)%20%7B%0A%20%20%20%20%20%20if%20(this.holdDown)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.ripples.forEach(function%20(ripple)%20%7B%0A%20%20%20%20%20%20%20%20ripple.upAction(event)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20this._animating%20%3D%20true%3B%0A%20%20%20%20%20%20this.animate()%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20onAnimationComplete%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this._animating%20%3D%20false%3B%0A%20%20%20%20%20%20this.%24.background.style.backgroundColor%20%3D%20null%3B%0A%20%20%20%20%20%20this.fire(&#39;transitionend&#39;)%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20addRipple%3A%20function%20()%20%7B%0A%20%20%20%20%20%20var%20ripple%20%3D%20new%20Ripple(this)%3B%0A%20%20%20%20%20%20Polymer.dom(this.%24.waves).appendChild(ripple.waveContainer)%3B%0A%20%20%20%20%20%20this.%24.background.style.backgroundColor%20%3D%20ripple.color%3B%0A%20%20%20%20%20%20this.ripples.push(ripple)%3B%0A%0A%20%20%20%20%20%20this._setAnimating(true)%3B%0A%0A%20%20%20%20%20%20return%20ripple%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20removeRipple%3A%20function%20(ripple)%20%7B%0A%20%20%20%20%20%20var%20rippleIndex%20%3D%20this.ripples.indexOf(ripple)%3B%0A%0A%20%20%20%20%20%20if%20(rippleIndex%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.ripples.splice(rippleIndex%2C%201)%3B%0A%20%20%20%20%20%20ripple.remove()%3B%0A%0A%20%20%20%20%20%20if%20(!this.ripples.length)%20%7B%0A%20%20%20%20%20%20%20%20this._setAnimating(false)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20This%20conflicts%20with%20Element%23antimate().%0A%20%20%20%20%20*%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FElement%2Fanimate%0A%20%20%20%20%20*%20%40suppress%20%7BcheckTypes%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20animate%3A%20function%20()%20%7B%0A%20%20%20%20%20%20if%20(!this._animating)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20var%20index%3B%0A%20%20%20%20%20%20var%20ripple%3B%0A%0A%20%20%20%20%20%20for%20(index%20%3D%200%3B%20index%20%3C%20this.ripples.length%3B%20%2B%2Bindex)%20%7B%0A%20%20%20%20%20%20%20%20ripple%20%3D%20this.ripples%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20ripple.draw()%3B%0A%20%20%20%20%20%20%20%20this.%24.background.style.opacity%20%3D%20ripple.outerOpacity%3B%0A%0A%20%20%20%20%20%20%20%20if%20(ripple.isOpacityFullyDecayed%20%26%26%20!ripple.isRestingAtMaxRadius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.removeRipple(ripple)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!this.shouldKeepAnimating%20%26%26%20this.ripples.length%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20this.onAnimationComplete()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20window.requestAnimationFrame(this._boundAnimate)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20_onEnterKeydown%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this.uiDownAction()%3B%0A%20%20%20%20%20%20this.async(this.uiUpAction%2C%201)%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20_onSpaceKeydown%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this.uiDownAction()%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20_onSpaceKeyup%3A%20function%20()%20%7B%0A%20%20%20%20%20%20this.uiUpAction()%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20%2F%2F%20note%3A%20holdDown%20does%20not%20respect%20noink%20since%20it%20can%20be%20a%20focus%20based%0A%20%20%20%20%2F%2F%20effect.%0A%20%20%20%20_holdDownChanged%3A%20function%20(newVal%2C%20oldVal)%20%7B%0A%20%20%20%20%20%20if%20(oldVal%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(newVal)%20%7B%0A%20%20%20%20%20%20%20%20this.downAction()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.upAction()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20Fired%20when%20the%20animation%20finishes.%0A%20%20%20%20This%20is%20useful%20if%20you%20want%20to%20wait%20until%0A%20%20%20%20the%20ripple%20animation%20finishes%20to%20perform%20some%20action.%0A%20%20%20%20%20%40event%20transitionend%0A%20%20%20%20%40param%20%7B%7Bnode%3A%20Object%7D%7D%20detail%20Contains%20the%20animated%20node.%0A%20%20%20%20*%2F%0A%0A%20%20%7D)%3B%0A%7D)()%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpaper-ripple%2Fpaper-ripple.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,%2F**%0A%20*%20%60Polymer.PaperRippleBehavior%60%20dynamically%20implements%20a%20ripple%0A%20*%20when%20the%20element%20has%20focus%20via%20pointer%20or%20keyboard.%0A%20*%0A%20*%20NOTE%3A%20This%20behavior%20is%20intended%20to%20be%20used%20in%20conjunction%20with%20and%20after%0A%20*%20%60Polymer.IronButtonState%60%20and%20%60Polymer.IronControlState%60.%0A%20*%0A%20*%20%40polymerBehavior%20Polymer.PaperRippleBehavior%0A%20*%2F%0APolymer.PaperRippleBehavior%20%3D%20%7B%0A%20%20properties%3A%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20If%20true%2C%20the%20element%20will%20not%20produce%20a%20ripple%20effect%20when%20interacted%0A%20%20%20%20%20*%20with%20via%20the%20pointer.%0A%20%20%20%20%20*%2F%0A%20%20%20%20noink%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20observer%3A%20&#39;_noinkChanged&#39;%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40type%20%7BElement%7Cundefined%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_rippleContainer%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Object%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Ensures%20a%20%60%3Cpaper-ripple%3E%60%20element%20is%20available%20when%20the%20element%20is%0A%20%20%20*%20focused.%0A%20%20%20*%2F%0A%20%20_buttonStateChanged%3A%20function%20()%20%7B%0A%20%20%20%20if%20(this.focused)%20%7B%0A%20%20%20%20%20%20this.ensureRipple()%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20In%20addition%20to%20the%20functionality%20provided%20in%20%60IronButtonState%60%2C%20ensures%0A%20%20%20*%20a%20ripple%20effect%20is%20created%20when%20the%20element%20is%20in%20a%20%60pressed%60%20state.%0A%20%20%20*%2F%0A%20%20_downHandler%3A%20function%20(event)%20%7B%0A%20%20%20%20Polymer.IronButtonStateImpl._downHandler.call(this%2C%20event)%3B%0A%0A%20%20%20%20if%20(this.pressed)%20%7B%0A%20%20%20%20%20%20this.ensureRipple(event)%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Ensures%20this%20element%20contains%20a%20ripple%20effect.%20For%20startup%20efficiency%0A%20%20%20*%20the%20ripple%20effect%20is%20dynamically%20on%20demand%20when%20needed.%0A%20%20%20*%20%40param%20%7B!Event%3D%7D%20optTriggeringEvent%20(optional)%20event%20that%20triggered%20the%0A%20%20%20*%20ripple.%0A%20%20%20*%2F%0A%20%20ensureRipple%3A%20function%20(optTriggeringEvent)%20%7B%0A%20%20%20%20if%20(!this.hasRipple())%20%7B%0A%20%20%20%20%20%20this._ripple%20%3D%20this._createRipple()%3B%0A%20%20%20%20%20%20this._ripple.noink%20%3D%20this.noink%3B%0A%20%20%20%20%20%20var%20rippleContainer%20%3D%20this._rippleContainer%20%7C%7C%20this.root%3B%0A%0A%20%20%20%20%20%20if%20(rippleContainer)%20%7B%0A%20%20%20%20%20%20%20%20Polymer.dom(rippleContainer).appendChild(this._ripple)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(optTriggeringEvent)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20the%20event%20happened%20inside%20of%20the%20ripple%20container%0A%20%20%20%20%20%20%20%20%2F%2F%20Fall%20back%20to%20host%20instead%20of%20the%20root%20because%20distributed%20text%0A%20%20%20%20%20%20%20%20%2F%2F%20nodes%20are%20not%20valid%20event%20targets%0A%20%20%20%20%20%20%20%20var%20domContainer%20%3D%20Polymer.dom(this._rippleContainer%20%7C%7C%20this)%3B%0A%20%20%20%20%20%20%20%20var%20target%20%3D%20Polymer.dom(optTriggeringEvent).rootTarget%3B%0A%0A%20%20%20%20%20%20%20%20if%20(domContainer.deepContains(%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BNode%7D%20*%2F%0A%20%20%20%20%20%20%20%20target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._ripple.uiDownAction(optTriggeringEvent)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Returns%20the%20%60%3Cpaper-ripple%3E%60%20element%20used%20by%20this%20element%20to%20create%0A%20%20%20*%20ripple%20effects.%20The%20element&#39;s%20ripple%20is%20created%20on%20demand%2C%20when%0A%20%20%20*%20necessary%2C%20and%20calling%20this%20method%20will%20force%20the%0A%20%20%20*%20ripple%20to%20be%20created.%0A%20%20%20*%2F%0A%20%20getRipple%3A%20function%20()%20%7B%0A%20%20%20%20this.ensureRipple()%3B%0A%20%20%20%20return%20this._ripple%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Returns%20true%20if%20this%20element%20currently%20contains%20a%20ripple%20effect.%0A%20%20%20*%20%40return%20%7Bboolean%7D%0A%20%20%20*%2F%0A%20%20hasRipple%3A%20function%20()%20%7B%0A%20%20%20%20return%20Boolean(this._ripple)%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20Create%20the%20element&#39;s%20ripple%20effect%20via%20creating%20a%20%60%3Cpaper-ripple%3E%60.%0A%20%20%20*%20Override%20this%20method%20to%20customize%20the%20ripple%20element.%0A%20%20%20*%20%40return%20%7B!PaperRippleElement%7D%20Returns%20a%20%60%3Cpaper-ripple%3E%60%20element.%0A%20%20%20*%2F%0A%20%20_createRipple%3A%20function%20()%20%7B%0A%20%20%20%20var%20element%20%3D%0A%20%20%20%20%2F**%20%40type%20%7B!PaperRippleElement%7D%20*%2F%0A%20%20%20%20document.createElement(&#39;paper-ripple&#39;)%3B%0A%20%20%20%20return%20element%3B%0A%20%20%7D%2C%0A%20%20_noinkChanged%3A%20function%20(noink)%20%7B%0A%20%20%20%20if%20(this.hasRipple())%20%7B%0A%20%20%20%20%20%20this._ripple.noink%20%3D%20noink%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpaper-behaviors%2Fpaper-ripple-behavior.html.js%0A"></script></link><script src="data:text/javascript;charset=utf-8,%2F**%20%40polymerBehavior%20Polymer.PaperButtonBehavior%20*%2F%0APolymer.PaperButtonBehaviorImpl%20%3D%20%7B%0A%20%20properties%3A%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20The%20z-depth%20of%20this%20element%2C%20from%200-5.%20Setting%20to%200%20will%20remove%20the%0A%20%20%20%20%20*%20shadow%2C%20and%20each%20increasing%20number%20greater%20than%200%20will%20be%20%22deeper%22%0A%20%20%20%20%20*%20than%20the%20last.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40attribute%20elevation%0A%20%20%20%20%20*%20%40type%20number%0A%20%20%20%20%20*%20%40default%201%0A%20%20%20%20%20*%2F%0A%20%20%20%20elevation%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Number%2C%0A%20%20%20%20%20%20reflectToAttribute%3A%20true%2C%0A%20%20%20%20%20%20readOnly%3A%20true%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20observers%3A%20%5B&#39;_calculateElevation(focused%2C%20disabled%2C%20active%2C%20pressed%2C%20receivedFocusFromKeyboard)&#39;%2C%20&#39;_computeKeyboardClass(receivedFocusFromKeyboard)&#39;%5D%2C%0A%20%20hostAttributes%3A%20%7B%0A%20%20%20%20role%3A%20&#39;button&#39;%2C%0A%20%20%20%20tabindex%3A%20&#39;0&#39;%2C%0A%20%20%20%20animated%3A%20true%0A%20%20%7D%2C%0A%20%20_calculateElevation%3A%20function%20()%20%7B%0A%20%20%20%20var%20e%20%3D%201%3B%0A%0A%20%20%20%20if%20(this.disabled)%20%7B%0A%20%20%20%20%20%20e%20%3D%200%3B%0A%20%20%20%20%7D%20else%20if%20(this.active%20%7C%7C%20this.pressed)%20%7B%0A%20%20%20%20%20%20e%20%3D%204%3B%0A%20%20%20%20%7D%20else%20if%20(this.receivedFocusFromKeyboard)%20%7B%0A%20%20%20%20%20%20e%20%3D%203%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20this._setElevation(e)%3B%0A%20%20%7D%2C%0A%20%20_computeKeyboardClass%3A%20function%20(receivedFocusFromKeyboard)%20%7B%0A%20%20%20%20this.toggleClass(&#39;keyboard-focus&#39;%2C%20receivedFocusFromKeyboard)%3B%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20In%20addition%20to%20%60IronButtonState%60%20behavior%2C%20when%20space%20key%20goes%20down%2C%0A%20%20%20*%20create%20a%20ripple%20down%20effect.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!KeyboardEvent%7D%20event%20.%0A%20%20%20*%2F%0A%20%20_spaceKeyDownHandler%3A%20function%20(event)%20%7B%0A%20%20%20%20Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this%2C%20event)%3B%20%2F%2F%20Ensure%20that%20there%20is%20at%20most%20one%20ripple%20when%20the%20space%20key%20is%20held%20down.%0A%0A%0A%20%20%20%20if%20(this.hasRipple()%20%26%26%20this.getRipple().ripples.length%20%3C%201)%20%7B%0A%20%20%20%20%20%20this._ripple.uiDownAction()%3B%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%0A%20%20%2F**%0A%20%20%20*%20In%20addition%20to%20%60IronButtonState%60%20behavior%2C%20when%20space%20key%20goes%20up%2C%0A%20%20%20*%20create%20a%20ripple%20up%20effect.%0A%20%20%20*%0A%20%20%20*%20%40param%20%7B!KeyboardEvent%7D%20event%20.%0A%20%20%20*%2F%0A%20%20_spaceKeyUpHandler%3A%20function%20(event)%20%7B%0A%20%20%20%20Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this%2C%20event)%3B%0A%0A%20%20%20%20if%20(this.hasRipple())%20%7B%0A%20%20%20%20%20%20this._ripple.uiUpAction()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%3B%0A%2F**%20%40polymerBehavior%20*%2F%0A%0APolymer.PaperButtonBehavior%20%3D%20%5BPolymer.IronButtonState%2C%20Polymer.IronControlState%2C%20Polymer.PaperRippleBehavior%2C%20Polymer.PaperButtonBehaviorImpl%5D%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpaper-behaviors%2Fpaper-button-behavior.html.js%0A"></script></link><link rel="import" href="https://www.library.virginia.edu/bower_components/paper-styles/element-styles/paper-material-styles.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/paper-styles/shadow.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/polymer/polymer.html" import-dependency=""><custom-style><style is="custom-style">html {
  --shadow-transition_-_transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);;--shadow-none_-_box-shadow: none;;--shadow-elevation-2dp_-_box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                    0 1px 5px 0 rgba(0, 0, 0, 0.12),
                    0 3px 1px -2px rgba(0, 0, 0, 0.2);;--shadow-elevation-3dp_-_box-shadow: 0 3px 4px 0 rgba(0, 0, 0, 0.14),
                    0 1px 8px 0 rgba(0, 0, 0, 0.12),
                    0 3px 3px -2px rgba(0, 0, 0, 0.4);;--shadow-elevation-4dp_-_box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);;--shadow-elevation-6dp_-_box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14),
                    0 1px 18px 0 rgba(0, 0, 0, 0.12),
                    0 3px 5px -1px rgba(0, 0, 0, 0.4);;--shadow-elevation-8dp_-_box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),
                    0 3px 14px 2px rgba(0, 0, 0, 0.12),
                    0 5px 5px -3px rgba(0, 0, 0, 0.4);;--shadow-elevation-12dp_-_box-shadow: 0 12px 16px 1px rgba(0, 0, 0, 0.14),
                    0 4px 22px 3px rgba(0, 0, 0, 0.12),
                    0 6px 7px -4px rgba(0, 0, 0, 0.4);;--shadow-elevation-16dp_-_box-shadow: 0 16px 24px 2px rgba(0, 0, 0, 0.14),
                    0  6px 30px 5px rgba(0, 0, 0, 0.12),
                    0  8px 10px -5px rgba(0, 0, 0, 0.4);;--shadow-elevation-24dp_-_box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14),
                    0 9px 46px 8px rgba(0, 0, 0, 0.12),
                    0 11px 15px -7px rgba(0, 0, 0, 0.4);;
}

</style></custom-style></link><dom-module id="paper-material-styles"><template></template></dom-module></link><dom-module id="paper-button"><template strip-whitespace=""></template><script src="data:text/javascript;charset=utf-8,Polymer(%7B%0A%20%20is%3A%20&#39;paper-button&#39;%2C%0A%20%20behaviors%3A%20%5BPolymer.PaperButtonBehavior%5D%2C%0A%20%20properties%3A%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20If%20true%2C%20the%20button%20should%20be%20styled%20with%20a%20shadow.%0A%20%20%20%20%20*%2F%0A%20%20%20%20raised%3A%20%7B%0A%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20reflectToAttribute%3A%20true%2C%0A%20%20%20%20%20%20value%3A%20false%2C%0A%20%20%20%20%20%20observer%3A%20&#39;_calculateElevation&#39;%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20_calculateElevation%3A%20function%20()%20%7B%0A%20%20%20%20if%20(!this.raised)%20%7B%0A%20%20%20%20%20%20this._setElevation(0)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F**%0A%20%20Fired%20when%20the%20animation%20finishes.%0A%20%20This%20is%20useful%20if%20you%20want%20to%20wait%20until%0A%20%20the%20ripple%20animation%20finishes%20to%20perform%20some%20action.%0A%20%20%20%40event%20transitionend%0A%20%20Event%20param%3A%20%7B%7Bnode%3A%20Object%7D%7D%20detail%20Contains%20the%20animated%20node.%0A%20%20*%2F%0A%0A%7D)%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fpaper-button%2Fpaper-button.html.js%0A"></script></dom-module></link><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-flex-layout/iron-flex-layout.html" import-dependency=""><link rel="import" href="https://www.library.virginia.edu/bower_components/iron-icon/iron-icon.html" import-dependency=""><dom-module id="uvalib-simple-search-box"><template></template><script src="data:text/javascript;charset=utf-8,%2F**%0A%20*%20%60uvalib-simple-search-box%60%0A%20*%20Search%20Box%20for%20UVA%20Library%20pages%0A%20*%0A%20*%20%40customElement%0A%20*%20%40polymer%0A%20*%20%40demo%20demo%2Findex.html%0A%20*%2F%0Aclass%20UvalibSimpleSearchBox%20extends%20Polymer.Element%20%7B%0A%20%20static%20get%20is()%20%7B%0A%20%20%20%20return%20&#39;uvalib-simple-search-box&#39;%3B%0A%20%20%7D%0A%0A%20%20static%20get%20properties()%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%2F*%20The%20Label%20read%20aloud%20to%20screen%20readers%20*%2F%0A%20%20%20%20%20%20label%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20%22Search%22%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20emptyValue%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20null%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20queryName%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20%22q%22%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20action%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20null%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20_queryValue%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20%22%22%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20value%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20notify%3A%20true%2C%0A%20%20%20%20%20%20%20%20value%3A%20null%2C%0A%20%20%20%20%20%20%20%20observer%3A%20&#39;bindQueryValue&#39;%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20submitted%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20hiddenInputs%3A%20Array%2C%0A%20%20%20%20%20%20placeholder%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20%22Search%20terms%20here%22%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%20Set%20this%20to%20true%20when%20you%20want%20the%20links%20to%20be%20relative%20(when%20used%20in%20library.virginia.edu)%20**%2F%0A%20%20%20%20%20%20relativeLinks%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20searchAgainOption%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20ready()%20%7B%0A%20%20%20%20super.ready()%3B%0A%20%20%20%20this.shadowRoot.querySelector(&#39;form&#39;).addEventListener(&#39;keypress&#39;%2C%20this._checkForEnter.bind(this))%3B%0A%20%20%7D%0A%0A%20%20changeFocusToCatalogAdvanced()%20%7B%0A%20%20%20%20this.%24.catalogAdv.focus()%3B%0A%20%20%7D%0A%0A%20%20bindQueryValue()%20%7B%0A%20%20%20%20this._queryValue%20%3D%20this.processQueryValue(this.value)%3B%0A%20%20%7D%0A%0A%20%20processQueryValue(value)%20%7B%0A%20%20%20%20return%20value%3B%0A%20%20%7D%0A%0A%20%20submitSearch()%20%7B%0A%20%20%20%20this.submitted%20%3D%20true%3B%0A%20%20%20%20this.value%20%3D%20this.value%20%3D%3D%20%22%22%20%7C%7C%20this.value%20%3D%3D%20null%20%3F%20this.emptyValue%20%3A%20this.value%3B%0A%20%20%20%20if%20(this.value%20%26%26%20this.searchAgainOption)%20this.shadowRoot.getElementById(&#39;reset&#39;).focus()%3B%0A%0A%20%20%20%20if%20(this.action)%20%7B%0A%20%20%20%20%20%20this.%24.q1.setAttribute(%22disabled%22%2C%20%22%22)%3B%0A%20%20%20%20%20%20this.%24.searchForm.submit()%3B%0A%20%20%20%20%20%20this.%24.q1.setAttribute(%22disabled%22%2C%20null)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20console.log(&#39;submitted&#39;)%3B%0A%20%20%20%20%20%20this.dispatchEvent(new%20CustomEvent(&#39;submit&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20detail%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20value%3A%20this.value%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D))%3B%20%2F%2F%20alert%20analytics%20that%20we%20have%20a%20submission%0A%0A%20%20%20%20%20%20this.dispatchEvent(new%20CustomEvent(&#39;uvalib-analytics-event&#39;%2C%20%7B%0A%20%20%20%20%20%20%20%20bubbles%3A%20true%2C%0A%20%20%20%20%20%20%20%20composed%3A%20true%2C%0A%20%20%20%20%20%20%20%20detail%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20track%3A%20%5B&#39;simple-search-box&#39;%2C%20&#39;submitted&#39;%2C%20this.value%20%3F%20this.value%20%3A%20%22%22%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D))%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20resetSearch()%20%7B%0A%20%20%20%20this.value%20%3D%20null%3B%0A%20%20%20%20this.shadowRoot.getElementById(&#39;q1&#39;).focus()%3B%0A%20%20%7D%0A%0A%20%20_checkForEnter(e)%20%7B%0A%20%20%20%20%2F%2F%20check%20if%20&#39;enter&#39;%20was%20pressed%0A%20%20%20%20if%20(e.keyCode%20%3D%3D%3D%2013)%20%7B%0A%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20var%20butt%20%3D%20this.shadowRoot.querySelector(&#39;paper-button&#39;)%3B%0A%20%20%20%20%20%20butt.focus()%3B%0A%20%20%20%20%20%20butt.click()%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20_showResetButton(searchAgainOption%2C%20submitted%2C%20value)%20%7B%0A%20%20%20%20return%20searchAgainOption%20%26%26%20submitted%20%26%26%20!!value%3B%0A%20%20%7D%0A%0A%7D%0A%0Awindow.customElements.define(UvalibSimpleSearchBox.is%2C%20UvalibSimpleSearchBox)%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fuvalib-search-box%2Fuvalib-simple-search-box.html.js%0A"></script></dom-module></link><dom-module id="uvalib-search-box"><template></template><script src="data:text/javascript;charset=utf-8,%2F**%0A%20*%20%60uvalib-search-box%60%0A%20*%20Search%20Box%20for%20UVA%20Library%20pages%0A%20*%0A%20*%20%40customElement%0A%20*%20%40polymer%0A%20*%20%40demo%20demo%2Findex.html%0A%20*%2F%0Aclass%20UvalibSearchBox%20extends%20Polymer.Element%20%7B%0A%20%20static%20get%20is()%20%7B%0A%20%20%20%20return%20&#39;uvalib-search-box&#39;%3B%0A%20%20%7D%0A%0A%20%20static%20get%20properties()%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20v4%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20true%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20_virgoSearchUrl%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20%22https%3A%2F%2Fsearch.lib.virginia.edu%2Fcatalog%22%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20_virgo4SearchUrl%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20%22https%3A%2F%2Fsearch.lib.virginia.edu%2Fsearch%22%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20_query%3A%20String%2C%0A%20%20%20%20%20%20placeholder%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20%22Search%20Virgo%20for%20books%2C%20articles%2C%20digital%20materials%2C%20and%20more.%22%0A%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%2F**%20Set%20this%20to%20true%20when%20you%20want%20the%20links%20to%20be%20relative%20(when%20used%20in%20library.virginia.edu)%20**%2F%0A%20%20%20%20%20%20relativeLinks%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20noLinks%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Boolean%2C%0A%20%20%20%20%20%20%20%20value%3A%20false%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20_domain%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20computed%3A%20%22_makeLinkDomain(relativeLinks)%22%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20_hiddenInputs%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Array%2C%0A%20%20%20%20%20%20%20%20value%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%5B%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22catalog_select%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22value%22%3A%20%22all%22%0A%20%20%20%20%20%20%20%20%20%20%7D%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20hiddenInputsV4%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Array%2C%0A%20%20%20%20%20%20%20%20value%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%5B%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22mode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22value%22%3A%20%22basic%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22scope%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22value%22%3A%20%22all%22%0A%20%20%20%20%20%20%20%20%20%20%7D%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20hiddenInputs%3A%20Array%2C%0A%20%20%20%20%20%20_hi%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20Array%2C%0A%20%20%20%20%20%20%20%20computed%3A%20&#39;_mergehiddenInputs(_hiddenInputs%2C%20hiddenInputs%2C%20v4%2C%20hiddenInputsV4)&#39;%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20v4QueryWrap%3A%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20String%2C%0A%20%20%20%20%20%20%20%20value%3A%20%22keyword%3A%20%7B***%7D%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20ready()%20%7B%0A%20%20%20%20super.ready()%3B%0A%0A%20%20%20%20this.%24.simplesearch.processQueryValue%20%3D%20value%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(value%20%3D%3D%20null)%20value%20%3D%20%22%22%3B%0A%20%20%20%20%20%20const%20keyword%20%3D%20value.replace(%2F%5B%7B%7D%5D%2Fg%2C%20&#39;&#39;)%3B%0A%20%20%20%20%20%20return%20this.v4%20%3F%20this.v4QueryWrap.replace(%22***%22%2C%20keyword)%20%3A%20value%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20this.%24.simplesearch.bindQueryValue()%3B%0A%20%20%7D%0A%0A%20%20_mergehiddenInputs(_hiddenInputs%2C%20hiddenInputs%2C%20v4%2C%20hiddenInputsV4)%20%7B%0A%20%20%20%20if%20(!hiddenInputs%20%26%26%20!v4%20%26%26%20_hiddenInputs)%20return%20_hiddenInputs%3Belse%20if%20(!hiddenInputs%20%26%26%20v4%20%26%26%20hiddenInputsV4)%20return%20hiddenInputsV4%3Belse%20%7B%0A%20%20%20%20%20%20var%20merged%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20_hiddenInputs.forEach(i%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20merged%5Bi.name%5D%20%3D%20i.value%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20hiddenInputs.forEach(i%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20merged%5Bi.name%5D%20%3D%20i.value%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20var%20result%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20for%20(name%20in%20merged)%20%7B%0A%20%20%20%20%20%20%20%20result.push(%7B%0A%20%20%20%20%20%20%20%20%20%20name%3A%20name%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20merged%5Bname%5D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5B%5D%3B%0A%20%20%7D%0A%0A%20%20changeFocusToCatalogAdvanced()%20%7B%0A%20%20%20%20this.%24.catalogAdv.focus()%3B%0A%20%20%7D%0A%0A%20%20submitCatalogSearch()%20%7B%0A%20%20%20%20this.%24.virgoSearchForm.submit()%3B%0A%20%20%7D%0A%0A%20%20_checkForEnterVirgo(e)%20%7B%0A%20%20%20%20%2F%2F%20check%20if%20&#39;enter&#39;%20was%20pressed%0A%20%20%20%20if%20(e.keyCode%20%3D%3D%3D%2013)%20%7B%0A%20%20%20%20%20%20this.submitCatalogSearch()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20_makeLinkDomain(relLinks)%20%7B%0A%20%20%20%20return%20relLinks%20%3F%20%22%22%20%3A%20%22https%3A%2F%2Fwww.library.virginia.edu%22%3B%0A%20%20%7D%0A%0A%20%20_getSearchURL()%20%7B%0A%20%20%20%20return%20this.v4%20%3F%20this._virgo4SearchUrl%20%3A%20this._virgoSearchUrl%3B%0A%20%20%7D%0A%0A%7D%0A%0Awindow.customElements.define(UvalibSearchBox.is%2C%20UvalibSearchBox)%3B%0A%2F%2F%23%20sourceURL%3Dhttps%3A%2F%2Fwww.library.virginia.edu%2Fbower_components%2Fuvalib-search-box%2Fuvalib-search-box.html.js%0A"></script></dom-module></link>
<style type="text/css">.skipTo{padding:.5em;position:absolute;background:transparent;color:#000;-webkit-transition:top .5s ease-out,background .5s linear;-moz-transition:top .5s ease-out,background .5s linear;-o-transition:top .5s ease-out,background .5s linear;transition:top .5s ease-out,background .5s linear}.skipTo:focus{position:absolute;top:0;left:0;background:#ccc;z-index:1000;text-decoration:underline;-webkit-transition:top .1s ease-in,background .3s linear;-moz-transition:top .1s ease-in,background .3s linear;-o-transition:top .1s ease-in,background .3s linear;transition:top .1s ease-in,background .3s linear}.onFocus{top:-5em;left:0}.onLoad{top:0;left:0;background:#ccc}.dropup,.dropMenu{position:relative}.dropMenu-toggle{*margin-bottom:-3px}.dropMenu-toggle:active,.open .dropMenu-toggle{outline:0}#skipToMenu .caret{display:inline-block;width:0;height:0;vertical-align:top;border-top:4px solid #000;border-right:4px solid transparent;border-left:4px solid transparent;content:'';pointer-events:none}#skipToMenu .dropMenu .caret{margin-top:8px;margin-left:2px}.dropMenu-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;list-style:none;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);*border-right-width:2px;*border-bottom-width:2px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.dropMenu-menu.pull-right{right:0;left:auto}.dropMenu-menu .divider{*width:100%;height:1px;margin:9px 1px;*margin:-5px 0 5px;overflow:hidden;background-color:#e5e5e5;border-bottom:1px solid #fff}.dropMenu-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:normal;line-height:20px;color:#333;white-space:nowrap;text-decoration:none}.dropMenu-menu>li>a.po-h1{font-size:110%}.dropMenu-menu>li>a.po-h2{padding-left:28px}.dropMenu-menu>li>a.po-h3{padding-left:36px}.dropMenu-menu>li>a.po-h4{padding-left:44px}.dropMenu-menu>li>a.po-h5{padding-left:52px}.dropMenu-menu>li>a.po-6{padding-left:60px}.dropMenu-menu>li[role=separator]{padding-left:20px;margin-top:9px;font-weight:bold;border-bottom:thin solid black}.dropMenu-menu>li>a:hover,.dropMenu-menu>li>a:focus,.dropMenu-submenu:hover>a,.dropMenu-submenu:focus>a{text-decoration:none;color:#fff;background-color:#0081c2;background-image:-moz-linear-gradient(top,#08c,#0077b3);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#0077b3));background-image:-webkit-linear-gradient(top,#08c,#0077b3);background-image:-o-linear-gradient(top,#08c,#0077b3);background-image:linear-gradient(to bottom,#08c,#0077b3);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0077b3',GradientType=0)}.dropMenu-menu>.active>a,.dropMenu-menu>.active>a:hover,.dropMenu-menu>.active>a:focus{color:#fff;text-decoration:none;outline:0;background-color:#0081c2;background-image:-moz-linear-gradient(top,#08c,#0077b3);background-image:-webkit-gradient(linear,0 0,0 100%,from(#08c),to(#0077b3));background-image:-webkit-linear-gradient(top,#08c,#0077b3);background-image:-o-linear-gradient(top,#08c,#0077b3);background-image:linear-gradient(to bottom,#08c,#0077b3);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0077b3',GradientType=0)}.dropMenu-menu>.disabled>a,.dropMenu-menu>.disabled>a:hover,.dropMenu-menu>.disabled>a:focus{color:#999}.dropMenu-menu>.disabled>a:hover,.dropMenu-menu>.disabled>a:focus{text-decoration:none;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);cursor:default}.open{*z-index:1000}.open>.dropMenu-menu{display:block}.pull-right>.dropMenu-menu{right:0;left:auto}#skipToMenu .dropup .caret,#skipToMenu .navbar-fixed-bottom .dropMenu .caret{border-top:0;border-bottom:4px solid #000;content:''}#skipToMenu .dropup .dropMenu-menu,#skipToMenu .navbar-fixed-bottom .dropMenu .dropMenu-menu{top:auto;bottom:100%;margin-bottom:1px}.dropMenu-submenu{position:relative}.dropMenu-submenu>.dropMenu-menu{top:0;left:100%;margin-top:-6px;margin-left:-1px;-webkit-border-radius:0 6px 6px 6px;-moz-border-radius:0 6px 6px 6px;border-radius:0 6px 6px 6px}.dropMenu-submenu:hover>.dropMenu-menu{display:block}.dropup .dropMenu-submenu>.dropMenu-menu{top:auto;bottom:0;margin-top:0;margin-bottom:-2px;-webkit-border-radius:5px 5px 5px 0;-moz-border-radius:5px 5px 5px 0;border-radius:5px 5px 5px 0}.dropMenu-submenu>a:after{display:block;content:' ';float:right;width:0;height:0;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;border-left-color:#ccc;margin-top:5px;margin-right:-10px}.dropMenu-submenu:hover>a:after{border-left-color:#fff}.dropMenu-submenu.pull-left{float:none}.dropMenu-submenu.pull-left>.dropMenu-menu{left:-100%;margin-left:10px;-webkit-border-radius:6px 0 6px 6px;-moz-border-radius:6px 0 6px 6px;border-radius:6px 0 6px 6px}.dropMenu .dropMenu-menu .nav-header{padding-left:20px;padding-right:20px}</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.tk-adobe-caslon-pro{font-family:"adobe-caslon-pro",serif;}.tk-franklin-gothic-urw{font-family:"franklin-gothic-urw",sans-serif;}.tk-bodoni-urw{font-family:"bodoni-urw",sans-serif;}.tk-franklin-gothic-ext-comp-urw{font-family:"franklin-gothic-ext-comp-urw",sans-serif;}.tk-franklin-gothic-urw-cond{font-family:"franklin-gothic-urw-cond",sans-serif;}.tk-franklin-gothic-urw-comp{font-family:"franklin-gothic-urw-comp",sans-serif;}</style><style type="text/css">@font-face{font-family:tk-adobe-caslon-pro-n7;src:url(https://use.typekit.net/af/ed9e57/000000000000000000012d65/27/l?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/ed9e57/000000000000000000012d65/27/d?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/ed9e57/000000000000000000012d65/27/a?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:tk-adobe-caslon-pro-n6;src:url(https://use.typekit.net/af/68efc1/000000000000000000012d69/27/l?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n6&v=3) format("woff2"),url(https://use.typekit.net/af/68efc1/000000000000000000012d69/27/d?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n6&v=3) format("woff"),url(https://use.typekit.net/af/68efc1/000000000000000000012d69/27/a?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n6&v=3) format("opentype");font-weight:600;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-n4;src:url(https://use.typekit.net/af/9cb78a/0000000000000000000118ad/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/9cb78a/0000000000000000000118ad/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/9cb78a/0000000000000000000118ad/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-n5;src:url(https://use.typekit.net/af/2e6f07/000000000000000000011ce6/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("woff2"),url(https://use.typekit.net/af/2e6f07/000000000000000000011ce6/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("woff"),url(https://use.typekit.net/af/2e6f07/000000000000000000011ce6/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("opentype");font-weight:500;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-n7;src:url(https://use.typekit.net/af/b825af/0000000000000000000118b1/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/b825af/0000000000000000000118b1/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/b825af/0000000000000000000118b1/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-n9;src:url(https://use.typekit.net/af/c7b613/0000000000000000000118b3/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n9&v=3) format("woff2"),url(https://use.typekit.net/af/c7b613/0000000000000000000118b3/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n9&v=3) format("woff"),url(https://use.typekit.net/af/c7b613/0000000000000000000118b3/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n9&v=3) format("opentype");font-weight:900;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-i4;src:url(https://use.typekit.net/af/07d425/0000000000000000000118ae/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/07d425/0000000000000000000118ae/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/07d425/0000000000000000000118ae/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-i5;src:url(https://use.typekit.net/af/a5188d/0000000000000000000118b0/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i5&v=3) format("woff2"),url(https://use.typekit.net/af/a5188d/0000000000000000000118b0/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i5&v=3) format("woff"),url(https://use.typekit.net/af/a5188d/0000000000000000000118b0/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i5&v=3) format("opentype");font-weight:500;font-style:italic;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-i7;src:url(https://use.typekit.net/af/9a7284/0000000000000000000118b2/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff2"),url(https://use.typekit.net/af/9a7284/0000000000000000000118b2/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff"),url(https://use.typekit.net/af/9a7284/0000000000000000000118b2/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("opentype");font-weight:700;font-style:italic;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-i9;src:url(https://use.typekit.net/af/5b1404/0000000000000000000118b4/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i9&v=3) format("woff2"),url(https://use.typekit.net/af/5b1404/0000000000000000000118b4/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i9&v=3) format("woff"),url(https://use.typekit.net/af/5b1404/0000000000000000000118b4/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i9&v=3) format("opentype");font-weight:900;font-style:italic;font-display:auto;}@font-face{font-family:tk-bodoni-urw-n4;src:url(https://use.typekit.net/af/4dc82a/000000000000000077359e9b/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/4dc82a/000000000000000077359e9b/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/4dc82a/000000000000000077359e9b/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:tk-bodoni-urw-n7;src:url(https://use.typekit.net/af/4d7df9/000000000000000077359ea3/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/4d7df9/000000000000000077359ea3/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/4d7df9/000000000000000077359ea3/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:tk-bodoni-urw-i4;src:url(https://use.typekit.net/af/cb5984/000000000000000077359eab/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/cb5984/000000000000000077359eab/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/cb5984/000000000000000077359eab/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;font-display:auto;}@font-face{font-family:tk-bodoni-urw-i7;src:url(https://use.typekit.net/af/f36f8c/000000000000000077359eb0/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i7&v=3) format("woff2"),url(https://use.typekit.net/af/f36f8c/000000000000000077359eb0/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i7&v=3) format("woff"),url(https://use.typekit.net/af/f36f8c/000000000000000077359eb0/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i7&v=3) format("opentype");font-weight:700;font-style:italic;font-display:auto;}@font-face{font-family:tk-bodoni-urw-i8;src:url(https://use.typekit.net/af/755bca/000000000000000077359eb1/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i8&v=3) format("woff2"),url(https://use.typekit.net/af/755bca/000000000000000077359eb1/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i8&v=3) format("woff"),url(https://use.typekit.net/af/755bca/000000000000000077359eb1/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i8&v=3) format("opentype");font-weight:800;font-style:italic;font-display:auto;}@font-face{font-family:tk-franklin-gothic-ext-com-n4;src:url(https://use.typekit.net/af/8d9b32/0000000000000000000118bf/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/8d9b32/0000000000000000000118bf/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/8d9b32/0000000000000000000118bf/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-ext-com-n7;src:url(https://use.typekit.net/af/0de2a8/0000000000000000000118c0/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/0de2a8/0000000000000000000118c0/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/0de2a8/0000000000000000000118c0/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-con-n4;src:url(https://use.typekit.net/af/82db8a/000000000000000077359dfa/30/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/82db8a/000000000000000077359dfa/30/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/82db8a/000000000000000077359dfa/30/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-con-n7;src:url(https://use.typekit.net/af/a2031c/0000000000000000000118b9/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/a2031c/0000000000000000000118b9/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/a2031c/0000000000000000000118b9/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-con-i4;src:url(https://use.typekit.net/af/2d0302/0000000000000000000118b6/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/2d0302/0000000000000000000118b6/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/2d0302/0000000000000000000118b6/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-con-i7;src:url(https://use.typekit.net/af/ce6b1d/0000000000000000000118ba/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff2"),url(https://use.typekit.net/af/ce6b1d/0000000000000000000118ba/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff"),url(https://use.typekit.net/af/ce6b1d/0000000000000000000118ba/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("opentype");font-weight:700;font-style:italic;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-com-n4;src:url(https://use.typekit.net/af/63b6fe/0000000000000000000118bb/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/63b6fe/0000000000000000000118bb/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/63b6fe/0000000000000000000118bb/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-com-n7;src:url(https://use.typekit.net/af/7bc359/0000000000000000000118bd/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/7bc359/0000000000000000000118bd/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/7bc359/0000000000000000000118bd/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-com-i4;src:url(https://use.typekit.net/af/01ad8b/0000000000000000000118bc/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/01ad8b/0000000000000000000118bc/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/01ad8b/0000000000000000000118bc/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;font-display:auto;}@font-face{font-family:tk-franklin-gothic-urw-com-i7;src:url(https://use.typekit.net/af/e5e7a7/0000000000000000000118be/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff2"),url(https://use.typekit.net/af/e5e7a7/0000000000000000000118be/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff"),url(https://use.typekit.net/af/e5e7a7/0000000000000000000118be/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("opentype");font-weight:700;font-style:italic;font-display:auto;}</style><style type="text/css">@font-face{font-family:adobe-caslon-pro;src:url(https://use.typekit.net/af/ed9e57/000000000000000000012d65/27/l?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/ed9e57/000000000000000000012d65/27/d?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/ed9e57/000000000000000000012d65/27/a?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:adobe-caslon-pro;src:url(https://use.typekit.net/af/68efc1/000000000000000000012d69/27/l?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n6&v=3) format("woff2"),url(https://use.typekit.net/af/68efc1/000000000000000000012d69/27/d?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n6&v=3) format("woff"),url(https://use.typekit.net/af/68efc1/000000000000000000012d69/27/a?primer=388f68b35a7cbf1ee3543172445c23e26935269fadd3b392a13ac7b2903677eb&fvd=n6&v=3) format("opentype");font-weight:600;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw;src:url(https://use.typekit.net/af/9cb78a/0000000000000000000118ad/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/9cb78a/0000000000000000000118ad/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/9cb78a/0000000000000000000118ad/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw;src:url(https://use.typekit.net/af/2e6f07/000000000000000000011ce6/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("woff2"),url(https://use.typekit.net/af/2e6f07/000000000000000000011ce6/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("woff"),url(https://use.typekit.net/af/2e6f07/000000000000000000011ce6/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n5&v=3) format("opentype");font-weight:500;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw;src:url(https://use.typekit.net/af/b825af/0000000000000000000118b1/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/b825af/0000000000000000000118b1/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/b825af/0000000000000000000118b1/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw;src:url(https://use.typekit.net/af/c7b613/0000000000000000000118b3/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n9&v=3) format("woff2"),url(https://use.typekit.net/af/c7b613/0000000000000000000118b3/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n9&v=3) format("woff"),url(https://use.typekit.net/af/c7b613/0000000000000000000118b3/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n9&v=3) format("opentype");font-weight:900;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw;src:url(https://use.typekit.net/af/07d425/0000000000000000000118ae/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/07d425/0000000000000000000118ae/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/07d425/0000000000000000000118ae/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;font-display:auto;}@font-face{font-family:franklin-gothic-urw;src:url(https://use.typekit.net/af/a5188d/0000000000000000000118b0/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i5&v=3) format("woff2"),url(https://use.typekit.net/af/a5188d/0000000000000000000118b0/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i5&v=3) format("woff"),url(https://use.typekit.net/af/a5188d/0000000000000000000118b0/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i5&v=3) format("opentype");font-weight:500;font-style:italic;font-display:auto;}@font-face{font-family:franklin-gothic-urw;src:url(https://use.typekit.net/af/9a7284/0000000000000000000118b2/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff2"),url(https://use.typekit.net/af/9a7284/0000000000000000000118b2/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff"),url(https://use.typekit.net/af/9a7284/0000000000000000000118b2/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("opentype");font-weight:700;font-style:italic;font-display:auto;}@font-face{font-family:franklin-gothic-urw;src:url(https://use.typekit.net/af/5b1404/0000000000000000000118b4/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i9&v=3) format("woff2"),url(https://use.typekit.net/af/5b1404/0000000000000000000118b4/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i9&v=3) format("woff"),url(https://use.typekit.net/af/5b1404/0000000000000000000118b4/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i9&v=3) format("opentype");font-weight:900;font-style:italic;font-display:auto;}@font-face{font-family:bodoni-urw;src:url(https://use.typekit.net/af/4dc82a/000000000000000077359e9b/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/4dc82a/000000000000000077359e9b/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/4dc82a/000000000000000077359e9b/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:bodoni-urw;src:url(https://use.typekit.net/af/4d7df9/000000000000000077359ea3/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/4d7df9/000000000000000077359ea3/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/4d7df9/000000000000000077359ea3/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:bodoni-urw;src:url(https://use.typekit.net/af/cb5984/000000000000000077359eab/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/cb5984/000000000000000077359eab/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/cb5984/000000000000000077359eab/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;font-display:auto;}@font-face{font-family:bodoni-urw;src:url(https://use.typekit.net/af/f36f8c/000000000000000077359eb0/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i7&v=3) format("woff2"),url(https://use.typekit.net/af/f36f8c/000000000000000077359eb0/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i7&v=3) format("woff"),url(https://use.typekit.net/af/f36f8c/000000000000000077359eb0/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i7&v=3) format("opentype");font-weight:700;font-style:italic;font-display:auto;}@font-face{font-family:bodoni-urw;src:url(https://use.typekit.net/af/755bca/000000000000000077359eb1/30/l?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i8&v=3) format("woff2"),url(https://use.typekit.net/af/755bca/000000000000000077359eb1/30/d?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i8&v=3) format("woff"),url(https://use.typekit.net/af/755bca/000000000000000077359eb1/30/a?primer=81a69539b194230396845be9681d114557adfb35f4cccc679c164afb4aa47365&fvd=i8&v=3) format("opentype");font-weight:800;font-style:italic;font-display:auto;}@font-face{font-family:franklin-gothic-ext-comp-urw;src:url(https://use.typekit.net/af/8d9b32/0000000000000000000118bf/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/8d9b32/0000000000000000000118bf/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/8d9b32/0000000000000000000118bf/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-ext-comp-urw;src:url(https://use.typekit.net/af/0de2a8/0000000000000000000118c0/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/0de2a8/0000000000000000000118c0/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/0de2a8/0000000000000000000118c0/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw-cond;src:url(https://use.typekit.net/af/82db8a/000000000000000077359dfa/30/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/82db8a/000000000000000077359dfa/30/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/82db8a/000000000000000077359dfa/30/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw-cond;src:url(https://use.typekit.net/af/a2031c/0000000000000000000118b9/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/a2031c/0000000000000000000118b9/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/a2031c/0000000000000000000118b9/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw-cond;src:url(https://use.typekit.net/af/2d0302/0000000000000000000118b6/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/2d0302/0000000000000000000118b6/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/2d0302/0000000000000000000118b6/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;font-display:auto;}@font-face{font-family:franklin-gothic-urw-cond;src:url(https://use.typekit.net/af/ce6b1d/0000000000000000000118ba/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff2"),url(https://use.typekit.net/af/ce6b1d/0000000000000000000118ba/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff"),url(https://use.typekit.net/af/ce6b1d/0000000000000000000118ba/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("opentype");font-weight:700;font-style:italic;font-display:auto;}@font-face{font-family:franklin-gothic-urw-comp;src:url(https://use.typekit.net/af/63b6fe/0000000000000000000118bb/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff2"),url(https://use.typekit.net/af/63b6fe/0000000000000000000118bb/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("woff"),url(https://use.typekit.net/af/63b6fe/0000000000000000000118bb/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3) format("opentype");font-weight:400;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw-comp;src:url(https://use.typekit.net/af/7bc359/0000000000000000000118bd/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff2"),url(https://use.typekit.net/af/7bc359/0000000000000000000118bd/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("woff"),url(https://use.typekit.net/af/7bc359/0000000000000000000118bd/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3) format("opentype");font-weight:700;font-style:normal;font-display:auto;}@font-face{font-family:franklin-gothic-urw-comp;src:url(https://use.typekit.net/af/01ad8b/0000000000000000000118bc/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff2"),url(https://use.typekit.net/af/01ad8b/0000000000000000000118bc/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("woff"),url(https://use.typekit.net/af/01ad8b/0000000000000000000118bc/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i4&v=3) format("opentype");font-weight:400;font-style:italic;font-display:auto;}@font-face{font-family:franklin-gothic-urw-comp;src:url(https://use.typekit.net/af/e5e7a7/0000000000000000000118be/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff2"),url(https://use.typekit.net/af/e5e7a7/0000000000000000000118be/27/d?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("woff"),url(https://use.typekit.net/af/e5e7a7/0000000000000000000118be/27/a?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=i7&v=3) format("opentype");font-weight:700;font-style:italic;font-display:auto;}</style><style>[hidden] { display: none !important; }</style></head>
<body class="post-template-default single single-post postid-5424 single-format-standard statlab-articles no-bg" style="padding-top: 38px;"><div id="MathJax_Message" style="display: none;"></div><div id="skipToMenu" role="complementary" title="Skip To Keyboard Navigation" class="dropMenu"><a accesskey="0" tabindex="0" data-wrap="true" class="dropMenu-toggle skipTo onFocus " id="drop4" role="button" aria-haspopup="true" aria-expanded="false" data-toggle="dropMenu" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#" data-target="menu1">Skip To...<span class="caret"></span></a><ul id="menu1" class="dropMenu-menu" role="menu" aria-label="Skip To and Page Outline" style="top:3%; text-align:left"><li role="separator" style="list-style:none outside none">Skip To</li><li role="presentation" style="list-style:none outside none"><a tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#main">Main Content</a></li><li role="presentation" style="list-style:none outside none"><a tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#sidebar">Complementary</a></li><li role="presentation" style="list-style:none outside none"><a tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#main-nav">Nav</a></li><li role="presentation" style="list-style:none outside none"><a tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#nav-utility">Nav</a></li><li role="presentation" style="list-style:none outside none"><a tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#content">id: Stata Basics: foreach and forv...</a></li><li role="separator" style="list-style:none outside none">Page Outline</li><li role="presentation" style="list-style:none outside none"><a class="po-h1" tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#stata_basics_foreach_and_forvalues_2">h1: Stata Basics: foreach and f...</a></li><li role="presentation" style="list-style:none outside none"><a class="po-h3" tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#-foreach-_loop_over_items_3">h3: -foreach-: loop over items</a></li><li role="presentation" style="list-style:none outside none"><a class="po-h3" tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#-local-_define_macro_4">h3: -local-: define macro</a></li><li role="presentation" style="list-style:none outside none"><a class="po-h3" tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#rename_multiple_variables_5">h3: Rename multiple variables</a></li><li role="presentation" style="list-style:none outside none"><a class="po-h3" tabindex="-1" role="menuitem" href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#-forvalues-_loop_over_consecutive_values_6">h3: -forvalues-: loop over cons...</a></li></ul></div>
<noscript>
    <div  style="background-color: #ffffff; text: #000; padding: 5px;">
        JavaScript must be enabled in order for you to use our website. However, it seems JavaScript is either disabled or not supported by your browser.
    </div>
</noscript>

    <div id="wrap" role="document">
    <div id="jump-menu" class="visuallyhidden">
      Jump to:
      <ul>
        <li><a href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#content">Main content</a></li>
        <li><a href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#main-nav">Main navigation</a></li>
        <li id="searchlink" style="display:none"><a href="https://data.library.virginia.edu/stata-basics-foreach-and-forvalues/#search">Search</a></li>
        <li><a href="https://www.library.virginia.edu/services/accessibility-services/">Accessibility Services</a></li>
      </ul>
      <script>
        $(function(){ if( $('#search, [name="search"]').length > 0){ $('#searchlink').show(); }  });
      </script>
    </div>
    <div class="container top-container">
      <div class="row top-row">
        <nav class="sixcol" id="main-nav" tabindex="-1">
          <h3 class="visuallyhidden">U.Va. Links</h3>
          <ul>
            <li><a class="return-home" href="https://data.library.virginia.edu/">Research Data Services + Sciences Home</a></li>
            <li><a href="http://www.virginia.edu/">U.Va. Home</a></li>
            <li><a href="https://library.virginia.edu/">U.Va. Library</a></li>
          </ul>
        </nav>
        <div class="sixcol last">
                  </div>
      </div>
    </div>
  <div class="container header-container"><div class="row header-row clearfix">
    <header id="top-banner" class="twelvecol" role="banner">
            <div class="container">
        <h1 class="ninecol" id="main-title">
          <a href="https://data.library.virginia.edu/">
            <span class="donor-title">University of Virginia Library</span>
            <span class="library-title">Research Data Services + Sciences</span>
        </a></h1>
        <a class="threecol last" id="logo" href="https://library.virginia.edu/" aria-label="University of Virginia Library">
          <img src="./for loop_files/liblogo.png" width="198" height="90" alt="University of Virginia Library">
        </a>
      </div>
    </header>
  </div></div><!-- /.row /.container -->
<div class="container content-container"><div class="row content-row clearfix">
      <div id="content" class="row">
          <div id="main" class="ninecol" role="main" tabindex="-1">
        <div class="container">
                          <article class="post-5424 post type-post status-publish format-standard hentry category-statlab-articles tag-data-management tag-data-wrangling tag-stata tag-yun-tai" id="post-5424">
          <header>
        <h1 class="entry-title" tabindex="-1" id="stata_basics_foreach_and_forvalues_2">Stata Basics: foreach and forvalues</h1>
        <time class="updated" datetime="2016-10-14T10:00:48+00:00" pubdate="">Posted on Friday, October 14th, 2016 at 10:00 am.</time><p class="byline author vcard">Written by <a href="https://data.library.virginia.edu/author/yt3f/" rel="author" class="fn">yt3f</a></p>      </header>
      <div class="entry-content">
        <p>There are times we need to do some repetitive tasks in the process of data preparation, analysis or presentation, for instance, computing a set of variables in a same manner, rename or create a series of variables, or repetitively recode values of a number of variables. In this post, I show a few of simple example “loops” using Stata commands -foreach-, -local- and -forvalues- to handle some common simple repetitive tasks.</p>
<h3 tabindex="-1" id="-foreach-_loop_over_items_3">-foreach-: loop over items</h3>
<p>Consider this sample dataset of monthly average temperature for three years.</p>
<div style="padding-left: 40px;font-size: 80%">
<pre> 
* input data
&gt; clear
&gt; input year mtemp1-mtemp12

          year     mtemp1     mtemp2     mtemp3     mtemp4     mtemp5     mtemp6     mtemp7     mtemp8     mtemp9    mtemp10    mtemp11    mtemp12
  1. 2013 4 3 5 14 18 23 25 22 19 15 7 6
  2. 2014 -1 3 5 13 19 23 24 23 21 15 7 5
  3. 2015 2 -1 7 14 21 24 25 24 21 14 11 10
  4. end

</pre>
</div>
<p>Now the mean temperatures of each month are in Centigrade, if we want to convert them to Fahrenheit, we could do the computation for the 12 variables.</p>
<div style="padding-left: 40px;font-size: 80%">
<pre>generate fmtemp1 = mtemp1*(9/5)+32
generate fmtemp2 = mtemp1*(9/5)+32
generate fmtemp3 = mtemp1*(9/5)+32
generate fmtemp4 = mtemp1*(9/5)+32
generate fmtemp5 = mtemp1*(9/5)+32
generate fmtemp6 = mtemp1*(9/5)+32
generate fmtemp7 = mtemp1*(9/5)+32
generate fmtemp8 = mtemp1*(9/5)+32
generate fmtemp9 = mtemp1*(9/5)+32
generate fmtemp10 = mtemp1*(9/5)+32
generate fmtemp11 = mtemp1*(9/5)+32
generate fmtemp12 = mtemp1*(9/5)+32

</pre>
</div>
<p>However this takes a lot of typing. Alternatively, we can use the -foreach- command to achieve the same goal. In the following codes, we tell Stata to do the same thing (the computation: c*9/5+32) for each of the variable in the varlist – mtemp1 to mtemp12.</p>
<div style="padding-left: 40px;font-size: 80%">
<pre>&gt; foreach v of varlist mtemp1-mtemp12 {
    generate f`v' = `v'*(9/5)+32
  } 
 
* list variables
&gt; ds
year      mtemp3    mtemp6    mtemp9    mtemp12   fmtemp3   fmtemp6   fmtemp9   fmtemp12
mtemp1    mtemp4    mtemp7    mtemp10   fmtemp1   fmtemp4   fmtemp7   fmtemp10
mtemp2    mtemp5    mtemp8    mtemp11   fmtemp2   fmtemp5   fmtemp8   fmtemp11

</pre>
</div>
<p>Note that braces must be specified with -foreach-. The open brace has to be on the same line as the foreach, and the close brace must be on a line by itself. It’s crucial to close loops properly, especially if you have one or more loops nested in another loop.</p>
<h3 tabindex="-1" id="-local-_define_macro_4">-local-: define macro</h3>
<p>This was a rather simple repetitive task which can be handled solely by the foreach command. Here we introduce another command -local-, which is utilized a lot with commands like foreach to deal with repetitive tasks that are more complex. The -local- command is a way of defining macro in Stata. A Stata macro can contain multiple elements; it has a name and contents. Consider the following two examples:</p>
<div style="padding-left: 40px;font-size: 80%">
<pre> 
* define a local macro called month
&gt; local month jan feb mar apr

&gt; display `"`month'"' 
jan feb mar apr

</pre>
</div>
<p>Define a local macro called mcode and another called month, alter the contents of mcode in the foreach loop, then display them in a form of “mcode: month”.</p>
<div style="padding-left: 40px;font-size: 80%">
<pre>&gt; local mcode 0
&gt; local month jan feb mar apr
&gt; foreach m of local month {
    local mcode = `mcode' + 1
    display "`mcode': `m'"
   }
1: jan
2: feb
3: mar
4: apr

</pre>
</div>
<p>Note when you call a defined macro, it has to be wrapped in “`” (left tick) and “‘” (apostrophe) symbols.</p>
<h3 tabindex="-1" id="rename_multiple_variables_5">Rename multiple variables</h3>
<p>Take the temperature dataset we created as an example. Let’s say we want to rename variables mtemp1-mtemp12 as mtempjan-mtenpdec. We can do so by just tweaking a bit of the codes in the previous example.</p>
<p>Define local macro mcode and month, then rename the 12 vars in the foreach loop.</p>
<div style="padding-left: 40px;font-size: 80%">
<pre>&gt; local mcode 0
&gt; local month jan feb mar apr may jun jul aug sep oct nov dec
&gt; foreach m of local month {
    local mcode = `mcode' + 1
    rename mtemp`mcode' mtemp`m'
  }
&gt; ds
year      mtempmar  mtempjun  mtempsep  mtempdec  fmtemp3   fmtemp6   fmtemp9   fmtemp12
mtempjan  mtempapr  mtempjul  mtempoct  fmtemp1   fmtemp4   fmtemp7   fmtemp10
mtempfeb  mtempmay  mtempaug  mtempnov  fmtemp2   fmtemp5   fmtemp8   fmtemp11

</pre>
</div>
<p>We can obtain the same results in a slightly different way. This time we use another 12 variables fmtemp1-fmtemp12 as examples. Again, we will rename them as fmtempjan-fmtempdec.</p>
<p>Define local macro month, then define local macro monthII in the foreach loop with specifying the string function word to reference the contents of the local macro month.</p>
<div style="padding-left: 40px;font-size: 80%">
<pre>      
&gt; local month jan feb mar apr may jun jul aug sep oct nov dec
&gt; foreach n of numlist 1/12 {
    local monthII: word `n' of `month'
    display "`monthII'"
    rename fmtemp`n' fmtemp`monthII'   
  } 
jan
feb
mar
apr
may
jun
jul
aug
sep
oct
nov
dec

&gt; ds
year       mtempmar   mtempjun   mtempsep   mtempdec   fmtempmar  fmtempjun  fmtempsep  fmtempdec
mtempjan   mtempapr   mtempjul   mtempoct   fmtempjan  fmtempapr  fmtempjul  fmtempoct
mtempfeb   mtempmay   mtempaug   mtempnov   fmtempfeb  fmtempmay  fmtempaug  fmtempnov

</pre>
</div>
<p>I usually run -display- to see how the macro looks like before actually applying the defined macro on tasks like changing variable names, just to make sure I don’t accidentally change them to some undesired results or even cause errors; however the display line is not necessary in this case.</p>
<p>Here we rename them back to fmtemp1-fmtemp12.</p>
<div style="padding-left: 40px;font-size: 80%">
<pre>&gt; local mcode 0
&gt; foreach n in jan feb mar apr may jun jul aug sep oct nov dec {
    local mcode = `mcode' + 1
    rename fmtemp`n' fmtemp`mcode'
  }

&gt; ds
year      mtempmar  mtempjun  mtempsep  mtempdec  fmtemp3   fmtemp6   fmtemp9   fmtemp12
mtempjan  mtempapr  mtempjul  mtempoct  fmtemp1   fmtemp4   fmtemp7   fmtemp10
mtempfeb  mtempmay  mtempaug  mtempnov  fmtemp2   fmtemp5   fmtemp8   fmtemp11

</pre>
</div>
<h3 tabindex="-1" id="-forvalues-_loop_over_consecutive_values_6">-forvalues-: loop over consecutive values</h3>
<p>The -forvalues- command is another command that gets to be used a lot in handling repetitive works. Consider the same temperature dataset we created, suppose we would like to generate twelve dummy variables (warm1-warm12) to reflect if each of the monthly average temperature is higher than the one in the previous year. For example, I will code warm1 for the year of 2014 as 1 if the value of fmtemp1 for 2014 is higher than the value for 2013. I will code all the warm variables as 99 for the year of 2013, since they don’t have references to compare in this case.</p>
<p>We can do this by running the following codes, then repeat them for twelve times to create the twelve variables warm1-warm12.</p>
<div style="padding-left: 40px;font-size: 80%">
<pre> 
* _n creates sequences of numbers. Type "help _n" for descriptions and examples.
&gt; generate warm1=1 if fmtemp1 &gt; fmtemp1[_n-1]
(2 missing values generated)

&gt; replace warm1=0 if fmtemp1 &lt;= fmtemp1[_n-1]
(2 real changes made)

&gt; replace warm1=99 if year==2013
(1 real change made)

&gt; list year fmtemp1 warm1, clean

       year   fmtemp1   warm1  
  1.   2013      39.2      99  
  2.   2014      30.2       0  
  3.   2015      35.6       1  

</pre>
</div>
<p>However this takes a lot of typing and may even create unwanted mistakes in the process of typing or copy-paste them over and over.</p>
<div style="padding-left: 40px;font-size: 80%">
<pre> 
* drop warm1 we generated
&gt; drop warm1

</pre>
</div>
<p>Instead, we can use -forvalues- to do so:</p>
<div style="padding-left: 40px;font-size: 80%">
<pre>&gt; forvalues i=1/12 {
    generate warm`i'=1 if fmtemp`i' &gt; fmtemp`i'[_n-1]
    replace warm`i'=0 if fmtemp`i' &lt;= fmtemp`i'[_n-1]
    replace warm`i'=99 if year==2013
  }
 
* see the results
&gt; list year fmtemp1-fmtemp3 warm1-warm3, clean 

       year   fmtemp1   fmtemp2   fmtemp3   warm1   warm2   warm3  
  1.   2013      39.2      37.4        41      99      99      99  
  2.   2014      30.2      37.4        41       0       0       0  
  3.   2015      35.6      30.2      44.6       1       0       1  

</pre>
</div>
<p><strong>Reference</strong><br>
Baum, C. (2005). A little bit of Stata programming goes a long way… Working Papers in Economics, 69.</p>
<p>&nbsp;</p>
<p><a href="https://data.library.virginia.edu/category/statlab-articles/">View the entire collection</a> of UVA Library StatLab articles.</p>
<p><em>Yun Tai</em><br>
<em> CLIR Postdoctoral Fellow</em><br>
<em> University of Virginia Library</em></p>
      </div>
      <footer>

      </footer>
                </article>
                    </div>
      </div><!-- /#main -->
              <aside id="sidebar" class="threecol last" role="complementary" tabindex="-1">
              <div class="container">
          <div id="sidebar-area-top">
  </div>
<nav id="nav-utility" tabindex="-1">
  <div class="menu-research-data-services-container"><ul id="menu-research-data-services" class="menu"><li id="menu-item-4131" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4131"><a href="https://data.library.virginia.edu/training/">Workshops</a></li>
<li id="menu-item-1599" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1599"><a href="https://data.library.virginia.edu/datasources/">Data Discovery</a>
<ul class="sub-menu">
	<li id="menu-item-1601" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1601"><a href="https://data.library.virginia.edu/datasources/licensed/">Licensed Data Sources</a></li>
	<li id="menu-item-2480" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2480"><a href="http://guides.lib.virginia.edu/data">Research Guide</a></li>
</ul>
</li>
<li id="menu-item-1602" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1602"><a href="https://data.library.virginia.edu/data-management/">Research Data Management</a>
<ul class="sub-menu">
	<li id="menu-item-1603" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1603"><a href="https://data.library.virginia.edu/data-management/dmp-support/">Data Management Planning Support</a></li>
	<li id="menu-item-1604" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1604"><a href="https://data.library.virginia.edu/?page_id=1286">What is Data Management?</a></li>
	<li id="menu-item-1605" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1605"><a href="https://data.library.virginia.edu/data-management/plan/">Data Management Components</a></li>
	<li id="menu-item-1654" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1654"><a href="https://data.library.virginia.edu/data-management/fall2014/">Past Data Management Workshops</a></li>
</ul>
</li>
<li id="menu-item-1641" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1641"><a href="https://data.library.virginia.edu/statlab/">StatLab</a>
<ul class="sub-menu">
	<li id="menu-item-3259" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3259"><a href="https://data.library.virginia.edu/category/statlab-articles/">StatLab Articles</a></li>
</ul>
</li>
<li id="menu-item-1620" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1620"><a href="https://data.library.virginia.edu/research-software/">Research Software</a>
<ul class="sub-menu">
	<li id="menu-item-1621" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1621"><a href="https://data.library.virginia.edu/research-software/amos/">AMOS</a></li>
	<li id="menu-item-1622" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1622"><a href="https://data.library.virginia.edu/research-software/ansys/">ANSYS</a></li>
	<li id="menu-item-1623" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1623"><a href="https://data.library.virginia.edu/research-software/arcinfo-by-esri/">GIS Software</a></li>
	<li id="menu-item-1624" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1624"><a href="https://data.library.virginia.edu/research-software/idl/">IDL</a></li>
	<li id="menu-item-1625" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1625"><a href="https://data.library.virginia.edu/research-software/labview/">LabVIEW</a></li>
	<li id="menu-item-1627" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1627"><a href="https://data.library.virginia.edu/research-software/mathematica/">Mathematica for Staff and Faculty</a></li>
	<li id="menu-item-1629" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1629"><a href="https://data.library.virginia.edu/research-software/minitab-2/">Minitab</a></li>
	<li id="menu-item-1631" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1631"><a href="https://data.library.virginia.edu/research-software/originpro/">OriginPro</a></li>
	<li id="menu-item-1632" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1632"><a href="https://data.library.virginia.edu/research-software/other-software/">Other Software</a></li>
	<li id="menu-item-1633" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1633"><a href="https://data.library.virginia.edu/research-software/oxygen/">oXygen</a></li>
	<li id="menu-item-1635" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1635"><a href="https://data.library.virginia.edu/research-software/sas/">SAS</a></li>
	<li id="menu-item-1638" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1638"><a href="https://data.library.virginia.edu/research-software/spss/">SPSS</a></li>
	<li id="menu-item-1639" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1639"><a href="https://data.library.virginia.edu/research-software/stata/">Stata</a></li>
</ul>
</li>
<li id="menu-item-4661" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4661"><a href="https://data.library.virginia.edu/sne/">Social, Natural, Engineering Sciences</a></li>
<li id="menu-item-1617" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1617"><a href="https://data.library.virginia.edu/rds-staff/">Meet the Team</a></li>
</ul></div></nav>
<div id="sidebar-area-bottom">
  </div>
        </div>
            </aside><!-- /#sidebar -->
        </div><!-- /#content -->
    </div></div><!-- /.row /.container -->
<div class="container footer-container"><div class="row row-container clearfix">
    <footer id="content-info" class="row" role="contentinfo">
            <div class="container">
                <p id="copyright">© 2021 by the Rector and Visitors of the <a href="http://www.virginia.edu/">University of Virginia</a></p>
      </div>
    </footer>
    </div></div><!-- /.row /.container -->
  </div><!-- /#wrap -->


<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://analytics.lib.virginia.edu/" : "http://analytics.lib.virginia.edu/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./for loop_files/piwik.js.download" type="text/javascript"></script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 17);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="https://analytics.lib.virginia.edu/piwik.php?idsite=17" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->





<!-- Start Announcement - Announcer plugin -->

<!-- End Announcement - Announcer plugin -->
<script type="text/javascript" src="./for loop_files/skipToInit.js.download"></script>
<script type="text/javascript" src="./for loop_files/SkipTo.min.js.download"></script>
<script type="text/javascript" src="./for loop_files/wp-embed.min.js.download"></script>


<script src="./for loop_files/css3-mediaqueries.js.download"></script>

<!-- include Cycle plugin -->
<script type="text/javascript" src="./for loop_files/jquery.cycle.all.js.download"></script>
<script src="./for loop_files/plugins.js.download"></script>


  <!--[if lt IE 7]>
    <script defer src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script defer>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->


<script src="./for loop_files/script.js.download"></script>
<script src="./for loop_files/gravity_scripts.js.download"></script>
<script src="./for loop_files/bootstrap.min.js.download"></script>



<div id="announcer-top"><div class="announcer announcer-style1 announcer-topbar" style="border-color: rgb(255, 255, 255); background-color: rgb(229, 114, 0); color: rgb(255, 255, 255); display: block;" data-effect="fade" data-effdur="1000" data-pos="top-float" data-id="6">
<span class="announcer-closebt">x</span>
<div class="announcer-content"><div style="margin-left:105px;"><strong>COVID-19 Update:</strong> <a href="https://www.library.virginia.edu/status" style="color: #fff;">Visit the Status Dashboard for at-a-glance information about Library services</a><p></p>

</div></div></div></div></body></html>