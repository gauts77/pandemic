##Bar Charts for each Country - Variables.
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data/pandemic_master.xlsx)
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data')
library(tidyverse)
library(pandas)
library(lubridate)
library(ggplot2)
Xvar <- read.csv('pandemic_master.xlsx')
## GRAPHING DATASTREAM TIME SERIES OF EACH INDEX.
# Absolute Graphs
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data/stockdata/DataStream/data')
library(tidyverse)
library(pandas)
library(lubridate)
library(ggplot2)
stock <- read.csv('stock_ts.csv')
stock$Week <- as.Date(stock$Week, format = "%d/%m/%y")
indx_list <- unique(stock$Index)
## GRAPHING DATASTREAM TIME SERIES OF EACH INDEX.
# Absolute Graphs
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data/stockdata/DataStream/data')
library(tidyverse)
library(pandas)
library(lubridate)
library(ggplot2)
stock <- read.csv('stock_ts.csv')
stock$Week <- as.Date(stock$Week, format = "%d/%m/%y")
indx_list <- unique(stock$Index)
stock <- read.csv('stock_ts.csv')
stock$Week <- as.Date(stock$Week, format = "%d/%m/%y")
indx_list <- unique(stock$Index)
##for loop generating time series by country
for(indx in indx_list){
stock_to_plot <- stock %>%
filter(Index == indx)
my_plot <- ggplot(data = stock_to_plot, aes(x = Week, y = Closing.Price)) +
geom_point(colour = "blue", size = 0.5) +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$Week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$Week[10]), linetype = 4, colour = "red") +
labs(title = paste(indx, "Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$Week[9]), xmax = as.numeric(stock$Week[10]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = paste(indx, "_time_series.png", sep = ""), plot = my_plot, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series")
}
View(stock)
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data/stockdata/DataStream/data')
library(tidyverse)
library(pandas)
library(lubridate)
library(ggplot2)
stock <- read.csv('stock_ts2.csv')
stock$week <- as.Date(stock$week, format = "%d/%m/%y")
indx_list <- unique(stock$index)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = ~Ã.country)) +
geom_line(aes(color = ~Ã.country))
View(stock)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(aes(color = Ã.country))
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(aes(color = Ã.country, linetype = Ã.country))
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(aes(color = "blue"))
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue")
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 4) +
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 3)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 3)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 4)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 2)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red")
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
labs(title = paste(indx, "Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[10]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[10]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01))
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.5)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.001)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, linetype = 4, colour = "black") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "black") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "blue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "green") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "dodgerblue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "green") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "dodgerblue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "blue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is week of WHO announcement)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "dodgerblue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "blue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "dodgerblue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "blue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "Normalised (Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
q <- ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "dodgerblue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "blue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "Normalised (Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggsave(filename = "rel_grouped_time_series_2.png", plot = q, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
q <- ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "dodgerblue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "blue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "Normalised (Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggsave(filename = "rel_grouped_time_series_2.png", plot = q, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
q <- ggplot(data = stock, aes(x = week, y = rel_closingprice, group = Ã.country)) +
geom_line(colour = "dodgerblue", linetype = 1) +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "blue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste("Normalised Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "Normalised (Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.005)
ggsave(filename = "rel_grouped_time_series_2.png", plot = q, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
## GRAPHING DATASTREAM TIME SERIES OF EACH INDEX.
# Absolute Graphs
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data/stockdata/DataStream/data')
library(tidyverse)
library(pandas)
library(lubridate)
library(ggplot2)
stock <- read.csv('stock_ts.csv')
stock$Week <- as.Date(stock$Week, format = "%d/%m/%y")
indx_list <- unique(stock$Index)
##for loop generating time series by country
for(indx in indx_list){
stock_to_plot <- stock %>%
filter(Index == indx)
my_plot <- ggplot(data = stock_to_plot, aes(x = Week, y = Closing.Price)) +
geom_point(colour = "dodgerblue", size = 0.5) +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$Week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$Week[11]), linetype = 4, colour = "red") +
labs(title = paste(indx, "Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$Week[9]), xmax = as.numeric(stock$Week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = paste(indx, "_time_series.png", sep = ""), plot = my_plot, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series")
}
## GRAPHING DATASTREAM TIME SERIES OF EACH INDEX.
# Absolute Graphs
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data/stockdata/DataStream/data')
library(tidyverse)
library(pandas)
library(lubridate)
library(ggplot2)
stock <- read.csv('stock_ts.csv')
stock$Week <- as.Date(stock$Week, format = "%d/%m/%y")
indx_list <- unique(stock$Index)
##for loop generating time series by country
for(indx in indx_list){
stock_to_plot <- stock %>%
filter(Index == indx)
my_plot <- ggplot(data = stock_to_plot, aes(x = Week, y = Closing.Price)) +
geom_point(colour = "dodgerblue", size = 0.5) +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$Week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$Week[11]), linetype = 4, colour = "red") +
labs(title = paste(indx, "Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$Week[9]), xmax = as.numeric(stock$Week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = paste(indx, "_time_series.png", sep = ""), plot = my_plot, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series")
}
## GRAPHING DATASTREAM TIME SERIES OF EACH INDEX.
# Absolute Graphs
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data/stockdata/DataStream/data')
library(tidyverse)
library(pandas)
library(lubridate)
library(ggplot2)
stock <- read.csv('stock_ts.csv')
stock$Week <- as.Date(stock$Week, format = "%d/%m/%y")
indx_list <- unique(stock$Index)
##for loop generating time series by country
for(indx in indx_list){
stock_to_plot <- stock %>%
filter(Index == indx)
my_plot <- ggplot(data = stock_to_plot, aes(x = Week, y = Closing.Price)) +
geom_point(colour = "dodgerblue", size = 0.5) +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$Week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$Week[11]), linetype = 4, colour = "red") +
labs(title = paste(indx, "Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$Week[9]), xmax = as.numeric(stock$Week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = paste(indx, "_time_series.png", sep = ""), plot = my_plot, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series")
}
p <- ggplot(data = stock, aes(x = Week, y = Closing.Price)) +
geom_point(size = 0.001) +
facet_wrap(~ï..Country, nrow = 5, scale = "free_y") +
geom_line(aes(group = 1), colour = "dodgerblue") +
theme_minimal() +
labs(title = paste("Time Series (highlighted area is 6th March - 20th March)"), x = "Month", y = "(Weekly) Closing Price") +
theme(axis.text.y = element_blank()) +
theme(axis.text.x = element_text(angle = 90)) +
geom_vline(xintercept = as.numeric(stock$Week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$Week[11]), linetype = 4, colour = "red") +
geom_rect(xmin = as.numeric(stock$Week[9]), xmax = as.numeric(stock$Week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = "grouped_time_series.png", plot = p, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series")
p <- ggplot(data = stock, aes(x = Week, y = Closing.Price)) +
geom_point(size = 0.001) +
facet_wrap(~ï..Country, nrow = 5, scale = "free_y") +
geom_line(aes(group = 1), colour = "dodgerblue") +
theme_minimal() +
labs(title = paste("Time Series (highlighted area is 6th March - 20th March)"), x = "Month", y = "(Weekly) Closing Price") +
theme(axis.text.y = element_blank()) +
theme(axis.text.x = element_text(angle = 90)) +
geom_vline(xintercept = as.numeric(stock$Week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$Week[11]), linetype = 4, colour = "red") +
geom_rect(xmin = as.numeric(stock$Week[9]), xmax = as.numeric(stock$Week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = "grouped_time_series.png", plot = p, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series")
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data/stockdata/DataStream/data')
library(tidyverse)
library(pandas)
library(lubridate)
library(ggplot2)
stock <- read.csv('stock_ts2.csv')
stock$week <- as.Date(stock$week, format = "%d/%m/%y")
indx_list <- unique(stock$index)
##for loop generating time series by country
for(indx in indx_list){
stock_to_plot <- stock %>%
filter(index == indx)
my_plot <- ggplot(data = stock_to_plot, aes(x = week, y = rel_closingprice)) +
geom_point(colour = "blue", size = 0.5) +
geom_line(aes(group = 1), colour = "dodgerblue") +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste(indx, "Normalised Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = paste(indx, "_rel_time_series.png", sep = ""), plot = my_plot, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
}
rm(list = ls())
setwd('C:/Users/gauta/Documents/GitHub/pandemic/Data/stockdata/DataStream/data')
library(tidyverse)
library(pandas)
library(lubridate)
library(ggplot2)
stock <- read.csv('stock_ts2.csv')
stock$week <- as.Date(stock$week, format = "%d/%m/%y")
indx_list <- unique(stock$index)
##for loop generating time series by country
for(indx in indx_list){
stock_to_plot <- stock %>%
filter(index == indx)
my_plot <- ggplot(data = stock_to_plot, aes(x = week, y = rel_closingprice)) +
geom_point(colour = "blue", size = 0.5) +
geom_line(aes(group = 1), colour = "dodgerblue") +
theme_minimal() +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste(indx, "Normalised Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = paste(indx, "_rel_time_series.png", sep = ""), plot = my_plot, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
}
p <- ggplot(data = stock, aes(x = week, y = rel_closingprice)) +
geom_point(size = 0.001) +
facet_wrap(~Ã.country, nrow = 5, scale = "free_y") +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
labs(title = paste("Time Series (highlighted area is 6th March - 20th March)"), x = "Month", y = "(Weekly) Closing Price") +
theme(axis.text.y = element_blank()) +
theme(axis.text.x = element_text(angle = 90)) +
geom_hline(yintercept = 1.0, colour = "blue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[10]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = "rel_grouped_time_series.png", plot = p, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
p <- ggplot(data = stock, aes(x = week, y = rel_closingprice)) +
geom_point(size = 0.001) +
facet_wrap(~Ã.country, nrow = 5, scale = "free_y") +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
labs(title = paste("Time Series (highlighted area is 6th March - 20th March)"), x = "Month", y = "(Weekly) Closing Price") +
theme(axis.text.y = element_blank()) +
theme(axis.text.x = element_text(angle = 90)) +
geom_hline(yintercept = 1.0, colour = "dodgerblue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[10]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = "rel_grouped_time_series.png", plot = p, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
p <- ggplot(data = stock, aes(x = week, y = rel_closingprice)) +
geom_point(size = 0.001) +
facet_wrap(~Ã.country, nrow = 5, scale = "free_y") +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
labs(title = paste("Time Series (highlighted area is 6th March - 20th March)"), x = "Month", y = "(Weekly) Closing Price") +
theme(axis.text.y = element_blank()) +
theme(axis.text.x = element_text(angle = 90)) +
geom_hline(yintercept = 1.0, colour = "dodgerblue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[10]), linetype = 4, colour = "red") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[10]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = "rel_grouped_time_series.png", plot = p, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
##for loop generating time series by country
for(indx in indx_list){
stock_to_plot <- stock %>%
filter(index == indx)
my_plot <- ggplot(data = stock_to_plot, aes(x = week, y = rel_closingprice)) +
geom_point(colour = "blue", size = 0.5) +
geom_line(aes(group = 1), colour = "dodgerblue") +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "dodgerblue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste(indx, "Normalised Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = paste(indx, "_rel_time_series.png", sep = ""), plot = my_plot, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
}
for(indx in indx_list){
stock_to_plot <- stock %>%
filter(index == indx)
my_plot <- ggplot(data = stock_to_plot, aes(x = week, y = rel_closingprice)) +
geom_point(colour = "blue", size = 0.5) +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
geom_hline(yintercept = 1.0, colour = "dodgerblue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
labs(title = paste(indx, "Normalised Time Series (highlighted area is 6th March - 20th March)", sep = " "), x = "Month", y = "(Weekly) Closing Price") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = paste(indx, "_rel_time_series.png", sep = ""), plot = my_plot, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
}
p <- ggplot(data = stock, aes(x = week, y = rel_closingprice)) +
geom_point(size = 0.001) +
facet_wrap(~Ã.country, nrow = 5, scale = "free_y") +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
labs(title = paste("Time Series (highlighted area is 6th March - 20th March)"), x = "Month", y = "(Weekly) Closing Price") +
theme(axis.text.y = element_blank()) +
theme(axis.text.x = element_text(angle = 90)) +
geom_hline(yintercept = 1.0, colour = "dodgerblue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = "rel_grouped_time_series.png", plot = p, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
p <- ggplot(data = stock, aes(x = week, y = rel_closingprice)) +
geom_point(size = 0.001) +
facet_wrap(~Ã.country, nrow = 5, scale = "free_y") +
geom_line(aes(group = 1), colour = "blue") +
theme_minimal() +
labs(title = paste("Time Series (highlighted area is 6th March - 20th March)"), x = "Month", y = "(Weekly) Closing Price") +
theme(axis.text.y = element_blank()) +
theme(axis.text.x = element_text(angle = 90)) +
geom_hline(yintercept = 1.0, colour = "dodgerblue") +
geom_vline(xintercept = as.numeric(stock$week[9]), linetype = 4, colour = "red") +
geom_vline(xintercept = as.numeric(stock$week[11]), linetype = 4, colour = "red") +
geom_rect(xmin = as.numeric(stock$week[9]), xmax = as.numeric(stock$week[11]), ymin = 0, ymax = Inf, fill = "red", alpha = 0.01)
ggsave(filename = "rel_grouped_time_series.png", plot = p, path = "C:/Users/gauta/Documents/GitHub/pandemic/figures/stock_time_series/relative")
