--------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\gauta\Documents\GitHub\pandemic\pandemic.log
  log type:  text
 opened on:  29 Sep 2021, 18:53:26

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. use "./Data/pandemic_master.dta", clear

. keep Country dstr_WHO dstr_WHO2 WHO_ACHB_p100k

. 
. scatter dstr_WHO WHO_ACHB_p100k|| lfit dstr_WHO WHO_ACHB_p100k, xtitle("ACHB per 100,000") ytitle("Stock Fluctuation between" "06/03/20 and 13/03/20")

. scatter dstr_WHO2 WHO_ACHB_p100k|| lfit dstr_WHO2 WHO_ACHB_p100k, xtitle("ACHB per 100,000") ytitle("Stock Fluctuation between" "06/03/20 and 20/03/20")

. 
. asdoc reg dstr_WHO WHO_ACHB_p100k, robust replace dec(5) //n = 12, positive insignificant.

Linear regression                               Number of obs     =         16
                                                F(1, 14)          =       0.01
                                                Prob > F          =     0.9284
                                                R-squared         =     0.0003
                                                Root MSE          =     .03385

--------------------------------------------------------------------------------
               |               Robust
      dstr_WHO |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------+----------------------------------------------------------------
WHO_ACHB_p100k |  -4.42e-06   .0000483    -0.09   0.928     -.000108    .0000992
         _cons |  -.1680612   .0181165    -9.28   0.000    -.2069172   -.1292052
--------------------------------------------------------------------------------
(note: file Myfile.doc not found)
Click to Open File:  Myfile.doc

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. clear

. cd "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar"
C:\Users\gauta\Documents\GitHub\pandemic\Data\Xvar

. *X Variables
. //GHSI DATA (X1a)
. import excel "./GHSI_2019_data.xlsx", sheet("Sheet2") firstrow clear
(20 vars, 196 obs)

. drop J K L M N O P Q R S T U

. 
. rename Overall GHSI_Overall

. rename D GHSI_prev

. rename E GHSI_det

. rename F GHSI_resp

. rename G GHSI_hea_sec

. rename H GHSI_commit

. rename I GHSI_risk

. 
. save ghsi.dta, replace
file ghsi.dta saved

. 
. *Acute Care Hospital Beds (X1b)
. 
. import excel "./WHO_ACHB.xlsx", firstrow clear
(5 vars, 1,449 obs)

. encode COUNTRY, gen(panel_id)

. drop if panel_id ==.
(231 observations deleted)

. xtset panel_id YEAR
       panel variable:  panel_id (unbalanced)
        time variable:  YEAR, 1970 to 2015, but with gaps
                delta:  1 unit

. kountry COUNTRY, from(iso3c)

----------------------------------------
The command has finished.
The new variable is named NAMES_STD.
----------------------------------------

. rename NAMES_STD Country

. rename VALUE WHO_ACHB_p100k

. rename YEAR Year

. keep Country panel_id Year WHO_ACHB_p100k

. 
. 
. //generating cross-section of most recent value
. bysort panel_id(Year) : gen diff = panel_id != panel_id[_n+1]

. drop if diff != 1
(1,162 observations deleted)

. drop if Year ==.
(5 observations deleted)

. save WHO_ACHB.dta, replace
file WHO_ACHB.dta saved

. 
. drop panel_id diff Year

. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/ghsi.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           151
        from master                         3  (_merge==1)
        from using                        148  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. clear

. cd "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar"
C:\Users\gauta\Documents\GitHub\pandemic\Data\Xvar

. *X Variables
. //GHSI DATA (X1a)
. import excel "./GHSI_2019_data.xlsx", sheet("Sheet2") firstrow clear
(20 vars, 196 obs)

. drop J K L M N O P Q R S T U

. 
. rename Overall GHSI_Overall

. rename D GHSI_prev

. rename E GHSI_det

. rename F GHSI_resp

. rename G GHSI_hea_sec

. rename H GHSI_commit

. rename I GHSI_risk

. 
. save ghsi.dta, replace
file ghsi.dta saved

. 
. *Acute Care Hospital Beds (X1b)
. 
. import excel "./WHO_ACHB.xlsx", firstrow clear
(5 vars, 1,449 obs)

. encode COUNTRY, gen(panel_id)

. drop if panel_id ==.
(231 observations deleted)

. xtset panel_id YEAR
       panel variable:  panel_id (unbalanced)
        time variable:  YEAR, 1970 to 2015, but with gaps
                delta:  1 unit

. kountry COUNTRY, from(iso3c)

----------------------------------------
The command has finished.
The new variable is named NAMES_STD.
----------------------------------------

. rename NAMES_STD Country

. rename VALUE WHO_ACHB_p100k

. rename YEAR Year

. keep Country panel_id Year WHO_ACHB_p100k

. 
. 
. //generating cross-section of most recent value
. bysort panel_id(Year) : gen diff = panel_id != panel_id[_n+1]

. drop if diff != 1
(1,162 observations deleted)

. drop if Year ==.
(5 observations deleted)

. save WHO_ACHB.dta, replace
file WHO_ACHB.dta saved

. 
. drop panel_id diff Year

. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/ghsi.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           151
        from master                         3  (_merge==1)
        from using                        148  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. import excel "WB_Hosp_Beds_p1000.xlsx", sheet("Table2") firstrow clear
(3 vars, 4,897 obs)

. encode CountryName, gen(id)

. rename Attribute Year

. encode Year, gen(Yearid)

. rename Value WB_hb_p1000

. xtset id Yearid
       panel variable:  id (unbalanced)
        time variable:  Yearid, 1 to 60, but with gaps
                delta:  1 unit

. 
. //generating cross-section of most recent value
. bysort CountryName(Year) : gen diff = CountryName != CountryName[_n+1]

. drop if diff != 1
(4,649 observations deleted)

. drop if Yearid ==.
(0 observations deleted)

. save WB_HB_p100k.dta, replace
file WB_HB_p100k.dta saved

. 
. rename CountryName Country

. merge Country using master_X
(note: you are using old merge syntax; see [D] merge for new syntax)
using data not sorted
r(5);

end of do-file

r(5);

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. 
. save ghsi.dta, replace
file ghsi.dta saved

. 
. *Acute Care Hospital Beds (X1b)
. 
. import excel "./WHO_ACHB.xlsx", firstrow clear
(5 vars, 1,449 obs)

. encode COUNTRY, gen(panel_id)

. drop if panel_id ==.
(231 observations deleted)

. xtset panel_id YEAR
       panel variable:  panel_id (unbalanced)
        time variable:  YEAR, 1970 to 2015, but with gaps
                delta:  1 unit

. kountry COUNTRY, from(iso3c)

----------------------------------------
The command has finished.
The new variable is named NAMES_STD.
----------------------------------------

. rename NAMES_STD Country

. rename VALUE WHO_ACHB_p100k

. rename YEAR Year

. keep Country panel_id Year WHO_ACHB_p100k

. 
. 
. //generating cross-section of most recent value
. bysort panel_id(Year) : gen diff = panel_id != panel_id[_n+1]

. drop if diff != 1
(1,162 observations deleted)

. drop if Year ==.
(5 observations deleted)

. save WHO_ACHB.dta, replace
file WHO_ACHB.dta saved

. 
. drop panel_id diff Year

. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/ghsi.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           203
        from master                         3  (_merge==1)
        from using                        200  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. import excel "WB_Hosp_Beds_p1000.xlsx", sheet("Table2") firstrow clear
(3 vars, 4,897 obs)

. encode CountryName, gen(id)

. rename Attribute Year

. encode Year, gen(Yearid)

. rename Value WB_hb_p1000

. xtset id Yearid
       panel variable:  id (unbalanced)
        time variable:  Yearid, 1 to 60, but with gaps
                delta:  1 unit

. 
. //generating cross-section of most recent value
. bysort CountryName(Year) : gen diff = CountryName != CountryName[_n+1]

. drop if diff != 1
(4,649 observations deleted)

. drop if Yearid ==.
(0 observations deleted)

. save WB_HB_p100k.dta, replace
file WB_HB_p100k.dta saved

. 
. rename CountryName Country

. merge 1:1 Country using master_X
(note: variable Country was str52, now str58 to accommodate using data's values)
(label Yearid already defined)
(label id already defined)

    Result                           # of obs.
    -----------------------------------------
    not matched                             3
        from master                         0  (_merge==1)
        from using                          3  (_merge==2)

    matched                               248  (_merge==3)
    -----------------------------------------

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. clear

. cd "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar"
C:\Users\gauta\Documents\GitHub\pandemic\Data\Xvar

. *X Variables
. //GHSI DATA (X1a)
. import excel "./GHSI_2019_data.xlsx", sheet("Sheet2") firstrow clear
(20 vars, 196 obs)

. drop J K L M N O P Q R S T U

. 
. rename Overall GHSI_Overall

. rename D GHSI_prev

. rename E GHSI_det

. rename F GHSI_resp

. rename G GHSI_hea_sec

. rename H GHSI_commit

. rename I GHSI_risk

. 
. save ghsi.dta, replace
file ghsi.dta saved

. 
. *Acute Care Hospital Beds (X1b)
. 
. import excel "./WHO_ACHB.xlsx", firstrow clear
(5 vars, 1,449 obs)

. encode COUNTRY, gen(panel_id)

. drop if panel_id ==.
(231 observations deleted)

. xtset panel_id YEAR
       panel variable:  panel_id (unbalanced)
        time variable:  YEAR, 1970 to 2015, but with gaps
                delta:  1 unit

. kountry COUNTRY, from(iso3c)

----------------------------------------
The command has finished.
The new variable is named NAMES_STD.
----------------------------------------

. rename NAMES_STD Country

. rename VALUE WHO_ACHB_p100k

. rename YEAR Year

. keep Country panel_id Year WHO_ACHB_p100k

. 
. 
. //generating cross-section of most recent value
. bysort panel_id(Year) : gen diff = panel_id != panel_id[_n+1]

. drop if diff != 1
(1,162 observations deleted)

. drop if Year ==.
(5 observations deleted)

. save WHO_ACHB.dta, replace
file WHO_ACHB.dta saved

. 
. drop panel_id diff Year

. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/ghsi.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           151
        from master                         3  (_merge==1)
        from using                        148  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. import excel "WB_Hosp_Beds_p1000.xlsx", sheet("Table2") firstrow clear
(3 vars, 4,897 obs)

. encode CountryName, gen(id)

. rename Attribute Year

. encode Year, gen(Yearid)

. rename Value WB_hb_p1000

. xtset id Yearid
       panel variable:  id (unbalanced)
        time variable:  Yearid, 1 to 60, but with gaps
                delta:  1 unit

. 
. //generating cross-section of most recent value
. bysort CountryName(Year) : gen diff = CountryName != CountryName[_n+1]

. drop if diff != 1
(4,649 observations deleted)

. drop if Yearid ==.
(0 observations deleted)

. save WB_HB_p100k.dta, replace
file WB_HB_p100k.dta saved

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. clear

. cd "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar"
C:\Users\gauta\Documents\GitHub\pandemic\Data\Xvar

. *X Variables
. //GHSI DATA (X1a)
. import excel "./GHSI_2019_data.xlsx", sheet("Sheet2") firstrow clear
(20 vars, 196 obs)

. drop J K L M N O P Q R S T U

. 
. rename Overall GHSI_Overall

. rename D GHSI_prev

. rename E GHSI_det

. rename F GHSI_resp

. rename G GHSI_hea_sec

. rename H GHSI_commit

. rename I GHSI_risk

. 
. save ghsi.dta, replace
file ghsi.dta saved

. 
. *Acute Care Hospital Beds (X1b)
. 
. import excel "./WHO_ACHB.xlsx", firstrow clear
(5 vars, 1,449 obs)

. encode COUNTRY, gen(panel_id)

. drop if panel_id ==.
(231 observations deleted)

. xtset panel_id YEAR
       panel variable:  panel_id (unbalanced)
        time variable:  YEAR, 1970 to 2015, but with gaps
                delta:  1 unit

. kountry COUNTRY, from(iso3c)

----------------------------------------
The command has finished.
The new variable is named NAMES_STD.
----------------------------------------

. rename NAMES_STD Country

. rename VALUE WHO_ACHB_p100k

. rename YEAR Year

. keep Country panel_id Year WHO_ACHB_p100k

. 
. 
. //generating cross-section of most recent value
. bysort panel_id(Year) : gen diff = panel_id != panel_id[_n+1]

. drop if diff != 1
(1,162 observations deleted)

. drop if Year ==.
(5 observations deleted)

. save WHO_ACHB.dta, replace
file WHO_ACHB.dta saved

. 
. drop panel_id diff Year

. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/ghsi.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           151
        from master                         3  (_merge==1)
        from using                        148  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. import excel "WB_Hosp_Beds_p1000.xlsx", sheet("Table2") firstrow clear
(3 vars, 4,897 obs)

. encode CountryName, gen(id)

. rename Attribute Year

. encode Year, gen(Yearid)

. rename Value WB_hb_p1000

. xtset id Yearid
       panel variable:  id (unbalanced)
        time variable:  Yearid, 1 to 60, but with gaps
                delta:  1 unit

. 
. //generating cross-section of most recent value
. bysort CountryName(Year) : gen diff = CountryName != CountryName[_n+1]

. drop if diff != 1
(4,649 observations deleted)

. drop if Yearid ==.
(0 observations deleted)

. save WB_HB_p100k.dta, replace
file WB_HB_p100k.dta saved

. 
. rename CountryName Country

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. clear

. cd "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar"
C:\Users\gauta\Documents\GitHub\pandemic\Data\Xvar

. *X Variables
. //GHSI DATA (X1a)
. import excel "./GHSI_2019_data.xlsx", sheet("Sheet2") firstrow clear
(20 vars, 196 obs)

. drop J K L M N O P Q R S T U

. 
. rename Overall GHSI_Overall

. rename D GHSI_prev

. rename E GHSI_det

. rename F GHSI_resp

. rename G GHSI_hea_sec

. rename H GHSI_commit

. rename I GHSI_risk

. 
. save ghsi.dta, replace
file ghsi.dta saved

. 
. *Acute Care Hospital Beds (X1b)
. 
. import excel "./WHO_ACHB.xlsx", firstrow clear
(5 vars, 1,449 obs)

. encode COUNTRY, gen(panel_id)

. drop if panel_id ==.
(231 observations deleted)

. xtset panel_id YEAR
       panel variable:  panel_id (unbalanced)
        time variable:  YEAR, 1970 to 2015, but with gaps
                delta:  1 unit

. kountry COUNTRY, from(iso3c)

----------------------------------------
The command has finished.
The new variable is named NAMES_STD.
----------------------------------------

. rename NAMES_STD Country

. rename VALUE WHO_ACHB_p100k

. rename YEAR Year

. keep Country panel_id Year WHO_ACHB_p100k

. 
. 
. //generating cross-section of most recent value
. bysort panel_id(Year) : gen diff = panel_id != panel_id[_n+1]

. drop if diff != 1
(1,162 observations deleted)

. drop if Year ==.
(5 observations deleted)

. save WHO_ACHB.dta, replace
file WHO_ACHB.dta saved

. 
. drop panel_id diff Year

. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/ghsi.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           151
        from master                         3  (_merge==1)
        from using                        148  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. //WB Hosptial beds per 1000
. import excel "WB_Hosp_Beds_p1000.xlsx", sheet("Table2") firstrow clear
(3 vars, 4,897 obs)

. encode CountryName, gen(id)

. rename Attribute Year

. encode Year, gen(Yearid)

. rename Value WB_hb_p1000

. xtset id Yearid
       panel variable:  id (unbalanced)
        time variable:  Yearid, 1 to 60, but with gaps
                delta:  1 unit

. 
. //generating cross-section of most recent value
. bysort CountryName(Year) : gen diff = CountryName != CountryName[_n+1]

. drop if diff != 1
(4,649 observations deleted)

. drop if Yearid ==.
(0 observations deleted)

. save WB_HB_p100k.dta, replace
file WB_HB_p100k.dta saved

. 
. rename CountryName Country

. keep country WB_HB_p1000
variable country not found
r(111);

end of do-file

r(111);

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. clear

. cd "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar"
C:\Users\gauta\Documents\GitHub\pandemic\Data\Xvar

. *X Variables
. //GHSI DATA (X1a)
. import excel "./GHSI_2019_data.xlsx", sheet("Sheet2") firstrow clear
(20 vars, 196 obs)

. drop J K L M N O P Q R S T U

. 
. rename Overall GHSI_Overall

. rename D GHSI_prev

. rename E GHSI_det

. rename F GHSI_resp

. rename G GHSI_hea_sec

. rename H GHSI_commit

. rename I GHSI_risk

. 
. save ghsi.dta, replace
file ghsi.dta saved

. 
. *Acute Care Hospital Beds (X1b)
. 
. import excel "./WHO_ACHB.xlsx", firstrow clear
(5 vars, 1,449 obs)

. encode COUNTRY, gen(panel_id)

. drop if panel_id ==.
(231 observations deleted)

. xtset panel_id YEAR
       panel variable:  panel_id (unbalanced)
        time variable:  YEAR, 1970 to 2015, but with gaps
                delta:  1 unit

. kountry COUNTRY, from(iso3c)

----------------------------------------
The command has finished.
The new variable is named NAMES_STD.
----------------------------------------

. rename NAMES_STD Country

. rename VALUE WHO_ACHB_p100k

. rename YEAR Year

. keep Country panel_id Year WHO_ACHB_p100k

. 
. 
. //generating cross-section of most recent value
. bysort panel_id(Year) : gen diff = panel_id != panel_id[_n+1]

. drop if diff != 1
(1,162 observations deleted)

. drop if Year ==.
(5 observations deleted)

. save WHO_ACHB.dta, replace
file WHO_ACHB.dta saved

. 
. drop panel_id diff Year

. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/ghsi.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           151
        from master                         3  (_merge==1)
        from using                        148  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. //WB Hosptial beds per 1000
. import excel "WB_Hosp_Beds_p1000.xlsx", sheet("Table2") firstrow clear
(3 vars, 4,897 obs)

. encode CountryName, gen(id)

. rename Attribute Year

. encode Year, gen(Yearid)

. rename Value WB_hb_p1000

. xtset id Yearid
       panel variable:  id (unbalanced)
        time variable:  Yearid, 1 to 60, but with gaps
                delta:  1 unit

. 
. //generating cross-section of most recent value
. bysort CountryName(Year) : gen diff = CountryName != CountryName[_n+1]

. drop if diff != 1
(4,649 observations deleted)

. drop if Yearid ==.
(0 observations deleted)

. save WB_HB_p100k.dta, replace
file WB_HB_p100k.dta saved

. 
. rename CountryName Country

. keep Country WB_HB_p1000
variable WB_HB_p1000 not found
r(111);

end of do-file

r(111);

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. clear

. cd "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar"
C:\Users\gauta\Documents\GitHub\pandemic\Data\Xvar

. *X Variables
. //GHSI DATA (X1a)
. import excel "./GHSI_2019_data.xlsx", sheet("Sheet2") firstrow clear
(20 vars, 196 obs)

. drop J K L M N O P Q R S T U

. 
. rename Overall GHSI_Overall

. rename D GHSI_prev

. rename E GHSI_det

. rename F GHSI_resp

. rename G GHSI_hea_sec

. rename H GHSI_commit

. rename I GHSI_risk

. 
. save ghsi.dta, replace
file ghsi.dta saved

. 
. *Acute Care Hospital Beds (X1b)
. 
. import excel "./WHO_ACHB.xlsx", firstrow clear
(5 vars, 1,449 obs)

. encode COUNTRY, gen(panel_id)

. drop if panel_id ==.
(231 observations deleted)

. xtset panel_id YEAR
       panel variable:  panel_id (unbalanced)
        time variable:  YEAR, 1970 to 2015, but with gaps
                delta:  1 unit

. kountry COUNTRY, from(iso3c)

----------------------------------------
The command has finished.
The new variable is named NAMES_STD.
----------------------------------------

. rename NAMES_STD Country

. rename VALUE WHO_ACHB_p100k

. rename YEAR Year

. keep Country panel_id Year WHO_ACHB_p100k

. 
. 
. //generating cross-section of most recent value
. bysort panel_id(Year) : gen diff = panel_id != panel_id[_n+1]

. drop if diff != 1
(1,162 observations deleted)

. drop if Year ==.
(5 observations deleted)

. save WHO_ACHB.dta, replace
file WHO_ACHB.dta saved

. 
. drop panel_id diff Year

. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/ghsi.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           151
        from master                         3  (_merge==1)
        from using                        148  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. //WB Hosptial beds per 1000
. import excel "WB_Hosp_Beds_p1000.xlsx", sheet("Table2") firstrow clear
(3 vars, 4,897 obs)

. encode CountryName, gen(id)

. rename Attribute Year

. encode Year, gen(Yearid)

. rename Value WB_hb_p1000

. xtset id Yearid
       panel variable:  id (unbalanced)
        time variable:  Yearid, 1 to 60, but with gaps
                delta:  1 unit

. 
. //generating cross-section of most recent value
. bysort CountryName(Year) : gen diff = CountryName != CountryName[_n+1]

. drop if diff != 1
(4,649 observations deleted)

. drop if Yearid ==.
(0 observations deleted)

. save WB_HB_p100k.dta, replace
file WB_HB_p100k.dta saved

. 
. rename CountryName Country

. keep Country WB_hb_p1000

. merge 1:1 Country using master_X
(note: variable Country was str52, now str58 to accommodate using data's values)

    Result                           # of obs.
    -----------------------------------------
    not matched                           107
        from master                        78  (_merge==1)
        from using                         29  (_merge==2)

    matched                               170  (_merge==3)
    -----------------------------------------

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. import excel "WB_HEGDP.xlsx", firstrow clear
(65 vars, 266 obs)

. rename BK WHO_2018_HE_GDP //this is lazy - as a formality create a loop to ensure most recent value is used.

. save WB_HEGDP.dta, replace
file WB_HEGDP.dta saved

. 
. keep Country WHO_2018_HE_GDP

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. import excel "WB_HEGDP.xlsx", firstrow clear
(65 vars, 266 obs)

. rename BK WHO_2018_HE_GDP //this is lazy - as a formality create a loop to ensure most recent value is used.

. save WB_HEGDP.dta, replace
file WB_HEGDP.dta saved

. 
. keep Country WHO_2018_HE_GDP

. merge 1:1 Country using master_X
(note: variable Country was str52, now str58 to accommodate using data's values)

    Result                           # of obs.
    -----------------------------------------
    not matched                            43
        from master                        16  (_merge==1)
        from using                         27  (_merge==2)

    matched                               250  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
end of do-file

. do "C:\Users\gauta\AppData\Local\Temp\STD347c_000000.tmp"

. clear

. cd "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar"
C:\Users\gauta\Documents\GitHub\pandemic\Data\Xvar

. *X Variables
. //GHSI DATA (X1a)
. import excel "./GHSI_2019_data.xlsx", sheet("Sheet2") firstrow clear
(20 vars, 196 obs)

. drop J K L M N O P Q R S T U

. 
. rename Overall GHSI_Overall

. rename D GHSI_prev

. rename E GHSI_det

. rename F GHSI_resp

. rename G GHSI_hea_sec

. rename H GHSI_commit

. rename I GHSI_risk

. 
. save ghsi.dta, replace
file ghsi.dta saved

. 
. *Acute Care Hospital Beds (X1b)
. 
. import excel "./WHO_ACHB.xlsx", firstrow clear
(5 vars, 1,449 obs)

. encode COUNTRY, gen(panel_id)

. drop if panel_id ==.
(231 observations deleted)

. xtset panel_id YEAR
       panel variable:  panel_id (unbalanced)
        time variable:  YEAR, 1970 to 2015, but with gaps
                delta:  1 unit

. kountry COUNTRY, from(iso3c)

----------------------------------------
The command has finished.
The new variable is named NAMES_STD.
----------------------------------------

. rename NAMES_STD Country

. rename VALUE WHO_ACHB_p100k

. rename YEAR Year

. keep Country panel_id Year WHO_ACHB_p100k

. 
. 
. //generating cross-section of most recent value
. bysort panel_id(Year) : gen diff = panel_id != panel_id[_n+1]

. drop if diff != 1
(1,162 observations deleted)

. drop if Year ==.
(5 observations deleted)

. save WHO_ACHB.dta, replace
file WHO_ACHB.dta saved

. 
. drop panel_id diff Year

. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/ghsi.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                           151
        from master                         3  (_merge==1)
        from using                        148  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. //WB Hosptial beds per 1000
. import excel "WB_Hosp_Beds_p1000.xlsx", sheet("Table2") firstrow clear
(3 vars, 4,897 obs)

. encode CountryName, gen(id)

. rename Attribute Year

. encode Year, gen(Yearid)

. rename Value WB_hb_p1000

. xtset id Yearid
       panel variable:  id (unbalanced)
        time variable:  Yearid, 1 to 60, but with gaps
                delta:  1 unit

. 
. //generating cross-section of most recent value
. bysort CountryName(Year) : gen diff = CountryName != CountryName[_n+1]

. drop if diff != 1
(4,649 observations deleted)

. drop if Yearid ==.
(0 observations deleted)

. save WB_HB_p100k.dta, replace
file WB_HB_p100k.dta saved

. 
. rename CountryName Country

. keep Country WB_hb_p1000

. merge 1:1 Country using master_X
(note: variable Country was str52, now str58 to accommodate using data's values)

    Result                           # of obs.
    -----------------------------------------
    not matched                           107
        from master                        78  (_merge==1)
        from using                         29  (_merge==2)

    matched                               170  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. //WB Current Health Expenditure as %GDP
. import excel "WB_HEGDP.xlsx", firstrow clear
(65 vars, 266 obs)

. rename BK WHO_2018_HE_GDP //this is lazy - as a formality create a loop to ensure most recent value is used.

. save WB_HEGDP.dta, replace
file WB_HEGDP.dta saved

. 
. keep Country WHO_2018_HE_GDP

. merge 1:1 Country using master_X
(note: variable Country was str52, now str58 to accommodate using data's values)

    Result                           # of obs.
    -----------------------------------------
    not matched                            43
        from master                        16  (_merge==1)
        from using                         27  (_merge==2)

    matched                               250  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_X, replace
file master_X.dta saved

. 
. //-----------------------------------------------------------------------------
. 
. //STOCK MARKET DATA (Y)
. cd "C:/Users/gauta/Documents/GitHub/pandemic/Data/stockdata"
C:\Users\gauta\Documents\GitHub\pandemic\Data\stockdata

. 
. *stock market data from Investing.com
. import excel "stockfluctuations_1.xlsx", firstrow clear
(7 vars, 195 obs)

. rename stock_1 inv_stock_1

. rename stock_2 inv_stock_2

. rename stock_7 inv_stock_7

. rename stock_WHO1 inv_stock_WHO1

. rename stock_WHO2 inv_stock_WHO2

. save inv_fluctuations.dta, replace
file inv_fluctuations.dta saved

. 
. *Datastream data - For Loop generating % change between 06/03 and 13/03
. import excel "DataStream/data/stock_ts.xlsx", sheet(Table1) firstrow clear
(24 vars, 35 obs)

. 
. *generating WHO crash - can adjust this for loop in the future to generate % drop in week of first case, etc. 
. keep Country K L M

. foreach i in Country {
  2.         gen dstr_WHO = ((L - K)/K)
  3.         gen dstr_WHO2 = ((M - K)/K)
  4.         }

. 
. drop K L M

. save dstr_fluctuations.dta, replace
file dstr_fluctuations.dta saved

. 
. *saving master stock fluctuations file
. merge 1:1 Country using inv_fluctuations.dta
(note: variable Country was str14, now str29 to accommodate using data's values)

    Result                           # of obs.
    -----------------------------------------
    not matched                           166
        from master                         3  (_merge==1)
        from using                        163  (_merge==2)

    matched                                32  (_merge==3)
    -----------------------------------------

. drop _merge

. save master_Y.dta, replace
file master_Y.dta saved

. 
. *merging master Y and X data
. merge 1:1 Country using "C:/Users/gauta/Documents/GitHub/pandemic/Data/Xvar/master_X.dta"
(note: variable Country was str29, now str58 to accommodate using data's values)

    Result                           # of obs.
    -----------------------------------------
    not matched                           101
        from master                         3  (_merge==1)
        from using                         98  (_merge==2)

    matched                               195  (_merge==3)
    -----------------------------------------

. save "C:/Users/gauta/Documents/GitHub/pandemic/Data/pandemic_master.dta", replace
file C:/Users/gauta/Documents/GitHub/pandemic/Data/pandemic_master.dta saved

. 
end of do-file

. exit, clear
